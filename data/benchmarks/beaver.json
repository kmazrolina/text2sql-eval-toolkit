[
  {
    "id": "289af86025d3",
    "question": "What is the current building key, building street address, city, state, and postal code of the history department?",
    "db_id": "dw",
    "sql": [
      "SELECT DISTINCT\n  d.FCLT_BUILDING_KEY,\n  e.BUILDING_STREET_ADDRESS,\n  d.CITY,\n  d.STATE,\n  d.POSTAL_CODE\nFROM FCLT_BUILDING_ADDRESS AS d\nJOIN FCLT_ROOMS AS a\n  ON a.FCLT_BUILDING_KEY = d.FCLT_BUILDING_KEY\nJOIN FCLT_ORG_DLC_KEY AS b\n  ON a.FCLT_ORGANIZATION_KEY = b.FCLT_ORGANIZATION_KEY\nJOIN MASTER_DEPT_HIERARCHY AS c\n  ON b.DLC_KEY = c.DLC_KEY\nJOIN BUILDINGS AS e\n  ON e.BUILDING_KEY = d.FCLT_BUILDING_KEY\nWHERE\n  LOWER(c.DLC_NAME) = LOWER('History') AND d.ADDRESS_PURPOSE = 'STREET'"
    ],
    "oracle_sql": "SELECT DISTINCT d.FCLT_BUILDING_KEY, e.BUILDING_STREET_ADDRESS, d.CITY, d.STATE, d.POSTAL_CODE FROM FCLT_BUILDING_ADDRESS d JOIN FCLT_ROOMS a ON a.FCLT_BUILDING_KEY = d.FCLT_BUILDING_KEY JOIN FCLT_ORG_DLC_KEY b ON a.FCLT_ORGANIZATION_KEY = b.FCLT_ORGANIZATION_KEY JOIN MASTER_DEPT_HIERARCHY c ON b.DLC_KEY = c.DLC_KEY JOIN BUILDINGS e ON e.BUILDING_KEY = d.FCLT_BUILDING_KEY WHERE lower(c.DLC_NAME) = lower('History') AND d.ADDRESS_PURPOSE = 'STREET';",
    "gold_tables": [
      "dw#sep#FCLT_BUILDING_ADDRESS",
      "dw#sep#FCLT_ROOMS",
      "dw#sep#FCLT_ORG_DLC_KEY",
      "dw#sep#MASTER_DEPT_HIERARCHY",
      "dw#sep#BUILDINGS"
    ],
    "mapping": {
      "building key": [
        "FCLT_BUILDING_ADDRESS.FCLT_BUILDING_KEY"
      ],
      "building street address": [
        "BUILDINGS.BUILDING_STREET_ADDRESS",
        "FCLT_BUILDING_ADDRESS.ADDRESS_PURPOSE"
      ],
      "city": [
        "FCLT_BUILDING_ADDRESS.CITY"
      ],
      "state": [
        "FCLT_BUILDING_ADDRESS.STATE"
      ],
      "postal code": [
        "FCLT_BUILDING_ADDRESS.POSTAL_CODE"
      ],
      "history department": [
        "MASTER_DEPT_HIERARCHY.DLC_NAME"
      ]
    },
    "join_keys": [
      [
        "FCLT_BUILDING_ADDRESS.FCLT_BUILDING_KEY",
        "FCLT_ROOMS.FCLT_BUILDING_KEY"
      ],
      [
        "FCLT_ROOMS.FCLT_ORGANIZATION_KEY",
        "FCLT_ORG_DLC_KEY.FCLT_ORGANIZATION_KEY"
      ],
      [
        "FCLT_ORG_DLC_KEY.DLC_KEY",
        "MASTER_DEPT_HIERARCHY.DLC_KEY"
      ],
      [
        "FCLT_BUILDING_ADDRESS.FCLT_BUILDING_KEY",
        "BUILDINGS.BUILDING_KEY"
      ]
    ],
    "original_sql": "SELECT DISTINCT\n  d.FCLT_BUILDING_KEY,\n  e.BUILDING_STREET_ADDRESS,\n  d.CITY,\n  d.STATE,\n  d.POSTAL_CODE\nFROM FCLT_BUILDING_ADDRESS AS d\nJOIN FCLT_ROOMS AS a\n  ON a.FCLT_BUILDING_KEY = d.FCLT_BUILDING_KEY\nJOIN FCLT_ORG_DLC_KEY AS b\n  ON a.FCLT_ORGANIZATION_KEY = b.FCLT_ORGANIZATION_KEY\nJOIN MASTER_DEPT_HIERARCHY AS c\n  ON b.DLC_KEY = c.DLC_KEY\nJOIN BUILDINGS AS e\n  ON e.BUILDING_KEY = d.FCLT_BUILDING_KEY\nWHERE\n  LOWER(c.DLC_NAME) = LOWER('History') AND d.ADDRESS_PURPOSE = 'STREET'",
    "meta": {
      "features": {
        "query_table_count": 5,
        "query_column_count": 15,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "1b700e136eb5",
    "question": "Show the unique activity titles, locations, term start date, and supervisor name for all independent activities, sorted by the ascending order of start date.",
    "db_id": "dw",
    "sql": [
      "SELECT DISTINCT\n  a.activity_title,\n  d.session_location,\n  c.term_start_date,\n  b.person_name AS Leader\nFROM IAP_SUBJECT_DETAIL AS a\nJOIN IAP_SUBJECT_PERSON AS b\n  ON a.iap_subject_person_key = b.iap_subject_person_key\nJOIN ACADEMIC_TERMS_ALL AS c\n  ON c.term_code = a.term_code\nJOIN IAP_SUBJECT_SESSION AS d\n  ON a.iap_subject_session_key = d.iap_subject_session_key\nWHERE\n  b.person_role = 'Activity leader'\nORDER BY\n  term_start_date ASC"
    ],
    "oracle_sql": "SELECT DISTINCT a.activity_title, d.session_location, c.term_start_date, b.person_name AS Leader FROM iap_subject_detail a JOIN iap_subject_person b ON a.iap_subject_person_key = b.iap_subject_person_key JOIN academic_terms_all c ON c.term_code = a.term_code JOIN iap_subject_session d ON a.iap_subject_session_key = d.iap_subject_session_key WHERE b.person_role = 'Activity leader' ORDER BY term_start_date ASC;",
    "gold_tables": [
      "dw#sep#IAP_SUBJECT_DETAIL",
      "dw#sep#IAP_SUBJECT_PERSON",
      "dw#sep#ACADEMIC_TERMS_ALL",
      "dw#sep#IAP_SUBJECT_SESSION"
    ],
    "mapping": {
      "activity titles": [
        "IAP_SUBJECT_DETAIL.ACTIVITY_TITLE"
      ],
      "locations": [
        "IAP_SUBJECT_SESSION.SESSION_LOCATION"
      ],
      "term start date": [
        "ACADEMIC_TERMS_ALL.TERM_START_DATE"
      ],
      "supervisor name": [
        "IAP_SUBJECT_PERSON.PERSON_NAME",
        "IAP_SUBJECT_PERSON.PERSON_ROLE"
      ]
    },
    "join_keys": [
      [
        "IAP_SUBJECT_PERSON.IAP_SUBJECT_PERSON_KEY",
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_PERSON_KEY"
      ],
      [
        "ACADEMIC_TERMS_ALL.TERM_CODE",
        "IAP_SUBJECT_DETAIL.TERM_CODE"
      ],
      [
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_SESSION_KEY",
        "IAP_SUBJECT_SESSION.IAP_SUBJECT_SESSION_KEY"
      ]
    ],
    "original_sql": "SELECT DISTINCT\n  a.activity_title,\n  d.session_location,\n  c.term_start_date,\n  b.person_name AS Leader\nFROM IAP_SUBJECT_DETAIL AS a\nJOIN IAP_SUBJECT_PERSON AS b\n  ON a.iap_subject_person_key = b.iap_subject_person_key\nJOIN ACADEMIC_TERMS_ALL AS c\n  ON c.term_code = a.term_code\nJOIN IAP_SUBJECT_SESSION AS d\n  ON a.iap_subject_session_key = d.iap_subject_session_key\nWHERE\n  b.person_role = 'Activity leader'\nORDER BY\n  term_start_date ASC",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 12,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "has_sorting",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "c604c95496dc",
    "question": "List the unique course instructor names, course titles, and the amount of material for each course instructor key and the key of subject offered.",
    "db_id": "dw",
    "sql": [
      "SELECT DISTINCT\n  LIBRARY_COURSE_INSTRUCTOR.instructor_name,\n  LIBRARY_SUBJECT_OFFERED.subject_title,\n  COUNT(LIBRARY_RESERVE_CATALOG.catalog_isbn) OVER (\n    PARTITION BY LIBRARY_COURSE_INSTRUCTOR.LIBRARY_COURSE_INSTRUCTOR_KEY, LIBRARY_SUBJECT_OFFERED.LIBRARY_SUBJECT_OFFERED_KEY\n  )\nFROM LIBRARY_COURSE_INSTRUCTOR\nJOIN LIBRARY_RESERVE_MATRL_DETAIL\n  ON LIBRARY_COURSE_INSTRUCTOR.LIBRARY_COURSE_INSTRUCTOR_KEY = LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_COURSE_INSTRUCTOR_KEY\nJOIN LIBRARY_SUBJECT_OFFERED\n  ON LIBRARY_SUBJECT_OFFERED.LIBRARY_SUBJECT_OFFERED_KEY = LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_SUBJECT_OFFERED_KEY\nJOIN LIBRARY_RESERVE_CATALOG\n  ON LIBRARY_RESERVE_CATALOG.LIBRARY_RESERVE_CATALOG_KEY = LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_RESERVE_CATALOG_KEY"
    ],
    "oracle_sql": "SELECT DISTINCT LIBRARY_COURSE_INSTRUCTOR.instructor_name, LIBRARY_SUBJECT_OFFERED.subject_title, COUNT(LIBRARY_RESERVE_CATALOG.catalog_isbn) OVER (PARTITION BY LIBRARY_COURSE_INSTRUCTOR.LIBRARY_COURSE_INSTRUCTOR_KEY, LIBRARY_SUBJECT_OFFERED.LIBRARY_SUBJECT_OFFERED_KEY) FROM LIBRARY_COURSE_INSTRUCTOR JOIN LIBRARY_RESERVE_MATRL_DETAIL ON LIBRARY_COURSE_INSTRUCTOR.LIBRARY_COURSE_INSTRUCTOR_KEY = LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_COURSE_INSTRUCTOR_KEY JOIN LIBRARY_SUBJECT_OFFERED ON LIBRARY_SUBJECT_OFFERED.LIBRARY_SUBJECT_OFFERED_KEY = LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_SUBJECT_OFFERED_KEY JOIN LIBRARY_RESERVE_CATALOG ON LIBRARY_RESERVE_CATALOG.LIBRARY_RESERVE_CATALOG_KEY = LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_RESERVE_CATALOG_KEY;",
    "gold_tables": [
      "dw#sep#LIBRARY_COURSE_INSTRUCTOR",
      "dw#sep#LIBRARY_RESERVE_MATRL_DETAIL",
      "dw#sep#LIBRARY_SUBJECT_OFFERED",
      "dw#sep#LIBRARY_RESERVE_CATALOG"
    ],
    "mapping": {
      "course instructor names": [
        "LIBRARY_COURSE_INSTRUCTOR.INSTRUCTOR_NAME"
      ],
      "course titles": [
        "LIBRARY_SUBJECT_OFFERED.SUBJECT_TITLE"
      ],
      "amount of material": [
        "LIBRARY_RESERVE_CATALOG.CATALOG_ISBN"
      ],
      "course instructor key": [
        "LIBRARY_COURSE_INSTRUCTOR.LIBRARY_COURSE_INSTRUCTOR_KEY"
      ],
      "key of subject offered": [
        "LIBRARY_SUBJECT_OFFERED.LIBRARY_SUBJECT_OFFERED_KEY"
      ]
    },
    "join_keys": [
      [
        "LIBRARY_COURSE_INSTRUCTOR.LIBRARY_COURSE_INSTRUCTOR_KEY",
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_COURSE_INSTRUCTOR_KEY"
      ],
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_SUBJECT_OFFERED_KEY",
        "LIBRARY_SUBJECT_OFFERED.LIBRARY_SUBJECT_OFFERED_KEY"
      ],
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_RESERVE_CATALOG_KEY",
        "LIBRARY_RESERVE_CATALOG.LIBRARY_RESERVE_CATALOG_KEY"
      ]
    ],
    "original_sql": "SELECT DISTINCT\n  LIBRARY_COURSE_INSTRUCTOR.instructor_name,\n  LIBRARY_SUBJECT_OFFERED.subject_title,\n  COUNT(LIBRARY_RESERVE_CATALOG.catalog_isbn) OVER (\n    PARTITION BY LIBRARY_COURSE_INSTRUCTOR.LIBRARY_COURSE_INSTRUCTOR_KEY, LIBRARY_SUBJECT_OFFERED.LIBRARY_SUBJECT_OFFERED_KEY\n  )\nFROM LIBRARY_COURSE_INSTRUCTOR\nJOIN LIBRARY_RESERVE_MATRL_DETAIL\n  ON LIBRARY_COURSE_INSTRUCTOR.LIBRARY_COURSE_INSTRUCTOR_KEY = LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_COURSE_INSTRUCTOR_KEY\nJOIN LIBRARY_SUBJECT_OFFERED\n  ON LIBRARY_SUBJECT_OFFERED.LIBRARY_SUBJECT_OFFERED_KEY = LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_SUBJECT_OFFERED_KEY\nJOIN LIBRARY_RESERVE_CATALOG\n  ON LIBRARY_RESERVE_CATALOG.LIBRARY_RESERVE_CATALOG_KEY = LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_RESERVE_CATALOG_KEY",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 11,
        "query_nested_count": 0,
        "query_aggregate_count": 1,
        "query_sort_count": 0,
        "query_window_func_count": 1,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_window_function"
      ]
    }
  },
  {
    "id": "1c8a1b173257",
    "question": "What is the room, floor, building key, building street address, city, state, and postal code of Professor Summer Haynes's office?",
    "db_id": "dw",
    "sql": [
      "SELECT DISTINCT\n  FAC_ROOMS.Room,\n  FAC_ROOMS.floor,\n  FAC_BUILDING_ADDRESS.BUILDING_KEY,\n  BUILDINGS.BUILDING_STREET_ADDRESS,\n  FAC_BUILDING_ADDRESS.CITY,\n  FAC_BUILDING_ADDRESS.STATE,\n  FAC_BUILDING_ADDRESS.POSTAL_CODE\nFROM (\n  SELECT\n    office_location\n  FROM EMPLOYEE_DIRECTORY\n  WHERE\n    full_name = 'Haynes, Summer'\n) AS emp_office\nJOIN FAC_ROOMS\n  ON emp_office.office_location = FAC_ROOMS.fac_room_key\nJOIN FAC_BUILDING_ADDRESS\n  ON FAC_ROOMS.building_key = FAC_BUILDING_ADDRESS.BUILDING_KEY\nJOIN BUILDINGS\n  ON BUILDINGS.BUILDING_KEY = FAC_BUILDING_ADDRESS.BUILDING_KEY\nWHERE\n  FAC_BUILDING_ADDRESS.ADDRESS_PURPOSE = 'STREET'"
    ],
    "oracle_sql": "SELECT fac_rooms.Room, fac_rooms.floor, fac_building_address.BUILDING_KEY, BUILDINGS.BUILDING_STREET_ADDRESS, fac_building_address.CITY, fac_building_address.STATE, fac_building_address.POSTAL_CODE FROM (SELECT office_location FROM employee_directory WHERE full_name = 'Haynes, Summer') JOIN fac_rooms on office_location = fac_room_key JOIN fac_building_address on fac_rooms.building_key = fac_building_address.BUILDING_KEY JOIN BUILDINGS ON BUILDINGS.BUILDING_KEY = fac_building_address.BUILDING_KEY where fac_building_address.ADDRESS_PURPOSE = 'STREET';",
    "gold_tables": [
      "dw#sep#EMPLOYEE_DIRECTORY",
      "dw#sep#FAC_ROOMS",
      "dw#sep#FAC_BUILDING_ADDRESS",
      "dw#sep#BUILDINGS"
    ],
    "mapping": {
      "room": [
        "FAC_ROOMS.ROOM"
      ],
      "floor": [
        "FAC_ROOMS.FLOOR"
      ],
      "building key": [
        "FAC_BUILDING_ADDRESS.BUILDING_KEY"
      ],
      "building street address": [
        "BUILDINGS.BUILDING_STREET_ADDRESS",
        "FAC_BUILDING_ADDRESS.ADDRESS_PURPOSE"
      ],
      "city": [
        "FAC_BUILDING_ADDRESS.CITY"
      ],
      "state": [
        "FAC_BUILDING_ADDRESS.STATE"
      ],
      "postal code": [
        "FAC_BUILDING_ADDRESS.POSTAL_CODE"
      ],
      "Professor Summer Haynes": [
        "EMPLOYEE_DIRECTORY.FULL_NAME"
      ],
      "office": [
        "EMPLOYEE_DIRECTORY.OFFICE_LOCATION"
      ]
    },
    "join_keys": [
      [
        "EMPLOYEE_DIRECTORY.OFFICE_LOCATION",
        "FAC_ROOMS.FAC_ROOM_KEY"
      ],
      [
        "FAC_BUILDING_ADDRESS.BUILDING_KEY",
        "FAC_ROOMS.BUILDING_KEY"
      ],
      [
        "BUILDINGS.BUILDING_KEY",
        "FAC_BUILDING_ADDRESS.BUILDING_KEY"
      ]
    ],
    "original_sql": "SELECT DISTINCT\n  fac_rooms.Room,\n  fac_rooms.floor,\n  fac_building_address.BUILDING_KEY,\n  BUILDINGS.BUILDING_STREET_ADDRESS,\n  fac_building_address.CITY,\n  fac_building_address.STATE,\n  fac_building_address.POSTAL_CODE\nFROM (\n  SELECT\n    office_location\n  FROM EMPLOYEE_DIRECTORY\n  WHERE\n    full_name = 'Haynes, Summer'\n) AS emp_office\nJOIN FAC_ROOMS\n  ON emp_office.office_location = fac_rooms.fac_room_key\nJOIN FAC_BUILDING_ADDRESS\n  ON fac_rooms.building_key = fac_building_address.BUILDING_KEY\nJOIN BUILDINGS\n  ON BUILDINGS.BUILDING_KEY = fac_building_address.BUILDING_KEY\nWHERE\n  fac_building_address.ADDRESS_PURPOSE = 'STREET'",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 16,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "440d91f81e80",
    "question": "List the unique full room names, their corresponding building names, street addresses, cities, states, postal codes, and building heights for rooms associated with subjects that Computer Science students can enroll in.",
    "db_id": "dw",
    "sql": [
      "SELECT DISTINCT\n  fr.ROOM_FULL_NAME,\n  b.BUILDING_NAME,\n  b.BUILDING_STREET_ADDRESS,\n  fba.CITY,\n  fba.STATE,\n  fba.POSTAL_CODE,\n  fb.BUILDING_HEIGHT\nFROM COURSE_CATALOG_SUBJECT_OFFERED\nJOIN FCLT_ROOMS AS fr\n  ON MEET_PLACE = FCLT_ROOM_KEY\nJOIN FCLT_BUILDING_ADDRESS AS fba\n  ON fba.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY\nJOIN FCLT_BUILDING AS fb\n  ON fb.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY\nJOIN BUILDINGS AS b\n  ON b.BUILDING_KEY = fr.FCLT_BUILDING_KEY\nWHERE\n  DEPARTMENT_NAME = 'Electrical Eng & Computer Sci'\n  AND fba.ADDRESS_PURPOSE = 'STREET'"
    ],
    "oracle_sql": "SELECT DISTINCT fr.ROOM_FULL_NAME, b.BUILDING_NAME, b.BUILDING_STREET_ADDRESS, fba.CITY, fba.STATE, fba.POSTAL_CODE, fb.BUILDING_HEIGHT FROM COURSE_CATALOG_SUBJECT_OFFERED JOIN FCLT_ROOMS fr ON MEET_PLACE = FCLT_ROOM_KEY JOIN FCLT_BUILDING_ADDRESS fba ON fba.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY JOIN FCLT_BUILDING fb ON fb.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY JOIN BUILDINGS b ON b.BUILDING_KEY = fr.FCLT_BUILDING_KEY WHERE DEPARTMENT_NAME = 'Electrical Eng & Computer Sci' AND fba.ADDRESS_PURPOSE = 'STREET';",
    "gold_tables": [
      "dw#sep#COURSE_CATALOG_SUBJECT_OFFERED",
      "dw#sep#FCLT_ROOMS",
      "dw#sep#FCLT_BUILDING_ADDRESS",
      "dw#sep#FCLT_BUILDING",
      "dw#sep#BUILDINGS"
    ],
    "mapping": {
      "full room names": [
        "FCLT_ROOMS.ROOM_FULL_NAME"
      ],
      "building names": [
        "BUILDINGS.BUILDING_NAME"
      ],
      "street addresses": [
        "BUILDINGS.BUILDING_STREET_ADDRESS",
        "FCLT_BUILDING_ADDRESS.ADDRESS_PURPOSE"
      ],
      "cities": [
        "FCLT_BUILDING_ADDRESS.CITY"
      ],
      "states": [
        "FCLT_BUILDING_ADDRESS.STATE"
      ],
      "postal codes": [
        "FCLT_BUILDING_ADDRESS.POSTAL_CODE"
      ],
      "building heights": [
        "FCLT_BUILDING.BUILDING_HEIGHT"
      ],
      "Computer Science": [
        "COURSE_CATALOG_SUBJECT_OFFERED.DEPARTMENT_NAME"
      ]
    },
    "join_keys": [
      [
        "COURSE_CATALOG_SUBJECT_OFFERED.MEET_PLACE",
        "FCLT_ROOMS.FCLT_ROOM_KEY"
      ],
      [
        "FCLT_BUILDING_ADDRESS.FCLT_BUILDING_KEY",
        "FCLT_ROOMS.FCLT_BUILDING_KEY"
      ],
      [
        "FCLT_BUILDING.FCLT_BUILDING_KEY",
        "FCLT_ROOMS.FCLT_BUILDING_KEY"
      ],
      [
        "BUILDINGS.BUILDING_KEY",
        "FCLT_ROOMS.FCLT_BUILDING_KEY"
      ]
    ],
    "original_sql": "SELECT DISTINCT\n  fr.ROOM_FULL_NAME,\n  b.BUILDING_NAME,\n  b.BUILDING_STREET_ADDRESS,\n  fba.CITY,\n  fba.STATE,\n  fba.POSTAL_CODE,\n  fb.BUILDING_HEIGHT\nFROM COURSE_CATALOG_SUBJECT_OFFERED\nJOIN FCLT_ROOMS AS fr\n  ON MEET_PLACE = FCLT_ROOM_KEY\nJOIN FCLT_BUILDING_ADDRESS AS fba\n  ON fba.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY\nJOIN FCLT_BUILDING AS fb\n  ON fb.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY\nJOIN BUILDINGS AS b\n  ON b.BUILDING_KEY = fr.FCLT_BUILDING_KEY\nWHERE\n  DEPARTMENT_NAME = 'Electrical Eng & Computer Sci'\n  AND fba.ADDRESS_PURPOSE = 'STREET'",
    "meta": {
      "features": {
        "query_table_count": 5,
        "query_column_count": 17,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "d037e57a52a1",
    "question": "List the unique term code, subject title, room, floor, building key, building street address, city, state, and postal code, formats, and number of enrolled students for all courses with more than 300 attendees.",
    "db_id": "dw",
    "sql": [
      "SELECT DISTINCT\n  s.TERM_CODE,\n  s.subject_title,\n  fr.room,\n  fr.floor,\n  b.BUILDING_KEY,\n  b.BUILDING_STREET_ADDRESS,\n  fba.CITY,\n  fba.STATE,\n  fba.POSTAL_CODE,\n  s.form_type,\n  s.num_enrolled_students\nFROM SUBJECT_OFFERED AS s\nJOIN FCLT_ROOMS AS fr\n  ON MEET_PLACE = FCLT_ROOM_KEY\nJOIN FCLT_BUILDING_ADDRESS AS fba\n  ON fba.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY\nJOIN BUILDINGS AS b\n  ON fr.FCLT_BUILDING_KEY = b.BUILDING_KEY\nWHERE\n  s.num_enrolled_students > 300 AND fba.ADDRESS_PURPOSE = 'STREET'"
    ],
    "oracle_sql": "SELECT DISTINCT s.TERM_CODE, s.subject_title, fr.room, fr.floor, b.BUILDING_KEY, b.BUILDING_STREET_ADDRESS, fba.CITY, fba.STATE, fba.POSTAL_CODE, s.form_type, s.num_enrolled_students FROM subject_offered s JOIN FCLT_ROOMS fr ON MEET_PLACE = FCLT_ROOM_KEY JOIN FCLT_BUILDING_ADDRESS fba ON fba.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY JOIN BUILDINGS b ON fr.FCLT_BUILDING_KEY = b.BUILDING_KEY WHERE s.num_enrolled_students > 300 AND fba.ADDRESS_PURPOSE = 'STREET';",
    "gold_tables": [
      "dw#sep#SUBJECT_OFFERED",
      "dw#sep#FCLT_ROOMS",
      "dw#sep#FCLT_BUILDING_ADDRESS",
      "dw#sep#BUILDINGS"
    ],
    "mapping": {
      "term code": [
        "SUBJECT_OFFERED.TERM_CODE"
      ],
      "subject title": [
        "SUBJECT_OFFERED.SUBJECT_TITLE"
      ],
      "room": [
        "FCLT_ROOMS.ROOM"
      ],
      "floor": [
        "FCLT_ROOMS.FLOOR"
      ],
      "building key": [
        "BUILDINGS.BUILDING_KEY"
      ],
      "building street address": [
        "BUILDINGS.BUILDING_STREET_ADDRESS",
        "FCLT_BUILDING_ADDRESS.ADDRESS_PURPOSE"
      ],
      "city": [
        "FCLT_BUILDING_ADDRESS.CITY"
      ],
      "state": [
        "FCLT_BUILDING_ADDRESS.STATE"
      ],
      "postal code": [
        "FCLT_BUILDING_ADDRESS.POSTAL_CODE"
      ],
      "formats": [
        "SUBJECT_OFFERED.FORM_TYPE"
      ],
      "number of enrolled students": [
        "SUBJECT_OFFERED.NUM_ENROLLED_STUDENTS"
      ],
      "attendees": [
        "SUBJECT_OFFERED.NUM_ENROLLED_STUDENTS"
      ]
    },
    "join_keys": [
      [
        "FCLT_ROOMS.FCLT_ROOM_KEY",
        "SUBJECT_OFFERED.MEET_PLACE"
      ],
      [
        "FCLT_BUILDING_ADDRESS.FCLT_BUILDING_KEY",
        "FCLT_ROOMS.FCLT_BUILDING_KEY"
      ],
      [
        "FCLT_ROOMS.FCLT_BUILDING_KEY",
        "BUILDINGS.BUILDING_KEY"
      ]
    ],
    "original_sql": "SELECT DISTINCT\n  s.TERM_CODE,\n  s.subject_title,\n  fr.room,\n  fr.floor,\n  b.BUILDING_KEY,\n  b.BUILDING_STREET_ADDRESS,\n  fba.CITY,\n  fba.STATE,\n  fba.POSTAL_CODE,\n  s.form_type,\n  s.num_enrolled_students\nFROM SUBJECT_OFFERED AS s\nJOIN FCLT_ROOMS AS fr\n  ON MEET_PLACE = FCLT_ROOM_KEY\nJOIN FCLT_BUILDING_ADDRESS AS fba\n  ON fba.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY\nJOIN BUILDINGS AS b\n  ON fr.FCLT_BUILDING_KEY = b.BUILDING_KEY\nWHERE\n  s.num_enrolled_students > 300 AND fba.ADDRESS_PURPOSE = 'STREET'",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 19,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "de90e2baad81",
    "question": "What are the subject titles, their material titles, ISBN numbers, new shelf prices, and total costs of new materials for each subject title, sorted by individual item prices in ascending order?",
    "db_id": "dw",
    "sql": [
      "SELECT DISTINCT\n  tso.SUBJECT_TITLE,\n  tm.title,\n  tm.isbn,\n  tm.new_shelf_price,\n  SUM(tm.new_shelf_price) OVER (PARTITION BY tso.SUBJECT_TITLE)\nFROM TIP_MATERIAL AS tm\nJOIN TIP_DETAIL AS td\n  ON tm.TIP_MATERIAL_KEY = td.TIP_MATERIAL_KEY\nJOIN TIP_SUBJECT_OFFERED AS tso\n  ON tso.SUBJECT_ID = td.SUBJECT_ID\nORDER BY\n  tm.new_shelf_price ASC"
    ],
    "oracle_sql": "SELECT DISTINCT tso.SUBJECT_TITLE, tm.title, tm.isbn, tm.new_shelf_price, SUM(tm.new_shelf_price) OVER(PARTITION BY tso.SUBJECT_TITLE) FROM tip_material tm JOIN TIP_DETAIL td ON tm.TIP_MATERIAL_KEY = td.TIP_MATERIAL_KEY JOIN TIP_SUBJECT_OFFERED tso ON tso.SUBJECT_ID = td.SUBJECT_ID ORDER BY tm.new_shelf_price ASC;",
    "gold_tables": [
      "dw#sep#TIP_MATERIAL",
      "dw#sep#TIP_DETAIL",
      "dw#sep#TIP_SUBJECT_OFFERED"
    ],
    "mapping": {
      "subject titles": [
        "TIP_SUBJECT_OFFERED.SUBJECT_TITLE"
      ],
      "material titles": [
        "TIP_MATERIAL.TITLE"
      ],
      "ISBN numbers": [
        "TIP_MATERIAL.ISBN"
      ],
      "new shelf prices": [
        "TIP_MATERIAL.NEW_SHELF_PRICE"
      ],
      "cost of new materials": [
        "TIP_MATERIAL.NEW_SHELF_PRICE"
      ]
    },
    "join_keys": [
      [
        "TIP_MATERIAL.TIP_MATERIAL_KEY",
        "TIP_DETAIL.TIP_MATERIAL_KEY"
      ],
      [
        "TIP_SUBJECT_OFFERED.SUBJECT_ID",
        "TIP_DETAIL.SUBJECT_ID"
      ]
    ],
    "original_sql": "SELECT DISTINCT\n  tso.SUBJECT_TITLE,\n  tm.title,\n  tm.isbn,\n  tm.new_shelf_price,\n  SUM(tm.new_shelf_price) OVER (PARTITION BY tso.SUBJECT_TITLE)\nFROM TIP_MATERIAL AS tm\nJOIN TIP_DETAIL AS td\n  ON tm.TIP_MATERIAL_KEY = td.TIP_MATERIAL_KEY\nJOIN TIP_SUBJECT_OFFERED AS tso\n  ON tso.SUBJECT_ID = td.SUBJECT_ID\nORDER BY\n  tm.new_shelf_price ASC",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 11,
        "query_nested_count": 0,
        "query_aggregate_count": 1,
        "query_sort_count": 1,
        "query_window_func_count": 1,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "fdef9d64a044",
    "question": "List the long names of buildings constructed before 1950 that have more than 100 employees, the built year of the building, and number of employees.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  *\nFROM (\n  SELECT DISTINCT\n    a.BUILDING_NAME_LONG,\n    a.year_built,\n    COUNT(EMPLOYEE_DIRECTORY.MIT_ID) OVER (PARTITION BY a.BUILDING_NAME_LONG, a.year_built) AS num_employees\n  FROM (\n    SELECT\n      *\n    FROM (\n      SELECT DISTINCT\n        FCLT_BUILDING_KEY,\n        BUILDING_NAME_LONG,\n        EXTRACT(YEAR FROM STR_TO_DATE(date_built, '%m/%d/%Y')) AS year_built\n      FROM FCLT_BUILDING_HIST\n    ) AS sub1\n    WHERE\n      year_built < 1950\n  ) AS a\n  JOIN FCLT_ROOMS\n    ON FCLT_ROOMS.FCLT_BUILDING_KEY = a.FCLT_BUILDING_KEY\n  JOIN (\n    SELECT DISTINCT\n      MIT_ID,\n      OFFICE_LOCATION\n    FROM EMPLOYEE_DIRECTORY\n  ) AS EMPLOYEE_DIRECTORY\n    ON EMPLOYEE_DIRECTORY.OFFICE_LOCATION = FCLT_ROOMS.BUILDING_ROOM\n) AS sub2\nWHERE\n  num_employees > 100"
    ],
    "oracle_sql": "SELECT * FROM (SELECT DISTINCT a.BUILDING_NAME_LONG, a.year_built, COUNT(distinct employee_directory.MIT_ID) OVER (PARTITION BY a.BUILDING_NAME_LONG, a.year_built) as num_employees FROM (SELECT * FROM (SELECT DISTINCT FCLT_BUILDING_KEY, BUILDING_NAME_LONG, extract(year FROM TO_DATE(date_built, 'MM/DD/YYYY')) as year_built FROM fclt_building_hist) WHERE year_built < 1950) a JOIN fclt_rooms ON fclt_rooms.FCLT_BUILDING_KEY = a.FCLT_BUILDING_KEY JOIN employee_directory ON employee_directory.OFFICE_LOCATION = fclt_rooms.BUILDING_ROOM ) WHERE num_employees > 100;",
    "gold_tables": [
      "dw#sep#FCLT_BUILDING_HIST",
      "dw#sep#FCLT_ROOMS",
      "dw#sep#EMPLOYEE_DIRECTORY"
    ],
    "mapping": {
      "long names of buildings": [
        "FCLT_BUILDING_HIST.BUILDING_NAME_LONG"
      ],
      "built year": [
        "FCLT_BUILDING_HIST.DATE_BUILT"
      ],
      "employees": [
        "EMPLOYEE_DIRECTORY.MIT_ID"
      ]
    },
    "join_keys": [
      [
        "EMPLOYEE_DIRECTORY.OFFICE_LOCATION",
        "FCLT_ROOMS.BUILDING_ROOM"
      ]
    ],
    "original_sql": "SELECT\n  *\nFROM (\n  SELECT DISTINCT\n    a.BUILDING_NAME_LONG,\n    a.year_built,\n    COUNT(employee_directory.MIT_ID) OVER (PARTITION BY a.BUILDING_NAME_LONG, a.year_built) AS num_employees\n  FROM (\n    SELECT\n      *\n    FROM (\n      SELECT DISTINCT\n        FCLT_BUILDING_KEY,\n        BUILDING_NAME_LONG,\n        EXTRACT(YEAR FROM STR_TO_DATE(date_built, '%m/%d/%Y')) AS year_built\n      FROM FCLT_BUILDING_HIST\n    ) AS sub1\n    WHERE\n      year_built < 1950\n  ) AS a\n  JOIN FCLT_ROOMS\n    ON fclt_rooms.FCLT_BUILDING_KEY = a.FCLT_BUILDING_KEY\n  JOIN (\n    SELECT DISTINCT\n      MIT_ID,\n      OFFICE_LOCATION\n    FROM EMPLOYEE_DIRECTORY\n  ) AS employee_directory\n    ON employee_directory.OFFICE_LOCATION = fclt_rooms.BUILDING_ROOM\n) AS sub2\nWHERE\n  num_employees > 100",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 16,
        "query_nested_count": 4,
        "query_aggregate_count": 1,
        "query_sort_count": 0,
        "query_window_func_count": 1,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_window_function"
      ]
    }
  },
  {
    "id": "de859619f292",
    "question": "For each building key, what is the building name and the number of courses offered by the Center for International Studies?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  fb.BUILDING_NAME,\n  COUNT(DISTINCT ccc.subject_id)\nFROM CIS_COURSE_CATALOG AS ccc\nJOIN COURSE_CATALOG_SUBJECT_OFFERED AS ccso\n  ON ccc.SUBJECT_ID = ccso.SUBJECT_ID\nJOIN FCLT_ROOMS AS fr\n  ON ccso.MEET_PLACE = fr.FCLT_ROOM_KEY\nJOIN FCLT_BUILDING AS fb\n  ON fb.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY\nGROUP BY\n  fb.FCLT_BUILDING_KEY,\n  fb.BUILDING_NAME"
    ],
    "oracle_sql": "SELECT fb.BUILDING_NAME, COUNT(DISTINCT ccc.subject_id) FROM cis_course_catalog ccc JOIN COURSE_CATALOG_SUBJECT_OFFERED ccso ON ccc.SUBJECT_ID = ccso.SUBJECT_ID JOIN FCLT_ROOMS fr ON ccso.MEET_PLACE = fr.FCLT_ROOM_KEY JOIN FCLT_BUILDING fb ON fb.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY GROUP BY fb.FCLT_BUILDING_KEY, fb.BUILDING_NAME;",
    "gold_tables": [
      "dw#sep#CIS_COURSE_CATALOG",
      "dw#sep#COURSE_CATALOG_SUBJECT_OFFERED",
      "dw#sep#FCLT_ROOMS",
      "dw#sep#FCLT_BUILDING"
    ],
    "mapping": {
      "building key": [
        "FCLT_BUILDING.FCLT_BUILDING_KEY"
      ],
      "building name": [
        "FCLT_BUILDING.BUILDING_NAME"
      ],
      "courses offered by the Center for International Studies": [
        "CIS_COURSE_CATALOG.SUBJECT_ID"
      ]
    },
    "join_keys": [
      [
        "CIS_COURSE_CATALOG.SUBJECT_ID",
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_ID"
      ],
      [
        "COURSE_CATALOG_SUBJECT_OFFERED.MEET_PLACE",
        "FCLT_ROOMS.FCLT_ROOM_KEY"
      ],
      [
        "FCLT_ROOMS.FCLT_BUILDING_KEY",
        "FCLT_BUILDING.FCLT_BUILDING_KEY"
      ]
    ],
    "original_sql": "SELECT\n  fb.BUILDING_NAME,\n  COUNT(DISTINCT ccc.subject_id)\nFROM CIS_COURSE_CATALOG AS ccc\nJOIN COURSE_CATALOG_SUBJECT_OFFERED AS ccso\n  ON ccc.SUBJECT_ID = ccso.SUBJECT_ID\nJOIN FCLT_ROOMS AS fr\n  ON ccso.MEET_PLACE = fr.FCLT_ROOM_KEY\nJOIN FCLT_BUILDING AS fb\n  ON fb.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY\nGROUP BY\n  fb.FCLT_BUILDING_KEY,\n  fb.BUILDING_NAME",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 10,
        "query_nested_count": 0,
        "query_aggregate_count": 1,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "3f3b1500ef92",
    "question": "What is the name of the building that accomodates the most students, and how many students does it accomodate?",
    "db_id": "dw",
    "sql": [
      "SELECT DISTINCT\n  building_name,\n  num_students\nFROM (\n  SELECT\n    fclt_building_key,\n    COUNT(DISTINCT full_name) AS num_students\n  FROM FCLT_ROOMS\n  JOIN MIT_STUDENT_DIRECTORY\n    ON office_location = BUILDING_ROOM\n  GROUP BY\n    fclt_building_key\n) AS a\nJOIN FCLT_BUILDING\n  ON a.fclt_building_key = FCLT_BUILDING.fclt_building_key\nJOIN (\n  SELECT\n    MAX(num_students) AS max_num_students\n  FROM (\n    SELECT\n      fclt_building_key,\n      COUNT(DISTINCT full_name) AS num_students\n    FROM FCLT_ROOMS\n    JOIN MIT_STUDENT_DIRECTORY\n      ON office_location = BUILDING_ROOM\n    GROUP BY\n      fclt_building_key\n  ) AS subquery1\n) AS b\n  ON a.num_students = b.max_num_students"
    ],
    "oracle_sql": "SELECT DISTINCT building_name, num_students FROM (SELECT fclt_building_key, COUNT(distinct full_name) as num_students FROM fclt_rooms JOIN mit_student_directory ON office_location=BUILDING_ROOM GROUP BY fclt_building_key) a JOIN fclt_building ON a.fclt_building_key = fclt_building.fclt_building_key JOIN (SELECT MAX(num_students) as max_num_students FROM (SELECT fclt_building_key, COUNT(distinct full_name) as num_students FROM fclt_rooms JOIN mit_student_directory ON office_location=BUILDING_ROOM GROUP BY fclt_building_key)) b ON a.num_students = b.max_num_students;",
    "gold_tables": [
      "dw#sep#FCLT_ROOMS",
      "dw#sep#MIT_STUDENT_DIRECTORY",
      "dw#sep#FCLT_BUILDING"
    ],
    "mapping": {
      "name of the building": [
        "FCLT_BUILDING.BUILDING_NAME"
      ],
      "students": [
        "MIT_STUDENT_DIRECTORY.FULL_NAME"
      ]
    },
    "join_keys": [
      [
        "FCLT_ROOMS.BUILDING_ROOM",
        "MIT_STUDENT_DIRECTORY.OFFICE_LOCATION"
      ],
      [
        "FCLT_ROOMS.BUILDING_ROOM",
        "MIT_STUDENT_DIRECTORY.OFFICE_LOCATION"
      ]
    ],
    "original_sql": "SELECT DISTINCT\n  building_name,\n  num_students\nFROM (\n  SELECT\n    fclt_building_key,\n    COUNT(DISTINCT full_name) AS num_students\n  FROM FCLT_ROOMS\n  JOIN MIT_STUDENT_DIRECTORY\n    ON office_location = BUILDING_ROOM\n  GROUP BY\n    fclt_building_key\n) AS a\nJOIN FCLT_BUILDING\n  ON a.fclt_building_key = fclt_building.fclt_building_key\nJOIN (\n  SELECT\n    MAX(num_students) AS max_num_students\n  FROM (\n    SELECT\n      fclt_building_key,\n      COUNT(DISTINCT full_name) AS num_students\n    FROM FCLT_ROOMS\n    JOIN MIT_STUDENT_DIRECTORY\n      ON office_location = BUILDING_ROOM\n    GROUP BY\n      fclt_building_key\n  ) AS subquery1\n) AS b\n  ON a.num_students = b.max_num_students",
    "meta": {
      "features": {
        "query_table_count": 5,
        "query_column_count": 17,
        "query_nested_count": 3,
        "query_aggregate_count": 3,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "1d6f0083b730",
    "question": "List the name and floor of the building with the largest floor number.",
    "db_id": "dw",
    "sql": [
      "SELECT DISTINCT\n  B.BUILDING_NAME,\n  A.FLOOR\nFROM FAC_FLOOR AS A\nJOIN FAC_BUILDING AS B\n  ON A.BUILDING_KEY = B.FAC_BUILDING_KEY\nJOIN (\n  SELECT\n    MAX(f) AS highest_floor\n  FROM (\n    SELECT\n      CASE WHEN REGEXP_LIKE(FLOOR, '^[0-9]+$') THEN CAST(FLOOR AS UNSIGNED) ELSE NULL END AS f\n    FROM FAC_FLOOR\n  ) AS subquery1\n) AS subquery2\n  ON (\n    CASE\n      WHEN REGEXP_LIKE(A.FLOOR, '^[0-9]+$')\n      THEN CAST(A.FLOOR AS UNSIGNED)\n      ELSE NULL\n    END\n  ) = subquery2.highest_floor"
    ],
    "oracle_sql": "SELECT DISTINCT B.BUILDING_NAME, A.FLOOR FROM FAC_FLOOR A JOIN FAC_BUILDING B ON A.BUILDING_KEY = B.FAC_BUILDING_KEY JOIN (SELECT max(f) as highest_floor FROM (SELECT CASE WHEN REGEXP_LIKE(FLOOR, '^\\d+$') THEN TO_NUMBER(FLOOR) ELSE NULL END AS f FROM fac_floor)) ON (CASE WHEN REGEXP_LIKE(A.FLOOR, '^\\d+$') THEN TO_NUMBER(FLOOR) ELSE NULL END) = highest_floor;",
    "gold_tables": [
      "dw#sep#FAC_FLOOR",
      "dw#sep#FAC_BUILDING"
    ],
    "mapping": {
      "name": [
        "FAC_BUILDING.BUILDING_NAME"
      ],
      "floor": [
        "FAC_FLOOR.FLOOR"
      ]
    },
    "join_keys": [
      [
        "FAC_BUILDING.FAC_BUILDING_KEY",
        "FAC_FLOOR.BUILDING_KEY"
      ]
    ],
    "original_sql": "SELECT DISTINCT\n  B.BUILDING_NAME,\n  A.FLOOR\nFROM FAC_FLOOR AS A\nJOIN FAC_BUILDING AS B\n  ON A.BUILDING_KEY = B.FAC_BUILDING_KEY\nJOIN (\n  SELECT\n    MAX(f) AS highest_floor\n  FROM (\n    SELECT\n      CASE WHEN REGEXP_LIKE(FLOOR, '^[0-9]+$') THEN CAST(FLOOR AS UNSIGNED) ELSE NULL END AS f\n    FROM FAC_FLOOR\n  ) AS subquery1\n) AS subquery2\n  ON (\n    CASE\n      WHEN REGEXP_LIKE(A.FLOOR, '^[0-9]+$')\n      THEN CAST(A.FLOOR AS UNSIGNED)\n      ELSE NULL\n    END\n  ) = subquery2.highest_floor",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 10,
        "query_nested_count": 2,
        "query_aggregate_count": 1,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "9e770d36354c",
    "question": "For each IAP category and academic year, list the category name, academic year, total fee collected, total number of IAP subjects, and the minimum and maximum enrollment.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  isc.IAP_CATEGORY_NAME,\n  td.ACADEMIC_YEAR,\n  SUM(isd.FEE) AS Total_Fee,\n  COUNT(DISTINCT isd.ACTIVITY_TITLE) AS Total_Subjects,\n  MIN(isd.MAX_ENROLLMENT) AS Min_Attendance,\n  MAX(isd.MAX_ENROLLMENT) AS Max_Attendance\nFROM IAP_SUBJECT_DETAIL AS isd\nJOIN IAP_SUBJECT_CATEGORY AS isc\n  ON isd.IAP_SUBJECT_CATEGORY_KEY = isc.IAP_SUBJECT_CATEGORY_KEY\nJOIN TIME_DAY AS td\n  ON isd.TERM_CODE = td.ACADEMIC_TERM_CODE\nGROUP BY\n  isc.IAP_CATEGORY_NAME,\n  td.ACADEMIC_YEAR"
    ],
    "oracle_sql": "SELECT isc.IAP_CATEGORY_NAME, td.ACADEMIC_YEAR, SUM(isd.FEE) AS Total_Fee, COUNT(distinct isd.ACTIVITY_TITLE) AS Total_Subjects, MIN(isd.MAX_ENROLLMENT) AS Min_Attendance, MAX(isd.MAX_ENROLLMENT) AS Max_Attendance FROM IAP_SUBJECT_DETAIL isd JOIN IAP_SUBJECT_CATEGORY isc ON isd.IAP_SUBJECT_CATEGORY_KEY = isc.IAP_SUBJECT_CATEGORY_KEY JOIN TIME_DAY td ON isd.TERM_CODE = td.ACADEMIC_TERM_CODE GROUP BY isc.IAP_CATEGORY_NAME, td.ACADEMIC_YEAR;",
    "gold_tables": [
      "dw#sep#IAP_SUBJECT_DETAIL",
      "dw#sep#IAP_SUBJECT_CATEGORY",
      "dw#sep#TIME_DAY"
    ],
    "mapping": {
      "category name": [
        "IAP_SUBJECT_CATEGORY.IAP_CATEGORY_NAME"
      ],
      "academic year": [
        "TIME_DAY.ACADEMIC_YEAR"
      ],
      "fee collected": [
        "IAP_SUBJECT_DETAIL.FEE"
      ],
      "IAP subjects": [
        "IAP_SUBJECT_DETAIL.ACTIVITY_TITLE"
      ],
      "enrollment": [
        "IAP_SUBJECT_DETAIL.MAX_ENROLLMENT"
      ]
    },
    "join_keys": [
      [
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_CATEGORY_KEY",
        "IAP_SUBJECT_CATEGORY.IAP_SUBJECT_CATEGORY_KEY"
      ],
      [
        "TIME_DAY.ACADEMIC_TERM_CODE",
        "IAP_SUBJECT_DETAIL.TERM_CODE"
      ]
    ],
    "original_sql": "SELECT\n  isc.IAP_CATEGORY_NAME,\n  td.ACADEMIC_YEAR,\n  SUM(isd.FEE) AS Total_Fee,\n  COUNT(DISTINCT isd.ACTIVITY_TITLE) AS Total_Subjects,\n  MIN(isd.MAX_ENROLLMENT) AS Min_Attendance,\n  MAX(isd.MAX_ENROLLMENT) AS Max_Attendance\nFROM IAP_SUBJECT_DETAIL AS isd\nJOIN IAP_SUBJECT_CATEGORY AS isc\n  ON isd.IAP_SUBJECT_CATEGORY_KEY = isc.IAP_SUBJECT_CATEGORY_KEY\nJOIN TIME_DAY AS td\n  ON isd.TERM_CODE = td.ACADEMIC_TERM_CODE\nGROUP BY\n  isc.IAP_CATEGORY_NAME,\n  td.ACADEMIC_YEAR",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 12,
        "query_nested_count": 0,
        "query_aggregate_count": 4,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "42bbd8ae8794",
    "question": "For each sponsor of the independent activity periods, list the sponsor name, number of sessions held, the total number of enrollment, the minimum and maximum fee, the number of sessions with info, and the number of sessions without info.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  issr.SPONSOR_NAME,\n  COUNT(DISTINCT iss.IAP_SUBJECT_SESSION_KEY) AS Total_Sessions,\n  SUM(isd.MAX_ENROLLMENT),\n  MIN(isd.FEE) AS Min_Fee,\n  MAX(isd.FEE) AS Max_Fee,\n  SUM(CASE WHEN iss.HAS_SESSION_INFO = 'Y' THEN 1 ELSE 0 END) AS Num_Sessions_With_Info,\n  SUM(CASE WHEN iss.HAS_SESSION_INFO = 'N' THEN 1 ELSE 0 END) AS Num_Sessions_Without_Info\nFROM IAP_SUBJECT_SESSION AS iss\nJOIN IAP_SUBJECT_DETAIL AS isd\n  ON iss.IAP_SUBJECT_SESSION_KEY = isd.IAP_SUBJECT_SESSION_KEY\nJOIN IAP_SUBJECT_SPONSOR AS issr\n  ON isd.IAP_SUBJECT_SPONSOR_KEY = issr.IAP_SUBJECT_SPONSOR_KEY\nGROUP BY\n  issr.SPONSOR_NAME"
    ],
    "oracle_sql": "SELECT issr.SPONSOR_NAME, COUNT(DISTINCT iss.IAP_SUBJECT_SESSION_KEY) AS Total_Sessions, SUM(isd.MAX_ENROLLMENT), MIN(isd.FEE) AS Min_Fee, MAX(isd.FEE) AS Max_Fee, SUM(CASE WHEN iss.HAS_SESSION_INFO = 'Y' THEN 1 ELSE 0 END) AS Num_Sessions_With_Info, SUM(CASE WHEN iss.HAS_SESSION_INFO = 'N' THEN 1 ELSE 0 END) AS Num_Sessions_Without_Info FROM IAP_SUBJECT_SESSION iss JOIN IAP_SUBJECT_DETAIL isd ON iss.IAP_SUBJECT_SESSION_KEY = isd.IAP_SUBJECT_SESSION_KEY JOIN IAP_SUBJECT_SPONSOR issr ON isd.IAP_SUBJECT_SPONSOR_KEY = issr.IAP_SUBJECT_SPONSOR_KEY GROUP BY issr.SPONSOR_NAME;",
    "gold_tables": [
      "dw#sep#IAP_SUBJECT_SESSION",
      "dw#sep#IAP_SUBJECT_DETAIL",
      "dw#sep#IAP_SUBJECT_SPONSOR"
    ],
    "mapping": {
      "sponsor name": [
        "IAP_SUBJECT_SPONSOR.SPONSOR_NAME"
      ],
      "sessions": [
        "IAP_SUBJECT_SESSION.IAP_SUBJECT_SESSION_KEY"
      ],
      "enrollment": [
        "IAP_SUBJECT_DETAIL.MAX_ENROLLMENT"
      ],
      "fee": [
        "IAP_SUBJECT_DETAIL.FEE"
      ],
      "info": [
        "IAP_SUBJECT_SESSION.HAS_SESSION_INFO"
      ]
    },
    "join_keys": [
      [
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_SESSION_KEY",
        "IAP_SUBJECT_SESSION.IAP_SUBJECT_SESSION_KEY"
      ],
      [
        "IAP_SUBJECT_SPONSOR.IAP_SUBJECT_SPONSOR_KEY",
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_SPONSOR_KEY"
      ]
    ],
    "original_sql": "SELECT\n  issr.SPONSOR_NAME,\n  COUNT(DISTINCT iss.IAP_SUBJECT_SESSION_KEY) AS Total_Sessions,\n  SUM(isd.MAX_ENROLLMENT),\n  MIN(isd.FEE) AS Min_Fee,\n  MAX(isd.FEE) AS Max_Fee,\n  SUM(CASE WHEN iss.HAS_SESSION_INFO = 'Y' THEN 1 ELSE 0 END) AS Num_Sessions_With_Info,\n  SUM(CASE WHEN iss.HAS_SESSION_INFO = 'N' THEN 1 ELSE 0 END) AS Num_Sessions_Without_Info\nFROM IAP_SUBJECT_SESSION AS iss\nJOIN IAP_SUBJECT_DETAIL AS isd\n  ON iss.IAP_SUBJECT_SESSION_KEY = isd.IAP_SUBJECT_SESSION_KEY\nJOIN IAP_SUBJECT_SPONSOR AS issr\n  ON isd.IAP_SUBJECT_SPONSOR_KEY = issr.IAP_SUBJECT_SPONSOR_KEY\nGROUP BY\n  issr.SPONSOR_NAME",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 12,
        "query_nested_count": 0,
        "query_aggregate_count": 6,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "c8c2b28f0daf",
    "question": "What are the individual's email and name, academic year, total number of IAP subjects, the minimum and maximum fees, and the total course enrollment for each individual and academic year?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  isp.PERSON_EMAIL,\n  isp.PERSON_NAME,\n  td.ACADEMIC_YEAR,\n  COUNT(DISTINCT isd.ACTIVITY_TITLE) AS Total_Subjects,\n  MIN(isd.FEE) AS Min_Fee,\n  MAX(isd.FEE) AS Max_Fee,\n  SUM(isd.MAX_ENROLLMENT)\nFROM IAP_SUBJECT_PERSON AS isp\nJOIN IAP_SUBJECT_DETAIL AS isd\n  ON isp.IAP_SUBJECT_PERSON_KEY = isd.IAP_SUBJECT_PERSON_KEY\nJOIN TIME_DAY AS td\n  ON isd.TERM_CODE = td.ACADEMIC_TERM_CODE\nGROUP BY\n  isp.PERSON_EMAIL,\n  isp.PERSON_NAME,\n  td.ACADEMIC_YEAR"
    ],
    "oracle_sql": "SELECT isp.PERSON_EMAIL, isp.PERSON_NAME, td.ACADEMIC_YEAR, COUNT(distinct isd.ACTIVITY_TITLE) AS Total_Subjects, MIN(isd.FEE) AS Min_Fee, MAX(isd.FEE) AS Max_Fee, SUM(isd.MAX_ENROLLMENT) FROM IAP_SUBJECT_PERSON isp JOIN IAP_SUBJECT_DETAIL isd ON isp.IAP_SUBJECT_PERSON_KEY = isd.IAP_SUBJECT_PERSON_KEY JOIN TIME_DAY td ON isd.TERM_CODE = td.ACADEMIC_TERM_CODE GROUP BY isp.PERSON_EMAIL, isp.PERSON_NAME, td.ACADEMIC_YEAR;",
    "gold_tables": [
      "dw#sep#IAP_SUBJECT_PERSON",
      "dw#sep#IAP_SUBJECT_DETAIL",
      "dw#sep#TIME_DAY"
    ],
    "mapping": {
      "email": [
        "IAP_SUBJECT_PERSON.PERSON_EMAIL"
      ],
      "name": [
        "IAP_SUBJECT_PERSON.PERSON_NAME"
      ],
      "academic year": [
        "TIME_DAY.ACADEMIC_YEAR"
      ],
      "IAP subjects": [
        "IAP_SUBJECT_DETAIL.ACTIVITY_TITLE"
      ],
      "fees": [
        "IAP_SUBJECT_DETAIL.FEE"
      ],
      "course enrollment": [
        "IAP_SUBJECT_DETAIL.MAX_ENROLLMENT"
      ]
    },
    "join_keys": [
      [
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_PERSON_KEY",
        "IAP_SUBJECT_PERSON.IAP_SUBJECT_PERSON_KEY"
      ],
      [
        "TIME_DAY.ACADEMIC_TERM_CODE",
        "IAP_SUBJECT_DETAIL.TERM_CODE"
      ]
    ],
    "original_sql": "SELECT\n  isp.PERSON_EMAIL,\n  isp.PERSON_NAME,\n  td.ACADEMIC_YEAR,\n  COUNT(DISTINCT isd.ACTIVITY_TITLE) AS Total_Subjects,\n  MIN(isd.FEE) AS Min_Fee,\n  MAX(isd.FEE) AS Max_Fee,\n  SUM(isd.MAX_ENROLLMENT)\nFROM IAP_SUBJECT_PERSON AS isp\nJOIN IAP_SUBJECT_DETAIL AS isd\n  ON isp.IAP_SUBJECT_PERSON_KEY = isd.IAP_SUBJECT_PERSON_KEY\nJOIN TIME_DAY AS td\n  ON isd.TERM_CODE = td.ACADEMIC_TERM_CODE\nGROUP BY\n  isp.PERSON_EMAIL,\n  isp.PERSON_NAME,\n  td.ACADEMIC_YEAR",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 14,
        "query_nested_count": 0,
        "query_aggregate_count": 4,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "d64a1d7ace6f",
    "question": "What is the term code, term description, total number of IAP sessions, total fee collected, and minimum and maximum enrollment for each term code?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  isd.TERM_CODE,\n  ata.TERM_DESCRIPTION,\n  COUNT(DISTINCT iss.IAP_SUBJECT_SESSION_KEY) AS Total_Sessions,\n  SUM(isd.FEE) AS Total_Fee,\n  MIN(isd.MAX_ENROLLMENT) AS Min_Enrollment,\n  MAX(isd.MAX_ENROLLMENT) AS Max_Enrollment\nFROM IAP_SUBJECT_SESSION AS iss\nJOIN IAP_SUBJECT_DETAIL AS isd\n  ON iss.IAP_SUBJECT_SESSION_KEY = isd.IAP_SUBJECT_SESSION_KEY\nJOIN ACADEMIC_TERMS_ALL AS ata\n  ON isd.TERM_CODE = ata.TERM_CODE\nGROUP BY\n  isd.TERM_CODE,\n  ata.TERM_DESCRIPTION"
    ],
    "oracle_sql": "SELECT isd.TERM_CODE, ata.TERM_DESCRIPTION, COUNT(distinct iss.IAP_SUBJECT_SESSION_KEY) AS Total_Sessions, SUM(isd.FEE) AS Total_Fee, MIN(isd.MAX_ENROLLMENT) AS Min_Enrollment, MAX(isd.MAX_ENROLLMENT) AS Max_Enrollment FROM IAP_SUBJECT_SESSION iss JOIN IAP_SUBJECT_DETAIL isd ON iss.IAP_SUBJECT_SESSION_KEY = isd.IAP_SUBJECT_SESSION_KEY JOIN ACADEMIC_TERMS_ALL ata ON isd.TERM_CODE = ata.TERM_CODE GROUP BY isd.TERM_CODE, ata.TERM_DESCRIPTION;",
    "gold_tables": [
      "dw#sep#IAP_SUBJECT_SESSION",
      "dw#sep#IAP_SUBJECT_DETAIL",
      "dw#sep#ACADEMIC_TERMS_ALL"
    ],
    "mapping": {
      "term code": [
        "IAP_SUBJECT_DETAIL.TERM_CODE"
      ],
      "term description": [
        "ACADEMIC_TERMS_ALL.TERM_DESCRIPTION"
      ],
      "IAP sessions": [
        "IAP_SUBJECT_SESSION.IAP_SUBJECT_SESSION_KEY"
      ],
      "fee": [
        "IAP_SUBJECT_DETAIL.FEE"
      ],
      "enrollment": [
        "IAP_SUBJECT_DETAIL.MAX_ENROLLMENT"
      ]
    },
    "join_keys": [
      [
        "IAP_SUBJECT_SESSION.IAP_SUBJECT_SESSION_KEY",
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_SESSION_KEY"
      ],
      [
        "ACADEMIC_TERMS_ALL.TERM_CODE",
        "IAP_SUBJECT_DETAIL.TERM_CODE"
      ]
    ],
    "original_sql": "SELECT\n  isd.TERM_CODE,\n  ata.TERM_DESCRIPTION,\n  COUNT(DISTINCT iss.IAP_SUBJECT_SESSION_KEY) AS Total_Sessions,\n  SUM(isd.FEE) AS Total_Fee,\n  MIN(isd.MAX_ENROLLMENT) AS Min_Enrollment,\n  MAX(isd.MAX_ENROLLMENT) AS Max_Enrollment\nFROM IAP_SUBJECT_SESSION AS iss\nJOIN IAP_SUBJECT_DETAIL AS isd\n  ON iss.IAP_SUBJECT_SESSION_KEY = isd.IAP_SUBJECT_SESSION_KEY\nJOIN ACADEMIC_TERMS_ALL AS ata\n  ON isd.TERM_CODE = ata.TERM_CODE\nGROUP BY\n  isd.TERM_CODE,\n  ata.TERM_DESCRIPTION",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 12,
        "query_nested_count": 0,
        "query_aggregate_count": 4,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "a2c31b6a6ef4",
    "question": "What is the name of the building, total number of subjects, total fee, and shortest and longest sessions for each physical IAP session location?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  b.BUILDING_NAME,\n  COUNT(DISTINCT isd.ACTIVITY_TITLE) AS Total_Subjects,\n  SUM(isd.FEE) AS Total_Fee,\n  MIN(\n    TIMESTAMPDIFF(\n      MINUTE,\n      STR_TO_DATE(iss.SESSION_START_TIME, '%h%i%p'),\n      CASE\n        WHEN STR_TO_DATE(iss.SESSION_START_TIME, '%h%i%p') > STR_TO_DATE(iss.SESSION_END_TIME, '%h%i%p')\n        THEN STR_TO_DATE('1200PM', '%h%i%p')\n        ELSE STR_TO_DATE(iss.SESSION_END_TIME, '%h%i%p')\n      END\n    )\n  ) AS Min_Sessions,\n  MAX(\n    TIMESTAMPDIFF(\n      MINUTE,\n      STR_TO_DATE(iss.SESSION_START_TIME, '%h%i%p'),\n      CASE\n        WHEN STR_TO_DATE(iss.SESSION_START_TIME, '%h%i%p') > STR_TO_DATE(iss.SESSION_END_TIME, '%h%i%p')\n        THEN STR_TO_DATE('1200PM', '%h%i%p')\n        ELSE STR_TO_DATE(iss.SESSION_END_TIME, '%h%i%p')\n      END\n    )\n  ) AS Max_Sessions\nFROM IAP_SUBJECT_SESSION AS iss\nJOIN IAP_SUBJECT_DETAIL AS isd\n  ON iss.IAP_SUBJECT_SESSION_KEY = isd.IAP_SUBJECT_SESSION_KEY\nJOIN BUILDINGS AS b\n  ON b.BUILDING_NUMBER = iss.SESSION_LOCATION\nGROUP BY\n  b.BUILDING_NAME"
    ],
    "oracle_sql": "SELECT b.BUILDING_NAME, COUNT(Distinct isd.ACTIVITY_TITLE) AS Total_Subjects, SUM(isd.FEE) AS Total_Fee, MIN((CASE WHEN TO_DATE(iss.SESSION_START_TIME, 'HH12:MIAM') > TO_DATE(iss.SESSION_END_TIME, 'HH12:MIAM') THEN TO_DATE('12:00PM', 'HH12:MIAM') ELSE TO_DATE(iss.SESSION_END_TIME, 'HH12:MIAM')END) - TO_DATE(iss.SESSION_START_TIME, 'HH12:MIAM') ) * 24 * 60 AS Min_Sessions, MAX((CASE WHEN TO_DATE(iss.SESSION_START_TIME, 'HH12:MIAM') > TO_DATE(iss.SESSION_END_TIME, 'HH12:MIAM') THEN TO_DATE('12:00PM', 'HH12:MIAM') ELSE TO_DATE(iss.SESSION_END_TIME, 'HH12:MIAM')END) - TO_DATE(iss.SESSION_START_TIME, 'HH12:MIAM') ) * 24 * 60 AS Max_Sessions FROM IAP_SUBJECT_SESSION iss JOIN IAP_SUBJECT_DETAIL isd ON iss.IAP_SUBJECT_SESSION_KEY = isd.IAP_SUBJECT_SESSION_KEY JOIN BUILDINGS b on b.BUILDING_NUMBER = iss.SESSION_LOCATION GROUP BY b.BUILDING_NAME;",
    "gold_tables": [
      "dw#sep#IAP_SUBJECT_SESSION",
      "dw#sep#IAP_SUBJECT_DETAIL",
      "dw#sep#BUILDINGS"
    ],
    "mapping": {
      "name of the building": [
        "BUILDINGS.BUILDING_NAME"
      ],
      "subjects": [
        "IAP_SUBJECT_DETAIL.ACTIVITY_TITLE"
      ],
      "fee": [
        "IAP_SUBJECT_DETAIL.FEE"
      ],
      "sessions": [
        "IAP_SUBJECT_SESSION.SESSION_END_TIME",
        "IAP_SUBJECT_SESSION.SESSION_START_TIME"
      ]
    },
    "join_keys": [
      [
        "IAP_SUBJECT_SESSION.IAP_SUBJECT_SESSION_KEY",
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_SESSION_KEY"
      ],
      [
        "IAP_SUBJECT_SESSION.SESSION_LOCATION",
        "BUILDINGS.BUILDING_NUMBER"
      ]
    ],
    "original_sql": "SELECT\n  b.BUILDING_NAME,\n  COUNT(DISTINCT isd.ACTIVITY_TITLE) AS Total_Subjects,\n  SUM(isd.FEE) AS Total_Fee,\n  MIN(\n    TIMESTAMPDIFF(\n      MINUTE,\n      STR_TO_DATE(iss.SESSION_START_TIME, '%h%i%p'),\n      CASE\n        WHEN STR_TO_DATE(iss.SESSION_START_TIME, '%h%i%p') > STR_TO_DATE(iss.SESSION_END_TIME, '%h%i%p')\n        THEN STR_TO_DATE('1200PM', '%h%i%p')\n        ELSE STR_TO_DATE(iss.SESSION_END_TIME, '%h%i%p')\n      END\n    )\n  ) AS Min_Sessions,\n  MAX(\n    TIMESTAMPDIFF(\n      MINUTE,\n      STR_TO_DATE(iss.SESSION_START_TIME, '%h%i%p'),\n      CASE\n        WHEN STR_TO_DATE(iss.SESSION_START_TIME, '%h%i%p') > STR_TO_DATE(iss.SESSION_END_TIME, '%h%i%p')\n        THEN STR_TO_DATE('1200PM', '%h%i%p')\n        ELSE STR_TO_DATE(iss.SESSION_END_TIME, '%h%i%p')\n      END\n    )\n  ) AS Max_Sessions\nFROM IAP_SUBJECT_SESSION AS iss\nJOIN IAP_SUBJECT_DETAIL AS isd\n  ON iss.IAP_SUBJECT_SESSION_KEY = isd.IAP_SUBJECT_SESSION_KEY\nJOIN BUILDINGS AS b\n  ON b.BUILDING_NUMBER = iss.SESSION_LOCATION\nGROUP BY\n  b.BUILDING_NAME",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 16,
        "query_nested_count": 0,
        "query_aggregate_count": 4,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "ff0c65847cad",
    "question": "What is total number of subjects, the total fee, and the shortest and longest sessions, for all virtual IAP sessions?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  COUNT(DISTINCT isd.ACTIVITY_TITLE) AS Total_Subjects,\n  SUM(isd.FEE) AS Total_Fee,\n  MIN(\n    TIMESTAMPDIFF(\n      MINUTE,\n      STR_TO_DATE(iss.SESSION_START_TIME, '%h%i%p'),\n      CASE\n        WHEN STR_TO_DATE(iss.SESSION_START_TIME, '%h%i%p') > STR_TO_DATE(iss.SESSION_END_TIME, '%h%i%p')\n        THEN STR_TO_DATE('1200PM', '%h%i%p')\n        ELSE STR_TO_DATE(iss.SESSION_END_TIME, '%h%i%p')\n      END\n    )\n  ) AS Min_Sessions,\n  MAX(\n    TIMESTAMPDIFF(\n      MINUTE,\n      STR_TO_DATE(iss.SESSION_START_TIME, '%h%i%p'),\n      CASE\n        WHEN STR_TO_DATE(iss.SESSION_START_TIME, '%h%i%p') > STR_TO_DATE(iss.SESSION_END_TIME, '%h%i%p')\n        THEN STR_TO_DATE('1200PM', '%h%i%p')\n        ELSE STR_TO_DATE(iss.SESSION_END_TIME, '%h%i%p')\n      END\n    )\n  ) AS Max_Sessions\nFROM IAP_SUBJECT_SESSION AS iss\nJOIN IAP_SUBJECT_DETAIL AS isd\n  ON iss.IAP_SUBJECT_SESSION_KEY = isd.IAP_SUBJECT_SESSION_KEY\nJOIN BUILDINGS AS b\n  ON b.BUILDING_NUMBER <> iss.SESSION_LOCATION"
    ],
    "oracle_sql": "SELECT COUNT(DISTINCT isd.ACTIVITY_TITLE) AS Total_Subjects, SUM(isd.FEE) AS Total_Fee, MIN((CASE WHEN TO_DATE(iss.SESSION_START_TIME, 'HH12:MIAM') > TO_DATE(iss.SESSION_END_TIME, 'HH12:MIAM') THEN TO_DATE('12:00PM', 'HH12:MIAM') ELSE TO_DATE(iss.SESSION_END_TIME, 'HH12:MIAM')END) - TO_DATE(iss.SESSION_START_TIME, 'HH12:MIAM') ) * 24 * 60 AS Min_Sessions, MAX((CASE WHEN TO_DATE(iss.SESSION_START_TIME, 'HH12:MIAM') > TO_DATE(iss.SESSION_END_TIME, 'HH12:MIAM') THEN TO_DATE('12:00PM', 'HH12:MIAM') ELSE TO_DATE(iss.SESSION_END_TIME, 'HH12:MIAM')END) - TO_DATE(iss.SESSION_START_TIME, 'HH12:MIAM') ) * 24 * 60 AS Max_Sessions FROM IAP_SUBJECT_SESSION iss JOIN IAP_SUBJECT_DETAIL isd ON iss.IAP_SUBJECT_SESSION_KEY = isd.IAP_SUBJECT_SESSION_KEY JOIN BUILDINGS b on b.BUILDING_NUMBER != iss.SESSION_LOCATION;",
    "gold_tables": [
      "dw#sep#IAP_SUBJECT_SESSION",
      "dw#sep#IAP_SUBJECT_DETAIL",
      "dw#sep#BUILDINGS"
    ],
    "mapping": {
      "subjects": [
        "IAP_SUBJECT_DETAIL.ACTIVITY_TITLE"
      ],
      "fee": [
        "IAP_SUBJECT_DETAIL.FEE"
      ],
      "sessions": [
        "IAP_SUBJECT_SESSION.SESSION_END_TIME",
        "IAP_SUBJECT_SESSION.SESSION_START_TIME"
      ]
    },
    "join_keys": [
      [
        "IAP_SUBJECT_SESSION.IAP_SUBJECT_SESSION_KEY",
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_SESSION_KEY"
      ],
      [
        "IAP_SUBJECT_SESSION.SESSION_LOCATION",
        "BUILDINGS.BUILDING_NUMBER"
      ]
    ],
    "original_sql": "SELECT\n  COUNT(DISTINCT isd.ACTIVITY_TITLE) AS Total_Subjects,\n  SUM(isd.FEE) AS Total_Fee,\n  MIN(\n    TIMESTAMPDIFF(\n      MINUTE,\n      STR_TO_DATE(iss.SESSION_START_TIME, '%h%i%p'),\n      CASE\n        WHEN STR_TO_DATE(iss.SESSION_START_TIME, '%h%i%p') > STR_TO_DATE(iss.SESSION_END_TIME, '%h%i%p')\n        THEN STR_TO_DATE('1200PM', '%h%i%p')\n        ELSE STR_TO_DATE(iss.SESSION_END_TIME, '%h%i%p')\n      END\n    )\n  ) AS Min_Sessions,\n  MAX(\n    TIMESTAMPDIFF(\n      MINUTE,\n      STR_TO_DATE(iss.SESSION_START_TIME, '%h%i%p'),\n      CASE\n        WHEN STR_TO_DATE(iss.SESSION_START_TIME, '%h%i%p') > STR_TO_DATE(iss.SESSION_END_TIME, '%h%i%p')\n        THEN STR_TO_DATE('1200PM', '%h%i%p')\n        ELSE STR_TO_DATE(iss.SESSION_END_TIME, '%h%i%p')\n      END\n    )\n  ) AS Max_Sessions\nFROM IAP_SUBJECT_SESSION AS iss\nJOIN IAP_SUBJECT_DETAIL AS isd\n  ON iss.IAP_SUBJECT_SESSION_KEY = isd.IAP_SUBJECT_SESSION_KEY\nJOIN BUILDINGS AS b\n  ON b.BUILDING_NUMBER <> iss.SESSION_LOCATION",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 14,
        "query_nested_count": 0,
        "query_aggregate_count": 4,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "91c45355c098",
    "question": "What is the school code, school name, full name of the department, course level, total number of courses, and total number of degree-granting courses for each school code, department, and course level?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  ssc.SCHOOL_CODE,\n  ssc.SCHOOL_NAME,\n  sd.DEPARTMENT_FULL_NAME,\n  scd.COURSE_LEVEL,\n  COUNT(DISTINCT scd.COURSE) AS Total_Courses,\n  SUM(CASE WHEN scd.IS_DEGREE_GRANTING = 'Y' THEN 1 ELSE 0 END) AS Total_Degree_Granting_Courses\nFROM SIS_COURSE_DESCRIPTION AS scd\nJOIN SIS_DEPARTMENT AS sd\n  ON scd.DEPARTMENT = sd.DEPARTMENT_CODE\nJOIN SIS_SUBJECT_CODE AS ssc\n  ON scd.COURSE = ssc.SUBJECT_CODE\nGROUP BY\n  ssc.SCHOOL_CODE,\n  ssc.SCHOOL_NAME,\n  scd.DEPARTMENT,\n  sd.DEPARTMENT_FULL_NAME,\n  scd.COURSE_LEVEL"
    ],
    "oracle_sql": "SELECT ssc.SCHOOL_CODE, ssc.SCHOOL_NAME, sd.DEPARTMENT_FULL_NAME, scd.COURSE_LEVEL, COUNT(DISTINCT scd.COURSE) AS Total_Courses, SUM(CASE WHEN scd.IS_DEGREE_GRANTING = 'Y' THEN 1 ELSE 0 END) AS Total_Degree_Granting_Courses FROM SIS_COURSE_DESCRIPTION scd JOIN SIS_DEPARTMENT sd ON scd.DEPARTMENT = sd.DEPARTMENT_CODE JOIN SIS_SUBJECT_CODE ssc ON scd.COURSE = ssc.SUBJECT_CODE GROUP BY ssc.SCHOOL_CODE, ssc.SCHOOL_NAME, scd.DEPARTMENT, sd.DEPARTMENT_FULL_NAME, scd.COURSE_LEVEL;",
    "gold_tables": [
      "dw#sep#SIS_COURSE_DESCRIPTION",
      "dw#sep#SIS_DEPARTMENT",
      "dw#sep#SIS_SUBJECT_CODE"
    ],
    "mapping": {
      "school code": [
        "SIS_SUBJECT_CODE.SCHOOL_CODE"
      ],
      "school name": [
        "SIS_SUBJECT_CODE.SCHOOL_NAME"
      ],
      "full name of the department": [
        "SIS_DEPARTMENT.DEPARTMENT_FULL_NAME"
      ],
      "course level": [
        "SIS_COURSE_DESCRIPTION.COURSE_LEVEL"
      ],
      "courses": [
        "SIS_COURSE_DESCRIPTION.COURSE"
      ],
      "degree-granting courses": [
        "SIS_COURSE_DESCRIPTION.IS_DEGREE_GRANTING"
      ]
    },
    "join_keys": [
      [
        "SIS_DEPARTMENT.DEPARTMENT_CODE",
        "SIS_COURSE_DESCRIPTION.DEPARTMENT"
      ],
      [
        "SIS_COURSE_DESCRIPTION.COURSE",
        "SIS_SUBJECT_CODE.SUBJECT_CODE"
      ]
    ],
    "original_sql": "SELECT\n  ssc.SCHOOL_CODE,\n  ssc.SCHOOL_NAME,\n  sd.DEPARTMENT_FULL_NAME,\n  scd.COURSE_LEVEL,\n  COUNT(DISTINCT scd.COURSE) AS Total_Courses,\n  SUM(CASE WHEN scd.IS_DEGREE_GRANTING = 'Y' THEN 1 ELSE 0 END) AS Total_Degree_Granting_Courses\nFROM SIS_COURSE_DESCRIPTION AS scd\nJOIN SIS_DEPARTMENT AS sd\n  ON scd.DEPARTMENT = sd.DEPARTMENT_CODE\nJOIN SIS_SUBJECT_CODE AS ssc\n  ON scd.COURSE = ssc.SUBJECT_CODE\nGROUP BY\n  ssc.SCHOOL_CODE,\n  ssc.SCHOOL_NAME,\n  scd.DEPARTMENT,\n  sd.DEPARTMENT_FULL_NAME,\n  scd.COURSE_LEVEL",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 15,
        "query_nested_count": 0,
        "query_aggregate_count": 2,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "694e683c6708",
    "question": "What are the different schools and departments that offer SIS courses? List their school code, school name, department code, department name, the total number of phone numbers, and the most common course level.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  ssc.SCHOOL_CODE,\n  ssc.SCHOOL_NAME,\n  sd.DEPARTMENT_CODE,\n  sad.SIS_ADMIN_DEPARTMENT_NAME,\n  COUNT(DISTINCT sad.DEPARTMENT_PHONE_NUMBER) AS Total_Phone_Numbers,\n  CASE\n    WHEN SUM(CASE WHEN scd.COURSE_LEVEL = 'U' THEN 1 ELSE 0 END) >= SUM(CASE WHEN scd.COURSE_LEVEL = 'G' THEN 1 ELSE 0 END)\n    THEN 'U'\n    ELSE 'G'\n  END AS Most_Common_Course_Level\nFROM SIS_ADMIN_DEPARTMENT AS sad\nJOIN SIS_DEPARTMENT AS sd\n  ON sad.SIS_ADMIN_DEPARTMENT_CODE = sd.DEPARTMENT_CODE\nJOIN SIS_COURSE_DESCRIPTION AS scd\n  ON sd.DEPARTMENT_CODE = scd.DEPARTMENT\nJOIN SIS_SUBJECT_CODE AS ssc\n  ON scd.COURSE = ssc.SUBJECT_CODE\nGROUP BY\n  ssc.SCHOOL_CODE,\n  ssc.SCHOOL_NAME,\n  sd.DEPARTMENT_CODE,\n  sad.SIS_ADMIN_DEPARTMENT_NAME"
    ],
    "oracle_sql": "SELECT ssc.SCHOOL_CODE, ssc.SCHOOL_NAME, sd.DEPARTMENT_CODE, sad.SIS_ADMIN_DEPARTMENT_NAME, COUNT(DISTINCT sad.DEPARTMENT_PHONE_NUMBER) AS Total_Phone_Numbers, CASE WHEN SUM(CASE WHEN scd.COURSE_LEVEL = 'U' THEN 1 ELSE 0 END) >= SUM(CASE WHEN scd.COURSE_LEVEL = 'G' THEN 1 ELSE 0 END) THEN 'U' ELSE 'G' END AS Most_Common_Course_Level FROM SIS_ADMIN_DEPARTMENT sad JOIN SIS_DEPARTMENT sd ON sad.SIS_ADMIN_DEPARTMENT_CODE = sd.DEPARTMENT_CODE JOIN SIS_COURSE_DESCRIPTION scd ON sd.DEPARTMENT_CODE = scd.DEPARTMENT JOIN SIS_SUBJECT_CODE ssc ON scd.COURSE = ssc.SUBJECT_CODE GROUP BY ssc.SCHOOL_CODE, ssc.SCHOOL_NAME, sd.DEPARTMENT_CODE, sad.SIS_ADMIN_DEPARTMENT_NAME;",
    "gold_tables": [
      "dw#sep#SIS_ADMIN_DEPARTMENT",
      "dw#sep#SIS_DEPARTMENT",
      "dw#sep#SIS_COURSE_DESCRIPTION",
      "dw#sep#SIS_SUBJECT_CODE"
    ],
    "mapping": {
      "school code": [
        "SIS_SUBJECT_CODE.SCHOOL_CODE"
      ],
      "school name": [
        "SIS_SUBJECT_CODE.SCHOOL_NAME"
      ],
      "department code": [
        "SIS_DEPARTMENT.DEPARTMENT_CODE"
      ],
      "department name": [
        "SIS_ADMIN_DEPARTMENT.SIS_ADMIN_DEPARTMENT_NAME"
      ],
      "phone numbers": [
        "SIS_ADMIN_DEPARTMENT.DEPARTMENT_PHONE_NUMBER"
      ],
      "course level": [
        "SIS_COURSE_DESCRIPTION.COURSE_LEVEL"
      ]
    },
    "join_keys": [
      [
        "SIS_ADMIN_DEPARTMENT.SIS_ADMIN_DEPARTMENT_CODE",
        "SIS_DEPARTMENT.DEPARTMENT_CODE"
      ],
      [
        "SIS_DEPARTMENT.DEPARTMENT_CODE",
        "SIS_COURSE_DESCRIPTION.DEPARTMENT"
      ],
      [
        "SIS_SUBJECT_CODE.SUBJECT_CODE",
        "SIS_COURSE_DESCRIPTION.COURSE"
      ]
    ],
    "original_sql": "SELECT\n  ssc.SCHOOL_CODE,\n  ssc.SCHOOL_NAME,\n  sd.DEPARTMENT_CODE,\n  sad.SIS_ADMIN_DEPARTMENT_NAME,\n  COUNT(DISTINCT sad.DEPARTMENT_PHONE_NUMBER) AS Total_Phone_Numbers,\n  CASE\n    WHEN SUM(CASE WHEN scd.COURSE_LEVEL = 'U' THEN 1 ELSE 0 END) >= SUM(CASE WHEN scd.COURSE_LEVEL = 'G' THEN 1 ELSE 0 END)\n    THEN 'U'\n    ELSE 'G'\n  END AS Most_Common_Course_Level\nFROM SIS_ADMIN_DEPARTMENT AS sad\nJOIN SIS_DEPARTMENT AS sd\n  ON sad.SIS_ADMIN_DEPARTMENT_CODE = sd.DEPARTMENT_CODE\nJOIN SIS_COURSE_DESCRIPTION AS scd\n  ON sd.DEPARTMENT_CODE = scd.DEPARTMENT\nJOIN SIS_SUBJECT_CODE AS ssc\n  ON scd.COURSE = ssc.SUBJECT_CODE\nGROUP BY\n  ssc.SCHOOL_CODE,\n  ssc.SCHOOL_NAME,\n  sd.DEPARTMENT_CODE,\n  sad.SIS_ADMIN_DEPARTMENT_NAME",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 17,
        "query_nested_count": 0,
        "query_aggregate_count": 3,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "47bdf43e685f",
    "question": "What is the school code, school name, DLC key, the graduate level, total number of SIS subjects, the minimum and maximum course numbers, and the total number of departments offering subjects for each school?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  ssc.SCHOOL_CODE,\n  ssc.SCHOOL_NAME,\n  sd.DLC_KEY,\n  GRADUATE_LEVEL,\n  COUNT(DISTINCT ssc.SUBJECT_CODE) AS Total_Subjects,\n  MIN(ssc.COURSE_NUMBER) AS Min_Course_Number,\n  MAX(ssc.COURSE_NUMBER) AS Max_Course_Number,\n  COUNT(DISTINCT sd.DEPARTMENT_CODE) AS Total_Departments\nFROM SIS_SUBJECT_CODE AS ssc\nJOIN SIS_COURSE_DESCRIPTION AS scd\n  ON ssc.SUBJECT_CODE = scd.COURSE\nJOIN SIS_DEPARTMENT AS sd\n  ON scd.DEPARTMENT = sd.DEPARTMENT_CODE\nGROUP BY\n  ssc.SCHOOL_CODE,\n  ssc.SCHOOL_NAME,\n  sd.DLC_KEY,\n  GRADUATE_LEVEL"
    ],
    "oracle_sql": "SELECT ssc.SCHOOL_CODE, ssc.SCHOOL_NAME, sd.DLC_KEY, GRADUATE_LEVEL, COUNT(DISTINCT ssc.SUBJECT_CODE) AS Total_Subjects, MIN(ssc.COURSE_NUMBER) AS Min_Course_Number, MAX(ssc.COURSE_NUMBER) AS Max_Course_Number, COUNT(DISTINCT sd.DEPARTMENT_CODE) AS Total_Departments FROM SIS_SUBJECT_CODE ssc JOIN SIS_COURSE_DESCRIPTION scd ON ssc.SUBJECT_CODE = scd.COURSE JOIN SIS_DEPARTMENT sd ON scd.DEPARTMENT = sd.DEPARTMENT_CODE GROUP BY ssc.SCHOOL_CODE, ssc.SCHOOL_NAME, sd.DLC_KEY,GRADUATE_LEVEL;",
    "gold_tables": [
      "dw#sep#SIS_SUBJECT_CODE",
      "dw#sep#SIS_COURSE_DESCRIPTION",
      "dw#sep#SIS_DEPARTMENT"
    ],
    "mapping": {
      "school code": [
        "SIS_SUBJECT_CODE.SCHOOL_CODE"
      ],
      "school name": [
        "SIS_SUBJECT_CODE.SCHOOL_NAME"
      ],
      "DLC key": [
        "SIS_DEPARTMENT.DLC_KEY"
      ],
      "graduate level": [
        "SIS_COURSE_DESCRIPTION.GRADUATE_LEVEL"
      ],
      "SIS subjects": [
        "SIS_SUBJECT_CODE.SUBJECT_CODE"
      ],
      "course numbers": [
        "SIS_SUBJECT_CODE.COURSE_NUMBER"
      ],
      "departments": [
        "SIS_DEPARTMENT.DEPARTMENT_CODE"
      ]
    },
    "join_keys": [
      [
        "SIS_SUBJECT_CODE.SUBJECT_CODE",
        "SIS_COURSE_DESCRIPTION.COURSE"
      ],
      [
        "SIS_COURSE_DESCRIPTION.DEPARTMENT",
        "SIS_DEPARTMENT.DEPARTMENT_CODE"
      ]
    ],
    "original_sql": "SELECT\n  ssc.SCHOOL_CODE,\n  ssc.SCHOOL_NAME,\n  sd.DLC_KEY,\n  GRADUATE_LEVEL,\n  COUNT(DISTINCT ssc.SUBJECT_CODE) AS Total_Subjects,\n  MIN(ssc.COURSE_NUMBER) AS Min_Course_Number,\n  MAX(ssc.COURSE_NUMBER) AS Max_Course_Number,\n  COUNT(DISTINCT sd.DEPARTMENT_CODE) AS Total_Departments\nFROM SIS_SUBJECT_CODE AS ssc\nJOIN SIS_COURSE_DESCRIPTION AS scd\n  ON ssc.SUBJECT_CODE = scd.COURSE\nJOIN SIS_DEPARTMENT AS sd\n  ON scd.DEPARTMENT = sd.DEPARTMENT_CODE\nGROUP BY\n  ssc.SCHOOL_CODE,\n  ssc.SCHOOL_NAME,\n  sd.DLC_KEY,\n  GRADUATE_LEVEL",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 16,
        "query_nested_count": 0,
        "query_aggregate_count": 4,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "a2fbf7fcc659",
    "question": "What is the building component, name of the building, square footage for all rooms, total number of floors, total number of rooms, total number of facility organizations, total number of supervisors, and total number of supervisees for each building component?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  sd.BUILDING_COMPONENT,\n  b.BUILDING_NAME,\n  sd.Total_Square_Footage,\n  COUNT(DISTINCT sf.FLOOR) AS Total_Number_Of_Floors,\n  COUNT(DISTINCT sd.BUILDING_ROOM) AS Total_Rooms,\n  COUNT(DISTINCT su.FCLT_ORGANIZATION_KEY) AS Total_Number_FCLT,\n  COUNT(DISTINCT ssu.MIT_ID) AS Total_Supervisors,\n  SUM(ssu.NUM_OF_SUPERVISEES) AS Total_Supervisees\nFROM (\n  SELECT\n    SPACE_DETAIL.*,\n    SUM(ROOM_SQUARE_FOOTAGE) OVER (PARTITION BY BUILDING_COMPONENT) AS Total_Square_Footage\n  FROM SPACE_DETAIL\n) AS sd\nJOIN BUILDINGS AS b\n  ON b.BUILDING_KEY = sd.BUILDING_KEY\nJOIN SPACE_FLOOR AS sf\n  ON sd.FLOOR_KEY = sf.FLOOR_KEY\nJOIN SPACE_UNIT AS su\n  ON sd.SPACE_UNIT_KEY = su.SPACE_UNIT_KEY\nJOIN SPACE_SUPERVISOR_USAGE AS ssu\n  ON su.DLC_KEY = ssu.DEPT_NAMES\nGROUP BY\n  sd.BUILDING_COMPONENT,\n  b.BUILDING_NAME,\n  sd.Total_Square_Footage"
    ],
    "oracle_sql": "SELECT sd.BUILDING_COMPONENT, b.BUILDING_NAME, sd.Total_Square_Footage, COUNT(DISTINCT SF.FLOOR) AS Total_Number_Of_Floors, COUNT(DISTINCT sd.BUILDING_ROOM) AS Total_Rooms, COUNT(DISTINCT su.FCLT_ORGANIZATION_KEY) as Total_Number_FCLT, COUNT(DISTINCT ssu.MIT_ID) AS Total_Supervisors, SUM(ssu.NUM_OF_SUPERVISEES) AS Total_Supervisees FROM (SELECT SPACE_DETAIL.*, SUM(ROOM_SQUARE_FOOTAGE) OVER (PARTITION BY BUILDING_COMPONENT) AS Total_Square_Footage FROM SPACE_DETAIL) sd JOIN BUILDINGS b ON b.BUILDING_KEY = sd.BUILDING_KEY JOIN SPACE_FLOOR sf ON sd.FLOOR_KEY = sf.FLOOR_KEY JOIN SPACE_UNIT su ON sd.SPACE_UNIT_KEY = su.SPACE_UNIT_KEY JOIN SPACE_SUPERVISOR_USAGE ssu ON su.DLC_KEY = ssu.DEPT_NAMES GROUP BY sd.BUILDING_COMPONENT, b.BUILDING_NAME, sd.Total_Square_Footage;",
    "gold_tables": [
      "dw#sep#SPACE_DETAIL",
      "dw#sep#BUILDINGS",
      "dw#sep#SPACE_FLOOR",
      "dw#sep#SPACE_UNIT",
      "dw#sep#SPACE_SUPERVISOR_USAGE"
    ],
    "mapping": {
      "building component": [
        "SPACE_DETAIL.BUILDING_COMPONENT"
      ],
      "name of the building": [
        "BUILDINGS.BUILDING_NAME"
      ],
      "square footage": [
        "SPACE_DETAIL.ROOM_SQUARE_FOOTAGE"
      ],
      "rooms": [
        "SPACE_DETAIL.BUILDING_ROOM"
      ],
      "floors": [
        "SPACE_FLOOR.FLOOR"
      ],
      "facility organizations": [
        "SPACE_UNIT.FCLT_ORGANIZATION_KEY"
      ],
      "supervisors": [
        "SPACE_SUPERVISOR_USAGE.MIT_ID"
      ],
      "supervisees": [
        "SPACE_SUPERVISOR_USAGE.NUM_OF_SUPERVISEES"
      ]
    },
    "join_keys": [
      [
        "SPACE_SUPERVISOR_USAGE.DEPT_NAMES",
        "SPACE_UNIT.DLC_KEY"
      ]
    ],
    "original_sql": "SELECT\n  sd.BUILDING_COMPONENT,\n  b.BUILDING_NAME,\n  sd.Total_Square_Footage,\n  COUNT(DISTINCT SF.FLOOR) AS Total_Number_Of_Floors,\n  COUNT(DISTINCT sd.BUILDING_ROOM) AS Total_Rooms,\n  COUNT(DISTINCT su.FCLT_ORGANIZATION_KEY) AS Total_Number_FCLT,\n  COUNT(DISTINCT ssu.MIT_ID) AS Total_Supervisors,\n  SUM(ssu.NUM_OF_SUPERVISEES) AS Total_Supervisees\nFROM (\n  SELECT\n    SPACE_DETAIL.*,\n    SUM(ROOM_SQUARE_FOOTAGE) OVER (PARTITION BY BUILDING_COMPONENT) AS Total_Square_Footage\n  FROM SPACE_DETAIL\n) AS sd\nJOIN BUILDINGS AS b\n  ON b.BUILDING_KEY = sd.BUILDING_KEY\nJOIN SPACE_FLOOR AS sf\n  ON sd.FLOOR_KEY = sf.FLOOR_KEY\nJOIN SPACE_UNIT AS su\n  ON sd.SPACE_UNIT_KEY = su.SPACE_UNIT_KEY\nJOIN SPACE_SUPERVISOR_USAGE AS ssu\n  ON su.DLC_KEY = ssu.DEPT_NAMES\nGROUP BY\n  sd.BUILDING_COMPONENT,\n  b.BUILDING_NAME,\n  sd.Total_Square_Footage",
    "meta": {
      "features": {
        "query_table_count": 5,
        "query_column_count": 22,
        "query_nested_count": 1,
        "query_aggregate_count": 6,
        "query_sort_count": 0,
        "query_window_func_count": 1,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_window_function"
      ]
    }
  },
  {
    "id": "991b8915e3f0",
    "question": "What is the DLC key, name of the DLC, total number of floors, total square footage, total number of facility organizations, total number of supervisors, total number of supervisees, and total building heights for each DLC?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  su.DLC_KEY,\n  fo.DLC_NAME,\n  COUNT(DISTINCT sf.FLOOR) AS Total_Number_Of_Floors,\n  sd.Total_Square_Footage,\n  COUNT(DISTINCT su.FCLT_ORGANIZATION_KEY) AS Total_Number_Facility,\n  COUNT(DISTINCT ssu.MIT_ID) AS Total_Supervisors,\n  SUM(ssu.NUM_OF_SUPERVISEES) AS Total_Supervisees,\n  SUM(fb.BUILDING_HEIGHT) AS Cumulative_Building_Height\nFROM (\n  SELECT\n    SPACE_DETAIL.*,\n    SUM(ROOM_SQUARE_FOOTAGE) OVER (PARTITION BY BUILDING_COMPONENT) AS Total_Square_Footage\n  FROM SPACE_DETAIL\n) AS sd\nJOIN FCLT_BUILDING AS fb\n  ON fb.FCLT_BUILDING_KEY = sd.BUILDING_KEY\nJOIN SPACE_FLOOR AS sf\n  ON sd.FLOOR_KEY = sf.FLOOR_KEY\nJOIN SPACE_UNIT AS su\n  ON sd.SPACE_UNIT_KEY = su.SPACE_UNIT_KEY\nJOIN SPACE_SUPERVISOR_USAGE AS ssu\n  ON su.DLC_KEY = ssu.DEPT_NAMES\nJOIN (\n  SELECT DISTINCT\n    DLC_KEY,\n    DLC_NAME\n  FROM FCLT_ORGANIZATION\n) AS fo\n  ON fo.DLC_KEY = su.DLC_KEY\nGROUP BY\n  su.DLC_KEY,\n  fo.DLC_NAME,\n  sd.Total_Square_Footage"
    ],
    "oracle_sql": "SELECT su.DLC_KEY, fo.DLC_NAME, COUNT(DISTINCT sf.FLOOR) AS Total_Number_Of_Floors, sd.Total_Square_Footage, COUNT(DISTINCT su.FCLT_ORGANIZATION_KEY) AS Total_Number_Facility, COUNT(DISTINCT ssu.MIT_ID) AS Total_Supervisors, SUM(ssu.NUM_OF_SUPERVISEES) AS Total_Supervisees, SUM(fb.BUILDING_HEIGHT) AS Cumulative_Building_Height FROM (SELECT SPACE_DETAIL.*, SUM(ROOM_SQUARE_FOOTAGE) OVER (PARTITION BY BUILDING_COMPONENT) AS Total_Square_Footage FROM SPACE_DETAIL) sd JOIN FCLT_BUILDING fb ON fb.FCLT_BUILDING_KEY = sd.BUILDING_KEY JOIN SPACE_FLOOR sf ON sd.FLOOR_KEY = sf.FLOOR_KEY JOIN SPACE_UNIT su ON sd.SPACE_UNIT_KEY = su.SPACE_UNIT_KEY JOIN SPACE_SUPERVISOR_USAGE ssu ON su.DLC_KEY = ssu.DEPT_NAMES JOIN (SELECT DISTINCT DLC_KEY, DLC_NAME FROM FCLT_ORGANIZATION) fo ON fo.DLC_KEY = su.DLC_KEY GROUP BY su.DLC_KEY, fo.DLC_NAME, sd.Total_Square_Footage;",
    "gold_tables": [
      "dw#sep#SPACE_DETAIL",
      "dw#sep#FCLT_BUILDING",
      "dw#sep#SPACE_FLOOR",
      "dw#sep#SPACE_UNIT",
      "dw#sep#SPACE_SUPERVISOR_USAGE",
      "dw#sep#FCLT_ORGANIZATION"
    ],
    "mapping": {
      "DLC key": [
        "SPACE_UNIT.DLC_KEY"
      ],
      "name of the DLC": [
        "FCLT_ORGANIZATION.DLC_NAME"
      ],
      "floors": [
        "SPACE_FLOOR.FLOOR"
      ],
      "square footage": [
        "SPACE_DETAIL.ROOM_SQUARE_FOOTAGE"
      ],
      "facility organizations": [
        "SPACE_UNIT.FCLT_ORGANIZATION_KEY"
      ],
      "supervisors": [
        "SPACE_SUPERVISOR_USAGE.MIT_ID"
      ],
      "supervisees": [
        "SPACE_SUPERVISOR_USAGE.NUM_OF_SUPERVISEES"
      ],
      "building heights": [
        "FCLT_BUILDING.BUILDING_HEIGHT"
      ]
    },
    "join_keys": [
      [
        "SPACE_UNIT.DLC_KEY",
        "SPACE_SUPERVISOR_USAGE.DEPT_NAMES"
      ]
    ],
    "original_sql": "SELECT\n  su.DLC_KEY,\n  fo.DLC_NAME,\n  COUNT(DISTINCT sf.FLOOR) AS Total_Number_Of_Floors,\n  sd.Total_Square_Footage,\n  COUNT(DISTINCT su.FCLT_ORGANIZATION_KEY) AS Total_Number_Facility,\n  COUNT(DISTINCT ssu.MIT_ID) AS Total_Supervisors,\n  SUM(ssu.NUM_OF_SUPERVISEES) AS Total_Supervisees,\n  SUM(fb.BUILDING_HEIGHT) AS Cumulative_Building_Height\nFROM (\n  SELECT\n    SPACE_DETAIL.*,\n    SUM(ROOM_SQUARE_FOOTAGE) OVER (PARTITION BY BUILDING_COMPONENT) AS Total_Square_Footage\n  FROM SPACE_DETAIL\n) AS sd\nJOIN FCLT_BUILDING AS fb\n  ON fb.FCLT_BUILDING_KEY = sd.BUILDING_KEY\nJOIN SPACE_FLOOR AS sf\n  ON sd.FLOOR_KEY = sf.FLOOR_KEY\nJOIN SPACE_UNIT AS su\n  ON sd.SPACE_UNIT_KEY = su.SPACE_UNIT_KEY\nJOIN SPACE_SUPERVISOR_USAGE AS ssu\n  ON su.DLC_KEY = ssu.DEPT_NAMES\nJOIN (\n  SELECT DISTINCT\n    DLC_KEY,\n    DLC_NAME\n  FROM FCLT_ORGANIZATION\n) AS fo\n  ON fo.DLC_KEY = su.DLC_KEY\nGROUP BY\n  su.DLC_KEY,\n  fo.DLC_NAME,\n  sd.Total_Square_Footage",
    "meta": {
      "features": {
        "query_table_count": 6,
        "query_column_count": 26,
        "query_nested_count": 2,
        "query_aggregate_count": 6,
        "query_sort_count": 0,
        "query_window_func_count": 1,
        "query_join_count": 5
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_window_function"
      ]
    }
  },
  {
    "id": "11e570ab6390",
    "question": "What is the department name, total number of types of TIP subjects, total number of enrolled students, the minimum and maximum rental new price for each department?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  tso.OFFER_DEPT_NAME,\n  COUNT(DISTINCT tso.SUBJECT_ID) AS Total_Subjects,\n  SUM(tso.NUM_ENROLLED_STUDENTS) AS Total_Enrolled_Students,\n  MIN(tm.RENTAL_NEW_PRICE) AS Min_Rental_New_Price,\n  MAX(tm.RENTAL_NEW_PRICE) AS Max_Rental_New_Price\nFROM TIP_SUBJECT_OFFERED AS tso\nJOIN TIP_DETAIL AS td\n  ON tso.TIP_SUBJECT_OFFERED_KEY = td.TIP_SUBJECT_OFFERED_KEY\nJOIN TIP_MATERIAL AS tm\n  ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY\nGROUP BY\n  tso.OFFER_DEPT_NAME"
    ],
    "oracle_sql": "SELECT tso.OFFER_DEPT_NAME, COUNT(distinct tso.SUBJECT_ID) AS Total_Subjects, SUM(tso.NUM_ENROLLED_STUDENTS) AS Total_Enrolled_Students, MIN(tm.RENTAL_NEW_PRICE) AS Min_Rental_New_Price, MAX(tm.RENTAL_NEW_PRICE) AS Max_Rental_New_Price FROM TIP_SUBJECT_OFFERED tso JOIN TIP_DETAIL td ON tso.TIP_SUBJECT_OFFERED_KEY = td.TIP_SUBJECT_OFFERED_KEY JOIN TIP_MATERIAL tm ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY GROUP BY tso.OFFER_DEPT_NAME;",
    "gold_tables": [
      "dw#sep#TIP_SUBJECT_OFFERED",
      "dw#sep#TIP_DETAIL",
      "dw#sep#TIP_MATERIAL"
    ],
    "mapping": {
      "department name": [
        "TIP_SUBJECT_OFFERED.OFFER_DEPT_NAME"
      ],
      "TIP subjects": [
        "TIP_SUBJECT_OFFERED.SUBJECT_ID"
      ],
      "enrolled students": [
        "TIP_SUBJECT_OFFERED.NUM_ENROLLED_STUDENTS"
      ],
      "rental new price": [
        "TIP_MATERIAL.RENTAL_NEW_PRICE"
      ]
    },
    "join_keys": [
      [
        "TIP_SUBJECT_OFFERED.TIP_SUBJECT_OFFERED_KEY",
        "TIP_DETAIL.TIP_SUBJECT_OFFERED_KEY"
      ],
      [
        "TIP_MATERIAL.TIP_MATERIAL_KEY",
        "TIP_DETAIL.TIP_MATERIAL_KEY"
      ]
    ],
    "original_sql": "SELECT\n  tso.OFFER_DEPT_NAME,\n  COUNT(DISTINCT tso.SUBJECT_ID) AS Total_Subjects,\n  SUM(tso.NUM_ENROLLED_STUDENTS) AS Total_Enrolled_Students,\n  MIN(tm.RENTAL_NEW_PRICE) AS Min_Rental_New_Price,\n  MAX(tm.RENTAL_NEW_PRICE) AS Max_Rental_New_Price\nFROM TIP_SUBJECT_OFFERED AS tso\nJOIN TIP_DETAIL AS td\n  ON tso.TIP_SUBJECT_OFFERED_KEY = td.TIP_SUBJECT_OFFERED_KEY\nJOIN TIP_MATERIAL AS tm\n  ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY\nGROUP BY\n  tso.OFFER_DEPT_NAME",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 10,
        "query_nested_count": 0,
        "query_aggregate_count": 4,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "ab29bc954037",
    "question": "What are the details of courses offered in the current academic term, including the academic year, term code, hgn code, the total number of types of courses, the average number of units, the department name, the name and email address of the person in charge?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  CC.ACADEMIC_YEAR,\n  CC.TERM_CODE,\n  SO.HGN_CODE,\n  COUNT(DISTINCT CC.SUBJECT_ID) AS TOTAL_COURSES,\n  AVG(CC.TOTAL_UNITS) AS AVERAGE_UNITS,\n  CC.DEPARTMENT_NAME,\n  ED.FULL_NAME AS RESPONSIBLE_FACULTY_NAME,\n  ED.EMAIL_ADDRESS AS RESPONSIBLE_FACULTY_EMAIL\nFROM COURSE_CATALOG_SUBJECT_OFFERED AS CC\nJOIN SUBJECT_OFFERED AS SO\n  ON CC.SUBJECT_ID = SO.SUBJECT_ID\nJOIN ACADEMIC_TERMS AS AT\n  ON CC.TERM_CODE = AT.TERM_CODE\nJOIN EMPLOYEE_DIRECTORY AS ED\n  ON SO.RESPONSIBLE_FACULTY_MIT_ID = ED.MIT_ID\nWHERE\n  AT.IS_CURRENT_TERM = 'Y'\nGROUP BY\n  CC.ACADEMIC_YEAR,\n  CC.TERM_CODE,\n  SO.HGN_CODE,\n  CC.DEPARTMENT_NAME,\n  ED.FULL_NAME,\n  ED.EMAIL_ADDRESS"
    ],
    "oracle_sql": "SELECT CC.ACADEMIC_YEAR, CC.TERM_CODE, SO.HGN_CODE, COUNT(DISTINCT CC.SUBJECT_ID) AS TOTAL_COURSES, AVG(CC.TOTAL_UNITS) AS AVERAGE_UNITS, CC.DEPARTMENT_NAME, ED.FULL_NAME AS RESPONSIBLE_FACULTY_NAME, ED.EMAIL_ADDRESS AS RESPONSIBLE_FACULTY_EMAIL FROM COURSE_CATALOG_SUBJECT_OFFERED CC JOIN SUBJECT_OFFERED SO ON CC.SUBJECT_ID = SO.SUBJECT_ID JOIN ACADEMIC_TERMS AT ON CC.TERM_CODE = AT.TERM_CODE JOIN EMPLOYEE_DIRECTORY ED ON SO.RESPONSIBLE_FACULTY_MIT_ID = ED.MIT_ID WHERE AT.IS_CURRENT_TERM = 'Y' GROUP BY CC.ACADEMIC_YEAR, CC.TERM_CODE, SO.HGN_CODE, CC.DEPARTMENT_NAME, ED.FULL_NAME, ED.EMAIL_ADDRESS;",
    "gold_tables": [
      "dw#sep#COURSE_CATALOG_SUBJECT_OFFERED",
      "dw#sep#SUBJECT_OFFERED",
      "dw#sep#ACADEMIC_TERMS",
      "dw#sep#EMPLOYEE_DIRECTORY"
    ],
    "mapping": {
      "current academic term": [
        "ACADEMIC_TERMS.IS_CURRENT_TERM"
      ],
      "academic year": [
        "COURSE_CATALOG_SUBJECT_OFFERED.ACADEMIC_YEAR"
      ],
      "term code": [
        "COURSE_CATALOG_SUBJECT_OFFERED.TERM_CODE"
      ],
      "hgn code": [
        "SUBJECT_OFFERED.HGN_CODE"
      ],
      "courses": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_ID"
      ],
      "number of units": [
        "COURSE_CATALOG_SUBJECT_OFFERED.TOTAL_UNITS"
      ],
      "department name": [
        "COURSE_CATALOG_SUBJECT_OFFERED.DEPARTMENT_NAME"
      ],
      "name": [
        "EMPLOYEE_DIRECTORY.FULL_NAME"
      ],
      "email address": [
        "EMPLOYEE_DIRECTORY.EMAIL_ADDRESS"
      ]
    },
    "join_keys": [
      [
        "SUBJECT_OFFERED.SUBJECT_ID",
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_ID"
      ],
      [
        "COURSE_CATALOG_SUBJECT_OFFERED.TERM_CODE",
        "ACADEMIC_TERMS.TERM_CODE"
      ],
      [
        "EMPLOYEE_DIRECTORY.MIT_ID",
        "SUBJECT_OFFERED.RESPONSIBLE_FACULTY_MIT_ID"
      ]
    ],
    "original_sql": "SELECT\n  CC.ACADEMIC_YEAR,\n  CC.TERM_CODE,\n  SO.HGN_CODE,\n  COUNT(DISTINCT CC.SUBJECT_ID) AS TOTAL_COURSES,\n  AVG(CC.TOTAL_UNITS) AS AVERAGE_UNITS,\n  CC.DEPARTMENT_NAME,\n  ED.FULL_NAME AS RESPONSIBLE_FACULTY_NAME,\n  ED.EMAIL_ADDRESS AS RESPONSIBLE_FACULTY_EMAIL\nFROM COURSE_CATALOG_SUBJECT_OFFERED AS CC\nJOIN SUBJECT_OFFERED AS SO\n  ON CC.SUBJECT_ID = SO.SUBJECT_ID\nJOIN ACADEMIC_TERMS AS AT\n  ON CC.TERM_CODE = AT.TERM_CODE\nJOIN EMPLOYEE_DIRECTORY AS ED\n  ON SO.RESPONSIBLE_FACULTY_MIT_ID = ED.MIT_ID\nWHERE\n  AT.IS_CURRENT_TERM = 'Y'\nGROUP BY\n  CC.ACADEMIC_YEAR,\n  CC.TERM_CODE,\n  SO.HGN_CODE,\n  CC.DEPARTMENT_NAME,\n  ED.FULL_NAME,\n  ED.EMAIL_ADDRESS",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 21,
        "query_nested_count": 0,
        "query_aggregate_count": 2,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "4a0b60ed047e",
    "question": "Retrieve information about the IAP subjects, including their titles, categories, session titles, session start time, session end time, sponsor names, and total number of sessions.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  isd.ACTIVITY_TITLE,\n  isc.IAP_CATEGORY_NAME,\n  iss.SESSION_TITLE,\n  iss.SESSION_START_TIME,\n  iss.SESSION_END_TIME,\n  isp.SPONSOR_NAME,\n  COUNT(DISTINCT iss.IAP_SUBJECT_SESSION_KEY) AS Total_Sessions\nFROM IAP_SUBJECT_DETAIL AS isd\nJOIN IAP_SUBJECT_CATEGORY AS isc\n  ON isd.IAP_SUBJECT_CATEGORY_KEY = isc.IAP_SUBJECT_CATEGORY_KEY\nJOIN IAP_SUBJECT_SESSION AS iss\n  ON isd.IAP_SUBJECT_SESSION_KEY = iss.IAP_SUBJECT_SESSION_KEY\nJOIN IAP_SUBJECT_SPONSOR AS isp\n  ON isd.IAP_SUBJECT_SPONSOR_KEY = isp.IAP_SUBJECT_SPONSOR_KEY\nGROUP BY\n  isd.ACTIVITY_TITLE,\n  isc.IAP_CATEGORY_NAME,\n  iss.SESSION_TITLE,\n  iss.SESSION_START_TIME,\n  iss.SESSION_END_TIME,\n  isp.SPONSOR_NAME"
    ],
    "oracle_sql": "SELECT isd.ACTIVITY_TITLE, isc.IAP_CATEGORY_NAME, iss.SESSION_TITLE, iss.SESSION_START_TIME, iss.SESSION_END_TIME, isp.SPONSOR_NAME, COUNT(distinct iss.IAP_SUBJECT_SESSION_KEY) AS Total_Sessions FROM IAP_SUBJECT_DETAIL isd JOIN IAP_SUBJECT_CATEGORY isc ON isd.IAP_SUBJECT_CATEGORY_KEY = isc.IAP_SUBJECT_CATEGORY_KEY JOIN IAP_SUBJECT_SESSION iss ON isd.IAP_SUBJECT_SESSION_KEY = iss.IAP_SUBJECT_SESSION_KEY JOIN IAP_SUBJECT_SPONSOR isp ON isd.IAP_SUBJECT_SPONSOR_KEY = isp.IAP_SUBJECT_SPONSOR_KEY GROUP BY isd.ACTIVITY_TITLE, isc.IAP_CATEGORY_NAME, iss.SESSION_TITLE, iss.SESSION_START_TIME, iss.SESSION_END_TIME, isp.SPONSOR_NAME;",
    "gold_tables": [
      "dw#sep#IAP_SUBJECT_DETAIL",
      "dw#sep#IAP_SUBJECT_CATEGORY",
      "dw#sep#IAP_SUBJECT_SESSION",
      "dw#sep#IAP_SUBJECT_SPONSOR"
    ],
    "mapping": {
      "titles": [
        "IAP_SUBJECT_DETAIL.ACTIVITY_TITLE"
      ],
      "categories": [
        "IAP_SUBJECT_CATEGORY.IAP_CATEGORY_NAME"
      ],
      "session titles": [
        "IAP_SUBJECT_SESSION.SESSION_TITLE"
      ],
      "session start time": [
        "IAP_SUBJECT_SESSION.SESSION_START_TIME"
      ],
      "session end time": [
        "IAP_SUBJECT_SESSION.SESSION_END_TIME"
      ],
      "sponsor names": [
        "IAP_SUBJECT_SPONSOR.SPONSOR_NAME"
      ],
      "sessions": [
        "IAP_SUBJECT_SESSION.IAP_SUBJECT_SESSION_KEY"
      ]
    },
    "join_keys": [
      [
        "IAP_SUBJECT_CATEGORY.IAP_SUBJECT_CATEGORY_KEY",
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_CATEGORY_KEY"
      ],
      [
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_SESSION_KEY",
        "IAP_SUBJECT_SESSION.IAP_SUBJECT_SESSION_KEY"
      ],
      [
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_SPONSOR_KEY",
        "IAP_SUBJECT_SPONSOR.IAP_SUBJECT_SPONSOR_KEY"
      ]
    ],
    "original_sql": "SELECT\n  isd.ACTIVITY_TITLE,\n  isc.IAP_CATEGORY_NAME,\n  iss.SESSION_TITLE,\n  iss.SESSION_START_TIME,\n  iss.SESSION_END_TIME,\n  isp.SPONSOR_NAME,\n  COUNT(DISTINCT iss.IAP_SUBJECT_SESSION_KEY) AS Total_Sessions\nFROM IAP_SUBJECT_DETAIL AS isd\nJOIN IAP_SUBJECT_CATEGORY AS isc\n  ON isd.IAP_SUBJECT_CATEGORY_KEY = isc.IAP_SUBJECT_CATEGORY_KEY\nJOIN IAP_SUBJECT_SESSION AS iss\n  ON isd.IAP_SUBJECT_SESSION_KEY = iss.IAP_SUBJECT_SESSION_KEY\nJOIN IAP_SUBJECT_SPONSOR AS isp\n  ON isd.IAP_SUBJECT_SPONSOR_KEY = isp.IAP_SUBJECT_SPONSOR_KEY\nGROUP BY\n  isd.ACTIVITY_TITLE,\n  isc.IAP_CATEGORY_NAME,\n  iss.SESSION_TITLE,\n  iss.SESSION_START_TIME,\n  iss.SESSION_END_TIME,\n  isp.SPONSOR_NAME",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 19,
        "query_nested_count": 0,
        "query_aggregate_count": 1,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "f59e8683a40f",
    "question": "Show the department names, the corresponding SIS subject code, subject code descriptions, graduate level, and the total number of courses per department.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  sd.DEPARTMENT_NAME,\n  sc.SUBJECT_CODE,\n  sc.SUBJECT_CODE_DESC,\n  scd.GRADUATE_LEVEL,\n  Total_Courses.Total_Courses\nFROM SIS_DEPARTMENT AS sd\nJOIN SIS_COURSE_DESCRIPTION AS scd\n  ON sd.DEPARTMENT_CODE = scd.DEPARTMENT\nJOIN SIS_SUBJECT_CODE AS sc\n  ON scd.COURSE = sc.COURSE_NUMBER\nJOIN (\n  SELECT\n    sd.DEPARTMENT_NAME,\n    COUNT(DISTINCT COURSE_NUMBER) AS Total_Courses\n  FROM SIS_DEPARTMENT AS sd\n  JOIN SIS_COURSE_DESCRIPTION AS scd\n    ON sd.DEPARTMENT_CODE = scd.DEPARTMENT\n  JOIN SIS_SUBJECT_CODE AS sc\n    ON scd.COURSE = sc.COURSE_NUMBER\n  GROUP BY\n    DEPARTMENT_NAME\n) AS Total_Courses\n  ON sd.DEPARTMENT_NAME = Total_Courses.DEPARTMENT_NAME"
    ],
    "oracle_sql": "SELECT sd.DEPARTMENT_NAME, sc.SUBJECT_CODE, sc.SUBJECT_CODE_DESC, scd.GRADUATE_LEVEL, COUNT(DISTINCT sc.COURSE_NUMBER) OVER (PARTITION BY sd.DEPARTMENT_NAME) AS Total_Courses FROM SIS_DEPARTMENT sd JOIN SIS_COURSE_DESCRIPTION scd ON sd.DEPARTMENT_CODE = scd.DEPARTMENT JOIN SIS_SUBJECT_CODE sc ON scd.COURSE = sc.COURSE_NUMBER;",
    "gold_tables": [
      "dw#sep#SIS_DEPARTMENT",
      "dw#sep#SIS_COURSE_DESCRIPTION",
      "dw#sep#SIS_SUBJECT_CODE"
    ],
    "mapping": {
      "department names": [
        "SIS_DEPARTMENT.DEPARTMENT_NAME"
      ],
      "SIS subject code": [
        "SIS_SUBJECT_CODE.SUBJECT_CODE"
      ],
      "subject code descriptions": [
        "SIS_SUBJECT_CODE.SUBJECT_CODE_DESC"
      ],
      "graduate level": [
        "SIS_COURSE_DESCRIPTION.GRADUATE_LEVEL"
      ],
      "courses": [
        "SIS_SUBJECT_CODE.COURSE_NUMBER"
      ]
    },
    "join_keys": [
      [
        "SIS_COURSE_DESCRIPTION.DEPARTMENT",
        "SIS_DEPARTMENT.DEPARTMENT_CODE"
      ],
      [
        "SIS_SUBJECT_CODE.COURSE_NUMBER",
        "SIS_COURSE_DESCRIPTION.COURSE"
      ]
    ],
    "original_sql": "SELECT\n  sd.DEPARTMENT_NAME,\n  sc.SUBJECT_CODE,\n  sc.SUBJECT_CODE_DESC,\n  scd.GRADUATE_LEVEL,\n  Total_Courses.Total_Courses\nFROM SIS_DEPARTMENT AS sd\nJOIN SIS_COURSE_DESCRIPTION AS scd\n  ON sd.DEPARTMENT_CODE = scd.DEPARTMENT\nJOIN SIS_SUBJECT_CODE AS sc\n  ON scd.COURSE = sc.COURSE_NUMBER\nJOIN (\n  SELECT\n    sd.DEPARTMENT_NAME,\n    COUNT(DISTINCT COURSE_NUMBER) AS Total_Courses\n  FROM SIS_DEPARTMENT AS sd\n  JOIN SIS_COURSE_DESCRIPTION AS scd\n    ON sd.DEPARTMENT_CODE = scd.DEPARTMENT\n  JOIN SIS_SUBJECT_CODE AS sc\n    ON scd.COURSE = sc.COURSE_NUMBER\n  GROUP BY\n    DEPARTMENT_NAME\n) AS Total_Courses\n  ON sd.DEPARTMENT_NAME = Total_Courses.DEPARTMENT_NAME",
    "meta": {
      "features": {
        "query_table_count": 6,
        "query_column_count": 18,
        "query_nested_count": 1,
        "query_aggregate_count": 1,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 5
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "05e0a00f72e5",
    "question": "For each term, list the term code, the term description, whether the term is current or not, and the total number of types of CIS courses.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  at.TERM_CODE,\n  at.TERM_DESCRIPTION,\n  at.IS_CURRENT_TERM2,\n  COUNT(DISTINCT at.SUBJECT_ID) AS Total_SUBJECTS\nFROM (\n  SELECT\n    at.*,\n    SUBJECT_ID,\n    CASE\n      WHEN at.ACADEMIC_YEAR = YEAR(CURRENT_DATE) AND atp.IS_CURRENT_TERM = 'Y'\n      THEN 'Y'\n      ELSE 'N'\n    END AS IS_CURRENT_TERM2\n  FROM (\n    SELECT\n      ACADEMIC_TERMS_ALL.*,\n      CASE WHEN TERM_CODE LIKE '%FA' THEN 'Y' END AS A,\n      CASE WHEN TERM_CODE LIKE '%JA' THEN 'Y' END AS B,\n      CASE WHEN TERM_CODE LIKE '%SP' THEN 'Y' END AS C,\n      CASE WHEN TERM_CODE LIKE '%SU' THEN 'Y' END AS D\n    FROM ACADEMIC_TERMS_ALL\n  ) AS at\n  LEFT OUTER JOIN ACADEMIC_TERM_PARAMETER AS atp\n    ON at.TERM_CODE = atp.TERM_CODE\n  LEFT OUTER JOIN CIS_COURSE_CATALOG AS ccc\n    ON ccc.ACADEMIC_YEAR = at.ACADEMIC_YEAR\n    AND (\n      IS_OFFERED_FALL_TERM = at.A\n      OR IS_OFFERED_IAP = at.B\n      OR IS_OFFERED_SPRING_TERM = at.C\n      OR IS_OFFERED_SUMMER_TERM = at.D\n    )\n) AS at\nGROUP BY\n  at.TERM_CODE,\n  at.TERM_DESCRIPTION,\n  at.IS_CURRENT_TERM2"
    ],
    "oracle_sql": "SELECT at.TERM_CODE, at.TERM_DESCRIPTION, at.IS_CURRENT_TERM2, COUNT(distinct at.SUBJECT_ID) AS Total_SUBJECTS FROM (SELECT at.*, SUBJECT_ID, CASE WHEN at.ACADEMIC_YEAR = EXTRACT(YEAR FROM SYSDATE) AND atp.IS_CURRENT_TERM = 'Y' THEN 'Y' ELSE 'N' END as IS_CURRENT_TERM2 FROM (SELECT ACADEMIC_TERMS_ALL.*, CASE WHEN TERM_CODE LIKE '%FA' THEN 'Y' END AS A ,CASE WHEN TERM_CODE LIKE '%JA' THEN 'Y' END AS B,CASE WHEN TERM_CODE LIKE '%SP' THEN 'Y' END AS C,CASE WHEN TERM_CODE LIKE '%SU' THEN 'Y' END AS D FROM ACADEMIC_TERMS_ALL) at LEFT OUTER JOIN ACADEMIC_TERM_PARAMETER atp ON at.TERM_CODE = atp.TERM_CODE LEFT OUTER JOIN CIS_COURSE_CATALOG ccc ON ccc.ACADEMIC_YEAR = at.ACADEMIC_YEAR AND (IS_OFFERED_FALL_TERM = at.A OR IS_OFFERED_IAP = at.B OR IS_OFFERED_SPRING_TERM = at.C OR IS_OFFERED_SPRING_TERM = at.C OR IS_OFFERED_SUMMER_TERM = at.D)) at GROUP BY at.TERM_CODE, at.TERM_DESCRIPTION, at.IS_CURRENT_TERM2;",
    "gold_tables": [
      "dw#sep#ACADEMIC_TERMS_ALL",
      "dw#sep#ACADEMIC_TERM_PARAMETER",
      "dw#sep#CIS_COURSE_CATALOG"
    ],
    "mapping": {
      "term code": [
        "ACADEMIC_TERMS_ALL.TERM_CODE"
      ],
      "term description": [
        "ACADEMIC_TERMS_ALL.TERM_DESCRIPTION"
      ],
      "term is current or not": [
        "ACADEMIC_TERM_PARAMETER.IS_CURRENT_TERM"
      ],
      "CIS courses": [
        "CIS_COURSE_CATALOG.SUBJECT_ID"
      ]
    },
    "join_keys": [],
    "original_sql": "SELECT\n  at.TERM_CODE,\n  at.TERM_DESCRIPTION,\n  at.IS_CURRENT_TERM2,\n  COUNT(DISTINCT at.SUBJECT_ID) AS Total_SUBJECTS\nFROM (\n  SELECT\n    at.*,\n    SUBJECT_ID,\n    CASE\n      WHEN at.ACADEMIC_YEAR = YEAR(CURRENT_DATE) AND atp.IS_CURRENT_TERM = 'Y'\n      THEN 'Y'\n      ELSE 'N'\n    END AS IS_CURRENT_TERM2\n  FROM (\n    SELECT\n      ACADEMIC_TERMS_ALL.*,\n      CASE WHEN TERM_CODE LIKE '%FA' THEN 'Y' END AS A,\n      CASE WHEN TERM_CODE LIKE '%JA' THEN 'Y' END AS B,\n      CASE WHEN TERM_CODE LIKE '%SP' THEN 'Y' END AS C,\n      CASE WHEN TERM_CODE LIKE '%SU' THEN 'Y' END AS D\n    FROM ACADEMIC_TERMS_ALL\n  ) AS at\n  LEFT OUTER JOIN ACADEMIC_TERM_PARAMETER AS atp\n    ON at.TERM_CODE = atp.TERM_CODE\n  LEFT OUTER JOIN CIS_COURSE_CATALOG AS ccc\n    ON ccc.ACADEMIC_YEAR = at.ACADEMIC_YEAR\n    AND (\n      IS_OFFERED_FALL_TERM = at.A\n      OR IS_OFFERED_IAP = at.B\n      OR IS_OFFERED_SPRING_TERM = at.C\n      OR IS_OFFERED_SUMMER_TERM = at.D\n    )\n) AS at\nGROUP BY\n  at.TERM_CODE,\n  at.TERM_DESCRIPTION,\n  at.IS_CURRENT_TERM2",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 28,
        "query_nested_count": 2,
        "query_aggregate_count": 1,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "a49e228fc400",
    "question": "What is the author, school name, material status, total record counts, and total number of types of courses for each author and school?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  tm.AUTHOR,\n  sd.SCHOOL_NAME,\n  tms.TIP_MATERIAL_STATUS,\n  SUM(td.RECORD_COUNT) AS Total_Record_Count,\n  COUNT(DISTINCT td.SUBJECT_ID) AS Total_Subject\nFROM TIP_DETAIL AS td\nJOIN (\n  SELECT\n    TIP_MATERIAL_KEY,\n    CASE\n      WHEN LOCATE(';', AUTHOR) > 0\n      THEN SUBSTRING(AUTHOR, 1, LOCATE(';', AUTHOR) - 1)\n      ELSE AUTHOR\n    END AS AUTHOR\n  FROM TIP_MATERIAL\n) AS tm\n  ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY\nJOIN TIP_MATERIAL_STATUS AS tms\n  ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY\nJOIN TIP_SUBJECT_OFFERED AS tso\n  ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY\nJOIN STUDENT_DEPARTMENT AS sd\n  ON tso.OFFER_DEPT_CODE = sd.DEPARTMENT_CODE\nGROUP BY\n  tm.AUTHOR,\n  tms.TIP_MATERIAL_STATUS,\n  sd.SCHOOL_NAME"
    ],
    "oracle_sql": "SELECT tm.AUTHOR, sd.SCHOOL_NAME, tms.TIP_MATERIAL_STATUS, SUM(td.RECORD_COUNT) AS Total_Record_Count , COUNT(distinct td.SUBJECT_ID) AS Total_Subject FROM TIP_DETAIL td JOIN (select TIP_MATERIAL_KEY, CASE WHEN INSTR(AUTHOR, ';') > 0 THEN SUBSTR(AUTHOR, 1, INSTR(AUTHOR, ';') - 1) ELSE AUTHOR END AS AUTHOR FROM TIP_MATERIAL) tm ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY JOIN TIP_MATERIAL_STATUS tms ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY JOIN TIP_SUBJECT_OFFERED tso ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY JOIN STUDENT_DEPARTMENT sd ON tso.OFFER_DEPT_CODE = sd.DEPARTMENT_CODE GROUP BY tm.AUTHOR, tms.TIP_MATERIAL_STATUS, sd.SCHOOL_NAME;",
    "gold_tables": [
      "dw#sep#TIP_DETAIL",
      "dw#sep#TIP_MATERIAL",
      "dw#sep#TIP_MATERIAL_STATUS",
      "dw#sep#TIP_SUBJECT_OFFERED",
      "dw#sep#STUDENT_DEPARTMENT"
    ],
    "mapping": {
      "author": [
        "TIP_MATERIAL.AUTHOR"
      ],
      "school name": [
        "STUDENT_DEPARTMENT.SCHOOL_NAME"
      ],
      "material status": [
        "TIP_MATERIAL_STATUS.TIP_MATERIAL_STATUS"
      ],
      "record counts": [
        "TIP_DETAIL.RECORD_COUNT"
      ],
      "courses": [
        "TIP_DETAIL.SUBJECT_ID"
      ]
    },
    "join_keys": [
      [
        "TIP_MATERIAL_STATUS.TIP_MATERIAL_STATUS_KEY",
        "TIP_DETAIL.TIP_MATERIAL_STATUS_KEY"
      ],
      [
        "TIP_SUBJECT_OFFERED.TIP_SUBJECT_OFFERED_KEY",
        "TIP_DETAIL.TIP_SUBJECT_OFFERED_KEY"
      ],
      [
        "STUDENT_DEPARTMENT.DEPARTMENT_CODE",
        "TIP_SUBJECT_OFFERED.OFFER_DEPT_CODE"
      ]
    ],
    "original_sql": "SELECT\n  tm.AUTHOR,\n  sd.SCHOOL_NAME,\n  tms.TIP_MATERIAL_STATUS,\n  SUM(td.RECORD_COUNT) AS Total_Record_Count,\n  COUNT(DISTINCT td.SUBJECT_ID) AS Total_Subject\nFROM TIP_DETAIL AS td\nJOIN (\n  SELECT\n    TIP_MATERIAL_KEY,\n    CASE\n      WHEN LOCATE(';', AUTHOR) > 0\n      THEN SUBSTRING(AUTHOR, 1, LOCATE(';', AUTHOR) - 1)\n      ELSE AUTHOR\n    END AS AUTHOR\n  FROM TIP_MATERIAL\n) AS tm\n  ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY\nJOIN TIP_MATERIAL_STATUS AS tms\n  ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY\nJOIN TIP_SUBJECT_OFFERED AS tso\n  ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY\nJOIN STUDENT_DEPARTMENT AS sd\n  ON tso.OFFER_DEPT_CODE = sd.DEPARTMENT_CODE\nGROUP BY\n  tm.AUTHOR,\n  tms.TIP_MATERIAL_STATUS,\n  sd.SCHOOL_NAME",
    "meta": {
      "features": {
        "query_table_count": 5,
        "query_column_count": 21,
        "query_nested_count": 1,
        "query_aggregate_count": 2,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "62789ab6e4d4",
    "question": "What is the course number, subject title, material status, the total, min, and max new shelf price, the total, min, and max used shelf price, total number of schools and the total number of materials for each TIP subject and material status?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  tso.COURSE_NUMBER,\n  tso.SUBJECT_TITLE,\n  tms.TIP_MATERIAL_STATUS,\n  SUM(tm.NEW_SHELF_PRICE) AS Total_New_Price,\n  MIN(tm.NEW_SHELF_PRICE) AS Min_New_Price,\n  MAX(tm.NEW_SHELF_PRICE) AS Max_New_Price,\n  SUM(tm.USED_SHELF_PRICE) AS Total_Used_Price,\n  MIN(tm.USED_SHELF_PRICE) AS Min_Used_Price,\n  MAX(tm.USED_SHELF_PRICE) AS Max_Used_Price,\n  COUNT(DISTINCT OFFER_SCHOOL_NAME) AS Total_Num_Schools,\n  COUNT(DISTINCT td.TIP_MATERIAL_KEY) AS Total_Num_Materials\nFROM TIP_DETAIL AS td\nJOIN TIP_MATERIAL AS tm\n  ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY\nJOIN TIP_MATERIAL_STATUS AS tms\n  ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY\nJOIN TIP_SUBJECT_OFFERED AS tso\n  ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY\nGROUP BY\n  tso.COURSE_NUMBER,\n  tso.SUBJECT_TITLE,\n  tms.TIP_MATERIAL_STATUS"
    ],
    "oracle_sql": "SELECT tso.COURSE_NUMBER, tso.SUBJECT_TITLE, tms.TIP_MATERIAL_STATUS, SUM(tm.NEW_SHELF_PRICE) as Total_New_Price, Min(tm.NEW_SHELF_PRICE) as Min_New_Price, Max(tm.NEW_SHELF_PRICE) as Max_New_Price, SUM(tm.USED_SHELF_PRICE) as Total_Used_Price, Min(tm.USED_SHELF_PRICE) as Min_Used_Price, Max(tm.USED_SHELF_PRICE) as Max_Used_Price, COUNT(DISTINCT OFFER_SCHOOL_NAME) AS Total_Num_Schools, COUNT(distinct td.TIP_MATERIAL_KEY) AS Total_Num_Materials FROM TIP_DETAIL td JOIN TIP_MATERIAL tm ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY JOIN TIP_MATERIAL_STATUS tms ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY JOIN TIP_SUBJECT_OFFERED tso ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY GROUP BY tso.COURSE_NUMBER, tso.SUBJECT_TITLE, tms.TIP_MATERIAL_STATUS;",
    "gold_tables": [
      "dw#sep#TIP_DETAIL",
      "dw#sep#TIP_MATERIAL",
      "dw#sep#TIP_MATERIAL_STATUS",
      "dw#sep#TIP_SUBJECT_OFFERED"
    ],
    "mapping": {
      "course number": [
        "TIP_SUBJECT_OFFERED.COURSE_NUMBER"
      ],
      "subject title": [
        "TIP_SUBJECT_OFFERED.SUBJECT_TITLE"
      ],
      "material status": [
        "TIP_MATERIAL_STATUS.TIP_MATERIAL_STATUS"
      ],
      "new shelf price": [
        "TIP_MATERIAL.NEW_SHELF_PRICE"
      ],
      "used shelf price": [
        "TIP_MATERIAL.USED_SHELF_PRICE"
      ],
      "schools": [
        "TIP_SUBJECT_OFFERED.OFFER_SCHOOL_NAME"
      ],
      "materials": [
        "TIP_DETAIL.TIP_MATERIAL_KEY"
      ],
      "TIP subject": [
        "TIP_SUBJECT_OFFERED.SUBJECT_TITLE"
      ]
    },
    "join_keys": [
      [
        "TIP_DETAIL.TIP_MATERIAL_KEY",
        "TIP_MATERIAL.TIP_MATERIAL_KEY"
      ],
      [
        "TIP_DETAIL.TIP_MATERIAL_STATUS_KEY",
        "TIP_MATERIAL_STATUS.TIP_MATERIAL_STATUS_KEY"
      ],
      [
        "TIP_DETAIL.TIP_SUBJECT_OFFERED_KEY",
        "TIP_SUBJECT_OFFERED.TIP_SUBJECT_OFFERED_KEY"
      ]
    ],
    "original_sql": "SELECT\n  tso.COURSE_NUMBER,\n  tso.SUBJECT_TITLE,\n  tms.TIP_MATERIAL_STATUS,\n  SUM(tm.NEW_SHELF_PRICE) AS Total_New_Price,\n  MIN(tm.NEW_SHELF_PRICE) AS Min_New_Price,\n  MAX(tm.NEW_SHELF_PRICE) AS Max_New_Price,\n  SUM(tm.USED_SHELF_PRICE) AS Total_Used_Price,\n  MIN(tm.USED_SHELF_PRICE) AS Min_Used_Price,\n  MAX(tm.USED_SHELF_PRICE) AS Max_Used_Price,\n  COUNT(DISTINCT OFFER_SCHOOL_NAME) AS Total_Num_Schools,\n  COUNT(DISTINCT td.TIP_MATERIAL_KEY) AS Total_Num_Materials\nFROM TIP_DETAIL AS td\nJOIN TIP_MATERIAL AS tm\n  ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY\nJOIN TIP_MATERIAL_STATUS AS tms\n  ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY\nJOIN TIP_SUBJECT_OFFERED AS tso\n  ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY\nGROUP BY\n  tso.COURSE_NUMBER,\n  tso.SUBJECT_TITLE,\n  tms.TIP_MATERIAL_STATUS",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 20,
        "query_nested_count": 0,
        "query_aggregate_count": 8,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "e4fd40ca4f40",
    "question": "What is material status, the total number of materials, the total number of subjects, the total number of schools, and the most recent publication year for each material status?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  tms.TIP_MATERIAL_STATUS,\n  COUNT(DISTINCT td.TIP_MATERIAL_KEY) AS Total_Materials,\n  COUNT(DISTINCT td.SUBJECT_ID) AS Total_Subjects,\n  COUNT(DISTINCT sd.SCHOOL_NAME) AS Total_Num_Schools,\n  MAX(tm.YEAR) AS Most_Recent_Year\nFROM TIP_DETAIL AS td\nJOIN TIP_MATERIAL AS tm\n  ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY\nJOIN TIP_MATERIAL_STATUS AS tms\n  ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY\nJOIN TIP_SUBJECT_OFFERED AS tso\n  ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY\nJOIN STUDENT_DEPARTMENT AS sd\n  ON tso.OFFER_DEPT_CODE = sd.DEPARTMENT_CODE\nGROUP BY\n  tms.TIP_MATERIAL_STATUS"
    ],
    "oracle_sql": "SELECT tms.TIP_MATERIAL_STATUS, COUNT(DISTINCT td.TIP_MATERIAL_KEY) AS Total_Materials, COUNT(DISTINCT td.SUBJECT_ID) AS Total_Subjects, COUNT(DISTINCT sd.SCHOOL_NAME) AS Total_Num_Schools, MAX(tm.YEAR) AS Most_Recent_Year FROM TIP_DETAIL td JOIN TIP_MATERIAL tm ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY JOIN TIP_MATERIAL_STATUS tms ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY JOIN TIP_SUBJECT_OFFERED tso ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY JOIN STUDENT_DEPARTMENT sd ON tso.OFFER_DEPT_CODE = sd.DEPARTMENT_CODE GROUP BY tms.TIP_MATERIAL_STATUS;",
    "gold_tables": [
      "dw#sep#TIP_DETAIL",
      "dw#sep#TIP_MATERIAL",
      "dw#sep#TIP_MATERIAL_STATUS",
      "dw#sep#TIP_SUBJECT_OFFERED",
      "dw#sep#STUDENT_DEPARTMENT"
    ],
    "mapping": {
      "material status": [
        "TIP_MATERIAL_STATUS.TIP_MATERIAL_STATUS"
      ],
      "materials": [
        "TIP_DETAIL.TIP_MATERIAL_KEY"
      ],
      "subjects": [
        "TIP_DETAIL.SUBJECT_ID"
      ],
      "schools": [
        "STUDENT_DEPARTMENT.SCHOOL_NAME"
      ],
      "publication year": [
        "TIP_MATERIAL.YEAR"
      ]
    },
    "join_keys": [
      [
        "TIP_MATERIAL.TIP_MATERIAL_KEY",
        "TIP_DETAIL.TIP_MATERIAL_KEY"
      ],
      [
        "TIP_MATERIAL_STATUS.TIP_MATERIAL_STATUS_KEY",
        "TIP_DETAIL.TIP_MATERIAL_STATUS_KEY"
      ],
      [
        "TIP_DETAIL.TIP_SUBJECT_OFFERED_KEY",
        "TIP_SUBJECT_OFFERED.TIP_SUBJECT_OFFERED_KEY"
      ],
      [
        "STUDENT_DEPARTMENT.DEPARTMENT_CODE",
        "TIP_SUBJECT_OFFERED.OFFER_DEPT_CODE"
      ]
    ],
    "original_sql": "SELECT\n  tms.TIP_MATERIAL_STATUS,\n  COUNT(DISTINCT td.TIP_MATERIAL_KEY) AS Total_Materials,\n  COUNT(DISTINCT td.SUBJECT_ID) AS Total_Subjects,\n  COUNT(DISTINCT sd.SCHOOL_NAME) AS Total_Num_Schools,\n  MAX(tm.YEAR) AS Most_Recent_Year\nFROM TIP_DETAIL AS td\nJOIN TIP_MATERIAL AS tm\n  ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY\nJOIN TIP_MATERIAL_STATUS AS tms\n  ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY\nJOIN TIP_SUBJECT_OFFERED AS tso\n  ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY\nJOIN STUDENT_DEPARTMENT AS sd\n  ON tso.OFFER_DEPT_CODE = sd.DEPARTMENT_CODE\nGROUP BY\n  tms.TIP_MATERIAL_STATUS",
    "meta": {
      "features": {
        "query_table_count": 5,
        "query_column_count": 14,
        "query_nested_count": 0,
        "query_aggregate_count": 4,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "66e826f77c09",
    "question": "What is the term description, whether the term is current or not, total number of types of TIP subjects offered and materials needed, the minimum and maximum number of enrolled students, the total number of schools offering subjects, and the total number of records for each term code?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  at.TERM_DESCRIPTION,\n  at.IS_CURRENT_TERM,\n  COUNT(DISTINCT tso.COURSE_NUMBER) AS Total_Courses,\n  COUNT(DISTINCT tm.ISBN) AS Total_Materials,\n  MIN(tso.NUM_ENROLLED_STUDENTS) AS Min_Enrolled_Students,\n  MAX(tso.NUM_ENROLLED_STUDENTS) AS Max_Enrolled_Students,\n  COUNT(DISTINCT OFFER_SCHOOL_NAME) AS Total_Num_Schools,\n  SUM(td.RECORD_COUNT) AS Total_Records\nFROM ACADEMIC_TERMS_ALL AS at\nLEFT OUTER JOIN TIP_SUBJECT_OFFERED AS tso\n  ON at.TERM_CODE = tso.TERM_CODE\nJOIN TIP_DETAIL AS td\n  ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY\nJOIN TIP_MATERIAL AS tm\n  ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY\nJOIN TIP_MATERIAL_STATUS AS tms\n  ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY\nGROUP BY\n  at.TERM_CODE,\n  at.TERM_DESCRIPTION,\n  at.IS_CURRENT_TERM"
    ],
    "oracle_sql": "SELECT at.TERM_DESCRIPTION, at.IS_CURRENT_TERM, COUNT(DISTINCT tso.COURSE_NUMBER) AS Total_Courses, COUNT(DISTINCT tm.ISBN) AS Total_Materials, MIN(tso.NUM_ENROLLED_STUDENTS) AS Min_Enrolled_Students, MAX(tso.NUM_ENROLLED_STUDENTS) AS Max_Enrolled_Students, COUNT(DISTINCT OFFER_SCHOOL_NAME) AS Total_Num_Schools, SUM(td.RECORD_COUNT) AS Total_Records FROM ACADEMIC_TERMS_ALL at LEFT OUTER JOIN TIP_SUBJECT_OFFERED tso ON at.TERM_CODE = tso.TERM_CODE JOIN TIP_DETAIL td ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY JOIN TIP_MATERIAL tm ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY JOIN TIP_MATERIAL_STATUS tms ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY GROUP BY at.TERM_CODE, at.TERM_DESCRIPTION, at.IS_CURRENT_TERM;",
    "gold_tables": [
      "dw#sep#ACADEMIC_TERMS_ALL",
      "dw#sep#TIP_SUBJECT_OFFERED",
      "dw#sep#TIP_DETAIL",
      "dw#sep#TIP_MATERIAL",
      "dw#sep#TIP_MATERIAL_STATUS"
    ],
    "mapping": {
      "term description": [
        "ACADEMIC_TERMS_ALL.TERM_DESCRIPTION"
      ],
      "term is current or not": [
        "ACADEMIC_TERMS_ALL.IS_CURRENT_TERM"
      ],
      "TIP subjects": [
        "TIP_SUBJECT_OFFERED.COURSE_NUMBER"
      ],
      "materials": [
        "TIP_MATERIAL.ISBN"
      ],
      "enrolled students": [
        "TIP_SUBJECT_OFFERED.NUM_ENROLLED_STUDENTS"
      ],
      "schools": [
        "TIP_SUBJECT_OFFERED.OFFER_SCHOOL_NAME"
      ],
      "number of records": [
        "TIP_DETAIL.RECORD_COUNT"
      ],
      "term code": [
        "ACADEMIC_TERMS_ALL.TERM_CODE"
      ]
    },
    "join_keys": [
      [
        "ACADEMIC_TERMS_ALL.TERM_CODE",
        "TIP_SUBJECT_OFFERED.TERM_CODE"
      ],
      [
        "TIP_SUBJECT_OFFERED.TIP_SUBJECT_OFFERED_KEY",
        "TIP_DETAIL.TIP_SUBJECT_OFFERED_KEY"
      ],
      [
        "TIP_DETAIL.TIP_MATERIAL_KEY",
        "TIP_MATERIAL.TIP_MATERIAL_KEY"
      ],
      [
        "TIP_DETAIL.TIP_MATERIAL_STATUS_KEY",
        "TIP_MATERIAL_STATUS.TIP_MATERIAL_STATUS_KEY"
      ]
    ],
    "original_sql": "SELECT\n  at.TERM_DESCRIPTION,\n  at.IS_CURRENT_TERM,\n  COUNT(DISTINCT tso.COURSE_NUMBER) AS Total_Courses,\n  COUNT(DISTINCT tm.ISBN) AS Total_Materials,\n  MIN(tso.NUM_ENROLLED_STUDENTS) AS Min_Enrolled_Students,\n  MAX(tso.NUM_ENROLLED_STUDENTS) AS Max_Enrolled_Students,\n  COUNT(DISTINCT OFFER_SCHOOL_NAME) AS Total_Num_Schools,\n  SUM(td.RECORD_COUNT) AS Total_Records\nFROM ACADEMIC_TERMS_ALL AS at\nLEFT OUTER JOIN TIP_SUBJECT_OFFERED AS tso\n  ON at.TERM_CODE = tso.TERM_CODE\nJOIN TIP_DETAIL AS td\n  ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY\nJOIN TIP_MATERIAL AS tm\n  ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY\nJOIN TIP_MATERIAL_STATUS AS tms\n  ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY\nGROUP BY\n  at.TERM_CODE,\n  at.TERM_DESCRIPTION,\n  at.IS_CURRENT_TERM",
    "meta": {
      "features": {
        "query_table_count": 5,
        "query_column_count": 19,
        "query_nested_count": 0,
        "query_aggregate_count": 6,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "7b86b78e5e17",
    "question": "List all buildings with their names, building numbers, building height, street address, city, state, HR department name, assignable square footage, total and average square footage, ordered in descending order of assignable, total, and average square footage.",
    "db_id": "dw",
    "sql": [
      "SELECT DISTINCT\n  new.BUILDING_NAME,\n  new.BUILDING_NUMBER,\n  fb.BUILDING_HEIGHT,\n  new.BUILDING_STREET_ADDRESS,\n  fba.CITY,\n  fba.STATE,\n  new.HR_DEPARTMENT_NAME,\n  new.BLDG_ASSIGNABLE_SQUARE_FOOTAGE,\n  new.Total_Square_Footage,\n  new.Avg_Square_Footage_Per_Room\nFROM (\n  SELECT\n    b.BUILDING_NAME,\n    b.BUILDING_NUMBER,\n    b.BUILDING_STREET_ADDRESS,\n    fb.FAC_BUILDING_KEY,\n    fo.HR_DEPARTMENT_NAME,\n    b.BLDG_ASSIGNABLE_SQUARE_FOOTAGE,\n    SUM(fr.AREA) AS Total_Square_Footage,\n    AVG(fr.AREA) AS Avg_Square_Footage_Per_Room\n  FROM BUILDINGS AS b\n  JOIN FAC_BUILDING AS fb\n    ON b.BUILDING_KEY = fb.FAC_BUILDING_KEY\n  JOIN FAC_ROOMS AS fr\n    ON fb.FAC_BUILDING_KEY = fr.BUILDING_KEY\n  JOIN FAC_ORGANIZATION AS fo\n    ON fr.ORGANIZATION_KEY = fo.ORGANIZATION_KEY\n  GROUP BY\n    b.BUILDING_NAME,\n    b.BUILDING_NUMBER,\n    b.BUILDING_STREET_ADDRESS,\n    fb.FAC_BUILDING_KEY,\n    fo.HR_DEPARTMENT_NAME,\n    b.BLDG_ASSIGNABLE_SQUARE_FOOTAGE\n) AS new\nJOIN FAC_BUILDING_ADDRESS AS fba\n  ON new.FAC_BUILDING_KEY = fba.BUILDING_KEY\nJOIN FAC_BUILDING AS fb\n  ON new.FAC_BUILDING_KEY = fb.FAC_BUILDING_KEY\nWHERE\n  fba.ADDRESS_PURPOSE = 'STREET'\nORDER BY\n  new.BLDG_ASSIGNABLE_SQUARE_FOOTAGE DESC,\n  new.Total_Square_Footage DESC,\n  new.Avg_Square_Footage_Per_Room DESC"
    ],
    "oracle_sql": "SELECT DISTINCT new.BUILDING_NAME, new.BUILDING_NUMBER, fb.BUILDING_HEIGHT, new.BUILDING_STREET_ADDRESS, fba.CITY, fba.STATE, new.HR_DEPARTMENT_NAME, new.BLDG_ASSIGNABLE_SQUARE_FOOTAGE, new.Total_Square_Footage, new.Avg_Square_Footage_Per_Room FROM (SELECT b.BUILDING_NAME, b.BUILDING_NUMBER, b.BUILDING_STREET_ADDRESS, fb.FAC_BUILDING_KEY, fo.HR_DEPARTMENT_NAME, b.BLDG_ASSIGNABLE_SQUARE_FOOTAGE, SUM(fr.AREA) AS Total_Square_Footage, AVG(fr.AREA) AS Avg_Square_Footage_Per_Room FROM BUILDINGS b JOIN FAC_BUILDING fb ON b.BUILDING_KEY = fb.FAC_BUILDING_KEY JOIN FAC_ROOMS fr ON fb.FAC_BUILDING_KEY = fr.BUILDING_KEY JOIN FAC_ORGANIZATION fo ON fr.ORGANIZATION_KEY = fo.ORGANIZATION_KEY GROUP BY b.BUILDING_NAME, b.BUILDING_NUMBER, b.BUILDING_STREET_ADDRESS, fb.FAC_BUILDING_KEY, fo.HR_DEPARTMENT_NAME, b.BLDG_ASSIGNABLE_SQUARE_FOOTAGE) new JOIN FAC_BUILDING_ADDRESS fba ON new.FAC_BUILDING_KEY = fba.BUILDING_KEY JOIN FAC_BUILDING fb ON new.FAC_BUILDING_KEY = fb.FAC_BUILDING_KEY WHERE fba.ADDRESS_PURPOSE = 'STREET' ORDER BY new.BLDG_ASSIGNABLE_SQUARE_FOOTAGE DESC, new.Total_Square_Footage DESC, new.Avg_Square_Footage_Per_Room DESC;",
    "gold_tables": [
      "dw#sep#BUILDINGS",
      "dw#sep#FAC_BUILDING",
      "dw#sep#FAC_ROOMS",
      "dw#sep#FAC_ORGANIZATION",
      "dw#sep#FAC_BUILDING_ADDRESS"
    ],
    "mapping": {
      "names": [
        "BUILDINGS.BUILDING_NAME"
      ],
      "building numbers": [
        "BUILDINGS.BUILDING_NUMBER"
      ],
      "building height": [
        "FAC_BUILDING.BUILDING_HEIGHT"
      ],
      "street address": [
        "BUILDINGS.BUILDING_STREET_ADDRESS"
      ],
      "city": [
        "FAC_BUILDING_ADDRESS.CITY"
      ],
      "state": [
        "FAC_BUILDING_ADDRESS.STATE"
      ],
      "HR department name": [
        "FAC_ORGANIZATION.HR_DEPARTMENT_NAME"
      ],
      "assignable square footage": [
        "BUILDINGS.BLDG_ASSIGNABLE_SQUARE_FOOTAGE"
      ],
      "square footage": [
        "FAC_ROOMS.AREA"
      ]
    },
    "join_keys": [
      [
        "FAC_BUILDING.FAC_BUILDING_KEY",
        "BUILDINGS.BUILDING_KEY"
      ],
      [
        "FAC_BUILDING.FAC_BUILDING_KEY",
        "FAC_ROOMS.BUILDING_KEY"
      ],
      [
        "FAC_ROOMS.ORGANIZATION_KEY",
        "FAC_ORGANIZATION.ORGANIZATION_KEY"
      ]
    ],
    "original_sql": "SELECT DISTINCT\n  new.BUILDING_NAME,\n  new.BUILDING_NUMBER,\n  fb.BUILDING_HEIGHT,\n  new.BUILDING_STREET_ADDRESS,\n  fba.CITY,\n  fba.STATE,\n  new.HR_DEPARTMENT_NAME,\n  new.BLDG_ASSIGNABLE_SQUARE_FOOTAGE,\n  new.Total_Square_Footage,\n  new.Avg_Square_Footage_Per_Room\nFROM (\n  SELECT\n    b.BUILDING_NAME,\n    b.BUILDING_NUMBER,\n    b.BUILDING_STREET_ADDRESS,\n    fb.FAC_BUILDING_KEY,\n    fo.HR_DEPARTMENT_NAME,\n    b.BLDG_ASSIGNABLE_SQUARE_FOOTAGE,\n    SUM(fr.AREA) AS Total_Square_Footage,\n    AVG(fr.AREA) AS Avg_Square_Footage_Per_Room\n  FROM BUILDINGS AS b\n  JOIN FAC_BUILDING AS fb\n    ON b.BUILDING_KEY = fb.FAC_BUILDING_KEY\n  JOIN FAC_ROOMS AS fr\n    ON fb.FAC_BUILDING_KEY = fr.BUILDING_KEY\n  JOIN FAC_ORGANIZATION AS fo\n    ON fr.ORGANIZATION_KEY = fo.ORGANIZATION_KEY\n  GROUP BY\n    b.BUILDING_NAME,\n    b.BUILDING_NUMBER,\n    b.BUILDING_STREET_ADDRESS,\n    fb.FAC_BUILDING_KEY,\n    fo.HR_DEPARTMENT_NAME,\n    b.BLDG_ASSIGNABLE_SQUARE_FOOTAGE\n) AS new\nJOIN FAC_BUILDING_ADDRESS AS fba\n  ON new.FAC_BUILDING_KEY = fba.BUILDING_KEY\nJOIN FAC_BUILDING AS fb\n  ON new.FAC_BUILDING_KEY = fb.FAC_BUILDING_KEY\nWHERE\n  fba.ADDRESS_PURPOSE = 'STREET'\nORDER BY\n  new.BLDG_ASSIGNABLE_SQUARE_FOOTAGE DESC,\n  new.Total_Square_Footage DESC,\n  new.Avg_Square_Footage_Per_Room DESC",
    "meta": {
      "features": {
        "query_table_count": 6,
        "query_column_count": 38,
        "query_nested_count": 1,
        "query_aggregate_count": 2,
        "query_sort_count": 3,
        "query_window_func_count": 0,
        "query_join_count": 5
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "6998fb49cb08",
    "question": "For the 2023 Fall term, what are the unique term descriptions, subject titles along with their prerequisites, total number of types of subjects per term code, instructor of this course, and the number of types of courses ever taught by the instructor?",
    "db_id": "dw",
    "sql": [
      "WITH SubjectCounts AS (\n  SELECT\n    TERM_CODE,\n    FALL_INSTRUCTORS,\n    SUBJECT_ID,\n    COUNT(*) OVER (PARTITION BY TERM_CODE) AS Total_Subjects,\n    COUNT(*) OVER (PARTITION BY FALL_INSTRUCTORS) AS Experience\n  FROM COURSE_CATALOG_SUBJECT_OFFERED\n  WHERE\n    TERM_CODE = '2023FA'\n)\nSELECT DISTINCT\n  at.TERM_DESCRIPTION,\n  ccso.SUBJECT_TITLE,\n  ccso.PREREQUISITES,\n  sc.Total_Subjects,\n  ccso.FALL_INSTRUCTORS,\n  sc.Experience\nFROM COURSE_CATALOG_SUBJECT_OFFERED AS ccso\nJOIN ACADEMIC_TERMS AS at\n  ON ccso.TERM_CODE = at.TERM_CODE\nJOIN SubjectCounts AS sc\n  ON ccso.TERM_CODE = sc.TERM_CODE AND ccso.SUBJECT_ID = sc.SUBJECT_ID\nWHERE\n  ccso.TERM_CODE = '2023FA'"
    ],
    "oracle_sql": "SELECT DISTINCT at.TERM_DESCRIPTION, ccso.SUBJECT_TITLE, ccso.PREREQUISITES, COUNT(distinct ccso.SUBJECT_ID) OVER (PARTITION BY at.TERM_CODE) AS Total_Subjects, ccso.FALL_INSTRUCTORS, COUNT(distinct ccso.SUBJECT_ID) OVER (PARTITION BY ccso.FALL_INSTRUCTORS) AS Experience FROM COURSE_CATALOG_SUBJECT_OFFERED ccso JOIN ACADEMIC_TERMS at ON ccso.TERM_CODE = at.TERM_CODE WHERE ccso.TERM_CODE = '2023FA';",
    "gold_tables": [
      "dw#sep#COURSE_CATALOG_SUBJECT_OFFERED",
      "dw#sep#ACADEMIC_TERMS"
    ],
    "mapping": {
      "2023 Fall term": [
        "COURSE_CATALOG_SUBJECT_OFFERED.TERM_CODE"
      ],
      "term descriptions": [
        "ACADEMIC_TERMS.TERM_DESCRIPTION"
      ],
      "subject titles": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_TITLE"
      ],
      "prerequisites": [
        "COURSE_CATALOG_SUBJECT_OFFERED.PREREQUISITES"
      ],
      "subjects": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_ID"
      ],
      "term code": [
        "COURSE_CATALOG_SUBJECT_OFFERED.TERM_CODE"
      ],
      "instructor": [
        "COURSE_CATALOG_SUBJECT_OFFERED.FALL_INSTRUCTORS"
      ],
      "courses": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_ID"
      ]
    },
    "join_keys": [
      [
        "COURSE_CATALOG_SUBJECT_OFFERED.TERM_CODE",
        "ACADEMIC_TERMS.TERM_CODE"
      ]
    ],
    "original_sql": "WITH SubjectCounts AS (\n  SELECT\n    TERM_CODE,\n    FALL_INSTRUCTORS,\n    SUBJECT_ID,\n    COUNT(*) OVER (PARTITION BY TERM_CODE) AS Total_Subjects,\n    COUNT(*) OVER (PARTITION BY FALL_INSTRUCTORS) AS Experience\n  FROM COURSE_CATALOG_SUBJECT_OFFERED\n  WHERE\n    TERM_CODE = '2023FA'\n)\nSELECT DISTINCT\n  at.TERM_DESCRIPTION,\n  ccso.SUBJECT_TITLE,\n  ccso.PREREQUISITES,\n  sc.Total_Subjects,\n  ccso.FALL_INSTRUCTORS,\n  sc.Experience\nFROM COURSE_CATALOG_SUBJECT_OFFERED AS ccso\nJOIN ACADEMIC_TERMS AS at\n  ON ccso.TERM_CODE = at.TERM_CODE\nJOIN SubjectCounts AS sc\n  ON ccso.TERM_CODE = sc.TERM_CODE AND ccso.SUBJECT_ID = sc.SUBJECT_ID\nWHERE\n  ccso.TERM_CODE = '2023FA'",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 19,
        "query_nested_count": 1,
        "query_aggregate_count": 2,
        "query_sort_count": 0,
        "query_window_func_count": 2,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_window_function"
      ]
    }
  },
  {
    "id": "37f19abb3d50",
    "question": "Show the details of rooms including the full name of the rooms, the building names, floor numbers, the organizations occupying them, name of the departments occupying them, and the percentage of the room area over the assignable floor area and building.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  fr.ROOM_FULL_NAME,\n  fb.BUILDING_NAME,\n  ff.FLOOR,\n  fo.ORGANIZATION_NAME,\n  fo.HR_DEPARTMENT_NAME,\n  CASE WHEN ff.ASSIGNABLE_AREA = 0 THEN 0 ELSE fr.AREA / ff.ASSIGNABLE_AREA END AS PERC_OF_ASG_FLOOR,\n  CASE WHEN fb.ASSIGNABLE_AREA = 0 THEN 0 ELSE fr.AREA / fb.ASSIGNABLE_AREA END AS PERC_OF_ASG_BUILDING\nFROM FAC_ROOMS AS fr\nJOIN FAC_BUILDING AS fb\n  ON fr.BUILDING_KEY = fb.FAC_BUILDING_KEY\nJOIN FAC_FLOOR AS ff\n  ON fr.FLOOR_KEY = ff.FLOOR_KEY\nJOIN FAC_ORGANIZATION AS fo\n  ON fr.ORGANIZATION_KEY = fo.ORGANIZATION_KEY"
    ],
    "oracle_sql": "SELECT fr.ROOM_FULL_NAME, fb.BUILDING_NAME, ff.FLOOR, fo.ORGANIZATION_NAME, fo.HR_DEPARTMENT_NAME, CASE WHEN ff.ASSIGNABLE_AREA = 0 THEN 0 ELSE fr.AREA/ff.ASSIGNABLE_AREA END AS PERC_OF_ASG_FLOOR, CASE WHEN fb.ASSIGNABLE_AREA = 0 THEN 0 ELSE fr.AREA/fb.ASSIGNABLE_AREA END AS PERC_OF_ASG_BUILDING FROM FAC_ROOMS fr JOIN FAC_BUILDING fb ON fr.BUILDING_KEY = fb.FAC_BUILDING_KEY JOIN FAC_FLOOR ff ON fr.FLOOR_KEY = ff.FLOOR_KEY JOIN FAC_ORGANIZATION fo ON fr.ORGANIZATION_KEY = fo.ORGANIZATION_KEY;",
    "gold_tables": [
      "dw#sep#FAC_ROOMS",
      "dw#sep#FAC_BUILDING",
      "dw#sep#FAC_FLOOR",
      "dw#sep#FAC_ORGANIZATION"
    ],
    "mapping": {
      "full name of the rooms": [
        "FAC_ROOMS.ROOM_FULL_NAME"
      ],
      "building names": [
        "FAC_BUILDING.BUILDING_NAME"
      ],
      "floor numbers": [
        "FAC_FLOOR.FLOOR"
      ],
      "organizations": [
        "FAC_ORGANIZATION.ORGANIZATION_NAME"
      ],
      "name of the departments": [
        "FAC_ORGANIZATION.HR_DEPARTMENT_NAME"
      ],
      "room area": [
        "FAC_ROOMS.AREA"
      ],
      "assignable floor area": [
        "FAC_FLOOR.ASSIGNABLE_AREA"
      ]
    },
    "join_keys": [
      [
        "FAC_ROOMS.BUILDING_KEY",
        "FAC_BUILDING.FAC_BUILDING_KEY"
      ],
      [
        "FAC_ROOMS.FLOOR_KEY",
        "FAC_FLOOR.FLOOR_KEY"
      ],
      [
        "FAC_ROOMS.ORGANIZATION_KEY",
        "FAC_ORGANIZATION.ORGANIZATION_KEY"
      ]
    ],
    "original_sql": "SELECT\n  fr.ROOM_FULL_NAME,\n  fb.BUILDING_NAME,\n  ff.FLOOR,\n  fo.ORGANIZATION_NAME,\n  fo.HR_DEPARTMENT_NAME,\n  CASE WHEN ff.ASSIGNABLE_AREA = 0 THEN 0 ELSE fr.AREA / ff.ASSIGNABLE_AREA END AS PERC_OF_ASG_FLOOR,\n  CASE WHEN fb.ASSIGNABLE_AREA = 0 THEN 0 ELSE fr.AREA / fb.ASSIGNABLE_AREA END AS PERC_OF_ASG_BUILDING\nFROM FAC_ROOMS AS fr\nJOIN FAC_BUILDING AS fb\n  ON fr.BUILDING_KEY = fb.FAC_BUILDING_KEY\nJOIN FAC_FLOOR AS ff\n  ON fr.FLOOR_KEY = ff.FLOOR_KEY\nJOIN FAC_ORGANIZATION AS fo\n  ON fr.ORGANIZATION_KEY = fo.ORGANIZATION_KEY",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 17,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "fbef6924e80b",
    "question": "Show the details of rooms including the full name of the rooms, the building names, floor numbers, the organizations occupying them, name of the departments occupying them, and the percentage of the room area over the floor area and building.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  fr.ROOM_FULL_NAME,\n  fb.BUILDING_NAME,\n  ff.FLOOR,\n  fo.ORGANIZATION_NAME,\n  fo.HR_DEPARTMENT_NAME,\n  CASE WHEN FLOOR_AREA = 0 THEN 0 ELSE fr.AREA / FLOOR_AREA END AS PERC_OF_FLOOR,\n  CASE WHEN BUILDING_AREA = 0 THEN 0 ELSE fr.AREA / BUILDING_AREA END AS PERC_OF_BUILDING\nFROM (\n  SELECT\n    ROOM_FULL_NAME,\n    BUILDING_KEY,\n    FLOOR_KEY,\n    ORGANIZATION_KEY,\n    AREA,\n    SUM(AREA) OVER (PARTITION BY FLOOR_KEY) AS FLOOR_AREA,\n    SUM(AREA) OVER (PARTITION BY BUILDING_KEY) AS BUILDING_AREA\n  FROM FAC_ROOMS\n) AS fr\nJOIN FAC_BUILDING AS fb\n  ON fr.BUILDING_KEY = fb.FAC_BUILDING_KEY\nJOIN FAC_FLOOR AS ff\n  ON fr.FLOOR_KEY = ff.FLOOR_KEY\nJOIN FAC_ORGANIZATION AS fo\n  ON fr.ORGANIZATION_KEY = fo.ORGANIZATION_KEY"
    ],
    "oracle_sql": "SELECT fr.ROOM_FULL_NAME, fb.BUILDING_NAME, ff.FLOOR, fo.ORGANIZATION_NAME, fo.HR_DEPARTMENT_NAME, CASE WHEN FLOOR_AREA = 0 THEN 0 ELSE fr.AREA/FLOOR_AREA END AS PERC_OF_FLOOR, CASE WHEN BUILDING_AREA = 0 THEN 0 ELSE fr.AREA/BUILDING_AREA END AS PERC_OF_BUILDING FROM (SELECT ROOM_FULL_NAME, BUILDING_KEY, FLOOR_KEY,ORGANIZATION_KEY, AREA, SUM(AREA) OVER (PARTITION BY FLOOR_KEY) AS FLOOR_AREA, SUM(AREA) OVER (PARTITION BY BUILDING_KEY) AS BUILDING_AREA FROM FAC_ROOMS) fr JOIN FAC_BUILDING fb ON fr.BUILDING_KEY = fb.FAC_BUILDING_KEY JOIN FAC_FLOOR ff ON fr.FLOOR_KEY = ff.FLOOR_KEY JOIN FAC_ORGANIZATION fo ON fr.ORGANIZATION_KEY = fo.ORGANIZATION_KEY;",
    "gold_tables": [
      "dw#sep#FAC_ROOMS",
      "dw#sep#FAC_BUILDING",
      "dw#sep#FAC_FLOOR",
      "dw#sep#FAC_ORGANIZATION"
    ],
    "mapping": {
      "full name": [
        "FAC_ROOMS.ROOM_FULL_NAME"
      ],
      "building names": [
        "FAC_BUILDING.BUILDING_NAME"
      ],
      "floor numbers": [
        "FAC_FLOOR.FLOOR"
      ],
      "organizations": [
        "FAC_ORGANIZATION.ORGANIZATION_NAME"
      ],
      "departments": [
        "FAC_ORGANIZATION.HR_DEPARTMENT_NAME"
      ],
      "room area": [
        "FAC_ROOMS.AREA"
      ],
      "floor area": [
        "FAC_ROOMS.AREA",
        "FAC_ROOMS.FLOOR_KEY"
      ]
    },
    "join_keys": [],
    "original_sql": "SELECT\n  fr.ROOM_FULL_NAME,\n  fb.BUILDING_NAME,\n  ff.FLOOR,\n  fo.ORGANIZATION_NAME,\n  fo.HR_DEPARTMENT_NAME,\n  CASE WHEN FLOOR_AREA = 0 THEN 0 ELSE fr.AREA / FLOOR_AREA END AS PERC_OF_FLOOR,\n  CASE WHEN BUILDING_AREA = 0 THEN 0 ELSE fr.AREA / BUILDING_AREA END AS PERC_OF_BUILDING\nFROM (\n  SELECT\n    ROOM_FULL_NAME,\n    BUILDING_KEY,\n    FLOOR_KEY,\n    ORGANIZATION_KEY,\n    AREA,\n    SUM(AREA) OVER (PARTITION BY FLOOR_KEY) AS FLOOR_AREA,\n    SUM(AREA) OVER (PARTITION BY BUILDING_KEY) AS BUILDING_AREA\n  FROM FAC_ROOMS\n) AS fr\nJOIN FAC_BUILDING AS fb\n  ON fr.BUILDING_KEY = fb.FAC_BUILDING_KEY\nJOIN FAC_FLOOR AS ff\n  ON fr.FLOOR_KEY = ff.FLOOR_KEY\nJOIN FAC_ORGANIZATION AS fo\n  ON fr.ORGANIZATION_KEY = fo.ORGANIZATION_KEY",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 26,
        "query_nested_count": 1,
        "query_aggregate_count": 2,
        "query_sort_count": 0,
        "query_window_func_count": 2,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_window_function"
      ]
    }
  },
  {
    "id": "ab19d32b7983",
    "question": "What are the academic year, and instructors names for courses offered in the academic year 2022, along with the total number of types of courses per instructor?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  ata.ACADEMIC_YEAR,\n  ed.FULL_NAME,\n  COUNT(DISTINCT so.COURSE_NUMBER) AS Total_Courses\nFROM SUBJECT_OFFERED AS so\nJOIN ACADEMIC_TERMS_ALL AS ata\n  ON so.TERM_CODE = ata.TERM_CODE\nJOIN EMPLOYEE_DIRECTORY AS ed\n  ON so.RESPONSIBLE_FACULTY_MIT_ID = ed.MIT_ID\nWHERE\n  ata.ACADEMIC_YEAR = 2022\nGROUP BY\n  ata.ACADEMIC_YEAR,\n  ed.FULL_NAME"
    ],
    "oracle_sql": "SELECT ata.ACADEMIC_YEAR, ed.FULL_NAME, COUNT(distinct so.COURSE_NUMBER) AS Total_Courses FROM SUBJECT_OFFERED so JOIN ACADEMIC_TERMS_ALL ata ON so.TERM_CODE = ata.TERM_CODE JOIN EMPLOYEE_DIRECTORY ed ON so.RESPONSIBLE_FACULTY_MIT_ID = ed.MIT_ID WHERE ata.ACADEMIC_YEAR = 2022 GROUP BY ata.ACADEMIC_YEAR, ed.FULL_NAME;",
    "gold_tables": [
      "dw#sep#SUBJECT_OFFERED",
      "dw#sep#ACADEMIC_TERMS_ALL",
      "dw#sep#EMPLOYEE_DIRECTORY"
    ],
    "mapping": {
      "academic year": [
        "ACADEMIC_TERMS_ALL.ACADEMIC_YEAR"
      ],
      "instructors names": [
        "EMPLOYEE_DIRECTORY.FULL_NAME"
      ],
      "courses": [
        "SUBJECT_OFFERED.COURSE_NUMBER"
      ]
    },
    "join_keys": [
      [
        "SUBJECT_OFFERED.TERM_CODE",
        "ACADEMIC_TERMS_ALL.TERM_CODE"
      ],
      [
        "SUBJECT_OFFERED.RESPONSIBLE_FACULTY_MIT_ID",
        "EMPLOYEE_DIRECTORY.MIT_ID"
      ]
    ],
    "original_sql": "SELECT\n  ata.ACADEMIC_YEAR,\n  ed.FULL_NAME,\n  COUNT(DISTINCT so.COURSE_NUMBER) AS Total_Courses\nFROM SUBJECT_OFFERED AS so\nJOIN ACADEMIC_TERMS_ALL AS ata\n  ON so.TERM_CODE = ata.TERM_CODE\nJOIN EMPLOYEE_DIRECTORY AS ed\n  ON so.RESPONSIBLE_FACULTY_MIT_ID = ed.MIT_ID\nWHERE\n  ata.ACADEMIC_YEAR = 2022\nGROUP BY\n  ata.ACADEMIC_YEAR,\n  ed.FULL_NAME",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 10,
        "query_nested_count": 0,
        "query_aggregate_count": 1,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "74cbfbad1fc6",
    "question": "What are the building names, department names, organizations, their highest and lowest floor number, along with the total number of rooms per each building key?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  fb.BUILDING_NAME,\n  fo.HR_DEPARTMENT_NAME,\n  fo.ORGANIZATION,\n  MAX(ff.LEVEL_ID) AS MAX_FLOOR,\n  MIN(ff.LEVEL_ID) AS MIN_FLOOR,\n  COUNT(DISTINCT fr.FAC_ROOM_KEY) AS Total_Rooms\nFROM FAC_BUILDING AS fb\nJOIN FAC_ROOMS AS fr\n  ON fb.FAC_BUILDING_KEY = fr.BUILDING_KEY\nJOIN FAC_FLOOR AS ff\n  ON fr.FLOOR_KEY = ff.FLOOR_KEY\nJOIN FAC_ORGANIZATION AS fo\n  ON fr.ORGANIZATION_KEY = fo.ORGANIZATION_KEY\nGROUP BY\n  fb.FAC_BUILDING_KEY,\n  fb.BUILDING_NAME,\n  fo.HR_DEPARTMENT_NAME,\n  fo.ORGANIZATION"
    ],
    "oracle_sql": "SELECT fb.BUILDING_NAME, fo.HR_DEPARTMENT_NAME, fo.ORGANIZATION, MAX(ff.LEVEL_ID) as MAX_FLOOR, MIN(ff.LEVEL_ID) as MIN_FLOOR, COUNT(distinct fr.FAC_ROOM_KEY) AS Total_Rooms FROM FAC_BUILDING fb JOIN FAC_ROOMS fr ON fb.FAC_BUILDING_KEY = fr.BUILDING_KEY JOIN FAC_FLOOR ff ON fr.FLOOR_KEY = ff.FLOOR_KEY JOIN FAC_ORGANIZATION fo ON fr.ORGANIZATION_KEY = fo.ORGANIZATION_KEY GROUP BY fb.FAC_BUILDING_KEY, fb.BUILDING_NAME, fo.HR_DEPARTMENT_NAME, fo.ORGANIZATION;",
    "gold_tables": [
      "dw#sep#FAC_BUILDING",
      "dw#sep#FAC_ROOMS",
      "dw#sep#FAC_FLOOR",
      "dw#sep#FAC_ORGANIZATION"
    ],
    "mapping": {
      "building names": [
        "FAC_BUILDING.BUILDING_NAME"
      ],
      "department names": [
        "FAC_ORGANIZATION.HR_DEPARTMENT_NAME"
      ],
      "organizations": [
        "FAC_ORGANIZATION.ORGANIZATION"
      ],
      "floor number": [
        "FAC_FLOOR.LEVEL_ID"
      ],
      "room": [
        "FAC_ROOMS.FAC_ROOM_KEY"
      ],
      "building key": [
        "FAC_BUILDING.FAC_BUILDING_KEY"
      ]
    },
    "join_keys": [
      [
        "FAC_BUILDING.FAC_BUILDING_KEY",
        "FAC_ROOMS.BUILDING_KEY"
      ],
      [
        "FAC_FLOOR.FLOOR_KEY",
        "FAC_ROOMS.FLOOR_KEY"
      ],
      [
        "FAC_ORGANIZATION.ORGANIZATION_KEY",
        "FAC_ROOMS.ORGANIZATION_KEY"
      ]
    ],
    "original_sql": "SELECT\n  fb.BUILDING_NAME,\n  fo.HR_DEPARTMENT_NAME,\n  fo.ORGANIZATION,\n  MAX(ff.LEVEL_ID) AS MAX_FLOOR,\n  MIN(ff.LEVEL_ID) AS MIN_FLOOR,\n  COUNT(DISTINCT fr.FAC_ROOM_KEY) AS Total_Rooms\nFROM FAC_BUILDING AS fb\nJOIN FAC_ROOMS AS fr\n  ON fb.FAC_BUILDING_KEY = fr.BUILDING_KEY\nJOIN FAC_FLOOR AS ff\n  ON fr.FLOOR_KEY = ff.FLOOR_KEY\nJOIN FAC_ORGANIZATION AS fo\n  ON fr.ORGANIZATION_KEY = fo.ORGANIZATION_KEY\nGROUP BY\n  fb.FAC_BUILDING_KEY,\n  fb.BUILDING_NAME,\n  fo.HR_DEPARTMENT_NAME,\n  fo.ORGANIZATION",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 16,
        "query_nested_count": 0,
        "query_aggregate_count": 3,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "8d29a45f5262",
    "question": "Provide the complete information for students with the first name Kevin, including their full names, email addresses, department names, department phone numbers, school names, and the total student count per department and school. If a student is associated with more than one department, list a separate row for each department.",
    "db_id": "dw",
    "sql": [
      "SELECT DISTINCT\n  msd.FULL_NAME,\n  msd.EMAIL_ADDRESS,\n  sd.DEPARTMENT_NAME,\n  sad.DEPARTMENT_PHONE_NUMBER,\n  sd.SCHOOL_NAME,\n  (\n    SELECT\n      COUNT(DISTINCT msd2.EMAIL_ADDRESS)\n    FROM MIT_STUDENT_DIRECTORY AS msd2\n    JOIN SIS_DEPARTMENT AS sd2\n      ON msd2.DEPARTMENT = sd2.DEPARTMENT_CODE\n    WHERE\n      sd2.DEPARTMENT_CODE = sd.DEPARTMENT_CODE\n  ) AS Total_Students_DEPT,\n  (\n    SELECT\n      COUNT(DISTINCT msd3.EMAIL_ADDRESS)\n    FROM MIT_STUDENT_DIRECTORY AS msd3\n    JOIN SIS_DEPARTMENT AS sd3\n      ON msd3.DEPARTMENT = sd3.DEPARTMENT_CODE\n    WHERE\n      sd3.SCHOOL_CODE = sd.SCHOOL_CODE\n  ) AS Total_Students_SCHOOL\nFROM MIT_STUDENT_DIRECTORY AS msd\nJOIN SIS_DEPARTMENT AS sd\n  ON msd.DEPARTMENT = sd.DEPARTMENT_CODE\nJOIN SIS_ADMIN_DEPARTMENT AS sad\n  ON sd.DEPARTMENT_CODE = sad.SIS_ADMIN_DEPARTMENT_CODE\nWHERE\n  msd.FIRST_NAME = 'Kevin'"
    ],
    "oracle_sql": "SELECT DISTINCT msd.FULL_NAME, msd.EMAIL_ADDRESS, sd.DEPARTMENT_NAME, sad.DEPARTMENT_PHONE_NUMBER, sd.SCHOOL_NAME, COUNT(distinct msd.EMAIL_ADDRESS) OVER (PARTITION BY sd.DEPARTMENT_CODE) AS Total_Students_DEPT, COUNT(distinct msd.EMAIL_ADDRESS) OVER (PARTITION BY sd.SCHOOL_CODE) AS Total_Students_SCHOOLS FROM MIT_STUDENT_DIRECTORY msd JOIN SIS_DEPARTMENT sd ON msd.DEPARTMENT = sd.DEPARTMENT_CODE JOIN SIS_ADMIN_DEPARTMENT sad ON sd.DEPARTMENT_CODE = sad.SIS_ADMIN_DEPARTMENT_CODE WHERE upper(msd.FIRST_NAME) LIKE 'KEVIN%';",
    "gold_tables": [
      "dw#sep#MIT_STUDENT_DIRECTORY",
      "dw#sep#SIS_DEPARTMENT",
      "dw#sep#SIS_ADMIN_DEPARTMENT"
    ],
    "mapping": {
      "first name": [
        "MIT_STUDENT_DIRECTORY.FIRST_NAME"
      ],
      "full names": [
        "MIT_STUDENT_DIRECTORY.FULL_NAME"
      ],
      "email addresses": [
        "MIT_STUDENT_DIRECTORY.EMAIL_ADDRESS"
      ],
      "department names": [
        "SIS_DEPARTMENT.DEPARTMENT_NAME"
      ],
      "department phone numbers": [
        "SIS_ADMIN_DEPARTMENT.DEPARTMENT_PHONE_NUMBER"
      ],
      "school names": [
        "SIS_DEPARTMENT.SCHOOL_NAME"
      ],
      "student": [
        "MIT_STUDENT_DIRECTORY.EMAIL_ADDRESS"
      ],
      "department": [
        "SIS_DEPARTMENT.DEPARTMENT_CODE"
      ],
      "school": [
        "SIS_DEPARTMENT.SCHOOL_CODE"
      ]
    },
    "join_keys": [
      [
        "MIT_STUDENT_DIRECTORY.DEPARTMENT",
        "SIS_DEPARTMENT.DEPARTMENT_CODE"
      ],
      [
        "SIS_ADMIN_DEPARTMENT.SIS_ADMIN_DEPARTMENT_CODE",
        "SIS_DEPARTMENT.DEPARTMENT_CODE"
      ]
    ],
    "original_sql": "SELECT DISTINCT\n  msd.FULL_NAME,\n  msd.EMAIL_ADDRESS,\n  sd.DEPARTMENT_NAME,\n  sad.DEPARTMENT_PHONE_NUMBER,\n  sd.SCHOOL_NAME,\n  (\n    SELECT\n      COUNT(DISTINCT msd2.EMAIL_ADDRESS)\n    FROM MIT_STUDENT_DIRECTORY AS msd2\n    JOIN SIS_DEPARTMENT AS sd2\n      ON msd2.DEPARTMENT = sd2.DEPARTMENT_CODE\n    WHERE\n      sd2.DEPARTMENT_CODE = sd.DEPARTMENT_CODE\n  ) AS Total_Students_DEPT,\n  (\n    SELECT\n      COUNT(DISTINCT msd3.EMAIL_ADDRESS)\n    FROM MIT_STUDENT_DIRECTORY AS msd3\n    JOIN SIS_DEPARTMENT AS sd3\n      ON msd3.DEPARTMENT = sd3.DEPARTMENT_CODE\n    WHERE\n      sd3.SCHOOL_CODE = sd.SCHOOL_CODE\n  ) AS Total_Students_SCHOOL\nFROM MIT_STUDENT_DIRECTORY AS msd\nJOIN SIS_DEPARTMENT AS sd\n  ON msd.DEPARTMENT = sd.DEPARTMENT_CODE\nJOIN SIS_ADMIN_DEPARTMENT AS sad\n  ON sd.DEPARTMENT_CODE = sad.SIS_ADMIN_DEPARTMENT_CODE\nWHERE\n  msd.FIRST_NAME = 'Kevin'",
    "meta": {
      "features": {
        "query_table_count": 7,
        "query_column_count": 20,
        "query_nested_count": 2,
        "query_aggregate_count": 2,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "d366d0c223aa",
    "question": "What are the unique titles of subjects offered in the fall term along with their instructor names, instructor emails, and the total number of types of subjects per instructor?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  ccso.SUBJECT_TITLE,\n  e.FULL_NAME AS INSTRUCTOR,\n  e.EMAIL_ADDRESS,\n  Total_Subjects.Total_Subjects\nFROM EMPLOYEE_DIRECTORY AS e\nJOIN COURSE_CATALOG_SUBJECT_OFFERED AS ccso\n  ON ccso.RESPONSIBLE_FACULTY_MIT_ID = e.MIT_ID\nJOIN ACADEMIC_TERMS_ALL AS at\n  ON ccso.TERM_CODE = at.TERM_CODE\nJOIN (\n  SELECT\n    ccso.RESPONSIBLE_FACULTY_MIT_ID,\n    COUNT(DISTINCT ccso.SUBJECT_ID) AS Total_Subjects\n  FROM COURSE_CATALOG_SUBJECT_OFFERED AS ccso\n  JOIN ACADEMIC_TERMS_ALL AS at\n    ON ccso.TERM_CODE = at.TERM_CODE\n  WHERE\n    at.TERM_CODE LIKE '%FA'\n  GROUP BY\n    ccso.RESPONSIBLE_FACULTY_MIT_ID\n) AS Total_Subjects\n  ON e.MIT_ID = Total_Subjects.RESPONSIBLE_FACULTY_MIT_ID\nWHERE\n  at.TERM_CODE LIKE '%FA'\nGROUP BY\n  ccso.SUBJECT_TITLE,\n  e.FULL_NAME,\n  e.EMAIL_ADDRESS,\n  Total_Subjects.Total_Subjects"
    ],
    "oracle_sql": "SELECT DISTINCT ccso.SUBJECT_TITLE, e.FULL_NAME AS INSTRUCTOR, e.EMAIL_ADDRESS, COUNT(distinct ccso.SUBJECT_ID) OVER (PARTITION BY ccso.FALL_INSTRUCTORS) AS Total_Subjects FROM EMPLOYEE_DIRECTORY e JOIN COURSE_CATALOG_SUBJECT_OFFERED ccso ON ccso.RESPONSIBLE_FACULTY_MIT_ID = e.MIT_ID JOIN ACADEMIC_TERMS_ALL at ON ccso.TERM_CODE = at.TERM_CODE WHERE at.TERM_CODE LIKE '%FA';",
    "gold_tables": [
      "dw#sep#EMPLOYEE_DIRECTORY",
      "dw#sep#COURSE_CATALOG_SUBJECT_OFFERED",
      "dw#sep#ACADEMIC_TERMS_ALL"
    ],
    "mapping": {
      "titles": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_TITLE"
      ],
      "subjects": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_ID"
      ],
      "fall term": [
        "ACADEMIC_TERMS_ALL.TERM_CODE"
      ],
      "instructor names": [
        "EMPLOYEE_DIRECTORY.FULL_NAME"
      ],
      "instructor emails": [
        "EMPLOYEE_DIRECTORY.EMAIL_ADDRESS"
      ]
    },
    "join_keys": [
      [
        "COURSE_CATALOG_SUBJECT_OFFERED.RESPONSIBLE_FACULTY_MIT_ID",
        "EMPLOYEE_DIRECTORY.MIT_ID"
      ],
      [
        "COURSE_CATALOG_SUBJECT_OFFERED.TERM_CODE",
        "ACADEMIC_TERMS_ALL.TERM_CODE"
      ]
    ],
    "original_sql": "SELECT\n  ccso.SUBJECT_TITLE,\n  e.FULL_NAME AS INSTRUCTOR,\n  e.EMAIL_ADDRESS,\n  Total_Subjects.Total_Subjects\nFROM EMPLOYEE_DIRECTORY AS e\nJOIN COURSE_CATALOG_SUBJECT_OFFERED AS ccso\n  ON ccso.RESPONSIBLE_FACULTY_MIT_ID = e.MIT_ID\nJOIN ACADEMIC_TERMS_ALL AS at\n  ON ccso.TERM_CODE = at.TERM_CODE\nJOIN (\n  SELECT\n    ccso.RESPONSIBLE_FACULTY_MIT_ID,\n    COUNT(DISTINCT ccso.SUBJECT_ID) AS Total_Subjects\n  FROM COURSE_CATALOG_SUBJECT_OFFERED AS ccso\n  JOIN ACADEMIC_TERMS_ALL AS at\n    ON ccso.TERM_CODE = at.TERM_CODE\n  WHERE\n    at.TERM_CODE LIKE '%FA'\n  GROUP BY\n    ccso.RESPONSIBLE_FACULTY_MIT_ID\n) AS Total_Subjects\n  ON e.MIT_ID = Total_Subjects.RESPONSIBLE_FACULTY_MIT_ID\nWHERE\n  at.TERM_CODE LIKE '%FA'\nGROUP BY\n  ccso.SUBJECT_TITLE,\n  e.FULL_NAME,\n  e.EMAIL_ADDRESS,\n  Total_Subjects.Total_Subjects",
    "meta": {
      "features": {
        "query_table_count": 5,
        "query_column_count": 21,
        "query_nested_count": 1,
        "query_aggregate_count": 1,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "d1f2d24c73a6",
    "question": "List the building names, names of HR departments occupying them, the total gross square footage, the total and average assignable square footage, and the built year per building key.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  b.BUILDING_NAME,\n  fo.HR_DEPARTMENT_NAME,\n  SUM(b.BLDG_GROSS_SQUARE_FOOTAGE) AS Total_Gross_Sq_Ft,\n  SUM(b.BLDG_ASSIGNABLE_SQUARE_FOOTAGE) AS Total_Assignable_Sq_Ft,\n  AVG(b.BLDG_ASSIGNABLE_SQUARE_FOOTAGE) AS Avg_Assignable_Sq_Ft,\n  YEAR(STR_TO_DATE(fb.DATE_BUILT, '%m/%d/%Y')) AS Year_Built\nFROM BUILDINGS AS b\nJOIN FAC_BUILDING AS fb\n  ON b.BUILDING_KEY = fb.FAC_BUILDING_KEY\nJOIN FAC_ROOMS AS fr\n  ON fb.FAC_BUILDING_KEY = fr.BUILDING_KEY\nJOIN FAC_ORGANIZATION AS fo\n  ON fr.ORGANIZATION_KEY = fo.ORGANIZATION_KEY\nGROUP BY\n  b.BUILDING_KEY,\n  b.BUILDING_NAME,\n  fo.HR_DEPARTMENT_NAME,\n  fb.DATE_BUILT"
    ],
    "oracle_sql": "SELECT b.BUILDING_NAME, fo.HR_DEPARTMENT_NAME, SUM(b.BLDG_GROSS_SQUARE_FOOTAGE) AS Total_Gross_Sq_Ft, SUM(b.BLDG_ASSIGNABLE_SQUARE_FOOTAGE) AS Total_Assignable_Sq_Ft, AVG(b.BLDG_ASSIGNABLE_SQUARE_FOOTAGE) AS Avg_Assignable_Sq_Ft, EXTRACT(YEAR FROM TO_DATE(fb.DATE_BUILT, 'MM/DD/YYYY')) AS Year_Built FROM BUILDINGS b JOIN FAC_BUILDING fb ON b.BUILDING_KEY = fb.FAC_BUILDING_KEY JOIN FAC_ROOMS fr ON fb.FAC_BUILDING_KEY = fr.BUILDING_KEY JOIN FAC_ORGANIZATION fo ON fr.ORGANIZATION_KEY = fo.ORGANIZATION_KEY GROUP BY b.BUILDING_KEY, b.BUILDING_NAME, fo.HR_DEPARTMENT_NAME, fb.DATE_BUILT;",
    "gold_tables": [
      "dw#sep#BUILDINGS",
      "dw#sep#FAC_BUILDING",
      "dw#sep#FAC_ROOMS",
      "dw#sep#FAC_ORGANIZATION"
    ],
    "mapping": {
      "building names": [
        "BUILDINGS.BUILDING_NAME"
      ],
      "names of HR departments": [
        "FAC_ORGANIZATION.HR_DEPARTMENT_NAME"
      ],
      "gross square footage": [
        "BUILDINGS.BLDG_GROSS_SQUARE_FOOTAGE"
      ],
      "assignable square footage": [
        "BUILDINGS.BLDG_ASSIGNABLE_SQUARE_FOOTAGE"
      ],
      "built year": [
        "FAC_BUILDING.DATE_BUILT"
      ],
      "building key": [
        "BUILDINGS.BUILDING_KEY"
      ]
    },
    "join_keys": [
      [
        "BUILDINGS.BUILDING_KEY",
        "FAC_BUILDING.FAC_BUILDING_KEY"
      ],
      [
        "FAC_BUILDING.FAC_BUILDING_KEY",
        "FAC_ROOMS.BUILDING_KEY"
      ],
      [
        "FAC_ROOMS.ORGANIZATION_KEY",
        "FAC_ORGANIZATION.ORGANIZATION_KEY"
      ]
    ],
    "original_sql": "SELECT\n  b.BUILDING_NAME,\n  fo.HR_DEPARTMENT_NAME,\n  SUM(b.BLDG_GROSS_SQUARE_FOOTAGE) AS Total_Gross_Sq_Ft,\n  SUM(b.BLDG_ASSIGNABLE_SQUARE_FOOTAGE) AS Total_Assignable_Sq_Ft,\n  AVG(b.BLDG_ASSIGNABLE_SQUARE_FOOTAGE) AS Avg_Assignable_Sq_Ft,\n  YEAR(STR_TO_DATE(fb.DATE_BUILT, '%m/%d/%Y')) AS Year_Built\nFROM BUILDINGS AS b\nJOIN FAC_BUILDING AS fb\n  ON b.BUILDING_KEY = fb.FAC_BUILDING_KEY\nJOIN FAC_ROOMS AS fr\n  ON fb.FAC_BUILDING_KEY = fr.BUILDING_KEY\nJOIN FAC_ORGANIZATION AS fo\n  ON fr.ORGANIZATION_KEY = fo.ORGANIZATION_KEY\nGROUP BY\n  b.BUILDING_KEY,\n  b.BUILDING_NAME,\n  fo.HR_DEPARTMENT_NAME,\n  fb.DATE_BUILT",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 16,
        "query_nested_count": 0,
        "query_aggregate_count": 3,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "2de4f38d4d48",
    "question": "Retrieve the titles of subjects offered in the summer term along with their descriptions, responsible faculty names, email address, building name, room name, floor level, building street address, and the total number of types of courses per departmnet.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  ccso.SUBJECT_TITLE,\n  ccso.SUBJECT_DESCRIPTION,\n  ccso.RESPONSIBLE_FACULTY_NAME,\n  ed.EMAIL_ADDRESS,\n  b.BUILDING_NAME,\n  fr.ROOM_FULL_NAME,\n  ff.LEVEL_ID,\n  b.BUILDING_STREET_ADDRESS,\n  (\n    SELECT\n      COUNT(DISTINCT ccso2.SUBJECT_ID)\n    FROM COURSE_CATALOG_SUBJECT_OFFERED AS ccso2\n    WHERE\n      ccso2.DEPARTMENT_CODE = ccso.DEPARTMENT_CODE\n  ) AS Total_Courses\nFROM COURSE_CATALOG_SUBJECT_OFFERED AS ccso\nJOIN EMPLOYEE_DIRECTORY AS ed\n  ON ccso.RESPONSIBLE_FACULTY_MIT_ID = ed.MIT_ID\nJOIN ACADEMIC_TERMS AS at\n  ON ccso.TERM_CODE = at.TERM_CODE\nJOIN FAC_ROOMS AS fr\n  ON ccso.MEET_PLACE = fr.FAC_ROOM_KEY\nJOIN FAC_FLOOR AS ff\n  ON ff.FLOOR_KEY = fr.FLOOR_KEY\nJOIN BUILDINGS AS b\n  ON fr.BUILDING_KEY = b.BUILDING_KEY\nJOIN FAC_BUILDING_ADDRESS AS fba\n  ON fba.BUILDING_KEY = fr.BUILDING_KEY\nWHERE\n  at.TERM_CODE LIKE '%SU' AND fba.ADDRESS_PURPOSE = 'STREET'"
    ],
    "oracle_sql": "SELECT ccso.SUBJECT_TITLE, ccso.SUBJECT_DESCRIPTION, ccso.RESPONSIBLE_FACULTY_NAME, ed.EMAIL_ADDRESS, b.BUILDING_NAME, fr.ROOM_FULL_NAME, ff.LEVEL_ID, b.BUILDING_STREET_ADDRESS, COUNT(DISTINCT ccso.SUBJECT_ID) OVER (PARTITION BY ccso.DEPARTMENT_CODE) AS Total_Courses FROM COURSE_CATALOG_SUBJECT_OFFERED ccso JOIN EMPLOYEE_DIRECTORY ed ON ccso.RESPONSIBLE_FACULTY_MIT_ID = ed.MIT_ID JOIN ACADEMIC_TERMS at ON ccso.TERM_CODE = at.TERM_CODE JOIN FAC_ROOMS fr ON ccso.MEET_PLACE = fr.FAC_ROOM_KEY JOIN FAC_FLOOR ff ON ff.FLOOR_KEY = fr.FLOOR_KEY JOIN BUILDINGS b ON fr.BUILDING_KEY = b.BUILDING_KEY JOIN FAC_BUILDING_ADDRESS fba ON fba.BUILDING_KEY = fr.BUILDING_KEY WHERE at.TERM_CODE LIKE '%SU' AND fba.ADDRESS_PURPOSE = 'STREET';",
    "gold_tables": [
      "dw#sep#COURSE_CATALOG_SUBJECT_OFFERED",
      "dw#sep#EMPLOYEE_DIRECTORY",
      "dw#sep#ACADEMIC_TERMS",
      "dw#sep#FAC_ROOMS",
      "dw#sep#FAC_FLOOR",
      "dw#sep#BUILDINGS",
      "dw#sep#FAC_BUILDING_ADDRESS"
    ],
    "mapping": {
      "titles of subjects": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_TITLE"
      ],
      "summer term": [
        "ACADEMIC_TERMS.TERM_CODE"
      ],
      "descriptions": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_DESCRIPTION"
      ],
      "responsible faculty names": [
        "COURSE_CATALOG_SUBJECT_OFFERED.RESPONSIBLE_FACULTY_NAME"
      ],
      "email address": [
        "EMPLOYEE_DIRECTORY.EMAIL_ADDRESS"
      ],
      "building name": [
        "BUILDINGS.BUILDING_NAME"
      ],
      "room name": [
        "FAC_ROOMS.ROOM_FULL_NAME"
      ],
      "floor level": [
        "FAC_FLOOR.LEVEL_ID"
      ],
      "building street address": [
        "BUILDINGS.BUILDING_STREET_ADDRESS",
        "FAC_BUILDING_ADDRESS.ADDRESS_PURPOSE"
      ],
      "courses": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_ID"
      ],
      "department": [
        "COURSE_CATALOG_SUBJECT_OFFERED.DEPARTMENT_CODE"
      ]
    },
    "join_keys": [
      [
        "COURSE_CATALOG_SUBJECT_OFFERED.RESPONSIBLE_FACULTY_MIT_ID",
        "EMPLOYEE_DIRECTORY.MIT_ID"
      ],
      [
        "ACADEMIC_TERMS.TERM_CODE",
        "COURSE_CATALOG_SUBJECT_OFFERED.TERM_CODE"
      ],
      [
        "COURSE_CATALOG_SUBJECT_OFFERED.MEET_PLACE",
        "FAC_ROOMS.FAC_ROOM_KEY"
      ],
      [
        "FAC_ROOMS.FLOOR_KEY",
        "FAC_FLOOR.FLOOR_KEY"
      ],
      [
        "FAC_ROOMS.BUILDING_KEY",
        "BUILDINGS.BUILDING_KEY"
      ],
      [
        "FAC_ROOMS.BUILDING_KEY",
        "FAC_BUILDING_ADDRESS.BUILDING_KEY"
      ]
    ],
    "original_sql": "SELECT\n  ccso.SUBJECT_TITLE,\n  ccso.SUBJECT_DESCRIPTION,\n  ccso.RESPONSIBLE_FACULTY_NAME,\n  ed.EMAIL_ADDRESS,\n  b.BUILDING_NAME,\n  fr.ROOM_FULL_NAME,\n  ff.LEVEL_ID,\n  b.BUILDING_STREET_ADDRESS,\n  (\n    SELECT\n      COUNT(DISTINCT ccso2.SUBJECT_ID)\n    FROM COURSE_CATALOG_SUBJECT_OFFERED AS ccso2\n    WHERE\n      ccso2.DEPARTMENT_CODE = ccso.DEPARTMENT_CODE\n  ) AS Total_Courses\nFROM COURSE_CATALOG_SUBJECT_OFFERED AS ccso\nJOIN EMPLOYEE_DIRECTORY AS ed\n  ON ccso.RESPONSIBLE_FACULTY_MIT_ID = ed.MIT_ID\nJOIN ACADEMIC_TERMS AS at\n  ON ccso.TERM_CODE = at.TERM_CODE\nJOIN FAC_ROOMS AS fr\n  ON ccso.MEET_PLACE = fr.FAC_ROOM_KEY\nJOIN FAC_FLOOR AS ff\n  ON ff.FLOOR_KEY = fr.FLOOR_KEY\nJOIN BUILDINGS AS b\n  ON fr.BUILDING_KEY = b.BUILDING_KEY\nJOIN FAC_BUILDING_ADDRESS AS fba\n  ON fba.BUILDING_KEY = fr.BUILDING_KEY\nWHERE\n  at.TERM_CODE LIKE '%SU' AND fba.ADDRESS_PURPOSE = 'STREET'",
    "meta": {
      "features": {
        "query_table_count": 8,
        "query_column_count": 25,
        "query_nested_count": 1,
        "query_aggregate_count": 1,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 6
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "6066a3123ee5",
    "question": "For each term code, list the term description, attribute desciption, department name, school name, and the number of subjects in the area of humanities, arts and social sciences.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  ata.TERM_DESCRIPTION,\n  ccso.HASS_ATTRIBUTE_DESC,\n  sd.DEPARTMENT_NAME,\n  sd.SCHOOL_NAME,\n  (\n    SELECT\n      COUNT(DISTINCT ccso2.SUBJECT_ID)\n    FROM COURSE_CATALOG_SUBJECT_OFFERED AS ccso2\n    JOIN CIS_HASS_ATTRIBUTE AS cha2\n      ON ccso2.HASS_ATTRIBUTE = cha2.HASS_ATTRIBUTE\n    WHERE\n      ccso2.TERM_CODE = ata.TERM_CODE\n      AND cha2.CIS_ATTRIBUTE_GROUP = cha.CIS_ATTRIBUTE_GROUP\n  ) AS Total_Subjects\nFROM COURSE_CATALOG_SUBJECT_OFFERED AS ccso\nJOIN CIS_HASS_ATTRIBUTE AS cha\n  ON ccso.HASS_ATTRIBUTE = cha.HASS_ATTRIBUTE\nJOIN SIS_DEPARTMENT AS sd\n  ON ccso.DEPARTMENT_CODE = sd.DEPARTMENT_CODE\nJOIN ACADEMIC_TERMS_ALL AS ata\n  ON ccso.TERM_CODE = ata.TERM_CODE\nWHERE\n  cha.CIS_ATTRIBUTE_GROUP = 'H'"
    ],
    "oracle_sql": "SELECT ata.TERM_DESCRIPTION, ccso.HASS_ATTRIBUTE_DESC, sd.DEPARTMENT_NAME, sd.SCHOOL_NAME, COUNT(distinct ccso.SUBJECT_ID) OVER (PARTITION BY ata.TERM_CODE, cha.CIS_ATTRIBUTE_GROUP) AS Total_Subjects FROM COURSE_CATALOG_SUBJECT_OFFERED ccso JOIN CIS_HASS_ATTRIBUTE cha ON ccso.HASS_ATTRIBUTE = cha.HASS_ATTRIBUTE JOIN SIS_DEPARTMENT sd ON ccso.DEPARTMENT_CODE = sd.DEPARTMENT_CODE JOIN ACADEMIC_TERMS_ALL ata ON ccso.TERM_CODE = ata.TERM_CODE WHERE cha.CIS_ATTRIBUTE_GROUP = 'H';",
    "gold_tables": [
      "dw#sep#COURSE_CATALOG_SUBJECT_OFFERED",
      "dw#sep#CIS_HASS_ATTRIBUTE",
      "dw#sep#SIS_DEPARTMENT",
      "dw#sep#ACADEMIC_TERMS_ALL"
    ],
    "mapping": {
      "term code": [
        "ACADEMIC_TERMS_ALL.TERM_CODE"
      ],
      "term description": [
        "ACADEMIC_TERMS_ALL.TERM_DESCRIPTION"
      ],
      "attribute desciption": [
        "COURSE_CATALOG_SUBJECT_OFFERED.HASS_ATTRIBUTE_DESC"
      ],
      "department name": [
        "SIS_DEPARTMENT.DEPARTMENT_NAME"
      ],
      "school name": [
        "SIS_DEPARTMENT.SCHOOL_NAME"
      ],
      "subjects": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_ID"
      ],
      "area of humanities, arts and social studies": [
        "CIS_HASS_ATTRIBUTE.CIS_ATTRIBUTE_GROUP"
      ]
    },
    "join_keys": [
      [
        "CIS_HASS_ATTRIBUTE.HASS_ATTRIBUTE",
        "COURSE_CATALOG_SUBJECT_OFFERED.HASS_ATTRIBUTE"
      ],
      [
        "COURSE_CATALOG_SUBJECT_OFFERED.DEPARTMENT_CODE",
        "SIS_DEPARTMENT.DEPARTMENT_CODE"
      ],
      [
        "ACADEMIC_TERMS_ALL.TERM_CODE",
        "COURSE_CATALOG_SUBJECT_OFFERED.TERM_CODE"
      ]
    ],
    "original_sql": "SELECT\n  ata.TERM_DESCRIPTION,\n  ccso.HASS_ATTRIBUTE_DESC,\n  sd.DEPARTMENT_NAME,\n  sd.SCHOOL_NAME,\n  (\n    SELECT\n      COUNT(DISTINCT ccso2.SUBJECT_ID)\n    FROM COURSE_CATALOG_SUBJECT_OFFERED AS ccso2\n    JOIN CIS_HASS_ATTRIBUTE AS cha2\n      ON ccso2.HASS_ATTRIBUTE = cha2.HASS_ATTRIBUTE\n    WHERE\n      ccso2.TERM_CODE = ata.TERM_CODE\n      AND cha2.CIS_ATTRIBUTE_GROUP = cha.CIS_ATTRIBUTE_GROUP\n  ) AS Total_Subjects\nFROM COURSE_CATALOG_SUBJECT_OFFERED AS ccso\nJOIN CIS_HASS_ATTRIBUTE AS cha\n  ON ccso.HASS_ATTRIBUTE = cha.HASS_ATTRIBUTE\nJOIN SIS_DEPARTMENT AS sd\n  ON ccso.DEPARTMENT_CODE = sd.DEPARTMENT_CODE\nJOIN ACADEMIC_TERMS_ALL AS ata\n  ON ccso.TERM_CODE = ata.TERM_CODE\nWHERE\n  cha.CIS_ATTRIBUTE_GROUP = 'H'",
    "meta": {
      "features": {
        "query_table_count": 6,
        "query_column_count": 18,
        "query_nested_count": 1,
        "query_aggregate_count": 1,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "7297fa5685d4",
    "question": "List building names, their height, street address, city, state, postal code, their gross and assignable square footage, the smallest and largest floor level and the total area of all rooms for each building key.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  fb.BUILDING_NAME,\n  fb.BUILDING_HEIGHT,\n  b.BUILDING_STREET_ADDRESS,\n  fba.CITY,\n  fba.STATE,\n  fba.POSTAL_CODE,\n  fb.EXT_GROSS_AREA,\n  fb.ASSIGNABLE_AREA,\n  MIN(ff.LEVEL_ID) AS SMALLEST_FLOOR,\n  MAX(LEVEL_ID) AS HIGHEST_FLOOR,\n  SUM(fr.AREA) AS Total_Room_Area\nFROM FAC_BUILDING AS fb\nJOIN FAC_BUILDING_ADDRESS AS fba\n  ON fb.FAC_BUILDING_KEY = fba.BUILDING_KEY\nJOIN FAC_FLOOR AS ff\n  ON fb.FAC_BUILDING_KEY = ff.BUILDING_KEY\nJOIN FAC_ROOMS AS fr\n  ON ff.FLOOR_KEY = fr.FLOOR_KEY\nJOIN BUILDINGS AS b\n  ON b.BUILDING_KEY = fb.FAC_BUILDING_KEY\nWHERE\n  fba.ADDRESS_PURPOSE = 'STREET'\nGROUP BY\n  fb.FAC_BUILDING_KEY,\n  fb.BUILDING_NAME,\n  fb.BUILDING_HEIGHT,\n  fba.CITY,\n  fba.POSTAL_CODE,\n  fba.STATE,\n  b.BUILDING_STREET_ADDRESS,\n  fb.EXT_GROSS_AREA,\n  fb.ASSIGNABLE_AREA"
    ],
    "oracle_sql": "SELECT fb.BUILDING_NAME, fb.BUILDING_HEIGHT, b.BUILDING_STREET_ADDRESS, fba.CITY, fba.STATE, fba.POSTAL_CODE, fb.EXT_GROSS_AREA, fb.ASSIGNABLE_AREA, MIN(ff.LEVEL_ID) as SMALLEST_FLOOR, MAX(LEVEL_ID) AS HIGHEST_FLOOR, SUM(fr.AREA) AS Total_Room_Area FROM FAC_BUILDING fb JOIN FAC_BUILDING_ADDRESS fba ON fb.FAC_BUILDING_KEY = fba.BUILDING_KEY JOIN FAC_FLOOR ff ON fb.FAC_BUILDING_KEY = ff.BUILDING_KEY JOIN FAC_ROOMS fr ON ff.FLOOR_KEY = fr.FLOOR_KEY JOIN BUILDINGS b ON b.BUILDING_KEY = fb.FAC_BUILDING_KEY WHERE fba.ADDRESS_PURPOSE = 'STREET' GROUP BY fb.FAC_BUILDING_KEY, fb.BUILDING_NAME, fb.BUILDING_HEIGHT, fba.CITY, fba.POSTAL_CODE, fba.STATE, b.BUILDING_STREET_ADDRESS, fb.EXT_GROSS_AREA, fb.ASSIGNABLE_AREA;",
    "gold_tables": [
      "dw#sep#FAC_BUILDING",
      "dw#sep#FAC_BUILDING_ADDRESS",
      "dw#sep#FAC_FLOOR",
      "dw#sep#FAC_ROOMS",
      "dw#sep#BUILDINGS"
    ],
    "mapping": {
      "building names": [
        "FAC_BUILDING.BUILDING_NAME"
      ],
      "height": [
        "FAC_BUILDING.BUILDING_HEIGHT"
      ],
      "street address": [
        "BUILDINGS.BUILDING_STREET_ADDRESS",
        "FAC_BUILDING_ADDRESS.ADDRESS_PURPOSE"
      ],
      "city": [
        "FAC_BUILDING_ADDRESS.CITY"
      ],
      "state": [
        "FAC_BUILDING_ADDRESS.STATE"
      ],
      "postal code": [
        "FAC_BUILDING_ADDRESS.POSTAL_CODE"
      ],
      "gross square footage": [
        "FAC_BUILDING.EXT_GROSS_AREA"
      ],
      "assignable square footage": [
        "FAC_BUILDING.ASSIGNABLE_AREA"
      ],
      "floor level": [
        "FAC_FLOOR.LEVEL_ID"
      ],
      "area": [
        "FAC_ROOMS.AREA"
      ],
      "building key": [
        "FAC_BUILDING.FAC_BUILDING_KEY"
      ]
    },
    "join_keys": [
      [
        "FAC_BUILDING.FAC_BUILDING_KEY",
        "FAC_BUILDING_ADDRESS.BUILDING_KEY"
      ],
      [
        "FAC_BUILDING.FAC_BUILDING_KEY",
        "FAC_FLOOR.BUILDING_KEY"
      ],
      [
        "FAC_FLOOR.FLOOR_KEY",
        "FAC_ROOMS.FLOOR_KEY"
      ],
      [
        "FAC_BUILDING.FAC_BUILDING_KEY",
        "BUILDINGS.BUILDING_KEY"
      ]
    ],
    "original_sql": "SELECT\n  fb.BUILDING_NAME,\n  fb.BUILDING_HEIGHT,\n  b.BUILDING_STREET_ADDRESS,\n  fba.CITY,\n  fba.STATE,\n  fba.POSTAL_CODE,\n  fb.EXT_GROSS_AREA,\n  fb.ASSIGNABLE_AREA,\n  MIN(ff.LEVEL_ID) AS SMALLEST_FLOOR,\n  MAX(LEVEL_ID) AS HIGHEST_FLOOR,\n  SUM(fr.AREA) AS Total_Room_Area\nFROM FAC_BUILDING AS fb\nJOIN FAC_BUILDING_ADDRESS AS fba\n  ON fb.FAC_BUILDING_KEY = fba.BUILDING_KEY\nJOIN FAC_FLOOR AS ff\n  ON fb.FAC_BUILDING_KEY = ff.BUILDING_KEY\nJOIN FAC_ROOMS AS fr\n  ON ff.FLOOR_KEY = fr.FLOOR_KEY\nJOIN BUILDINGS AS b\n  ON b.BUILDING_KEY = fb.FAC_BUILDING_KEY\nWHERE\n  fba.ADDRESS_PURPOSE = 'STREET'\nGROUP BY\n  fb.FAC_BUILDING_KEY,\n  fb.BUILDING_NAME,\n  fb.BUILDING_HEIGHT,\n  fba.CITY,\n  fba.POSTAL_CODE,\n  fba.STATE,\n  b.BUILDING_STREET_ADDRESS,\n  fb.EXT_GROSS_AREA,\n  fb.ASSIGNABLE_AREA",
    "meta": {
      "features": {
        "query_table_count": 5,
        "query_column_count": 29,
        "query_nested_count": 0,
        "query_aggregate_count": 3,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "a04a927de0b2",
    "question": "What is the category title, version, department name, school name, total number of courses for each course level, and the total number of degree-granting courses for each CIP category code?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  c.CATEGORY_TITLE,\n  c.VERSION,\n  sd.DEPARTMENT_NAME,\n  sd.SCHOOL_NAME,\n  SUM(CASE WHEN scd.COURSE_LEVEL = 'U' THEN 1 ELSE 0 END) AS Total_U_Courses,\n  SUM(CASE WHEN scd.COURSE_LEVEL = 'G' THEN 1 ELSE 0 END) AS Total_G_Courses,\n  SUM(CASE WHEN scd.IS_DEGREE_GRANTING = 'Y' THEN 1 ELSE 0 END) AS Total_Degree_Granting_Courses\nFROM CIP AS c\nJOIN SIS_COURSE_DESCRIPTION AS scd\n  ON c.PROGRAM_CODE = scd.CIP_PROGRAM_CODE\nJOIN SIS_DEPARTMENT AS sd\n  ON scd.DEPARTMENT = sd.DEPARTMENT_CODE\nGROUP BY\n  c.CATEGORY_CODE,\n  c.CATEGORY_TITLE,\n  c.VERSION,\n  sd.DEPARTMENT_NAME,\n  sd.SCHOOL_NAME"
    ],
    "oracle_sql": "SELECT c.CATEGORY_TITLE, c.VERSION, sd.DEPARTMENT_NAME, sd.SCHOOL_NAME, SUM(CASE WHEN scd.COURSE_LEVEL = 'U' THEN 1 ELSE 0 END) AS Total_U_Courses, SUM(CASE WHEN scd.COURSE_LEVEL = 'G' THEN 1 ELSE 0 END) AS Total_G_Courses, SUM(CASE WHEN scd.IS_DEGREE_GRANTING = 'Y' THEN 1 ELSE 0 END) AS Total_Degree_Granting_Courses FROM CIP c JOIN SIS_COURSE_DESCRIPTION scd ON c.PROGRAM_CODE = scd.CIP_PROGRAM_CODE JOIN SIS_DEPARTMENT sd ON scd.DEPARTMENT = sd.DEPARTMENT_CODE GROUP BY c.CATEGORY_CODE, c.CATEGORY_TITLE, c.VERSION, sd.DEPARTMENT_NAME, sd.SCHOOL_NAME;",
    "gold_tables": [
      "dw#sep#CIP",
      "dw#sep#SIS_COURSE_DESCRIPTION",
      "dw#sep#SIS_DEPARTMENT"
    ],
    "mapping": {
      "category title": [
        "CIP.CATEGORY_TITLE"
      ],
      "version": [
        "CIP.VERSION"
      ],
      "department name": [
        "SIS_DEPARTMENT.DEPARTMENT_NAME"
      ],
      "school name": [
        "SIS_DEPARTMENT.SCHOOL_NAME"
      ],
      "course level": [
        "SIS_COURSE_DESCRIPTION.COURSE_LEVEL"
      ],
      "degree-granting courses": [
        "SIS_COURSE_DESCRIPTION.IS_DEGREE_GRANTING"
      ],
      "CIP category code": [
        "CIP.CATEGORY_CODE"
      ]
    },
    "join_keys": [
      [
        "SIS_COURSE_DESCRIPTION.CIP_PROGRAM_CODE",
        "CIP.PROGRAM_CODE"
      ],
      [
        "SIS_COURSE_DESCRIPTION.DEPARTMENT",
        "SIS_DEPARTMENT.DEPARTMENT_CODE"
      ]
    ],
    "original_sql": "SELECT\n  c.CATEGORY_TITLE,\n  c.VERSION,\n  sd.DEPARTMENT_NAME,\n  sd.SCHOOL_NAME,\n  SUM(CASE WHEN scd.COURSE_LEVEL = 'U' THEN 1 ELSE 0 END) AS Total_U_Courses,\n  SUM(CASE WHEN scd.COURSE_LEVEL = 'G' THEN 1 ELSE 0 END) AS Total_G_Courses,\n  SUM(CASE WHEN scd.IS_DEGREE_GRANTING = 'Y' THEN 1 ELSE 0 END) AS Total_Degree_Granting_Courses\nFROM CIP AS c\nJOIN SIS_COURSE_DESCRIPTION AS scd\n  ON c.PROGRAM_CODE = scd.CIP_PROGRAM_CODE\nJOIN SIS_DEPARTMENT AS sd\n  ON scd.DEPARTMENT = sd.DEPARTMENT_CODE\nGROUP BY\n  c.CATEGORY_CODE,\n  c.CATEGORY_TITLE,\n  c.VERSION,\n  sd.DEPARTMENT_NAME,\n  sd.SCHOOL_NAME",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 16,
        "query_nested_count": 0,
        "query_aggregate_count": 3,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "6d6a66befa69",
    "question": "What is the total number of library materials, the minimum and maximum publication years, and the total number of materials status for each course name?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  COUNT(DISTINCT lrc.CATALOG_SYSTEM_NUMBER) AS Total_Materials,\n  MIN(lrc.CATALOG_YEAR) AS Min_Publication_Year,\n  MAX(lrc.CATALOG_YEAR) AS Max_Publication_Year,\n  COUNT(DISTINCT lms.LIBRARY_MATERIAL_STATUS) AS Total_Statuses\nFROM LIBRARY_COURSE_INSTRUCTOR AS lci\nJOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n  ON lci.LIBRARY_COURSE_INSTRUCTOR_KEY = lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY\nJOIN LIBRARY_RESERVE_CATALOG AS lrc\n  ON lrmd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY\nJOIN LIBRARY_MATERIAL_STATUS AS lms\n  ON lrmd.LIBRARY_MATERIAL_STATUS_KEY = lms.LIBRARY_MATERIAL_STATUS_KEY\nGROUP BY\n  lci.COURSE_NAME"
    ],
    "oracle_sql": "SELECT COUNT(distinct lrc.CATALOG_SYSTEM_NUMBER) AS Total_Materials, MIN(lrc.CATALOG_YEAR) AS Min_Publication_Year, MAX(lrc.CATALOG_YEAR) AS Max_Publication_Year, COUNT(DISTINCT lms.LIBRARY_MATERIAL_STATUS) AS Total_Statuses FROM LIBRARY_COURSE_INSTRUCTOR lci JOIN LIBRARY_RESERVE_MATRL_DETAIL lrmd ON lci.LIBRARY_COURSE_INSTRUCTOR_KEY = lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY JOIN LIBRARY_RESERVE_CATALOG lrc ON lrmd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY JOIN LIBRARY_MATERIAL_STATUS lms ON lrmd.LIBRARY_MATERIAL_STATUS_KEY = lms.LIBRARY_MATERIAL_STATUS_KEY GROUP BY lci.COURSE_NAME;",
    "gold_tables": [
      "dw#sep#LIBRARY_COURSE_INSTRUCTOR",
      "dw#sep#LIBRARY_RESERVE_MATRL_DETAIL",
      "dw#sep#LIBRARY_RESERVE_CATALOG",
      "dw#sep#LIBRARY_MATERIAL_STATUS"
    ],
    "mapping": {
      "library materials": [
        "LIBRARY_RESERVE_CATALOG.CATALOG_SYSTEM_NUMBER"
      ],
      "publication years": [
        "LIBRARY_RESERVE_CATALOG.CATALOG_YEAR"
      ],
      "materials status": [
        "LIBRARY_MATERIAL_STATUS.LIBRARY_MATERIAL_STATUS"
      ],
      "course name": [
        "LIBRARY_COURSE_INSTRUCTOR.COURSE_NAME"
      ]
    },
    "join_keys": [
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_COURSE_INSTRUCTOR_KEY",
        "LIBRARY_COURSE_INSTRUCTOR.LIBRARY_COURSE_INSTRUCTOR_KEY"
      ],
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_RESERVE_CATALOG_KEY",
        "LIBRARY_RESERVE_CATALOG.LIBRARY_RESERVE_CATALOG_KEY"
      ],
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_MATERIAL_STATUS_KEY",
        "LIBRARY_MATERIAL_STATUS.LIBRARY_MATERIAL_STATUS_KEY"
      ]
    ],
    "original_sql": "SELECT\n  COUNT(DISTINCT lrc.CATALOG_SYSTEM_NUMBER) AS Total_Materials,\n  MIN(lrc.CATALOG_YEAR) AS Min_Publication_Year,\n  MAX(lrc.CATALOG_YEAR) AS Max_Publication_Year,\n  COUNT(DISTINCT lms.LIBRARY_MATERIAL_STATUS) AS Total_Statuses\nFROM LIBRARY_COURSE_INSTRUCTOR AS lci\nJOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n  ON lci.LIBRARY_COURSE_INSTRUCTOR_KEY = lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY\nJOIN LIBRARY_RESERVE_CATALOG AS lrc\n  ON lrmd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY\nJOIN LIBRARY_MATERIAL_STATUS AS lms\n  ON lrmd.LIBRARY_MATERIAL_STATUS_KEY = lms.LIBRARY_MATERIAL_STATUS_KEY\nGROUP BY\n  lci.COURSE_NAME",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 11,
        "query_nested_count": 0,
        "query_aggregate_count": 4,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "ad5967f78b75",
    "question": "What is the total number of library reserve materials, the minimum and maximum publication years, and the total number of enrolled students for each course instructor?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  COUNT(DISTINCT lrc.CATALOG_SYSTEM_NUMBER) AS Total_Materials,\n  MIN(lrc.CATALOG_YEAR) AS Min_Publication_Year,\n  MAX(lrc.CATALOG_YEAR) AS Max_Publication_Year,\n  SUM(lso.NUM_ENROLLED_STUDENTS) AS Total_Enrolled_Students\nFROM LIBRARY_COURSE_INSTRUCTOR AS lci\nJOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n  ON lci.LIBRARY_COURSE_INSTRUCTOR_KEY = lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY\nJOIN LIBRARY_RESERVE_CATALOG AS lrc\n  ON lrmd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY\nJOIN LIBRARY_SUBJECT_OFFERED AS lso\n  ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY\nGROUP BY\n  lci.INSTRUCTOR_NAME"
    ],
    "oracle_sql": "SELECT COUNT(distinct lrc.CATALOG_SYSTEM_NUMBER) AS Total_Materials, MIN(lrc.CATALOG_YEAR) AS Min_Publication_Year, MAX(lrc.CATALOG_YEAR) AS Max_Publication_Year, SUM(lso.NUM_ENROLLED_STUDENTS) AS Total_Enrolled_Students FROM LIBRARY_COURSE_INSTRUCTOR lci JOIN LIBRARY_RESERVE_MATRL_DETAIL lrmd ON lci.LIBRARY_COURSE_INSTRUCTOR_KEY = lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY JOIN LIBRARY_RESERVE_CATALOG lrc ON lrmd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY JOIN LIBRARY_SUBJECT_OFFERED lso ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY GROUP BY lci.INSTRUCTOR_NAME;",
    "gold_tables": [
      "dw#sep#LIBRARY_COURSE_INSTRUCTOR",
      "dw#sep#LIBRARY_RESERVE_MATRL_DETAIL",
      "dw#sep#LIBRARY_RESERVE_CATALOG",
      "dw#sep#LIBRARY_SUBJECT_OFFERED"
    ],
    "mapping": {
      "library reserve materials": [
        "LIBRARY_RESERVE_CATALOG.CATALOG_SYSTEM_NUMBER"
      ],
      "publication years": [
        "LIBRARY_RESERVE_CATALOG.CATALOG_YEAR"
      ],
      "enrolled students": [
        "LIBRARY_SUBJECT_OFFERED.NUM_ENROLLED_STUDENTS"
      ],
      "course instructor": [
        "LIBRARY_COURSE_INSTRUCTOR.INSTRUCTOR_NAME"
      ]
    },
    "join_keys": [
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_COURSE_INSTRUCTOR_KEY",
        "LIBRARY_COURSE_INSTRUCTOR.LIBRARY_COURSE_INSTRUCTOR_KEY"
      ],
      [
        "LIBRARY_RESERVE_CATALOG.LIBRARY_RESERVE_CATALOG_KEY",
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_RESERVE_CATALOG_KEY"
      ],
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_SUBJECT_OFFERED_KEY",
        "LIBRARY_SUBJECT_OFFERED.LIBRARY_SUBJECT_OFFERED_KEY"
      ]
    ],
    "original_sql": "SELECT\n  COUNT(DISTINCT lrc.CATALOG_SYSTEM_NUMBER) AS Total_Materials,\n  MIN(lrc.CATALOG_YEAR) AS Min_Publication_Year,\n  MAX(lrc.CATALOG_YEAR) AS Max_Publication_Year,\n  SUM(lso.NUM_ENROLLED_STUDENTS) AS Total_Enrolled_Students\nFROM LIBRARY_COURSE_INSTRUCTOR AS lci\nJOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n  ON lci.LIBRARY_COURSE_INSTRUCTOR_KEY = lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY\nJOIN LIBRARY_RESERVE_CATALOG AS lrc\n  ON lrmd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY\nJOIN LIBRARY_SUBJECT_OFFERED AS lso\n  ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY\nGROUP BY\n  lci.INSTRUCTOR_NAME",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 11,
        "query_nested_count": 0,
        "query_aggregate_count": 4,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "bbeb6568d2c0",
    "question": "What is the material status, term description, total number of courses and materials, occurences in departments and school, and the total number of instructors for each library material status code and term code?",
    "db_id": "dw",
    "sql": [
      "SELECT\n  lms.LIBRARY_MATERIAL_STATUS,\n  ata.TERM_DESCRIPTION,\n  COUNT(DISTINCT lso.COURSE_NUMBER) AS Total_Courses,\n  COUNT(DISTINCT lrc.CATALOG_SYSTEM_NUMBER) AS Total_Materials,\n  COUNT(DISTINCT lso.OFFER_DEPT_CODE),\n  COUNT(DISTINCT lso.OFFER_SCHOOL_NAME),\n  COUNT(DISTINCT lci.INSTRUCTOR_NAME) AS Total_Instructors\nFROM LIBRARY_MATERIAL_STATUS AS lms\nJOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n  ON lms.LIBRARY_MATERIAL_STATUS_KEY = lrmd.LIBRARY_MATERIAL_STATUS_KEY\nJOIN LIBRARY_SUBJECT_OFFERED AS lso\n  ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY\nJOIN LIBRARY_COURSE_INSTRUCTOR AS lci\n  ON lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY = lci.LIBRARY_COURSE_INSTRUCTOR_KEY\nJOIN LIBRARY_RESERVE_CATALOG AS lrc\n  ON lrmd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY\nJOIN ACADEMIC_TERMS_ALL AS ata\n  ON ata.TERM_CODE = lso.TERM_CODE\nGROUP BY\n  lms.LIBRARY_MATERIAL_STATUS_CODE,\n  lms.LIBRARY_MATERIAL_STATUS,\n  lso.TERM_CODE,\n  ata.TERM_DESCRIPTION"
    ],
    "oracle_sql": "SELECT lms.LIBRARY_MATERIAL_STATUS, ata.TERM_DESCRIPTION, COUNT(DISTINCT lso.COURSE_NUMBER) AS Total_Courses, COUNT(DISTINCT lrc.CATALOG_SYSTEM_NUMBER) AS Total_Materials, COUNT(DISTINCT lso.OFFER_DEPT_CODE), COUNT(DISTINCT lso.OFFER_SCHOOL_NAME), COUNT(DISTINCT lci.INSTRUCTOR_NAME) AS Total_Instructors FROM LIBRARY_MATERIAL_STATUS lms JOIN LIBRARY_RESERVE_MATRL_DETAIL lrmd ON lms.LIBRARY_MATERIAL_STATUS_KEY = lrmd.LIBRARY_MATERIAL_STATUS_KEY JOIN LIBRARY_SUBJECT_OFFERED lso ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY JOIN LIBRARY_COURSE_INSTRUCTOR lci ON lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY = lci.LIBRARY_COURSE_INSTRUCTOR_KEY JOIN LIBRARY_RESERVE_CATALOG lrc ON lrmd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY JOIN ACADEMIC_TERMS_ALL ata ON ata.TERM_CODE = lso.TERM_CODE GROUP BY lms.LIBRARY_MATERIAL_STATUS_CODE, lms.LIBRARY_MATERIAL_STATUS, lso.TERM_CODE, ata.TERM_DESCRIPTION;",
    "gold_tables": [
      "dw#sep#LIBRARY_MATERIAL_STATUS",
      "dw#sep#LIBRARY_RESERVE_MATRL_DETAIL",
      "dw#sep#LIBRARY_SUBJECT_OFFERED",
      "dw#sep#LIBRARY_COURSE_INSTRUCTOR",
      "dw#sep#LIBRARY_RESERVE_CATALOG",
      "dw#sep#ACADEMIC_TERMS_ALL"
    ],
    "mapping": {
      "material status": [
        "LIBRARY_MATERIAL_STATUS.LIBRARY_MATERIAL_STATUS"
      ],
      "term description": [
        "ACADEMIC_TERMS_ALL.TERM_DESCRIPTION"
      ],
      "courses": [
        "LIBRARY_SUBJECT_OFFERED.COURSE_NUMBER"
      ],
      "materials": [
        "LIBRARY_RESERVE_CATALOG.CATALOG_SYSTEM_NUMBER"
      ],
      "departments": [
        "LIBRARY_SUBJECT_OFFERED.OFFER_DEPT_CODE"
      ],
      "school": [
        "LIBRARY_SUBJECT_OFFERED.OFFER_SCHOOL_NAME"
      ],
      "instructors": [
        "LIBRARY_COURSE_INSTRUCTOR.INSTRUCTOR_NAME"
      ],
      "library material status code": [
        "LIBRARY_MATERIAL_STATUS.LIBRARY_MATERIAL_STATUS_CODE"
      ],
      "term code": [
        "LIBRARY_SUBJECT_OFFERED.TERM_CODE"
      ]
    },
    "join_keys": [
      [
        "LIBRARY_MATERIAL_STATUS.LIBRARY_MATERIAL_STATUS_KEY",
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_MATERIAL_STATUS_KEY"
      ],
      [
        "LIBRARY_SUBJECT_OFFERED.LIBRARY_SUBJECT_OFFERED_KEY",
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_SUBJECT_OFFERED_KEY"
      ],
      [
        "LIBRARY_COURSE_INSTRUCTOR.LIBRARY_COURSE_INSTRUCTOR_KEY",
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_COURSE_INSTRUCTOR_KEY"
      ],
      [
        "LIBRARY_RESERVE_CATALOG.LIBRARY_RESERVE_CATALOG_KEY",
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_RESERVE_CATALOG_KEY"
      ],
      [
        "ACADEMIC_TERMS_ALL.TERM_CODE",
        "LIBRARY_SUBJECT_OFFERED.TERM_CODE"
      ]
    ],
    "original_sql": "SELECT\n  lms.LIBRARY_MATERIAL_STATUS,\n  ata.TERM_DESCRIPTION,\n  COUNT(DISTINCT lso.COURSE_NUMBER) AS Total_Courses,\n  COUNT(DISTINCT lrc.CATALOG_SYSTEM_NUMBER) AS Total_Materials,\n  COUNT(DISTINCT lso.OFFER_DEPT_CODE),\n  COUNT(DISTINCT lso.OFFER_SCHOOL_NAME),\n  COUNT(DISTINCT lci.INSTRUCTOR_NAME) AS Total_Instructors\nFROM LIBRARY_MATERIAL_STATUS AS lms\nJOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n  ON lms.LIBRARY_MATERIAL_STATUS_KEY = lrmd.LIBRARY_MATERIAL_STATUS_KEY\nJOIN LIBRARY_SUBJECT_OFFERED AS lso\n  ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY\nJOIN LIBRARY_COURSE_INSTRUCTOR AS lci\n  ON lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY = lci.LIBRARY_COURSE_INSTRUCTOR_KEY\nJOIN LIBRARY_RESERVE_CATALOG AS lrc\n  ON lrmd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY\nJOIN ACADEMIC_TERMS_ALL AS ata\n  ON ata.TERM_CODE = lso.TERM_CODE\nGROUP BY\n  lms.LIBRARY_MATERIAL_STATUS_CODE,\n  lms.LIBRARY_MATERIAL_STATUS,\n  lso.TERM_CODE,\n  ata.TERM_DESCRIPTION",
    "meta": {
      "features": {
        "query_table_count": 6,
        "query_column_count": 21,
        "query_nested_count": 0,
        "query_aggregate_count": 5,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 5
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "b2eb0da0a10f",
    "question": "For building 36, list all space units, their floor and building name, building street address, their space usage, and the number of organizations and space units on the same building and floor.",
    "db_id": "dw",
    "sql": [
      "SELECT DISTINCT\n  su.SPACE_UNIT,\n  sf.FLOOR,\n  b.BUILDING_NAME,\n  b.BUILDING_STREET_ADDRESS,\n  su2.SPACE_USAGE,\n  (\n    SELECT\n      COUNT(DISTINCT fo2.FCLT_ORGANIZATION_KEY)\n    FROM SPACE_UNIT AS su2\n    JOIN SPACE_DETAIL AS sd2\n      ON su2.SPACE_UNIT_KEY = sd2.SPACE_UNIT_KEY\n    JOIN FCLT_ORGANIZATION AS fo2\n      ON fo2.FCLT_ORGANIZATION_KEY = su2.FCLT_ORGANIZATION_KEY\n    WHERE\n      sd2.FLOOR_KEY = sd.FLOOR_KEY AND sd2.BUILDING_KEY = sd.BUILDING_KEY\n  ) AS Total_Organizations,\n  (\n    SELECT\n      COUNT(DISTINCT su3.SPACE_UNIT)\n    FROM SPACE_UNIT AS su3\n    JOIN SPACE_DETAIL AS sd3\n      ON su3.SPACE_UNIT_KEY = sd3.SPACE_UNIT_KEY\n    WHERE\n      sd3.FLOOR_KEY = sd.FLOOR_KEY AND sd3.BUILDING_KEY = sd.BUILDING_KEY\n  ) AS Total_Space_Units\nFROM SPACE_UNIT AS su\nJOIN SPACE_DETAIL AS sd\n  ON su.SPACE_UNIT_KEY = sd.SPACE_UNIT_KEY\nJOIN SPACE_USAGE AS su2\n  ON su2.SPACE_USAGE_KEY = sd.SPACE_USAGE_KEY\nJOIN SPACE_FLOOR AS sf\n  ON sd.FLOOR_KEY = sf.FLOOR_KEY\nJOIN BUILDINGS AS b\n  ON b.BUILDING_KEY = sd.BUILDING_KEY\nJOIN FCLT_ORGANIZATION AS fo\n  ON fo.FCLT_ORGANIZATION_KEY = su.FCLT_ORGANIZATION_KEY\nJOIN FCLT_BUILDING_ADDRESS AS fba\n  ON fba.FCLT_BUILDING_KEY = b.BUILDING_KEY\nWHERE\n  fba.ADDRESS_PURPOSE = 'STREET' AND b.BUILDING_NUMBER = 36"
    ],
    "oracle_sql": "SELECT DISTINCT su.SPACE_UNIT, sf.FLOOR, b.BUILDING_NAME, b.BUILDING_STREET_ADDRESS, su2.SPACE_USAGE, COUNT(DISTINCT fo.FCLT_ORGANIZATION_KEY) OVER (PARTITION BY sd.FLOOR_KEY, sd.BUILDING_KEY) AS Total_Organizations, COUNT(DISTINCT su.SPACE_UNIT) OVER (PARTITION BY sd.FLOOR_KEY, sd.BUILDING_KEY) AS Total_Space_Units FROM SPACE_UNIT su JOIN SPACE_DETAIL sd ON su.SPACE_UNIT_KEY = sd.SPACE_UNIT_KEY JOIN SPACE_USAGE su2 ON su2.SPACE_USAGE_KEY = sd.SPACE_USAGE_KEY JOIN SPACE_FLOOR sf ON sd.FLOOR_KEY = sf.FLOOR_KEY JOIN BUILDINGS b ON b.BUILDING_KEY = sd.BUILDING_KEY JOIN FCLT_ORGANIZATION fo ON fo.FCLT_ORGANIZATION_KEY = su.FCLT_ORGANIZATION_KEY JOIN FCLT_BUILDING_ADDRESS fba ON fba.FCLT_BUILDING_KEY = b.BUILDING_KEY WHERE fba.ADDRESS_PURPOSE = 'STREET' AND b.BUILDING_NUMBER = '36';",
    "gold_tables": [
      "dw#sep#SPACE_UNIT",
      "dw#sep#SPACE_DETAIL",
      "dw#sep#FCLT_ORGANIZATION",
      "dw#sep#SPACE_USAGE",
      "dw#sep#SPACE_FLOOR",
      "dw#sep#BUILDINGS",
      "dw#sep#FCLT_BUILDING_ADDRESS"
    ],
    "mapping": {
      "building 36": [
        "BUILDINGS.BUILDING_NUMBER"
      ],
      "space units": [
        "SPACE_UNIT.SPACE_UNIT"
      ],
      "floor": [
        "SPACE_FLOOR.FLOOR"
      ],
      "building name": [
        "BUILDINGS.BUILDING_NAME"
      ],
      "building street address": [
        "BUILDINGS.BUILDING_STREET_ADDRESS",
        "FCLT_BUILDING_ADDRESS.ADDRESS_PURPOSE"
      ],
      "space usage": [
        "SPACE_USAGE.SPACE_USAGE"
      ],
      "organizations": [
        "FCLT_ORGANIZATION.FCLT_ORGANIZATION_KEY"
      ]
    },
    "join_keys": [
      [
        "SPACE_DETAIL.SPACE_UNIT_KEY",
        "SPACE_UNIT.SPACE_UNIT_KEY"
      ],
      [
        "SPACE_USAGE.SPACE_USAGE_KEY",
        "SPACE_DETAIL.SPACE_USAGE_KEY"
      ],
      [
        "SPACE_DETAIL.FLOOR_KEY",
        "SPACE_FLOOR.FLOOR_KEY"
      ],
      [
        "SPACE_DETAIL.BUILDING_KEY",
        "BUILDINGS.BUILDING_KEY"
      ],
      [
        "FCLT_ORGANIZATION.FCLT_ORGANIZATION_KEY",
        "SPACE_UNIT.FCLT_ORGANIZATION_KEY"
      ],
      [
        "BUILDINGS.BUILDING_KEY",
        "FCLT_BUILDING_ADDRESS.FCLT_BUILDING_KEY"
      ]
    ],
    "original_sql": "SELECT DISTINCT\n  su.SPACE_UNIT,\n  sf.FLOOR,\n  b.BUILDING_NAME,\n  b.BUILDING_STREET_ADDRESS,\n  su2.SPACE_USAGE,\n  (\n    SELECT\n      COUNT(DISTINCT fo2.FCLT_ORGANIZATION_KEY)\n    FROM SPACE_UNIT AS su2\n    JOIN SPACE_DETAIL AS sd2\n      ON su2.SPACE_UNIT_KEY = sd2.SPACE_UNIT_KEY\n    JOIN FCLT_ORGANIZATION AS fo2\n      ON fo2.FCLT_ORGANIZATION_KEY = su2.FCLT_ORGANIZATION_KEY\n    WHERE\n      sd2.FLOOR_KEY = sd.FLOOR_KEY AND sd2.BUILDING_KEY = sd.BUILDING_KEY\n  ) AS Total_Organizations,\n  (\n    SELECT\n      COUNT(DISTINCT su3.SPACE_UNIT)\n    FROM SPACE_UNIT AS su3\n    JOIN SPACE_DETAIL AS sd3\n      ON su3.SPACE_UNIT_KEY = sd3.SPACE_UNIT_KEY\n    WHERE\n      sd3.FLOOR_KEY = sd.FLOOR_KEY AND sd3.BUILDING_KEY = sd.BUILDING_KEY\n  ) AS Total_Space_Units\nFROM SPACE_UNIT AS su\nJOIN SPACE_DETAIL AS sd\n  ON su.SPACE_UNIT_KEY = sd.SPACE_UNIT_KEY\nJOIN SPACE_USAGE AS su2\n  ON su2.SPACE_USAGE_KEY = sd.SPACE_USAGE_KEY\nJOIN SPACE_FLOOR AS sf\n  ON sd.FLOOR_KEY = sf.FLOOR_KEY\nJOIN BUILDINGS AS b\n  ON b.BUILDING_KEY = sd.BUILDING_KEY\nJOIN FCLT_ORGANIZATION AS fo\n  ON fo.FCLT_ORGANIZATION_KEY = su.FCLT_ORGANIZATION_KEY\nJOIN FCLT_BUILDING_ADDRESS AS fba\n  ON fba.FCLT_BUILDING_KEY = b.BUILDING_KEY\nWHERE\n  fba.ADDRESS_PURPOSE = 'STREET' AND b.BUILDING_NUMBER = 36",
    "meta": {
      "features": {
        "query_table_count": 12,
        "query_column_count": 35,
        "query_nested_count": 2,
        "query_aggregate_count": 2,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 9
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "48583c288706",
    "question": "For each distinct mailing list containing more than 1000 people and with a name starting with A (case insensitive), provide its name, whether it is a mailing list, whether it is a moira group, whether it is a NFS group, the owner of the mailing list, and the number of people in the list.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  ml.MOIRA_LIST_NAME,\n  ml.IS_MOIRA_MAILING_LIST,\n  ml.IS_MOIRA_GROUP,\n  ml.IS_NFS_GROUP,\n  mlo.OWNER,\n  member_counts.occurrences\nFROM MOIRA_LIST_DETAIL AS mld\nJOIN MOIRA_LIST AS ml\n  ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY\nJOIN MOIRA_LIST_OWNER AS mlo\n  ON mld.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY\nJOIN (\n  SELECT\n    mld.MOIRA_LIST_KEY,\n    COUNT(mld.MOIRA_LIST_MEMBER) AS occurrences\n  FROM MOIRA_LIST_DETAIL AS mld\n  GROUP BY\n    mld.MOIRA_LIST_KEY\n  HAVING\n    COUNT(mld.MOIRA_LIST_MEMBER) > 1000\n) AS member_counts\n  ON ml.MOIRA_LIST_KEY = member_counts.MOIRA_LIST_KEY\nWHERE\n  UPPER(ml.MOIRA_LIST_NAME) LIKE 'A%'"
    ],
    "oracle_sql": "SELECT DISTINCT ml.MOIRA_LIST_NAME, ml.IS_MOIRA_MAILING_LIST, ml.IS_MOIRA_GROUP, ml.IS_NFS_GROUP, mlo.OWNER, COUNT(mld.MOIRA_LIST_MEMBER) AS occurrences FROM MOIRA_LIST_DETAIL mld JOIN MOIRA_LIST ml ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY JOIN MOIRA_LIST_OWNER mlo ON mld.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY WHERE UPPER(ml.MOIRA_LIST_NAME) LIKE 'A%' GROUP BY ml.MOIRA_LIST_NAME, ml.IS_MOIRA_MAILING_LIST, ml.IS_MOIRA_GROUP, ml.IS_NFS_GROUP, mlo.OWNER HAVING COUNT(mld.MOIRA_LIST_MEMBER) > 1000;",
    "gold_tables": [
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#MOIRA_LIST",
      "dw#sep#MOIRA_LIST_OWNER"
    ],
    "mapping": {
      "name": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "mailing list": [
        "MOIRA_LIST.IS_MOIRA_MAILING_LIST"
      ],
      "moira group": [
        "MOIRA_LIST.IS_MOIRA_GROUP"
      ],
      "NFS group": [
        "MOIRA_LIST.IS_NFS_GROUP"
      ],
      "owner": [
        "MOIRA_LIST_OWNER.OWNER"
      ],
      "people": [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER"
      ]
    },
    "join_keys": [
      [
        "MOIRA_LIST.MOIRA_LIST_KEY",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY"
      ],
      [
        "MOIRA_LIST_OWNER.MOIRA_LIST_OWNER_KEY",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_OWNER_KEY"
      ]
    ],
    "original_sql": "SELECT\n  ml.MOIRA_LIST_NAME,\n  ml.IS_MOIRA_MAILING_LIST,\n  ml.IS_MOIRA_GROUP,\n  ml.IS_NFS_GROUP,\n  mlo.OWNER,\n  member_counts.occurrences\nFROM MOIRA_LIST_DETAIL AS mld\nJOIN MOIRA_LIST AS ml\n  ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY\nJOIN MOIRA_LIST_OWNER AS mlo\n  ON mld.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY\nJOIN (\n  SELECT\n    mld.MOIRA_LIST_KEY,\n    COUNT(mld.MOIRA_LIST_MEMBER) AS occurrences\n  FROM MOIRA_LIST_DETAIL AS mld\n  GROUP BY\n    mld.MOIRA_LIST_KEY\n  HAVING\n    COUNT(mld.MOIRA_LIST_MEMBER) > 1000\n) AS member_counts\n  ON ml.MOIRA_LIST_KEY = member_counts.MOIRA_LIST_KEY\nWHERE\n  UPPER(ml.MOIRA_LIST_NAME) LIKE 'A%'",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 17,
        "query_nested_count": 1,
        "query_aggregate_count": 2,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "0650450a0692",
    "question": "List the mailing lists with the largest number of members and the least number of members, including their names, owners, public status, hidden status, and number of members in the list. If a mailing list has multiple owners, create a separate entry for each owner. Similarly, if multiple lists share the minimum or maximum member count, include all those lists.",
    "db_id": "dw",
    "sql": [
      "WITH Occurrences AS (\n  SELECT\n    mld.MOIRA_LIST_KEY,\n    mld.MOIRA_LIST_OWNER_KEY,\n    COUNT(mld.MOIRA_LIST_MEMBER) AS occurrences\n  FROM MOIRA_LIST_DETAIL AS mld\n  GROUP BY\n    mld.MOIRA_LIST_KEY,\n    mld.MOIRA_LIST_OWNER_KEY\n)\nSELECT DISTINCT\n  ml.MOIRA_LIST_NAME,\n  mlo.OWNER,\n  ml.IS_PUBLIC,\n  ml.IS_HIDDEN,\n  o.occurrences\nFROM Occurrences AS o\nJOIN MOIRA_LIST AS ml\n  ON o.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY\nJOIN MOIRA_LIST_OWNER AS mlo\n  ON o.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY\nWHERE\n  o.occurrences = (\n    SELECT\n      MIN(occurrences)\n    FROM Occurrences\n  )\n  OR o.occurrences = (\n    SELECT\n      MAX(occurrences)\n    FROM Occurrences\n  )"
    ],
    "oracle_sql": "WITH Occurrences AS ( SELECT ml.MOIRA_LIST_NAME, mlo.OWNER, ml.IS_PUBLIC, ml.IS_HIDDEN, COUNT(mld.MOIRA_LIST_MEMBER) AS occurrences FROM MOIRA_LIST_DETAIL mld JOIN MOIRA_LIST ml ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY JOIN MOIRA_LIST_OWNER mlo ON mld.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY GROUP BY ml.MOIRA_LIST_NAME, ml.IS_PUBLIC, ml.IS_HIDDEN, mlo.OWNER ), MaxMinOccurrences AS ( SELECT MAX(occurrences) AS max_occurrences, MIN(occurrences) AS min_occurrences FROM Occurrences ) SELECT o.MOIRA_LIST_NAME, o.OWNER, o.IS_PUBLIC, o.IS_HIDDEN, o.occurrences FROM Occurrences o JOIN MaxMinOccurrences mm ON o.occurrences = mm.max_occurrences OR o.occurrences = mm.min_occurrences;",
    "gold_tables": [
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#MOIRA_LIST",
      "dw#sep#MOIRA_LIST_OWNER"
    ],
    "mapping": {
      "names": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "owners": [
        "MOIRA_LIST_OWNER.OWNER"
      ],
      "public status": [
        "MOIRA_LIST.IS_PUBLIC"
      ],
      "hidden status": [
        "MOIRA_LIST.IS_HIDDEN"
      ],
      "members": [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER"
      ]
    },
    "join_keys": [
      [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY",
        "MOIRA_LIST.MOIRA_LIST_KEY"
      ],
      [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_OWNER_KEY",
        "MOIRA_LIST_OWNER.MOIRA_LIST_OWNER_KEY"
      ]
    ],
    "original_sql": "WITH Occurrences AS (\n  SELECT\n    mld.MOIRA_LIST_KEY,\n    mld.MOIRA_LIST_OWNER_KEY,\n    COUNT(mld.MOIRA_LIST_MEMBER) AS occurrences\n  FROM MOIRA_LIST_DETAIL AS mld\n  GROUP BY\n    mld.MOIRA_LIST_KEY,\n    mld.MOIRA_LIST_OWNER_KEY\n)\nSELECT DISTINCT\n  ml.MOIRA_LIST_NAME,\n  mlo.OWNER,\n  ml.IS_PUBLIC,\n  ml.IS_HIDDEN,\n  o.occurrences\nFROM Occurrences AS o\nJOIN MOIRA_LIST AS ml\n  ON o.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY\nJOIN MOIRA_LIST_OWNER AS mlo\n  ON O.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY\nWHERE\n  o.occurrences = (\n    SELECT\n      MIN(occurrences)\n    FROM Occurrences\n  )\n  OR o.occurrences = (\n    SELECT\n      MAX(occurrences)\n    FROM Occurrences\n  )",
    "meta": {
      "features": {
        "query_table_count": 6,
        "query_column_count": 18,
        "query_nested_count": 3,
        "query_aggregate_count": 3,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "0c5e63cf0fb5",
    "question": "For email lists with names starting with C (case insensitive) and containing faculty who teach courses in the summer in financial aid years after 2001, provide the name of the list, the number of people in the list, and the number of faculty in the list.",
    "db_id": "dw",
    "sql": [
      "WITH FilteredLists AS (\n  SELECT\n    ml.MOIRA_LIST_KEY,\n    ml.MOIRA_LIST_NAME\n  FROM MOIRA_LIST AS ml\n  WHERE\n    UPPER(ml.MOIRA_LIST_NAME) LIKE 'C%'\n)\nSELECT DISTINCT\n  fl.MOIRA_LIST_NAME AS Moira_List_Name,\n  COUNT(mld.MOIRA_LIST_MEMBER) AS Member_Count,\n  COUNT(DISTINCT ed.MIT_ID) AS Distinct_Faculty_Count\nFROM COURSE_CATALOG_SUBJECT_OFFERED AS ccso\nJOIN EMPLOYEE_DIRECTORY AS ed\n  ON ccso.RESPONSIBLE_FACULTY_MIT_ID = ed.MIT_ID\nJOIN MOIRA_LIST_DETAIL AS mld\n  ON UPPER(ed.KRB_NAME) = UPPER(mld.MOIRA_LIST_MEMBER)\nJOIN FilteredLists AS fl\n  ON mld.MOIRA_LIST_KEY = fl.MOIRA_LIST_KEY\nJOIN ACADEMIC_TERMS AS at\n  ON ccso.TERM_CODE = at.TERM_CODE\nWHERE\n  at.TERM_CODE LIKE '%SU' AND CAST(at.FINANCIAL_AID_YEAR AS UNSIGNED) > 2001\nGROUP BY\n  fl.MOIRA_LIST_NAME"
    ],
    "oracle_sql": "WITH FilteredLists AS ( SELECT ml.MOIRA_LIST_KEY, ml.MOIRA_LIST_NAME FROM MOIRA_LIST ml WHERE upper(ml.MOIRA_LIST_NAME) LIKE 'C%' ) SELECT DISTINCT fl.MOIRA_LIST_NAME AS Moira_List_Name, COUNT(mld.MOIRA_LIST_MEMBER) AS Member_Count, COUNT(DISTINCT ed.MIT_ID) AS Distinct_Faculty_Count FROM COURSE_CATALOG_SUBJECT_OFFERED ccso JOIN EMPLOYEE_DIRECTORY ed ON ccso.RESPONSIBLE_FACULTY_MIT_ID = ed.MIT_ID JOIN MOIRA_LIST_DETAIL mld ON UPPER(ed.KRB_NAME) = UPPER(mld.MOIRA_LIST_MEMBER) JOIN FilteredLists fl ON mld.MOIRA_LIST_KEY = fl.MOIRA_LIST_KEY JOIN ACADEMIC_TERMS at ON ccso.TERM_CODE = at.TERM_CODE WHERE at.TERM_CODE LIKE '%SU' AND CAST(at.FINANCIAL_AID_YEAR AS UNSIGNED) > 2001 GROUP BY fl.MOIRA_LIST_NAME;",
    "gold_tables": [
      "dw#sep#MOIRA_LIST",
      "dw#sep#COURSE_CATALOG_SUBJECT_OFFERED",
      "dw#sep#EMPLOYEE_DIRECTORY",
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#ACADEMIC_TERMS"
    ],
    "mapping": {
      "names": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "faculty": [
        "EMPLOYEE_DIRECTORY.MIT_ID"
      ],
      "courses in the summer": [
        "ACADEMIC_TERMS.TERM_CODE"
      ],
      "financial aid years": [
        "ACADEMIC_TERMS.FINANCIAL_AID_YEAR"
      ],
      "people": [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER"
      ]
    },
    "join_keys": [
      [
        "EMPLOYEE_DIRECTORY.MIT_ID",
        "COURSE_CATALOG_SUBJECT_OFFERED.RESPONSIBLE_FACULTY_MIT_ID"
      ],
      [
        "ACADEMIC_TERMS.TERM_CODE",
        "COURSE_CATALOG_SUBJECT_OFFERED.TERM_CODE"
      ]
    ],
    "original_sql": "WITH FilteredLists AS (\n  SELECT\n    ml.MOIRA_LIST_KEY,\n    ml.MOIRA_LIST_NAME\n  FROM MOIRA_LIST AS ml\n  WHERE\n    UPPER(ml.MOIRA_LIST_NAME) LIKE 'C%'\n)\nSELECT DISTINCT\n  fl.MOIRA_LIST_NAME AS Moira_List_Name,\n  COUNT(mld.MOIRA_LIST_MEMBER) AS Member_Count,\n  COUNT(DISTINCT ed.MIT_ID) AS Distinct_Faculty_Count\nFROM COURSE_CATALOG_SUBJECT_OFFERED AS ccso\nJOIN EMPLOYEE_DIRECTORY AS ed\n  ON ccso.RESPONSIBLE_FACULTY_MIT_ID = ed.MIT_ID\nJOIN MOIRA_LIST_DETAIL AS mld\n  ON UPPER(ed.KRB_NAME) = UPPER(mld.MOIRA_LIST_MEMBER)\nJOIN FilteredLists AS fl\n  ON mld.MOIRA_LIST_KEY = fl.MOIRA_LIST_KEY\nJOIN ACADEMIC_TERMS AS at\n  ON ccso.TERM_CODE = at.TERM_CODE\nWHERE\n  at.TERM_CODE LIKE '%SU' AND CAST(at.FINANCIAL_AID_YEAR AS UNSIGNED) > 2001\nGROUP BY\n  fl.MOIRA_LIST_NAME",
    "meta": {
      "features": {
        "query_table_count": 6,
        "query_column_count": 17,
        "query_nested_count": 1,
        "query_aggregate_count": 2,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "ee1204e03938",
    "question": "Regarding the mailing list about duo users, provide the number of students in this list, and the number of departments and schools associated with these students.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  COUNT(DISTINCT se.MIT_ID) AS Student_Count,\n  COUNT(DISTINCT sd.DEPARTMENT_CODE) AS Department_Count,\n  COUNT(DISTINCT sd.SCHOOL_CODE) AS School_Count\nFROM MOIRA_LIST AS ml\nJOIN MOIRA_LIST_DETAIL AS mld\n  ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\nJOIN SE_PERSON AS se\n  ON UPPER(mld.MOIRA_LIST_MEMBER) = UPPER(se.KRB_NAME)\nJOIN MIT_STUDENT_DIRECTORY AS msd\n  ON msd.FULL_NAME = se.FULL_NAME\nJOIN SIS_DEPARTMENT AS sd\n  ON msd.DEPARTMENT = sd.DEPARTMENT_CODE\nWHERE\n  ml.MOIRA_LIST_NAME = 'candle-duo-users'"
    ],
    "oracle_sql": "SELECT COUNT(DISTINCT se.MIT_ID) AS Student_Count, COUNT(DISTINCT sd.DEPARTMENT_CODE) AS Department_Count, COUNT(DISTINCT sd.SCHOOL_CODE) AS School_Count FROM MOIRA_LIST ml JOIN MOIRA_LIST_DETAIL mld ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY JOIN SE_PERSON se ON upper(mld.MOIRA_LIST_MEMBER) = upper(se.KRB_NAME) JOIN MIT_STUDENT_DIRECTORY msd ON msd.FULL_NAME = se.FULL_NAME JOIN SIS_DEPARTMENT sd ON msd.DEPARTMENT = sd.DEPARTMENT_CODE WHERE ml.MOIRA_LIST_NAME = 'candle-duo-users'",
    "gold_tables": [
      "dw#sep#MOIRA_LIST",
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#SE_PERSON",
      "dw#sep#MIT_STUDENT_DIRECTORY",
      "dw#sep#SIS_DEPARTMENT"
    ],
    "mapping": {
      "duo users": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "students": [
        "SE_PERSON.MIT_ID"
      ],
      "departments": [
        "SIS_DEPARTMENT.DEPARTMENT_CODE"
      ],
      "schools": [
        "SIS_DEPARTMENT.SCHOOL_CODE"
      ]
    },
    "join_keys": [
      [
        "MOIRA_LIST.MOIRA_LIST_KEY",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY"
      ],
      [
        "MIT_STUDENT_DIRECTORY.DEPARTMENT",
        "SIS_DEPARTMENT.DEPARTMENT_CODE"
      ]
    ],
    "original_sql": "SELECT\n  COUNT(DISTINCT se.MIT_ID) AS Student_Count,\n  COUNT(DISTINCT sd.DEPARTMENT_CODE) AS Department_Count,\n  COUNT(DISTINCT sd.SCHOOL_CODE) AS School_Count\nFROM MOIRA_LIST AS ml\nJOIN MOIRA_LIST_DETAIL AS mld\n  ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\nJOIN SE_PERSON AS se\n  ON UPPER(mld.MOIRA_LIST_MEMBER) = UPPER(se.KRB_NAME)\nJOIN MIT_STUDENT_DIRECTORY AS msd\n  ON msd.FULL_NAME = se.FULL_NAME\nJOIN SIS_DEPARTMENT AS sd\n  ON msd.DEPARTMENT = sd.DEPARTMENT_CODE\nWHERE\n  ml.MOIRA_LIST_NAME = 'candle-duo-users'",
    "meta": {
      "features": {
        "query_table_count": 5,
        "query_column_count": 12,
        "query_nested_count": 0,
        "query_aggregate_count": 3,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "0fe37c03027e",
    "question": "For faculty who are responsible for courses in 2023 fall term, list the name of mailing lists with ten members that they subscribe to, the number of faculty in these lists, and the number of courses associated with those faculty.",
    "db_id": "dw",
    "sql": [
      "WITH filtered_lists AS (\n  SELECT\n    mld.MOIRA_LIST_KEY\n  FROM MOIRA_LIST_DETAIL AS mld\n  GROUP BY\n    mld.MOIRA_LIST_KEY\n  HAVING\n    COUNT(DISTINCT mld.MOIRA_LIST_MEMBER) = 10\n), instructor_courses AS (\n  SELECT\n    fl.MOIRA_LIST_KEY,\n    ccso.RESPONSIBLE_FACULTY_MIT_ID,\n    COUNT(DISTINCT ccso.SUBJECT_TITLE) AS course_count\n  FROM filtered_lists AS fl\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON fl.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  JOIN EMPLOYEE_DIRECTORY AS ed\n    ON UPPER(mld.MOIRA_LIST_MEMBER) = UPPER(ed.KRB_NAME)\n  JOIN COURSE_CATALOG_SUBJECT_OFFERED AS ccso\n    ON ed.MIT_ID = ccso.RESPONSIBLE_FACULTY_MIT_ID\n  WHERE\n    ccso.TERM_CODE = '2023FA'\n  GROUP BY\n    fl.MOIRA_LIST_KEY,\n    ccso.RESPONSIBLE_FACULTY_MIT_ID\n), instructor_counts AS (\n  SELECT\n    MOIRA_LIST_KEY,\n    COUNT(DISTINCT RESPONSIBLE_FACULTY_MIT_ID) AS instructor_count,\n    SUM(course_count) AS total_courses\n  FROM instructor_courses\n  GROUP BY\n    MOIRA_LIST_KEY\n)\nSELECT\n  ml.MOIRA_LIST_NAME,\n  ic.instructor_count,\n  ic.total_courses\nFROM instructor_counts AS ic\nJOIN MOIRA_LIST AS ml\n  ON ic.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY\nWHERE\n  ic.instructor_count > 0"
    ],
    "oracle_sql": "WITH rel_lists AS (SELECT DISTINCT ml.MOIRA_LIST_KEY AS MOIRA_LIST_KEY, ccso.RESPONSIBLE_FACULTY_MIT_ID, ccso.RESPONSIBLE_FACULTY_NAME AS RESPONSIBLE_FACULTY_NAME FROM COURSE_CATALOG_SUBJECT_OFFERED ccso JOIN SE_PERSON se ON ccso.RESPONSIBLE_FACULTY_MIT_ID = se.MIT_ID JOIN MOIRA_LIST_DETAIL mld ON UPPER(se.KRB_NAME) = UPPER(mld.MOIRA_LIST_MEMBER) JOIN MOIRA_LIST ml ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY WHERE ccso.TERM_CODE = '2023FA'), membership AS (SELECT ml.MOIRA_LIST_KEY AS moira_list_name, COUNT(*) AS membership_num FROM MOIRA_LIST ml JOIN MOIRA_LIST_DETAIL mld ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY JOIN (SELECT DISTINCT MOIRA_LIST_KEY FROM rel_lists) rl ON rl.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY GROUP BY ml.MOIRA_LIST_KEY HAVING COUNT(*) = 10), course_count AS (SELECT ccso.RESPONSIBLE_FACULTY_MIT_ID, ccso.RESPONSIBLE_FACULTY_NAME AS RESPONSIBLE_FACULTY_NAME, COUNT(DISTINCT ccso.SUBJECT_TITLE) AS course_count FROM COURSE_CATALOG_SUBJECT_OFFERED ccso GROUP BY ccso.RESPONSIBLE_FACULTY_MIT_ID, ccso.RESPONSIBLE_FACULTY_NAME) SELECT ml.MOIRA_LIST_NAME AS moira_list_name, COUNT(DISTINCT rl.RESPONSIBLE_FACULTY_MIT_ID) AS faculty_count, SUM(cct.course_count) AS total_courses FROM membership m JOIN rel_lists rl ON rl.MOIRA_LIST_KEY = m.moira_list_name JOIN course_count cct ON rl.RESPONSIBLE_FACULTY_MIT_ID = cct.RESPONSIBLE_FACULTY_MIT_ID JOIN MOIRA_LIST ml ON m.moira_list_name = ml.MOIRA_LIST_KEY GROUP BY ml.MOIRA_LIST_NAME;",
    "gold_tables": [
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#EMPLOYEE_DIRECTORY",
      "dw#sep#COURSE_CATALOG_SUBJECT_OFFERED",
      "dw#sep#MOIRA_LIST"
    ],
    "mapping": {
      "faculty": [
        "COURSE_CATALOG_SUBJECT_OFFERED.RESPONSIBLE_FACULTY_MIT_ID"
      ],
      "2023 fall term": [
        "COURSE_CATALOG_SUBJECT_OFFERED.TERM_CODE"
      ],
      "name of mailing lists": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "members": [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER"
      ],
      "courses": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_TITLE"
      ]
    },
    "join_keys": [
      [
        "employee_directory.MIT_ID",
        "COURSE_CATALOG_SUBJECT_OFFERED.RESPONSIBLE_FACULTY_MIT_ID"
      ],
      [
        "employee_directory.KRB_NAME",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER"
      ],
      [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY",
        "MOIRA_LIST.MOIRA_LIST_KEY"
      ]
    ],
    "original_sql": "WITH filtered_lists AS (\n  SELECT\n    mld.MOIRA_LIST_KEY\n  FROM MOIRA_LIST_DETAIL AS mld\n  GROUP BY\n    mld.MOIRA_LIST_KEY\n  HAVING\n    COUNT(DISTINCT mld.MOIRA_LIST_MEMBER) = 10\n), instructor_courses AS (\n  SELECT\n    fl.MOIRA_LIST_KEY,\n    ccso.RESPONSIBLE_FACULTY_MIT_ID,\n    COUNT(DISTINCT ccso.SUBJECT_TITLE) AS course_count\n  FROM filtered_lists AS fl\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON fl.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  JOIN EMPLOYEE_DIRECTORY AS ed\n    ON UPPER(mld.MOIRA_LIST_MEMBER) = UPPER(ed.KRB_NAME)\n  JOIN COURSE_CATALOG_SUBJECT_OFFERED AS ccso\n    ON ed.MIT_ID = ccso.RESPONSIBLE_FACULTY_MIT_ID\n  WHERE\n    ccso.TERM_CODE = '2023FA'\n  GROUP BY\n    fl.MOIRA_LIST_KEY,\n    ccso.RESPONSIBLE_FACULTY_MIT_ID\n), instructor_counts AS (\n  SELECT\n    MOIRA_LIST_KEY,\n    COUNT(DISTINCT RESPONSIBLE_FACULTY_MIT_ID) AS instructor_count,\n    SUM(course_count) AS total_courses\n  FROM instructor_courses\n  GROUP BY\n    MOIRA_LIST_KEY\n)\nSELECT\n  ml.MOIRA_LIST_NAME,\n  ic.instructor_count,\n  ic.total_courses\nFROM instructor_counts AS ic\nJOIN MOIRA_LIST AS ml\n  ON ic.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY\nWHERE\n  ic.instructor_count > 0",
    "meta": {
      "features": {
        "query_table_count": 8,
        "query_column_count": 25,
        "query_nested_count": 3,
        "query_aggregate_count": 4,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "f3f02fd3a788",
    "question": "For each course instructor in the 'keeper-zephyr' mailing list, provide the name of mailing lists they subscribe to, instructor name, earliest and latest publication years, and total number of enrolled students.",
    "db_id": "dw",
    "sql": [
      "WITH FilteredLists AS (\n  SELECT\n    ml.MOIRA_LIST_KEY,\n    ml.MOIRA_LIST_NAME,\n    mld.MOIRA_LIST_MEMBER\n  FROM MOIRA_LIST AS ml\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  WHERE\n    ml.MOIRA_LIST_NAME = 'keeper-zephyr'\n)\nSELECT\n  fl.MOIRA_LIST_NAME,\n  lci.INSTRUCTOR_NAME,\n  MIN(lrc.CATALOG_YEAR) AS Min_Publication_Year,\n  MAX(lrc.CATALOG_YEAR) AS Max_Publication_Year,\n  SUM(lso.NUM_ENROLLED_STUDENTS) AS Total_Enrolled_Students\nFROM LIBRARY_COURSE_INSTRUCTOR AS lci\nJOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n  ON lci.LIBRARY_COURSE_INSTRUCTOR_KEY = lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY\nJOIN LIBRARY_RESERVE_CATALOG AS lrc\n  ON lrmd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY\nJOIN LIBRARY_SUBJECT_OFFERED AS lso\n  ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY\nJOIN SE_PERSON AS se\n  ON lci.INSTRUCTOR_NAME = se.FULL_NAME\nJOIN FilteredLists AS fl\n  ON UPPER(se.KRB_NAME) = UPPER(fl.MOIRA_LIST_MEMBER)\nGROUP BY\n  fl.MOIRA_LIST_NAME,\n  lci.INSTRUCTOR_NAME"
    ],
    "oracle_sql": "SELECT ml.MOIRA_LIST_NAME, lci.INSTRUCTOR_NAME, MIN(lrc.CATALOG_YEAR) AS Min_Publication_Year, MAX(lrc.CATALOG_YEAR) AS Max_Publication_Year, SUM(lso.NUM_ENROLLED_STUDENTS) AS Total_Enrolled_Students FROM LIBRARY_COURSE_INSTRUCTOR lci JOIN LIBRARY_RESERVE_MATRL_DETAIL lrmd ON lci.LIBRARY_COURSE_INSTRUCTOR_KEY = lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY JOIN LIBRARY_RESERVE_CATALOG lrc ON lrmd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY JOIN LIBRARY_SUBJECT_OFFERED lso ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY JOIN SE_PERSON se ON lci.INSTRUCTOR_NAME = se.FULL_NAME JOIN MOIRA_LIST_DETAIL mld ON UPPER(se.KRB_NAME) = UPPER(mld.MOIRA_LIST_MEMBER) JOIN MOIRA_LIST ml ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY WHERE ml.MOIRA_LIST_NAME = 'keeper-zephyr' GROUP BY ml.MOIRA_LIST_NAME, lci.INSTRUCTOR_NAME;",
    "gold_tables": [
      "dw#sep#MOIRA_LIST",
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#LIBRARY_COURSE_INSTRUCTOR",
      "dw#sep#LIBRARY_RESERVE_MATRL_DETAIL",
      "dw#sep#LIBRARY_RESERVE_CATALOG",
      "dw#sep#LIBRARY_SUBJECT_OFFERED",
      "dw#sep#SE_PERSON"
    ],
    "mapping": {
      "'keeper-zephyr' mailing list": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "name of mailing lists": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "instructor name": [
        "LIBRARY_COURSE_INSTRUCTOR.INSTRUCTOR_NAME"
      ],
      "publication years": [
        "LIBRARY_RESERVE_CATALOG.CATALOG_YEAR"
      ],
      "enrolled students": [
        "LIBRARY_SUBJECT_OFFERED.NUM_ENROLLED_STUDENTS"
      ]
    },
    "join_keys": [
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_COURSE_INSTRUCTOR_KEY",
        "LIBRARY_COURSE_INSTRUCTOR.LIBRARY_COURSE_INSTRUCTOR_KEY"
      ],
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_RESERVE_CATALOG_KEY",
        "LIBRARY_RESERVE_CATALOG.LIBRARY_RESERVE_CATALOG_KEY"
      ],
      [
        "LIBRARY_SUBJECT_OFFERED.LIBRARY_SUBJECT_OFFERED_KEY",
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_SUBJECT_OFFERED_KEY"
      ],
      [
        "LIBRARY_COURSE_INSTRUCTOR.INSTRUCTOR_NAME",
        "SE_PERSON.FULL_NAME"
      ]
    ],
    "original_sql": "WITH FilteredLists AS (\n  SELECT\n    ml.MOIRA_LIST_KEY,\n    ml.MOIRA_LIST_NAME,\n    mld.MOIRA_LIST_MEMBER\n  FROM MOIRA_LIST AS ml\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  WHERE\n    ml.MOIRA_LIST_NAME = 'keeper-zephyr'\n)\nSELECT\n  fl.MOIRA_LIST_NAME,\n  lci.INSTRUCTOR_NAME,\n  MIN(lrc.CATALOG_YEAR) AS Min_Publication_Year,\n  MAX(lrc.CATALOG_YEAR) AS Max_Publication_Year,\n  SUM(lso.NUM_ENROLLED_STUDENTS) AS Total_Enrolled_Students\nFROM LIBRARY_COURSE_INSTRUCTOR AS lci\nJOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n  ON lci.LIBRARY_COURSE_INSTRUCTOR_KEY = lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY\nJOIN LIBRARY_RESERVE_CATALOG AS lrc\n  ON lrmd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY\nJOIN LIBRARY_SUBJECT_OFFERED AS lso\n  ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY\nJOIN SE_PERSON AS se\n  ON lci.INSTRUCTOR_NAME = se.FULL_NAME\nJOIN FilteredLists AS fl\n  ON UPPER(se.KRB_NAME) = UPPER(fl.MOIRA_LIST_MEMBER)\nGROUP BY\n  fl.MOIRA_LIST_NAME,\n  lci.INSTRUCTOR_NAME",
    "meta": {
      "features": {
        "query_table_count": 8,
        "query_column_count": 23,
        "query_nested_count": 1,
        "query_aggregate_count": 3,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 6
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "488ba540a9b0",
    "question": "For each mailing list with a name beginning with R (case insensitive), and that Professor Ayden Hopkins is subscribed to, list its name, description, owner, number of people in the list, and number of tenured faculty in the list.",
    "db_id": "dw",
    "sql": [
      "WITH FilteredLists AS (\n  SELECT DISTINCT\n    ml.MOIRA_LIST_KEY,\n    ml.MOIRA_LIST_NAME,\n    ml.MOIRA_LIST_DESCRIPTION,\n    mlo.OWNER\n  FROM SE_PERSON AS se\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON UPPER(se.KRB_NAME) = UPPER(mld.MOIRA_LIST_MEMBER)\n  JOIN MOIRA_LIST AS ml\n    ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY\n  JOIN MOIRA_LIST_OWNER AS mlo\n    ON mld.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY\n  WHERE\n    se.FULL_NAME = 'Hopkins, Ayden' AND UPPER(ml.MOIRA_LIST_NAME) LIKE 'R%'\n), MemberCounts AS (\n  SELECT\n    fl.MOIRA_LIST_KEY,\n    fl.MOIRA_LIST_NAME,\n    fl.MOIRA_LIST_DESCRIPTION,\n    fl.OWNER,\n    COUNT(DISTINCT mld.MOIRA_LIST_MEMBER) AS Member_Count\n  FROM FilteredLists AS fl\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON fl.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  GROUP BY\n    fl.MOIRA_LIST_KEY,\n    fl.MOIRA_LIST_NAME,\n    fl.MOIRA_LIST_DESCRIPTION,\n    fl.OWNER\n), FacultyTenuredCounts AS (\n  SELECT\n    fl.MOIRA_LIST_KEY,\n    COUNT(DISTINCT mld.MOIRA_LIST_MEMBER) AS Faculty_Tenured_Count\n  FROM FilteredLists AS fl\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON fl.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  JOIN SE_PERSON AS se\n    ON UPPER(mld.MOIRA_LIST_MEMBER) = UPPER(se.KRB_NAME)\n  WHERE\n    se.PAYROLL_RANK = 'Faculty Tenured'\n  GROUP BY\n    fl.MOIRA_LIST_KEY\n)\nSELECT DISTINCT\n  mc.MOIRA_LIST_NAME,\n  mc.MOIRA_LIST_DESCRIPTION,\n  mc.OWNER,\n  mc.Member_Count,\n  COALESCE(ftc.Faculty_Tenured_Count, 0) AS Faculty_Tenured_Count\nFROM MemberCounts AS mc\nLEFT JOIN FacultyTenuredCounts AS ftc\n  ON mc.MOIRA_LIST_KEY = ftc.MOIRA_LIST_KEY\nORDER BY\n  mc.Member_Count DESC"
    ],
    "oracle_sql": "WITH MemberCounts AS ( SELECT ml.MOIRA_LIST_NAME, COUNT(DISTINCT mld.MOIRA_LIST_MEMBER) AS Member_Count FROM SE_PERSON se JOIN MOIRA_LIST_DETAIL mld ON upper(se.KRB_NAME) = upper(mld.MOIRA_LIST_MEMBER) JOIN MOIRA_LIST_OWNER mlo ON mld.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY JOIN MOIRA_LIST ml ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY WHERE ml.MOIRA_LIST_NAME IN ( SELECT DISTINCT ml_sub.MOIRA_LIST_NAME FROM SE_PERSON se_sub JOIN MOIRA_LIST_DETAIL mld_sub ON upper(se_sub.KRB_NAME) = upper(mld_sub.MOIRA_LIST_MEMBER) JOIN MOIRA_LIST ml_sub ON mld_sub.MOIRA_LIST_KEY = ml_sub.MOIRA_LIST_KEY WHERE se_sub.FULL_NAME = 'Hopkins, Ayden' ) GROUP BY ml.MOIRA_LIST_NAME ), FacultyTenuredCounts AS ( SELECT ml.MOIRA_LIST_NAME, COUNT(DISTINCT mld.MOIRA_LIST_MEMBER) AS Faculty_Tenured_Count FROM SE_PERSON se JOIN MOIRA_LIST_DETAIL mld ON upper(se.KRB_NAME) = upper(mld.MOIRA_LIST_MEMBER) JOIN MOIRA_LIST_OWNER mlo ON mld.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY JOIN MOIRA_LIST ml ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY WHERE ml.MOIRA_LIST_NAME IN ( SELECT DISTINCT ml_sub.MOIRA_LIST_NAME FROM SE_PERSON se_sub JOIN MOIRA_LIST_DETAIL mld_sub ON upper(se_sub.KRB_NAME) = upper(mld_sub.MOIRA_LIST_MEMBER) JOIN MOIRA_LIST ml_sub ON mld_sub.MOIRA_LIST_KEY = ml_sub.MOIRA_LIST_KEY WHERE se_sub.FULL_NAME = 'Hopkins, Ayden' ) AND se.PAYROLL_RANK = 'Faculty Tenured' GROUP BY ml.MOIRA_LIST_NAME ) SELECT DISTINCT mc.MOIRA_LIST_NAME, ml.MOIRA_LIST_DESCRIPTION, mlo.OWNER, mc.Member_Count, COALESCE(ftc.Faculty_Tenured_Count, 0) AS Faculty_Tenured_Count FROM MemberCounts mc LEFT JOIN FacultyTenuredCounts ftc ON mc.MOIRA_LIST_NAME = ftc.MOIRA_LIST_NAME JOIN MOIRA_LIST ml ON mc.MOIRA_LIST_NAME = ml.MOIRA_LIST_NAME JOIN MOIRA_LIST_DETAIL mld ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY JOIN MOIRA_LIST_OWNER mlo ON MLD.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY WHERE UPPER(ml.MOIRA_LIST_NAME) LIKE 'C%' ORDER BY mc.Member_Count DESC;",
    "gold_tables": [
      "dw#sep#SE_PERSON",
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#MOIRA_LIST",
      "dw#sep#MOIRA_LIST_OWNER"
    ],
    "mapping": {
      "name": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "Professor Ayden Hopkins": [
        "SE_PERSON.FULL_NAME"
      ],
      "description": [
        "MOIRA_LIST.MOIRA_LIST_DESCRIPTION"
      ],
      "owner": [
        "MOIRA_LIST_OWNER.OWNER"
      ],
      "people": [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER"
      ],
      "tenured faculty": [
        "SE_PERSON.PAYROLL_RANK",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER"
      ]
    },
    "join_keys": [
      [
        "MOIRA_LIST.MOIRA_LIST_KEY",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY"
      ],
      [
        "MOIRA_LIST_OWNER.MOIRA_LIST_OWNER_KEY",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_OWNER_KEY"
      ]
    ],
    "original_sql": "WITH FilteredLists AS (\n  SELECT DISTINCT\n    ml.MOIRA_LIST_KEY,\n    ml.MOIRA_LIST_NAME,\n    ml.MOIRA_LIST_DESCRIPTION,\n    mlo.OWNER\n  FROM SE_PERSON AS se\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON UPPER(se.KRB_NAME) = UPPER(mld.MOIRA_LIST_MEMBER)\n  JOIN MOIRA_LIST AS ml\n    ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY\n  JOIN MOIRA_LIST_OWNER AS mlo\n    ON mld.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY\n  WHERE\n    se.FULL_NAME = 'Hopkins, Ayden' AND UPPER(ml.MOIRA_LIST_NAME) LIKE 'R%'\n), MemberCounts AS (\n  SELECT\n    fl.MOIRA_LIST_KEY,\n    fl.MOIRA_LIST_NAME,\n    fl.MOIRA_LIST_DESCRIPTION,\n    fl.OWNER,\n    COUNT(DISTINCT mld.MOIRA_LIST_MEMBER) AS Member_Count\n  FROM FilteredLists AS fl\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON fl.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  GROUP BY\n    fl.MOIRA_LIST_KEY,\n    fl.MOIRA_LIST_NAME,\n    fl.MOIRA_LIST_DESCRIPTION,\n    fl.OWNER\n), FacultyTenuredCounts AS (\n  SELECT\n    fl.MOIRA_LIST_KEY,\n    COUNT(DISTINCT mld.MOIRA_LIST_MEMBER) AS Faculty_Tenured_Count\n  FROM FilteredLists AS fl\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON fl.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  JOIN SE_PERSON AS se\n    ON UPPER(mld.MOIRA_LIST_MEMBER) = UPPER(se.KRB_NAME)\n  WHERE\n    se.PAYROLL_RANK = 'Faculty Tenured'\n  GROUP BY\n    fl.MOIRA_LIST_KEY\n)\nSELECT DISTINCT\n  mc.MOIRA_LIST_NAME,\n  mc.MOIRA_LIST_DESCRIPTION,\n  mc.OWNER,\n  mc.Member_Count,\n  COALESCE(ftc.Faculty_Tenured_Count, 0) AS Faculty_Tenured_Count\nFROM MemberCounts AS mc\nLEFT JOIN FacultyTenuredCounts AS ftc\n  ON mc.MOIRA_LIST_KEY = ftc.MOIRA_LIST_KEY\nORDER BY\n  mc.Member_Count DESC",
    "meta": {
      "features": {
        "query_table_count": 11,
        "query_column_count": 39,
        "query_nested_count": 3,
        "query_aggregate_count": 2,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 7
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "716e64bdecbe",
    "question": "For the email list with name 'date-destiny', list the name of the list, department name, the number of students from the Management department, and the percentage of students who are from the Management department, rounded to two decimal places.",
    "db_id": "dw",
    "sql": [
      "WITH FilteredList AS (\n  SELECT\n    MOIRA_LIST_KEY,\n    MOIRA_LIST_NAME\n  FROM MOIRA_LIST\n  WHERE\n    MOIRA_LIST_NAME = 'date-destiny'\n), FilteredListDetails AS (\n  SELECT\n    mld.MOIRA_LIST_KEY,\n    mld.MOIRA_LIST_MEMBER\n  FROM MOIRA_LIST_DETAIL AS mld\n  JOIN FilteredList AS fl\n    ON mld.MOIRA_LIST_KEY = fl.MOIRA_LIST_KEY\n)\nSELECT\n  ml.MOIRA_LIST_NAME,\n  COUNT(\n    CASE WHEN UPPER(ad.SIS_ADMIN_DEPARTMENT_NAME) = 'MANAGEMENT' THEN 1 ELSE NULL END\n  ) AS MANAGEMENT_STUDENT_COUNT,\n  ROUND(\n    COUNT(\n      CASE WHEN UPPER(ad.SIS_ADMIN_DEPARTMENT_NAME) = 'MANAGEMENT' THEN 1 ELSE NULL END\n    ) * 100.0 / COUNT(fld.MOIRA_LIST_MEMBER),\n    2\n  ) AS MANAGEMENT_STUDENT_PERCENTAGE\nFROM MIT_STUDENT_DIRECTORY AS msd\nJOIN SE_PERSON AS se\n  ON msd.FULL_NAME = se.FULL_NAME\nJOIN FilteredListDetails AS fld\n  ON UPPER(se.KRB_NAME) = UPPER(fld.MOIRA_LIST_MEMBER)\nJOIN FilteredList AS ml\n  ON fld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY\nLEFT JOIN SIS_ADMIN_DEPARTMENT AS ad\n  ON msd.DEPARTMENT = ad.SIS_ADMIN_DEPARTMENT_CODE\nGROUP BY\n  ml.MOIRA_LIST_NAME"
    ],
    "oracle_sql": "WITH FilteredList AS ( SELECT MOIRA_LIST_KEY, MOIRA_LIST_NAME FROM MOIRA_LIST WHERE MOIRA_LIST_NAME = 'date-destiny' ), FilteredListDetails AS ( SELECT mld.MOIRA_LIST_KEY, mld.MOIRA_LIST_MEMBER FROM MOIRA_LIST_DETAIL mld JOIN FilteredList fl ON mld.MOIRA_LIST_KEY = fl.MOIRA_LIST_KEY ) SELECT ml.MOIRA_LIST_NAME, COUNT(CASE WHEN UPPER(ad.SIS_ADMIN_DEPARTMENT_NAME) = 'MANAGEMENT' THEN 1 ELSE NULL END) AS MANAGEMENT_STUDENT_COUNT, ROUND( COUNT(CASE WHEN UPPER(ad.SIS_ADMIN_DEPARTMENT_NAME) = 'MANAGEMENT' THEN 1 ELSE NULL END) * 100.0 / COUNT(fld.MOIRA_LIST_MEMBER), 2 ) AS MANAGEMENT_STUDENT_PERCENTAGE FROM MIT_STUDENT_DIRECTORY msd JOIN SE_PERSON se ON msd.FULL_NAME = se.FULL_NAME JOIN FilteredListDetails fld ON UPPER(se.KRB_NAME) = UPPER(fld.MOIRA_LIST_MEMBER) JOIN FilteredList ml ON fld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY LEFT JOIN SIS_ADMIN_DEPARTMENT ad ON msd.DEPARTMENT = ad.SIS_ADMIN_DEPARTMENT_CODE GROUP BY ml.MOIRA_LIST_NAME;",
    "gold_tables": [
      "dw#sep#MOIRA_LIST",
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#MIT_STUDENT_DIRECTORY",
      "dw#sep#SE_PERSON",
      "dw#sep#SIS_ADMIN_DEPARTMENT"
    ],
    "mapping": {
      "name": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "department name": [
        "SIS_ADMIN_DEPARTMENT.SIS_ADMIN_DEPARTMENT_NAME"
      ],
      "students": [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER"
      ],
      "Management department": [
        "SIS_ADMIN_DEPARTMENT.SIS_ADMIN_DEPARTMENT_NAME"
      ]
    },
    "join_keys": [
      [
        "SE_PERSON.FULL_NAME",
        "MIT_STUDENT_DIRECTORY.FULL_NAME"
      ],
      [
        "SE_PERSON.KRB_NAME",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER"
      ],
      [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY",
        "MOIRA_LIST.MOIRA_LIST_KEY"
      ],
      [
        "MIT_STUDENT_DIRECTORY.DEPARTMENT",
        "SIS_ADMIN_DEPARTMENT.SIS_ADMIN_DEPARTMENT_CODE"
      ]
    ],
    "original_sql": "WITH FilteredList AS (\n  SELECT\n    MOIRA_LIST_KEY,\n    MOIRA_LIST_NAME\n  FROM MOIRA_LIST\n  WHERE\n    MOIRA_LIST_NAME = 'date-destiny'\n), FilteredListDetails AS (\n  SELECT\n    mld.MOIRA_LIST_KEY,\n    mld.MOIRA_LIST_MEMBER\n  FROM MOIRA_LIST_DETAIL AS mld\n  JOIN FilteredList AS fl\n    ON mld.MOIRA_LIST_KEY = fl.MOIRA_LIST_KEY\n)\nSELECT\n  ml.MOIRA_LIST_NAME,\n  COUNT(\n    CASE WHEN UPPER(ad.SIS_ADMIN_DEPARTMENT_NAME) = 'MANAGEMENT' THEN 1 ELSE NULL END\n  ) AS MANAGEMENT_STUDENT_COUNT,\n  ROUND(\n    COUNT(\n      CASE WHEN UPPER(ad.SIS_ADMIN_DEPARTMENT_NAME) = 'MANAGEMENT' THEN 1 ELSE NULL END\n    ) * 100.0 / COUNT(fld.MOIRA_LIST_MEMBER),\n    2\n  ) AS MANAGEMENT_STUDENT_PERCENTAGE\nFROM MIT_STUDENT_DIRECTORY AS msd\nJOIN SE_PERSON AS se\n  ON msd.FULL_NAME = se.FULL_NAME\nJOIN FilteredListDetails AS fld\n  ON UPPER(se.KRB_NAME) = UPPER(fld.MOIRA_LIST_MEMBER)\nJOIN FilteredList AS ml\n  ON fld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY\nLEFT JOIN SIS_ADMIN_DEPARTMENT AS ad\n  ON msd.DEPARTMENT = ad.SIS_ADMIN_DEPARTMENT_CODE\nGROUP BY\n  ml.MOIRA_LIST_NAME",
    "meta": {
      "features": {
        "query_table_count": 8,
        "query_column_count": 20,
        "query_nested_count": 2,
        "query_aggregate_count": 3,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 5
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "1634d223abd0",
    "question": "For the building with the most floors, list the building name and the names of the mailing lists staring with a (case insensitive) that the building employees with kerberos starting with c (case insensitive) subscribe to.",
    "db_id": "dw",
    "sql": [
      "WITH FilteredMoiraLists AS (\n  SELECT\n    MOIRA_LIST_KEY,\n    MOIRA_LIST_NAME\n  FROM MOIRA_LIST\n  WHERE\n    MOIRA_LIST_NAME LIKE 'a%'\n), FilteredMoiraListDetails AS (\n  SELECT\n    mld.MOIRA_LIST_MEMBER,\n    mld.MOIRA_LIST_KEY\n  FROM MOIRA_LIST_DETAIL AS mld\n  JOIN FilteredMoiraLists AS fml\n    ON mld.MOIRA_LIST_KEY = fml.MOIRA_LIST_KEY\n), FloorsWithLevels AS (\n  SELECT\n    fb.BUILDING_NAME,\n    MAX(ff.LEVEL_ID) OVER (PARTITION BY ff.BUILDING_KEY) AS MAX_LEVEL,\n    MIN(ff.LEVEL_ID) OVER (PARTITION BY ff.BUILDING_KEY) AS MIN_LEVEL\n  FROM FAC_BUILDING AS fb\n  JOIN FAC_ROOMS AS fr\n    ON fb.FAC_BUILDING_KEY = fr.BUILDING_KEY\n  JOIN FAC_FLOOR AS ff\n    ON fr.FLOOR_KEY = ff.FLOOR_KEY\n), FloorsPerBuilding AS (\n  SELECT\n    BUILDING_NAME,\n    MAX_LEVEL - MIN_LEVEL + 1 AS NUM_FLOORS\n  FROM FloorsWithLevels\n  GROUP BY\n    BUILDING_NAME,\n    MAX_LEVEL,\n    MIN_LEVEL\n), MaxFloors AS (\n  SELECT\n    MAX(NUM_FLOORS) AS MAX_FLOORS\n  FROM FloorsPerBuilding\n), BuildingWithMostFloors AS (\n  SELECT\n    a.BUILDING_NAME\n  FROM FloorsPerBuilding AS a\n  JOIN MaxFloors AS b\n    ON a.NUM_FLOORS = b.MAX_FLOORS\n), EmployeesInTallestBuildings AS (\n  SELECT DISTINCT\n    UPPER(e.KRB_NAME) AS KRB_NAME,\n    fb.building_name\n  FROM BuildingWithMostFloors AS b\n  JOIN FAC_BUILDING AS fb\n    ON b.BUILDING_NAME = fb.BUILDING_NAME\n  JOIN FAC_ROOMS AS fr\n    ON fb.FAC_BUILDING_KEY = fr.BUILDING_KEY\n  JOIN EMPLOYEE_DIRECTORY AS e\n    ON e.OFFICE_LOCATION = fr.FAC_ROOM_KEY\n  WHERE\n    UPPER(e.KRB_NAME) LIKE 'C%'\n)\nSELECT DISTINCT\n  etb.BUILDING_NAME,\n  fml.MOIRA_LIST_NAME\nFROM EmployeesInTallestBuildings AS etb\nJOIN FilteredMoiraListDetails AS fmld\n  ON UPPER(etb.KRB_NAME) = UPPER(fmld.MOIRA_LIST_MEMBER)\nJOIN FilteredMoiraLists AS fml\n  ON fmld.MOIRA_LIST_KEY = fml.MOIRA_LIST_KEY"
    ],
    "oracle_sql": "WITH FloorsWithLevels AS (SELECT fb.BUILDING_NAME, e.FULL_NAME, ml.MOIRA_LIST_NAME, e.KRB_NAME, MAX(ff.LEVEL_ID) OVER (PARTITION BY ff.BUILDING_KEY) AS MAX_LEVEL, MIN(ff.LEVEL_ID) OVER (PARTITION BY ff.BUILDING_KEY) AS MIN_LEVEL FROM FAC_BUILDING fb JOIN FAC_ROOMS fr ON fb.FAC_BUILDING_KEY = fr.BUILDING_KEY JOIN FAC_FLOOR ff ON fr.FLOOR_KEY = ff.FLOOR_KEY JOIN EMPLOYEE_DIRECTORY e ON e.OFFICE_LOCATION = fr.FAC_ROOM_KEY JOIN MOIRA_LIST_DETAIL mld ON e.KRB_NAME = mld.MOIRA_LIST_MEMBER JOIN MOIRA_LIST ml ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY), FloorsPerBuilding AS (SELECT BUILDING_NAME, FULL_NAME, MOIRA_LIST_NAME, KRB_NAME, MAX_LEVEL - MIN_LEVEL AS NUM_FLOORS FROM FloorsWithLevels GROUP BY BUILDING_NAME, FULL_NAME, MOIRA_LIST_NAME, KRB_NAME, MAX_LEVEL, MIN_LEVEL), MaxFloors AS (SELECT MAX(NUM_FLOORS) AS MAX_FLOORS FROM FloorsPerBuilding) SELECT a.BUILDING_NAME, a.MOIRA_LIST_NAME FROM FloorsPerBuilding a JOIN MaxFloors b ON a.NUM_FLOORS = b.MAX_FLOORS WHERE LOWER(a.MOIRA_LIST_NAME) LIKE 'a%' AND LOWER(a.KRB_NAME) LIKE 'c%';",
    "gold_tables": [
      "dw#sep#MOIRA_LIST",
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#FAC_BUILDING",
      "dw#sep#FAC_ROOMS",
      "dw#sep#FAC_FLOOR",
      "dw#sep#EMPLOYEE_DIRECTORY"
    ],
    "mapping": {
      "floors": [
        "FAC_FLOOR.LEVEL_ID"
      ],
      "building name": [
        "FAC_BUILDING.BUILDING_NAME"
      ],
      "names of the mailing lists": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "kerberos": [
        "EMPLOYEE_DIRECTORY.KRB_NAME"
      ]
    },
    "join_keys": [
      [
        "FAC_ROOMS.BUILDING_KEY",
        "FAC_BUILDING.FAC_BUILDING_KEY"
      ],
      [
        "FAC_FLOOR.FLOOR_KEY",
        "FAC_ROOMS.FLOOR_KEY"
      ],
      [
        "FAC_ROOMS.FAC_ROOM_KEY",
        "EMPLOYEE_DIRECTORY.OFFICE_LOCATION"
      ],
      [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER",
        "EMPLOYEE_DIRECTORY.KRB_NAME"
      ],
      [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY",
        "MOIRA_LIST.MOIRA_LIST_KEY"
      ]
    ],
    "original_sql": "WITH FilteredMoiraLists AS (\n  SELECT\n    MOIRA_LIST_KEY,\n    MOIRA_LIST_NAME\n  FROM MOIRA_LIST\n  WHERE\n    MOIRA_LIST_NAME LIKE 'a%'\n), FilteredMoiraListDetails AS (\n  SELECT\n    mld.MOIRA_LIST_MEMBER,\n    mld.MOIRA_LIST_KEY\n  FROM MOIRA_LIST_DETAIL AS mld\n  JOIN FilteredMoiraLists AS fml\n    ON mld.MOIRA_LIST_KEY = fml.MOIRA_LIST_KEY\n), FloorsWithLevels AS (\n  SELECT\n    fb.BUILDING_NAME,\n    MAX(ff.LEVEL_ID) OVER (PARTITION BY ff.BUILDING_KEY) AS MAX_LEVEL,\n    MIN(ff.LEVEL_ID) OVER (PARTITION BY ff.BUILDING_KEY) AS MIN_LEVEL\n  FROM FAC_BUILDING AS fb\n  JOIN FAC_ROOMS AS fr\n    ON fb.FAC_BUILDING_KEY = fr.BUILDING_KEY\n  JOIN FAC_FLOOR AS ff\n    ON fr.FLOOR_KEY = ff.FLOOR_KEY\n), FloorsPerBuilding AS (\n  SELECT\n    BUILDING_NAME,\n    MAX_LEVEL - MIN_LEVEL + 1 AS NUM_FLOORS\n  FROM FloorsWithLevels\n  GROUP BY\n    BUILDING_NAME,\n    MAX_LEVEL,\n    MIN_LEVEL\n), MaxFloors AS (\n  SELECT\n    MAX(NUM_FLOORS) AS MAX_FLOORS\n  FROM FloorsPerBuilding\n), BuildingWithMostFloors AS (\n  SELECT\n    a.BUILDING_NAME\n  FROM FloorsPerBuilding AS a\n  JOIN MaxFloors AS b\n    ON a.NUM_FLOORS = b.MAX_FLOORS\n), EmployeesInTallestBuildings AS (\n  SELECT DISTINCT\n    UPPER(e.KRB_NAME) AS KRB_NAME,\n    fb.building_name\n  FROM BuildingWithMostFloors AS b\n  JOIN FAC_BUILDING AS fb\n    ON b.BUILDING_NAME = fb.BUILDING_NAME\n  JOIN FAC_ROOMS AS fr\n    ON fb.FAC_BUILDING_KEY = fr.BUILDING_KEY\n  JOIN EMPLOYEE_DIRECTORY AS e\n    ON e.OFFICE_LOCATION = fr.FAC_ROOM_KEY\n  WHERE\n    UPPER(e.KRB_NAME) LIKE 'C%'\n)\nSELECT DISTINCT\n  etb.BUILDING_NAME,\n  fml.MOIRA_LIST_NAME\nFROM EmployeesInTallestBuildings AS etb\nJOIN FilteredMoiraListDetails AS fmld\n  ON UPPER(etb.KRB_NAME) = UPPER(fmld.MOIRA_LIST_MEMBER)\nJOIN FilteredMoiraLists AS fml\n  ON fmld.MOIRA_LIST_KEY = fml.MOIRA_LIST_KEY",
    "meta": {
      "features": {
        "query_table_count": 17,
        "query_column_count": 41,
        "query_nested_count": 7,
        "query_aggregate_count": 3,
        "query_sort_count": 0,
        "query_window_func_count": 2,
        "query_join_count": 9
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_window_function"
      ]
    }
  },
  {
    "id": "de6a116d5820",
    "question": "For the email lists subscribed by faculty members with last names begin with Y, list the names of the lists, the total number of subjects managed by faculty in those mailing lists, and the number of such faculty in the lists.",
    "db_id": "dw",
    "sql": [
      "SELECT DISTINCT\n  ml.MOIRA_LIST_NAME,\n  COUNT(ccso.SUBJECT_ID) AS course_count,\n  COUNT(DISTINCT ccso.RESPONSIBLE_FACULTY_NAME) AS distinct_faculty_count\nFROM COURSE_CATALOG_SUBJECT_OFFERED AS ccso\nJOIN EMPLOYEE_DIRECTORY AS E\n  ON ccso.RESPONSIBLE_FACULTY_MIT_ID = E.MIT_ID\nJOIN MOIRA_LIST_DETAIL AS mld\n  ON UPPER(E.KRB_NAME_UPPERCASE) = UPPER(mld.MOIRA_LIST_MEMBER)\nJOIN MOIRA_LIST AS ml\n  ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY\nWHERE\n  ccso.RESPONSIBLE_FACULTY_NAME LIKE 'Y%'\nGROUP BY\n  ml.MOIRA_LIST_NAME"
    ],
    "oracle_sql": "SELECT DISTINCT ml.MOIRA_LIST_NAME, COUNT(ccso.SUBJECT_ID) AS course_count, COUNT(DISTINCT ccso.RESPONSIBLE_FACULTY_NAME) AS distinct_faculty_count FROM COURSE_CATALOG_SUBJECT_OFFERED ccso JOIN EMPLOYEE_DIRECTORY E ON ccso.RESPONSIBLE_FACULTY_MIT_ID = E.MIT_ID JOIN MOIRA_LIST_DETAIL mld ON upper(e.KRB_NAME_UPPERCASE) = upper(mld.MOIRA_LIST_MEMBER) JOIN MOIRA_LIST ml ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY WHERE ccso.RESPONSIBLE_FACULTY_NAME LIKE 'Y%' GROUP BY ML.MOIRA_LIST_NAME",
    "gold_tables": [
      "dw#sep#COURSE_CATALOG_SUBJECT_OFFERED",
      "dw#sep#EMPLOYEE_DIRECTORY",
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#MOIRA_LIST"
    ],
    "mapping": {
      "last names": [
        "COURSE_CATALOG_SUBJECT_OFFERED.RESPONSIBLE_FACULTY_NAME"
      ],
      "names of the lists": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "subjects": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_ID"
      ],
      "faculty": [
        "COURSE_CATALOG_SUBJECT_OFFERED.RESPONSIBLE_FACULTY_NAME"
      ]
    },
    "join_keys": [
      [
        "COURSE_CATALOG_SUBJECT_OFFERED.RESPONSIBLE_FACULTY_MIT_ID",
        "EMPLOYEE_DIRECTORY.MIT_ID"
      ]
    ],
    "original_sql": "SELECT DISTINCT\n  ml.MOIRA_LIST_NAME,\n  COUNT(ccso.SUBJECT_ID) AS course_count,\n  COUNT(DISTINCT ccso.RESPONSIBLE_FACULTY_NAME) AS distinct_faculty_count\nFROM COURSE_CATALOG_SUBJECT_OFFERED AS ccso\nJOIN EMPLOYEE_DIRECTORY AS E\n  ON ccso.RESPONSIBLE_FACULTY_MIT_ID = E.MIT_ID\nJOIN MOIRA_LIST_DETAIL AS mld\n  ON UPPER(e.KRB_NAME_UPPERCASE) = UPPER(mld.MOIRA_LIST_MEMBER)\nJOIN MOIRA_LIST AS ml\n  ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY\nWHERE\n  ccso.RESPONSIBLE_FACULTY_NAME LIKE 'Y%'\nGROUP BY\n  ML.MOIRA_LIST_NAME",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 11,
        "query_nested_count": 0,
        "query_aggregate_count": 2,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "06d1e92a5bf6",
    "question": "For students with last names starting with H who are subscribed to mailing list 'beacon-date-date', list the names of the students, the phone numbers of departments they belong to, and the size of the mailing list 'beacon-date-date' that they are subscribed to.",
    "db_id": "dw",
    "sql": [
      "WITH FilteredMoiraLists AS (\n  SELECT\n    MOIRA_LIST_KEY,\n    MOIRA_LIST_NAME\n  FROM MOIRA_LIST\n  WHERE\n    MOIRA_LIST_NAME = 'beacon-date-date'\n), FilteredMoiraListDetails AS (\n  SELECT\n    mld.MOIRA_LIST_MEMBER,\n    mld.MOIRA_LIST_KEY\n  FROM MOIRA_LIST_DETAIL AS mld\n  JOIN FilteredMoiraLists AS fml\n    ON mld.MOIRA_LIST_KEY = fml.MOIRA_LIST_KEY\n), MailingListSizes AS (\n  SELECT\n    fml.MOIRA_LIST_KEY,\n    fml.MOIRA_LIST_NAME,\n    COUNT(fmld.MOIRA_LIST_MEMBER) AS List_Size\n  FROM FilteredMoiraLists AS fml\n  JOIN FilteredMoiraListDetails AS fmld\n    ON fml.MOIRA_LIST_KEY = fmld.MOIRA_LIST_KEY\n  GROUP BY\n    fml.MOIRA_LIST_KEY,\n    fml.MOIRA_LIST_NAME\n)\nSELECT\n  msd.FULL_NAME AS Student_Name,\n  sad.DEPARTMENT_PHONE_NUMBER,\n  MLS.List_Size AS List_Size\nFROM MIT_STUDENT_DIRECTORY AS msd\nJOIN SIS_DEPARTMENT AS sd\n  ON msd.DEPARTMENT = sd.DEPARTMENT_CODE\nJOIN SIS_ADMIN_DEPARTMENT AS sad\n  ON sd.DEPARTMENT_CODE = sad.SIS_ADMIN_DEPARTMENT_CODE\nJOIN SE_PERSON AS se\n  ON msd.FULL_NAME = se.FULL_NAME\nJOIN FilteredMoiraListDetails AS fmld\n  ON UPPER(se.KRB_NAME) = UPPER(fmld.MOIRA_LIST_MEMBER)\nJOIN FilteredMoiraLists AS fml\n  ON fmld.MOIRA_LIST_KEY = fml.MOIRA_LIST_KEY\nJOIN MailingListSizes AS MLS\n  ON fml.MOIRA_LIST_KEY = MLS.MOIRA_LIST_KEY\nWHERE\n  msd.LAST_NAME LIKE 'H%'"
    ],
    "oracle_sql": "WITH FilteredMoiraLists AS ( SELECT MOIRA_LIST_KEY, MOIRA_LIST_NAME FROM MOIRA_LIST WHERE MOIRA_LIST_NAME = 'beacon-date-date' ), FilteredMoiraListDetails AS ( SELECT mld.MOIRA_LIST_MEMBER, mld.MOIRA_LIST_KEY FROM MOIRA_LIST_DETAIL mld JOIN FilteredMoiraLists fml ON mld.MOIRA_LIST_KEY = fml.MOIRA_LIST_KEY ), MailingListSizes AS ( SELECT fml.MOIRA_LIST_KEY, fml.MOIRA_LIST_NAME, COUNT(fmld.MOIRA_LIST_MEMBER) AS List_Size FROM FilteredMoiraLists fml JOIN FilteredMoiraListDetails fmld ON fml.MOIRA_LIST_KEY = fmld.MOIRA_LIST_KEY GROUP BY fml.MOIRA_LIST_KEY, fml.MOIRA_LIST_NAME ) SELECT msd.FULL_NAME AS Student_Name, sad.DEPARTMENT_PHONE_NUMBER, MLS.List_Size AS List_Size FROM MIT_STUDENT_DIRECTORY msd JOIN SIS_DEPARTMENT sd ON msd.DEPARTMENT = sd.DEPARTMENT_CODE JOIN SIS_ADMIN_DEPARTMENT sad ON sd.DEPARTMENT_CODE = sad.SIS_ADMIN_DEPARTMENT_CODE JOIN SE_PERSON se ON msd.FULL_NAME = se.FULL_NAME JOIN FilteredMoiraListDetails fmld ON UPPER(se.KRB_NAME) = UPPER(fmld.MOIRA_LIST_MEMBER) JOIN FilteredMoiraLists fml ON fmld.MOIRA_LIST_KEY = fml.MOIRA_LIST_KEY JOIN MailingListSizes MLS ON fml.MOIRA_LIST_KEY = MLS.MOIRA_LIST_KEY WHERE msd.LAST_NAME LIKE 'H%';",
    "gold_tables": [
      "dw#sep#MOIRA_LIST",
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#MIT_STUDENT_DIRECTORY",
      "dw#sep#SIS_DEPARTMENT",
      "dw#sep#SIS_ADMIN_DEPARTMENT",
      "dw#sep#SE_PERSON"
    ],
    "mapping": {
      "last names": [
        "MIT_STUDENT_DIRECTORY.LAST_NAME"
      ],
      "mailing list 'beacon-date-date'": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "names": [
        "MIT_STUDENT_DIRECTORY.FULL_NAME"
      ],
      "phone numbers": [
        "SIS_ADMIN_DEPARTMENT.DEPARTMENT_PHONE_NUMBER"
      ],
      "size of the mailing list": [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER"
      ]
    },
    "join_keys": [
      [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY",
        "MOIRA_LIST.MOIRA_LIST_KEY"
      ],
      [
        "MIT_STUDENT_DIRECTORY.DEPARTMENT",
        "SIS_DEPARTMENT.DEPARTMENT_CODE"
      ],
      [
        "SIS_DEPARTMENT.DEPARTMENT_CODE",
        "SIS_ADMIN_DEPARTMENT.SIS_ADMIN_DEPARTMENT_CODE"
      ],
      [
        "MIT_STUDENT_DIRECTORY.FULL_NAME",
        "SE_PERSON.FULL_NAME"
      ],
      [
        "SE_PERSON.KRB_NAME",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER"
      ],
      [
        "MOIRA_LIST.MOIRA_LIST_KEY",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY"
      ]
    ],
    "original_sql": "WITH FilteredMoiraLists AS (\n  SELECT\n    MOIRA_LIST_KEY,\n    MOIRA_LIST_NAME\n  FROM MOIRA_LIST\n  WHERE\n    MOIRA_LIST_NAME = 'beacon-date-date'\n), FilteredMoiraListDetails AS (\n  SELECT\n    mld.MOIRA_LIST_MEMBER,\n    mld.MOIRA_LIST_KEY\n  FROM MOIRA_LIST_DETAIL AS mld\n  JOIN FilteredMoiraLists AS fml\n    ON mld.MOIRA_LIST_KEY = fml.MOIRA_LIST_KEY\n), MailingListSizes AS (\n  SELECT\n    fml.MOIRA_LIST_KEY,\n    fml.MOIRA_LIST_NAME,\n    COUNT(fmld.MOIRA_LIST_MEMBER) AS List_Size\n  FROM FilteredMoiraLists AS fml\n  JOIN FilteredMoiraListDetails AS fmld\n    ON fml.MOIRA_LIST_KEY = fmld.MOIRA_LIST_KEY\n  GROUP BY\n    fml.MOIRA_LIST_KEY,\n    fml.MOIRA_LIST_NAME\n)\nSELECT\n  msd.FULL_NAME AS Student_Name,\n  sad.DEPARTMENT_PHONE_NUMBER,\n  MLS.List_Size AS List_Size\nFROM MIT_STUDENT_DIRECTORY AS msd\nJOIN SIS_DEPARTMENT AS sd\n  ON msd.DEPARTMENT = sd.DEPARTMENT_CODE\nJOIN SIS_ADMIN_DEPARTMENT AS sad\n  ON sd.DEPARTMENT_CODE = sad.SIS_ADMIN_DEPARTMENT_CODE\nJOIN SE_PERSON AS se\n  ON msd.FULL_NAME = se.FULL_NAME\nJOIN FilteredMoiraListDetails AS fmld\n  ON UPPER(se.KRB_NAME) = UPPER(fmld.MOIRA_LIST_MEMBER)\nJOIN FilteredMoiraLists AS fml\n  ON fmld.MOIRA_LIST_KEY = fml.MOIRA_LIST_KEY\nJOIN MailingListSizes AS MLS\n  ON fml.MOIRA_LIST_KEY = MLS.MOIRA_LIST_KEY\nWHERE\n  msd.LAST_NAME LIKE 'H%'",
    "meta": {
      "features": {
        "query_table_count": 12,
        "query_column_count": 30,
        "query_nested_count": 3,
        "query_aggregate_count": 1,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 8
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "29b8036c06dd",
    "question": "Give the count of mailing lists with names starting with B that include members from the Electrical Engineering and Computer Science department, along with the name of the list starting with B that have the highest number of members from that department and the corresponding member count.",
    "db_id": "dw",
    "sql": [
      "WITH DistinctLists AS (\n  SELECT\n    ml.MOIRA_LIST_NAME,\n    COUNT(DISTINCT se.MIT_ID) AS Member_Count\n  FROM MOIRA_LIST AS ml\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  JOIN SE_PERSON AS se\n    ON UPPER(mld.MOIRA_LIST_MEMBER) = UPPER(se.KRB_NAME)\n  WHERE\n    UPPER(ml.MOIRA_LIST_NAME) LIKE 'B%'\n    AND se.ORGANIZATION = 'Electrical Engineering-Computer Science'\n  GROUP BY\n    ml.MOIRA_LIST_NAME\n), Moira_List_With_Most_Members AS (\n  SELECT\n    MOIRA_LIST_NAME,\n    Member_Count\n  FROM DistinctLists\n  WHERE\n    Member_Count = (\n      SELECT\n        MAX(Member_Count)\n      FROM DistinctLists\n    )\n)\nSELECT\n  COUNT(DISTINCT dl.MOIRA_LIST_NAME) AS Moira_Lists_Start_With_B,\n  (\n    SELECT\n      MOIRA_LIST_NAME\n    FROM Moira_List_With_Most_Members\n    LIMIT 1\n  ) AS Moira_List_With_Most_Members,\n  (\n    SELECT\n      Member_Count\n    FROM Moira_List_With_Most_Members\n    LIMIT 1\n  ) AS Most_Number_Of_Members\nFROM DistinctLists AS dl"
    ],
    "oracle_sql": "WITH DistinctLists AS (SELECT ml.MOIRA_LIST_NAME, COUNT(DISTINCT se.MIT_ID) AS Member_Count FROM MOIRA_LIST ml JOIN MOIRA_LIST_DETAIL mld ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY JOIN MOIRA_LIST_OWNER mlo ON mld.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY JOIN SE_PERSON se ON UPPER(mld.MOIRA_LIST_MEMBER) = upper(se.KRB_NAME) WHERE UPPER(ml.MOIRA_LIST_NAME) LIKE 'B%' AND se.ORGANIZATION = 'Electrical Engineering-Computer Science' GROUP BY ml.MOIRA_LIST_NAME), Moira_List_With_Most_Members AS (SELECT MOIRA_LIST_NAME FROM DistinctLists WHERE Member_Count = (SELECT MAX(Member_Count) FROM DistinctLists)) SELECT COUNT(DISTINCT dl.MOIRA_LIST_NAME) AS Moira_Lists_Start_With_B, MAX(mll.MOIRA_LIST_NAME) AS Moira_List_With_Most_Members, MAX(dl.Member_Count) AS Most_Number_Of_Members FROM DistinctLists dl LEFT JOIN Moira_List_With_Most_Members mll ON dl.MOIRA_LIST_NAME = mll.MOIRA_LIST_NAME;",
    "gold_tables": [
      "dw#sep#MOIRA_LIST",
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#SE_PERSON"
    ],
    "mapping": {
      "mailing lists": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "names": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "members": [
        "SE_PERSON.MIT_ID"
      ],
      "Electrical Engineering and Computer Science department": [
        "SE_PERSON.ORGANIZATION"
      ]
    },
    "join_keys": [
      [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY",
        "MOIRA_LIST.MOIRA_LIST_KEY"
      ],
      [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER",
        "SE_PERSON.KRB_NAME"
      ]
    ],
    "original_sql": "WITH DistinctLists AS (\n  SELECT\n    ml.MOIRA_LIST_NAME,\n    COUNT(DISTINCT se.MIT_ID) AS Member_Count\n  FROM MOIRA_LIST AS ml\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  JOIN SE_PERSON AS se\n    ON UPPER(mld.MOIRA_LIST_MEMBER) = UPPER(se.KRB_NAME)\n  WHERE\n    UPPER(ml.MOIRA_LIST_NAME) LIKE 'B%'\n    AND se.ORGANIZATION = 'Electrical Engineering-Computer Science'\n  GROUP BY\n    ml.MOIRA_LIST_NAME\n), Moira_List_With_Most_Members AS (\n  SELECT\n    MOIRA_LIST_NAME,\n    Member_Count\n  FROM DistinctLists\n  WHERE\n    Member_Count = (\n      SELECT\n        MAX(Member_Count)\n      FROM DistinctLists\n    )\n)\nSELECT\n  COUNT(DISTINCT dl.MOIRA_LIST_NAME) AS Moira_Lists_Start_With_B,\n  (\n    SELECT\n      MOIRA_LIST_NAME\n    FROM Moira_List_With_Most_Members\n    LIMIT 1\n  ) AS Moira_List_With_Most_Members,\n  (\n    SELECT\n      Member_Count\n    FROM Moira_List_With_Most_Members\n    LIMIT 1\n  ) AS Most_Number_Of_Members\nFROM DistinctLists AS dl",
    "meta": {
      "features": {
        "query_table_count": 8,
        "query_column_count": 16,
        "query_nested_count": 5,
        "query_aggregate_count": 3,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "e4b6e12cdcf7",
    "question": "For the 'kangaroo-inspire-yearn' email list, for each department present in the list, list the department name, the number of students in that department, and its percentage relative to the students in the mailing list.",
    "db_id": "dw",
    "sql": [
      "WITH FilteredList AS (\n  SELECT\n    MOIRA_LIST_KEY,\n    MOIRA_LIST_NAME\n  FROM MOIRA_LIST\n  WHERE\n    MOIRA_LIST_NAME = 'kangaroo-inspire-yearn'\n), FilteredListDetails AS (\n  SELECT\n    mld.MOIRA_LIST_KEY,\n    mld.MOIRA_LIST_MEMBER\n  FROM MOIRA_LIST_DETAIL AS mld\n  JOIN FilteredList AS fl\n    ON mld.MOIRA_LIST_KEY = fl.MOIRA_LIST_KEY\n), DepartmentCounts AS (\n  SELECT\n    ad.SIS_ADMIN_DEPARTMENT_NAME AS department_name,\n    COUNT(DISTINCT fld.MOIRA_LIST_MEMBER) AS department_student_count\n  FROM MIT_STUDENT_DIRECTORY AS msd\n  JOIN SE_PERSON AS se\n    ON msd.FULL_NAME = se.FULL_NAME\n  JOIN FilteredListDetails AS fld\n    ON UPPER(se.KRB_NAME) = UPPER(fld.MOIRA_LIST_MEMBER)\n  LEFT JOIN SIS_ADMIN_DEPARTMENT AS ad\n    ON msd.DEPARTMENT = ad.SIS_ADMIN_DEPARTMENT_CODE\n  GROUP BY\n    ad.SIS_ADMIN_DEPARTMENT_NAME\n), TotalStudents AS (\n  SELECT\n    COUNT(DISTINCT fld.MOIRA_LIST_MEMBER) AS total_students\n  FROM FilteredListDetails AS fld\n)\nSELECT\n  dc.department_name,\n  dc.department_student_count,\n  ROUND(dc.department_student_count * 100.0 / ts.total_students, 2) AS department_student_percentage\nFROM DepartmentCounts AS dc, TotalStudents AS ts"
    ],
    "oracle_sql": "WITH FilteredList AS ( SELECT MOIRA_LIST_KEY, MOIRA_LIST_NAME FROM MOIRA_LIST WHERE MOIRA_LIST_NAME = 'kangaroo-inspire-yearn' ), FilteredListDetails AS ( SELECT mld.MOIRA_LIST_KEY, mld.MOIRA_LIST_MEMBER FROM MOIRA_LIST_DETAIL mld JOIN FilteredList fl ON mld.MOIRA_LIST_KEY = fl.MOIRA_LIST_KEY ), DepartmentCounts AS ( SELECT ad.SIS_ADMIN_DEPARTMENT_NAME AS department_name, COUNT(DISTINCT fld.MOIRA_LIST_MEMBER) AS department_student_count FROM MIT_STUDENT_DIRECTORY msd JOIN SE_PERSON se ON msd.FULL_NAME = se.FULL_NAME JOIN FilteredListDetails fld ON UPPER(se.KRB_NAME) = UPPER(fld.MOIRA_LIST_MEMBER) LEFT JOIN SIS_ADMIN_DEPARTMENT ad ON msd.DEPARTMENT = ad.SIS_ADMIN_DEPARTMENT_CODE GROUP BY ad.SIS_ADMIN_DEPARTMENT_NAME ), TotalStudents AS ( SELECT COUNT(DISTINCT fld.MOIRA_LIST_MEMBER) AS total_students FROM FilteredListDetails fld ) SELECT dc.department_name, dc.department_student_count, ROUND( dc.department_student_count * 100.0 / ts.total_students, 2 ) AS department_student_percentage FROM DepartmentCounts dc, TotalStudents ts;",
    "gold_tables": [
      "dw#sep#MOIRA_LIST",
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#MIT_STUDENT_DIRECTORY",
      "dw#sep#SE_PERSON",
      "dw#sep#SIS_ADMIN_DEPARTMENT"
    ],
    "mapping": {
      "'kangaroo-inspire-yearn' email list": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "department name": [
        "SIS_ADMIN_DEPARTMENT.SIS_ADMIN_DEPARTMENT_NAME"
      ],
      "students": [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER"
      ]
    },
    "join_keys": [
      [
        "SE_PERSON.FULL_NAME",
        "MIT_STUDENT_DIRECTORY.FULL_NAME"
      ],
      [
        "SE_PERSON.KRB_NAME",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER"
      ],
      [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY",
        "MOIRA_LIST.MOIRA_LIST_KEY"
      ],
      [
        "MIT_STUDENT_DIRECTORY.DEPARTMENT",
        "SIS_ADMIN_DEPARTMENT.SIS_ADMIN_DEPARTMENT_CODE"
      ]
    ],
    "original_sql": "WITH FilteredList AS (\n  SELECT\n    MOIRA_LIST_KEY,\n    MOIRA_LIST_NAME\n  FROM MOIRA_LIST\n  WHERE\n    MOIRA_LIST_NAME = 'kangaroo-inspire-yearn'\n), FilteredListDetails AS (\n  SELECT\n    mld.MOIRA_LIST_KEY,\n    mld.MOIRA_LIST_MEMBER\n  FROM MOIRA_LIST_DETAIL AS mld\n  JOIN FilteredList AS fl\n    ON mld.MOIRA_LIST_KEY = fl.MOIRA_LIST_KEY\n), DepartmentCounts AS (\n  SELECT\n    ad.SIS_ADMIN_DEPARTMENT_NAME AS department_name,\n    COUNT(DISTINCT fld.MOIRA_LIST_MEMBER) AS department_student_count\n  FROM MIT_STUDENT_DIRECTORY AS msd\n  JOIN SE_PERSON AS se\n    ON msd.FULL_NAME = se.FULL_NAME\n  JOIN FilteredListDetails AS fld\n    ON UPPER(se.KRB_NAME) = UPPER(fld.MOIRA_LIST_MEMBER)\n  LEFT JOIN SIS_ADMIN_DEPARTMENT AS ad\n    ON msd.DEPARTMENT = ad.SIS_ADMIN_DEPARTMENT_CODE\n  GROUP BY\n    ad.SIS_ADMIN_DEPARTMENT_NAME\n), TotalStudents AS (\n  SELECT\n    COUNT(DISTINCT fld.MOIRA_LIST_MEMBER) AS total_students\n  FROM FilteredListDetails AS fld\n)\nSELECT\n  dc.department_name,\n  dc.department_student_count,\n  ROUND(dc.department_student_count * 100.0 / ts.total_students, 2) AS department_student_percentage\nFROM DepartmentCounts AS dc, TotalStudents AS ts",
    "meta": {
      "features": {
        "query_table_count": 10,
        "query_column_count": 21,
        "query_nested_count": 4,
        "query_aggregate_count": 2,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 5
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "71d049c5ba0e",
    "question": "Among the mailing lists subscribed by people with physical offices in building 24, provide the name of the most subscribed mailing list and the total number of subscribers.",
    "db_id": "dw",
    "sql": [
      "WITH MailingListStats AS (\n  SELECT\n    ml.MOIRA_LIST_NAME,\n    COUNT(DISTINCT mld.MOIRA_LIST_MEMBER) AS Total_Members\n  FROM MOIRA_LIST AS ml\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  JOIN EMPLOYEE_DIRECTORY AS ed\n    ON mld.MOIRA_LIST_MEMBER = ed.KRB_NAME\n  WHERE\n    ed.OFFICE_LOCATION LIKE '24%'\n  GROUP BY\n    ml.MOIRA_LIST_NAME\n), Largest AS (\n  SELECT\n    MOIRA_LIST_NAME,\n    Total_Members,\n    RANK() OVER (ORDER BY Total_Members DESC) AS Size_Rank\n  FROM MailingListStats\n)\nSELECT\n  MAX(CASE WHEN Size_Rank = 1 THEN MOIRA_LIST_NAME END) AS Largest_Mailing_List,\n  MAX(CASE WHEN Size_Rank = 1 THEN Total_Members END) AS Member_Count\nFROM Largest"
    ],
    "oracle_sql": "WITH MailingListStats AS ( SELECT ml.MOIRA_LIST_NAME, COUNT(DISTINCT mld.MOIRA_LIST_MEMBER) AS Total_Members FROM MOIRA_LIST ml JOIN MOIRA_LIST_DETAIL mld ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY JOIN EMPLOYEE_DIRECTORY ed ON mld.MOIRA_LIST_MEMBER = ed.KRB_NAME WHERE ed.OFFICE_LOCATION LIKE '24%' GROUP BY ml.MOIRA_LIST_NAME ), Largest AS ( SELECT MOIRA_LIST_NAME, Total_Members, RANK() OVER (ORDER BY Total_Members DESC) AS Size_Rank FROM MailingListStats ) SELECT MAX(CASE WHEN Size_Rank = 1 THEN MOIRA_LIST_NAME END) AS Largest_Mailing_List, MAX(CASE WHEN Size_Rank = 1 THEN Total_Members END) AS Member_Count FROM Largest;",
    "gold_tables": [
      "dw#sep#MOIRA_LIST",
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#EMPLOYEE_DIRECTORY"
    ],
    "mapping": {
      "physical offices in building 24": [
        "EMPLOYEE_DIRECTORY.OFFICE_LOCATION"
      ],
      "name": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "subscribers": [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER"
      ]
    },
    "join_keys": [
      [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY",
        "MOIRA_LIST.MOIRA_LIST_KEY"
      ],
      [
        "EMPLOYEE_DIRECTORY.KRB_NAME",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER"
      ]
    ],
    "original_sql": "WITH MailingListStats AS (\n  SELECT\n    ml.MOIRA_LIST_NAME,\n    COUNT(DISTINCT mld.MOIRA_LIST_MEMBER) AS Total_Members\n  FROM MOIRA_LIST AS ml\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  JOIN EMPLOYEE_DIRECTORY AS ed\n    ON mld.MOIRA_LIST_MEMBER = ed.KRB_NAME\n  WHERE\n    ed.OFFICE_LOCATION LIKE '24%'\n  GROUP BY\n    ml.MOIRA_LIST_NAME\n), Largest AS (\n  SELECT\n    MOIRA_LIST_NAME,\n    Total_Members,\n    RANK() OVER (ORDER BY Total_Members DESC) AS Size_Rank\n  FROM MailingListStats\n)\nSELECT\n  MAX(CASE WHEN Size_Rank = 1 THEN MOIRA_LIST_NAME END) AS Largest_Mailing_List,\n  MAX(CASE WHEN Size_Rank = 1 THEN Total_Members END) AS Member_Count\nFROM Largest",
    "meta": {
      "features": {
        "query_table_count": 5,
        "query_column_count": 15,
        "query_nested_count": 2,
        "query_aggregate_count": 4,
        "query_sort_count": 1,
        "query_window_func_count": 1,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "1e9a46de82c0",
    "question": "For email lists subscribed by either support staff or faculty, list its name, the number of subscribers that are support staff, the number of subscribers that are faculty, as well as its active status.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  ml.MOIRA_LIST_NAME,\n  SUM(CASE WHEN se.EMPLOYEE_TYPE = 'Support Staff' THEN 1 ELSE 0 END) AS SUPPORT_COUNT,\n  SUM(CASE WHEN se.EMPLOYEE_TYPE = 'Faculty' THEN 1 ELSE 0 END) AS FACULTY_COUNT,\n  ml.IS_ACTIVE\nFROM MOIRA_LIST AS ml\nJOIN MOIRA_LIST_DETAIL AS mld\n  ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\nJOIN SE_PERSON AS se\n  ON UPPER(mld.MOIRA_LIST_MEMBER) = UPPER(se.KRB_NAME)\nWHERE\n  se.EMPLOYEE_TYPE IN ('Support Staff', 'Faculty')\nGROUP BY\n  ml.MOIRA_LIST_NAME,\n  ml.IS_ACTIVE"
    ],
    "oracle_sql": "SELECT ml.MOIRA_LIST_NAME, SUM(CASE WHEN se.EMPLOYEE_TYPE = 'Support Staff' THEN 1 ELSE 0 END) AS SUPPORT_COUNT, SUM(CASE WHEN se.EMPLOYEE_TYPE = 'Faculty' THEN 1 ELSE 0 END) AS FACULTY_COUNT, ml.IS_ACTIVE FROM MOIRA_LIST ml JOIN MOIRA_LIST_DETAIL mld ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY JOIN SE_PERSON se ON upper(mld.MOIRA_LIST_MEMBER) = upper(se.KRB_NAME) WHERE se.EMPLOYEE_TYPE IN ('Support Staff', 'Faculty') GROUP BY ml.MOIRA_LIST_NAME, ml.IS_ACTIVE;",
    "gold_tables": [
      "dw#sep#MOIRA_LIST",
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#SE_PERSON"
    ],
    "mapping": {
      "support staff or faculty": [
        "SE_PERSON.EMPLOYEE_TYPE"
      ],
      "name": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "subscribers": [
        "SE_PERSON.EMPLOYEE_TYPE"
      ],
      "active status": [
        "MOIRA_LIST.IS_ACTIVE"
      ]
    },
    "join_keys": [
      [
        "MOIRA_LIST.MOIRA_LIST_KEY",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY"
      ]
    ],
    "original_sql": "SELECT\n  ml.MOIRA_LIST_NAME,\n  SUM(CASE WHEN se.EMPLOYEE_TYPE = 'Support Staff' THEN 1 ELSE 0 END) AS SUPPORT_COUNT,\n  SUM(CASE WHEN se.EMPLOYEE_TYPE = 'Faculty' THEN 1 ELSE 0 END) AS FACULTY_COUNT,\n  ml.IS_ACTIVE\nFROM MOIRA_LIST AS ml\nJOIN MOIRA_LIST_DETAIL AS mld\n  ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\nJOIN SE_PERSON AS se\n  ON UPPER(mld.MOIRA_LIST_MEMBER) = UPPER(se.KRB_NAME)\nWHERE\n  se.EMPLOYEE_TYPE IN ('Support Staff', 'Faculty')\nGROUP BY\n  ml.MOIRA_LIST_NAME,\n  ml.IS_ACTIVE",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 11,
        "query_nested_count": 0,
        "query_aggregate_count": 2,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "5f35dbc98304",
    "question": "For the 'ocean-apple' mailing list, identify the department with the highest student count. Provide the department name, phone number, and the total number of students subscribed to the mailing list from that department. If multiple departments have the same highest count, list each one separately.",
    "db_id": "dw",
    "sql": [
      "WITH FilteredList AS (\n  SELECT\n    MOIRA_LIST_KEY,\n    MOIRA_LIST_NAME\n  FROM MOIRA_LIST\n  WHERE\n    MOIRA_LIST_NAME = 'ocean-apple'\n), FilteredListDetails AS (\n  SELECT\n    mld.MOIRA_LIST_KEY,\n    mld.MOIRA_LIST_MEMBER\n  FROM MOIRA_LIST_DETAIL AS mld\n  JOIN FilteredList AS fl\n    ON mld.MOIRA_LIST_KEY = fl.MOIRA_LIST_KEY\n), StudentMemberCounts AS (\n  SELECT\n    fl.MOIRA_LIST_KEY,\n    fl.MOIRA_LIST_NAME,\n    ad.DEPARTMENT_PHONE_NUMBER AS department_phone,\n    ad.SIS_ADMIN_DEPARTMENT_NAME AS department_name,\n    COUNT(DISTINCT msd.FULL_NAME) AS student_members\n  FROM FilteredList AS fl\n  JOIN FilteredListDetails AS fld\n    ON fl.MOIRA_LIST_KEY = fld.MOIRA_LIST_KEY\n  JOIN SE_PERSON AS se\n    ON UPPER(fld.MOIRA_LIST_MEMBER) = UPPER(se.KRB_NAME)\n  JOIN MIT_STUDENT_DIRECTORY AS msd\n    ON se.FULL_NAME = msd.FULL_NAME\n  LEFT JOIN SIS_ADMIN_DEPARTMENT AS ad\n    ON msd.DEPARTMENT = ad.SIS_ADMIN_DEPARTMENT_CODE\n  GROUP BY\n    fl.MOIRA_LIST_KEY,\n    fl.MOIRA_LIST_NAME,\n    ad.DEPARTMENT_PHONE_NUMBER,\n    ad.SIS_ADMIN_DEPARTMENT_NAME\n), RankedDepartments AS (\n  SELECT\n    department_name,\n    department_phone,\n    SUM(student_members) AS total_student_members,\n    RANK() OVER (ORDER BY SUM(student_members) DESC) AS department_rank\n  FROM StudentMemberCounts\n  GROUP BY\n    department_name,\n    department_phone\n)\nSELECT\n  department_name AS most_prominent_dpt,\n  department_phone AS most_prominent_dpt_phone,\n  total_student_members\nFROM RankedDepartments\nWHERE\n  department_rank = 1"
    ],
    "oracle_sql": "WITH StudentMemberCounts AS (SELECT mld.MOIRA_LIST_KEY, ml.MOIRA_LIST_NAME, mo.OWNER AS list_owner, ad.DEPARTMENT_PHONE_NUMBER AS department_phone, ad.SIS_ADMIN_DEPARTMENT_NAME AS department_name, COUNT(DISTINCT msd.FULL_NAME) AS student_members FROM MOIRA_LIST_DETAIL mld JOIN MOIRA_LIST ml ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY JOIN MOIRA_LIST_OWNER mo ON mld.MOIRA_LIST_OWNER_KEY = mo.MOIRA_LIST_OWNER_KEY JOIN SE_PERSON se ON upper(mld.MOIRA_LIST_MEMBER) = upper(se.KRB_NAME) JOIN MIT_STUDENT_DIRECTORY msd ON se.FULL_NAME = msd.FULL_NAME LEFT JOIN SIS_ADMIN_DEPARTMENT ad ON msd.DEPARTMENT = ad.SIS_ADMIN_DEPARTMENT_CODE WHERE ml.MOIRA_LIST_NAME = 'ocean-apple' GROUP BY mld.MOIRA_LIST_KEY, ml.MOIRA_LIST_NAME, mo.OWNER, ad.DEPARTMENT_PHONE_NUMBER, ad.SIS_ADMIN_DEPARTMENT_NAME), RankedDepartments AS (SELECT list_owner, department_name, department_phone, SUM(student_members) AS total_student_members, RANK() OVER (PARTITION BY list_owner ORDER BY SUM(student_members) DESC) AS department_rank FROM StudentMemberCounts GROUP BY list_owner, department_name, department_phone) SELECT list_owner, department_name AS most_prominent_dpt, department_phone AS most_prominent_dpt_phone, total_student_members FROM RankedDepartments WHERE department_rank = 1 ORDER BY list_owner;",
    "gold_tables": [
      "dw#sep#MOIRA_LIST",
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#SE_PERSON",
      "dw#sep#MIT_STUDENT_DIRECTORY",
      "dw#sep#SIS_ADMIN_DEPARTMENT"
    ],
    "mapping": {
      "'ocean-apple' mailing list": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "department name": [
        "SIS_ADMIN_DEPARTMENT.SIS_ADMIN_DEPARTMENT_NAME"
      ],
      "phone number": [
        "SIS_ADMIN_DEPARTMENT.DEPARTMENT_PHONE_NUMBER"
      ],
      "students": [
        "MIT_STUDENT_DIRECTORY.FULL_NAME"
      ]
    },
    "join_keys": [
      [
        "MOIRA_LIST.MOIRA_LIST_KEY",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY"
      ],
      [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER",
        "SE_PERSON.KRB_NAME"
      ],
      [
        "SE_PERSON.FULL_NAME",
        "MIT_STUDENT_DIRECTORY.FULL_NAME"
      ],
      [
        "MIT_STUDENT_DIRECTORY.DEPARTMENT",
        "SIS_ADMIN_DEPARTMENT.SIS_ADMIN_DEPARTMENT_CODE"
      ]
    ],
    "original_sql": "WITH FilteredList AS (\n  SELECT\n    MOIRA_LIST_KEY,\n    MOIRA_LIST_NAME\n  FROM MOIRA_LIST\n  WHERE\n    MOIRA_LIST_NAME = 'ocean-apple'\n), FilteredListDetails AS (\n  SELECT\n    mld.MOIRA_LIST_KEY,\n    mld.MOIRA_LIST_MEMBER\n  FROM MOIRA_LIST_DETAIL AS mld\n  JOIN FilteredList AS fl\n    ON mld.MOIRA_LIST_KEY = fl.MOIRA_LIST_KEY\n), StudentMemberCounts AS (\n  SELECT\n    fl.MOIRA_LIST_KEY,\n    fl.MOIRA_LIST_NAME,\n    ad.DEPARTMENT_PHONE_NUMBER AS department_phone,\n    ad.SIS_ADMIN_DEPARTMENT_NAME AS department_name,\n    COUNT(DISTINCT msd.FULL_NAME) AS student_members\n  FROM FilteredList AS fl\n  JOIN FilteredListDetails AS fld\n    ON fl.MOIRA_LIST_KEY = fld.MOIRA_LIST_KEY\n  JOIN SE_PERSON AS se\n    ON UPPER(fld.MOIRA_LIST_MEMBER) = UPPER(se.KRB_NAME)\n  JOIN MIT_STUDENT_DIRECTORY AS msd\n    ON se.FULL_NAME = msd.FULL_NAME\n  LEFT JOIN SIS_ADMIN_DEPARTMENT AS ad\n    ON msd.DEPARTMENT = ad.SIS_ADMIN_DEPARTMENT_CODE\n  GROUP BY\n    fl.MOIRA_LIST_KEY,\n    fl.MOIRA_LIST_NAME,\n    ad.DEPARTMENT_PHONE_NUMBER,\n    ad.SIS_ADMIN_DEPARTMENT_NAME\n), RankedDepartments AS (\n  SELECT\n    department_name,\n    department_phone,\n    SUM(student_members) AS total_student_members,\n    RANK() OVER (ORDER BY SUM(student_members) DESC) AS department_rank\n  FROM StudentMemberCounts\n  GROUP BY\n    department_name,\n    department_phone\n)\nSELECT\n  department_name AS most_prominent_dpt,\n  department_phone AS most_prominent_dpt_phone,\n  total_student_members\nFROM RankedDepartments\nWHERE\n  department_rank = 1",
    "meta": {
      "features": {
        "query_table_count": 10,
        "query_column_count": 34,
        "query_nested_count": 4,
        "query_aggregate_count": 4,
        "query_sort_count": 1,
        "query_window_func_count": 1,
        "query_join_count": 5
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "7e5941fb6e7d",
    "question": "For each mailing list, list its owner, owner type, the member visibility ('Public Members' if public, and 'Hidden Members' otherwise), and the number of members of this type of visibility. For each owner and owner type, include a grand total for all members in the format of (owner, owner type, null, total members).",
    "db_id": "dw",
    "sql": [
      "WITH MemberVisibility AS (\n  SELECT\n    mo.OWNER,\n    mo.OWNER_TYPE,\n    ml.MOIRA_LIST_NAME,\n    CASE\n      WHEN ml.IS_PUBLIC = 'Y'\n      THEN 'Public Members'\n      WHEN ml.IS_PUBLIC = 'N'\n      THEN 'Hidden Members'\n      ELSE NULL\n    END AS member_visibility,\n    COUNT(DISTINCT mld.MOIRA_LIST_MEMBER) AS total_members\n  FROM MOIRA_LIST_DETAIL AS mld\n  JOIN MOIRA_LIST AS ml\n    ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY\n  JOIN MOIRA_LIST_OWNER AS mo\n    ON mld.MOIRA_LIST_OWNER_KEY = mo.MOIRA_LIST_OWNER_KEY\n  WHERE\n    ml.IS_MOIRA_GROUP = 'Y' AND UPPER(ml.MOIRA_LIST_NAME) LIKE 'B%'\n  GROUP BY\n    mo.OWNER,\n    mo.OWNER_TYPE,\n    ml.MOIRA_LIST_NAME,\n    ml.IS_PUBLIC\n), RollupResults AS (\n  SELECT\n    MOIRA_LIST_NAME,\n    member_visibility,\n    SUM(total_members) AS total_members\n  FROM MemberVisibility\n  GROUP BY\n    MOIRA_LIST_NAME,\n    member_visibility\n    WITH ROLLUP\n  HAVING\n    SUM(total_members) > 0\n)\nSELECT\n  rr.MOIRA_LIST_NAME,\n  mv.OWNER,\n  mv.OWNER_TYPE,\n  rr.member_visibility,\n  rr.total_members\nFROM RollupResults AS rr\nLEFT JOIN (\n  SELECT DISTINCT\n    MOIRA_LIST_NAME,\n    OWNER,\n    OWNER_TYPE\n  FROM MemberVisibility\n) AS mv\n  ON rr.MOIRA_LIST_NAME = mv.MOIRA_LIST_NAME\nORDER BY\n  rr.MOIRA_LIST_NAME,\n  rr.member_visibility"
    ],
    "oracle_sql": "WITH MemberVisibility AS ( SELECT mo.OWNER, mo.OWNER_TYPE, CASE WHEN ml.IS_PUBLIC = 'Y' THEN 'Public Members' WHEN ml.IS_PUBLIC = 'N' THEN 'Hidden Members' ELSE NULL END AS member_visibility, COUNT(DISTINCT mld.MOIRA_LIST_MEMBER) AS total_members FROM MOIRA_LIST_DETAIL mld JOIN MOIRA_LIST ml ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY JOIN MOIRA_LIST_OWNER mo ON mld.MOIRA_LIST_OWNER_KEY = mo.MOIRA_LIST_OWNER_KEY WHERE ml.IS_MOIRA_GROUP = 'Y' GROUP BY mo.OWNER, mo.OWNER_TYPE, ml.IS_PUBLIC ), RollupResults AS ( SELECT OWNER, member_visibility, SUM(total_members) AS total_members FROM MemberVisibility GROUP BY ROLLUP(OWNER, member_visibility) HAVING SUM(total_members) > 0 ) SELECT rr.OWNER, mv.OWNER_TYPE, rr.member_visibility, rr.total_members FROM RollupResults rr LEFT JOIN ( SELECT DISTINCT OWNER, OWNER_TYPE FROM MemberVisibility ) mv ON rr.OWNER = mv.OWNER ORDER BY rr.OWNER, rr.member_visibility;",
    "gold_tables": [
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#MOIRA_LIST",
      "dw#sep#MOIRA_LIST_OWNER"
    ],
    "mapping": {
      "owner": [
        "MOIRA_LIST_OWNER.OWNER"
      ],
      "owner type": [
        "MOIRA_LIST_OWNER.OWNER_TYPE"
      ],
      "member visibility": [
        "MOIRA_LIST.IS_PUBLIC"
      ],
      "members": [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER"
      ]
    },
    "join_keys": [
      [
        "MOIRA_LIST.MOIRA_LIST_KEY",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY"
      ],
      [
        "MOIRA_LIST_OWNER.MOIRA_LIST_OWNER_KEY",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_OWNER_KEY"
      ]
    ],
    "original_sql": "WITH MemberVisibility AS (\n  SELECT\n    mo.OWNER,\n    mo.OWNER_TYPE,\n    ml.MOIRA_LIST_NAME,\n    CASE\n      WHEN ml.IS_PUBLIC = 'Y'\n      THEN 'Public Members'\n      WHEN ml.IS_PUBLIC = 'N'\n      THEN 'Hidden Members'\n      ELSE NULL\n    END AS member_visibility,\n    COUNT(DISTINCT mld.MOIRA_LIST_MEMBER) AS total_members\n  FROM MOIRA_LIST_DETAIL AS mld\n  JOIN MOIRA_LIST AS ml\n    ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY\n  JOIN MOIRA_LIST_OWNER AS mo\n    ON mld.MOIRA_LIST_OWNER_KEY = mo.MOIRA_LIST_OWNER_KEY\n  WHERE\n    ml.IS_MOIRA_GROUP = 'Y' AND UPPER(ml.MOIRA_LIST_NAME) LIKE 'B%'\n  GROUP BY\n    mo.OWNER,\n    mo.OWNER_TYPE,\n    ml.MOIRA_LIST_NAME,\n    ml.IS_PUBLIC\n), RollupResults AS (\n  SELECT\n    MOIRA_LIST_NAME,\n    member_visibility,\n    SUM(total_members) AS total_members\n  FROM MemberVisibility\n  GROUP BY\n    MOIRA_LIST_NAME,\n    member_visibility\n    WITH ROLLUP\n  HAVING\n    SUM(total_members) > 0\n)\nSELECT\n  rr.MOIRA_LIST_NAME,\n  mv.OWNER,\n  mv.OWNER_TYPE,\n  rr.member_visibility,\n  rr.total_members\nFROM RollupResults AS rr\nLEFT JOIN (\n  SELECT DISTINCT\n    MOIRA_LIST_NAME,\n    OWNER,\n    OWNER_TYPE\n  FROM MemberVisibility\n) AS mv\n  ON rr.MOIRA_LIST_NAME = mv.MOIRA_LIST_NAME\nORDER BY\n  rr.MOIRA_LIST_NAME,\n  rr.member_visibility",
    "meta": {
      "features": {
        "query_table_count": 6,
        "query_column_count": 34,
        "query_nested_count": 3,
        "query_aggregate_count": 3,
        "query_sort_count": 2,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "cfe39e0ac600",
    "question": "Group biology courses by cluster type and course level. For each group, list the name of the department, the course title, cluster type, total enrollments, average enrollment within its cluster, course level, number of unique course materials, average new and used prices for TIP materials, total material record count for TIP materials, number of unique library titles, and number of unique library ISBNs.",
    "db_id": "dw",
    "sql": [
      "WITH EnrollmentWithAnalytics AS (\n  SELECT\n    sos.SUBJECT_ID,\n    sos.SUBJECT_TITLE,\n    sos.OFFER_DEPT_NAME AS DEPARTMENT,\n    sos.CLUSTER_TYPE,\n    sos.NUM_ENROLLED_STUDENTS,\n    AVG(sos.NUM_ENROLLED_STUDENTS) OVER (PARTITION BY sos.CLUSTER_TYPE) AS avg_enrollment_in_cluster,\n    scd.COURSE_LEVEL\n  FROM SUBJECT_OFFERED_SUMMARY AS sos\n  LEFT JOIN SIS_COURSE_DESCRIPTION AS scd\n    ON sos.COURSE_NUMBER = scd.COURSE\n  WHERE\n    sos.OFFER_DEPT_NAME = 'Biology'\n), EnrollmentWithTIP AS (\n  SELECT\n    ewa.SUBJECT_ID,\n    ewa.SUBJECT_TITLE,\n    ewa.DEPARTMENT,\n    ewa.CLUSTER_TYPE,\n    ewa.NUM_ENROLLED_STUDENTS,\n    ewa.avg_enrollment_in_cluster,\n    ewa.COURSE_LEVEL,\n    tm.TITLE AS material_title,\n    tm.NEW_SHELF_PRICE,\n    tm.USED_SHELF_PRICE,\n    td.RECORD_COUNT AS material_record_count\n  FROM EnrollmentWithAnalytics AS ewa\n  LEFT JOIN TIP_DETAIL AS td\n    ON ewa.SUBJECT_ID = td.SUBJECT_ID\n  LEFT JOIN TIP_MATERIAL AS tm\n    ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY\n), EnrollmentWithLibrary AS (\n  SELECT\n    ewt.SUBJECT_ID,\n    ewt.SUBJECT_TITLE,\n    ewt.DEPARTMENT,\n    ewt.CLUSTER_TYPE,\n    ewt.NUM_ENROLLED_STUDENTS,\n    ewt.avg_enrollment_in_cluster,\n    ewt.COURSE_LEVEL,\n    ewt.material_title,\n    ewt.NEW_SHELF_PRICE,\n    ewt.USED_SHELF_PRICE,\n    ewt.material_record_count,\n    lrc.CATALOG_TITLE AS library_title,\n    lrc.CATALOG_AUTHOR_NAME AS library_author,\n    lrc.CATALOG_ISBN AS library_isbn\n  FROM EnrollmentWithTIP AS ewt\n  LEFT JOIN LIBRARY_RESERVE_CATALOG AS lrc\n    ON ewt.SUBJECT_ID = lrc.CATALOG_SYSTEM_NUMBER\n)\nSELECT\n  DEPARTMENT,\n  SUBJECT_TITLE,\n  CLUSTER_TYPE,\n  SUM(NUM_ENROLLED_STUDENTS) AS total_enrollment,\n  AVG(avg_enrollment_in_cluster) AS avg_enrollment_in_cluster,\n  COURSE_LEVEL,\n  COUNT(DISTINCT material_title) AS num_unique_materials,\n  AVG(NEW_SHELF_PRICE) AS avg_new_material_price,\n  AVG(USED_SHELF_PRICE) AS avg_used_material_price,\n  SUM(material_record_count) AS total_material_records,\n  COUNT(DISTINCT library_title) AS num_unique_library_titles,\n  COUNT(DISTINCT library_isbn) AS num_unique_library_isbns\nFROM EnrollmentWithLibrary\nGROUP BY\n  DEPARTMENT,\n  SUBJECT_TITLE,\n  CLUSTER_TYPE,\n  COURSE_LEVEL\nORDER BY\n  DEPARTMENT,\n  SUBJECT_TITLE,\n  CLUSTER_TYPE"
    ],
    "oracle_sql": "WITH EnrollmentWithAnalytics AS ( SELECT sos.SUBJECT_ID, sos.SUBJECT_TITLE, sos.OFFER_DEPT_NAME AS DEPARTMENT, sos.CLUSTER_TYPE, sos.NUM_ENROLLED_STUDENTS, AVG(sos.NUM_ENROLLED_STUDENTS) OVER (PARTITION BY sos.CLUSTER_TYPE) AS avg_enrollment_in_cluster, scd.COURSE_LEVEL FROM SUBJECT_OFFERED_SUMMARY sos LEFT JOIN SIS_COURSE_DESCRIPTION scd ON sos.COURSE_NUMBER = scd.COURSE WHERE sos.OFFER_DEPT_NAME = 'Biology' ), EnrollmentWithTIP AS ( SELECT ewa.SUBJECT_ID, ewa.SUBJECT_TITLE, ewa.DEPARTMENT, ewa.CLUSTER_TYPE, ewa.NUM_ENROLLED_STUDENTS, ewa.avg_enrollment_in_cluster, ewa.COURSE_LEVEL, tm.TITLE AS material_title, tm.NEW_SHELF_PRICE, tm.USED_SHELF_PRICE, td.RECORD_COUNT AS material_record_count FROM EnrollmentWithAnalytics ewa LEFT JOIN TIP_DETAIL td ON ewa.SUBJECT_ID = td.SUBJECT_ID LEFT JOIN TIP_MATERIAL tm ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY ), EnrollmentWithLibrary AS ( SELECT ewt.SUBJECT_ID, ewt.SUBJECT_TITLE, ewt.DEPARTMENT, ewt.CLUSTER_TYPE, ewt.NUM_ENROLLED_STUDENTS, ewt.avg_enrollment_in_cluster, ewt.COURSE_LEVEL, ewt.material_title, ewt.NEW_SHELF_PRICE, ewt.USED_SHELF_PRICE, ewt.material_record_count, lrc.CATALOG_TITLE AS library_title, lrc.CATALOG_AUTHOR_NAME AS library_author, lrc.CATALOG_ISBN AS library_isbn FROM EnrollmentWithTIP ewt LEFT JOIN LIBRARY_RESERVE_CATALOG lrc ON ewt.SUBJECT_ID = lrc.CATALOG_SYSTEM_NUMBER ) SELECT DEPARTMENT, SUBJECT_TITLE, CLUSTER_TYPE, SUM(NUM_ENROLLED_STUDENTS) AS total_enrollment, AVG(avg_enrollment_in_cluster) AS avg_enrollment_in_cluster, COURSE_LEVEL, COUNT(DISTINCT material_title) AS num_unique_materials, AVG(NEW_SHELF_PRICE) AS avg_new_material_price, AVG(USED_SHELF_PRICE) AS avg_used_material_price, SUM(material_record_count) AS total_material_records, COUNT(DISTINCT library_title) AS num_unique_library_titles, COUNT(DISTINCT library_isbn) AS num_unique_library_isbns FROM EnrollmentWithLibrary GROUP BY DEPARTMENT, SUBJECT_TITLE, CLUSTER_TYPE, COURSE_LEVEL ORDER BY DEPARTMENT, SUBJECT_TITLE, CLUSTER_TYPE;",
    "gold_tables": [
      "dw#sep#SUBJECT_OFFERED_SUMMARY",
      "dw#sep#SIS_COURSE_DESCRIPTION",
      "dw#sep#TIP_DETAIL",
      "dw#sep#TIP_MATERIAL",
      "dw#sep#LIBRARY_RESERVE_CATALOG"
    ],
    "mapping": {
      "biology courses": [
        "SUBJECT_OFFERED_SUMMARY.OFFER_DEPT_NAME"
      ],
      "cluster type": [
        "SUBJECT_OFFERED_SUMMARY.CLUSTER_TYPE"
      ],
      "course level": [
        "SIS_COURSE_DESCRIPTION.COURSE_LEVEL"
      ],
      "name of the department": [
        "SUBJECT_OFFERED_SUMMARY.OFFER_DEPT_NAME"
      ],
      "course title": [
        "SUBJECT_OFFERED_SUMMARY.SUBJECT_TITLE"
      ],
      "enrollment": [
        "SUBJECT_OFFERED_SUMMARY.NUM_ENROLLED_STUDENTS"
      ],
      "course materials": [
        "TIP_MATERIAL.TITLE"
      ],
      "new price": [
        "TIP_MATERIAL.NEW_SHELF_PRICE"
      ],
      "use price": [
        "TIP_MATERIAL.USED_SHELF_PRICE"
      ],
      "record count for TIP materials": [
        "TIP_DETAIL.RECORD_COUNT"
      ],
      "library titles": [
        "LIBRARY_RESERVE_CATALOG.CATALOG_TITLE"
      ],
      "library ISBNs": [
        "LIBRARY_RESERVE_CATALOG.CATALOG_ISBN"
      ]
    },
    "join_keys": [
      [
        "SUBJECT_OFFERED_SUMMARY.COURSE_NUMBER",
        "SIS_COURSE_DESCRIPTION.COURSE"
      ],
      [
        "TIP_MATERIAL.TIP_MATERIAL_KEY",
        "TIP_DETAIL.TIP_MATERIAL_KEY"
      ]
    ],
    "original_sql": "WITH EnrollmentWithAnalytics AS (\n  SELECT\n    sos.SUBJECT_ID,\n    sos.SUBJECT_TITLE,\n    sos.OFFER_DEPT_NAME AS DEPARTMENT,\n    sos.CLUSTER_TYPE,\n    sos.NUM_ENROLLED_STUDENTS,\n    AVG(sos.NUM_ENROLLED_STUDENTS) OVER (PARTITION BY sos.CLUSTER_TYPE) AS avg_enrollment_in_cluster,\n    scd.COURSE_LEVEL\n  FROM SUBJECT_OFFERED_SUMMARY AS sos\n  LEFT JOIN SIS_COURSE_DESCRIPTION AS scd\n    ON sos.COURSE_NUMBER = scd.COURSE\n  WHERE\n    sos.OFFER_DEPT_NAME = 'Biology'\n), EnrollmentWithTIP AS (\n  SELECT\n    ewa.SUBJECT_ID,\n    ewa.SUBJECT_TITLE,\n    ewa.DEPARTMENT,\n    ewa.CLUSTER_TYPE,\n    ewa.NUM_ENROLLED_STUDENTS,\n    ewa.avg_enrollment_in_cluster,\n    ewa.COURSE_LEVEL,\n    tm.TITLE AS material_title,\n    tm.NEW_SHELF_PRICE,\n    tm.USED_SHELF_PRICE,\n    td.RECORD_COUNT AS material_record_count\n  FROM EnrollmentWithAnalytics AS ewa\n  LEFT JOIN TIP_DETAIL AS td\n    ON ewa.SUBJECT_ID = td.SUBJECT_ID\n  LEFT JOIN TIP_MATERIAL AS tm\n    ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY\n), EnrollmentWithLibrary AS (\n  SELECT\n    ewt.SUBJECT_ID,\n    ewt.SUBJECT_TITLE,\n    ewt.DEPARTMENT,\n    ewt.CLUSTER_TYPE,\n    ewt.NUM_ENROLLED_STUDENTS,\n    ewt.avg_enrollment_in_cluster,\n    ewt.COURSE_LEVEL,\n    ewt.material_title,\n    ewt.NEW_SHELF_PRICE,\n    ewt.USED_SHELF_PRICE,\n    ewt.material_record_count,\n    lrc.CATALOG_TITLE AS library_title,\n    lrc.CATALOG_AUTHOR_NAME AS library_author,\n    lrc.CATALOG_ISBN AS library_isbn\n  FROM EnrollmentWithTIP AS ewt\n  LEFT JOIN LIBRARY_RESERVE_CATALOG AS lrc\n    ON ewt.SUBJECT_ID = lrc.CATALOG_SYSTEM_NUMBER\n)\nSELECT\n  DEPARTMENT,\n  SUBJECT_TITLE,\n  CLUSTER_TYPE,\n  SUM(NUM_ENROLLED_STUDENTS) AS total_enrollment,\n  AVG(avg_enrollment_in_cluster) AS avg_enrollment_in_cluster,\n  COURSE_LEVEL,\n  COUNT(DISTINCT material_title) AS num_unique_materials,\n  AVG(NEW_SHELF_PRICE) AS avg_new_material_price,\n  AVG(USED_SHELF_PRICE) AS avg_used_material_price,\n  SUM(material_record_count) AS total_material_records,\n  COUNT(DISTINCT library_title) AS num_unique_library_titles,\n  COUNT(DISTINCT library_isbn) AS num_unique_library_isbns\nFROM EnrollmentWithLibrary\nGROUP BY\n  DEPARTMENT,\n  SUBJECT_TITLE,\n  CLUSTER_TYPE,\n  COURSE_LEVEL\nORDER BY\n  DEPARTMENT,\n  SUBJECT_TITLE,\n  CLUSTER_TYPE",
    "meta": {
      "features": {
        "query_table_count": 8,
        "query_column_count": 61,
        "query_nested_count": 3,
        "query_aggregate_count": 9,
        "query_sort_count": 3,
        "query_window_func_count": 1,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "14ce1eda37eb",
    "question": "For subjects offered this year in either the Fall or Spring term, list its department name, school name, subject ID, subject title, course level, total units, the term it is offered ('Spring' for Spring term and 'Fall' for Fall term), term description, the number of distinct instructors teaching in the Fall, and the number of distinct instructors teaching in the Spring.",
    "db_id": "dw",
    "sql": [
      "WITH SubjectsByTerm AS (\n  SELECT\n    cc.SUBJECT_ID,\n    cc.SUBJECT_TITLE,\n    cc.TOTAL_UNITS,\n    cc.DEPARTMENT_NAME,\n    CASE\n      WHEN cc.TERM_CODE LIKE '%FA'\n      THEN 'Fall'\n      WHEN cc.TERM_CODE LIKE '%SP'\n      THEN 'Spring'\n    END AS offered_term,\n    at.TERM_DESCRIPTION AS term_description,\n    sd.SCHOOL_NAME,\n    scd.COURSE_LEVEL,\n    cc.FALL_INSTRUCTORS,\n    cc.SPRING_INSTRUCTORS\n  FROM COURSE_CATALOG_SUBJECT_OFFERED AS cc\n  JOIN ACADEMIC_TERMS AS at\n    ON cc.TERM_CODE = at.TERM_CODE\n  LEFT JOIN SIS_DEPARTMENT AS sd\n    ON cc.DEPARTMENT_CODE = sd.DEPARTMENT_CODE\n  LEFT JOIN SIS_COURSE_DESCRIPTION AS scd\n    ON cc.SUBJECT_CODE = scd.COURSE\n  WHERE\n    cc.IS_OFFERED_THIS_YEAR = 'Y'\n    AND (\n      cc.TERM_CODE LIKE '%FA' OR cc.TERM_CODE LIKE '%SP'\n    )\n), SubjectsAggregated AS (\n  SELECT\n    SUBJECT_ID,\n    SUBJECT_TITLE,\n    DEPARTMENT_NAME,\n    SCHOOL_NAME,\n    COURSE_LEVEL,\n    TOTAL_UNITS,\n    offered_term,\n    term_description,\n    COUNT(DISTINCT FALL_INSTRUCTORS) AS num_fall_instructors,\n    COUNT(DISTINCT SPRING_INSTRUCTORS) AS num_spring_instructors\n  FROM SubjectsByTerm\n  GROUP BY\n    SUBJECT_ID,\n    SUBJECT_TITLE,\n    DEPARTMENT_NAME,\n    SCHOOL_NAME,\n    COURSE_LEVEL,\n    TOTAL_UNITS,\n    offered_term,\n    term_description\n)\nSELECT\n  DEPARTMENT_NAME,\n  SCHOOL_NAME,\n  SUBJECT_ID,\n  SUBJECT_TITLE,\n  COURSE_LEVEL,\n  TOTAL_UNITS,\n  offered_term,\n  term_description,\n  num_fall_instructors,\n  num_spring_instructors\nFROM SubjectsAggregated\nORDER BY\n  DEPARTMENT_NAME,\n  SUBJECT_ID,\n  SUBJECT_TITLE,\n  offered_term"
    ],
    "oracle_sql": "WITH SubjectsByTerm AS ( SELECT cc.SUBJECT_ID, cc.SUBJECT_TITLE, cc.TOTAL_UNITS, cc.DEPARTMENT_NAME, CASE WHEN cc.TERM_CODE LIKE '%FA' THEN 'Fall' WHEN cc.TERM_CODE LIKE '%SP' THEN 'Spring' END AS offered_term, at.TERM_DESCRIPTION AS term_description, sd.SCHOOL_NAME, scd.COURSE_LEVEL, cc.FALL_INSTRUCTORS, cc.SPRING_INSTRUCTORS FROM COURSE_CATALOG_SUBJECT_OFFERED cc JOIN ACADEMIC_TERMS at ON cc.TERM_CODE = at.TERM_CODE LEFT JOIN SIS_DEPARTMENT sd ON cc.DEPARTMENT_CODE = sd.DEPARTMENT_CODE LEFT JOIN SIS_COURSE_DESCRIPTION scd ON cc.SUBJECT_CODE = scd.COURSE WHERE cc.IS_OFFERED_THIS_YEAR = 'Y' AND (cc.TERM_CODE LIKE '%FA' OR cc.TERM_CODE LIKE '%SP') ), SubjectsAggregated AS ( SELECT SUBJECT_ID, SUBJECT_TITLE, DEPARTMENT_NAME, SCHOOL_NAME, COURSE_LEVEL, TOTAL_UNITS, offered_term, term_description, COUNT(DISTINCT FALL_INSTRUCTORS) AS num_fall_instructors, COUNT(DISTINCT SPRING_INSTRUCTORS) AS num_spring_instructors FROM SubjectsByTerm GROUP BY SUBJECT_ID, SUBJECT_TITLE, DEPARTMENT_NAME, SCHOOL_NAME, COURSE_LEVEL, TOTAL_UNITS, offered_term, term_description ) SELECT DEPARTMENT_NAME, SCHOOL_NAME, SUBJECT_ID, SUBJECT_TITLE, COURSE_LEVEL, TOTAL_UNITS, offered_term, term_description, num_fall_instructors, num_spring_instructors FROM SubjectsAggregated ORDER BY DEPARTMENT_NAME, SUBJECT_ID, SUBJECT_TITLE, offered_term;",
    "gold_tables": [
      "dw#sep#COURSE_CATALOG_SUBJECT_OFFERED",
      "dw#sep#ACADEMIC_TERMS",
      "dw#sep#SIS_DEPARTMENT",
      "dw#sep#SIS_COURSE_DESCRIPTION"
    ],
    "mapping": {
      "subjects offered this year": [
        "COURSE_CATALOG_SUBJECT_OFFERED.IS_OFFERED_THIS_YEAR"
      ],
      "department name": [
        "COURSE_CATALOG_SUBJECT_OFFERED.DEPARTMENT_NAME"
      ],
      "school name": [
        "SIS_DEPARTMENT.SCHOOL_NAME"
      ],
      "subject ID": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_ID"
      ],
      "subject title": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_TITLE"
      ],
      "course level": [
        "SIS_COURSE_DESCRIPTION.COURSE_LEVEL"
      ],
      "total units": [
        "COURSE_CATALOG_SUBJECT_OFFERED.TOTAL_UNITS"
      ],
      "term": [
        "COURSE_CATALOG_SUBJECT_OFFERED.TERM_CODE"
      ],
      "term description": [
        "ACADEMIC_TERMS.TERM_DESCRIPTION"
      ],
      "instructors": [
        "COURSE_CATALOG_SUBJECT_OFFERED.FALL_INSTRUCTORS",
        "COURSE_CATALOG_SUBJECT_OFFERED.SPRING_INSTRUCTORS"
      ]
    },
    "join_keys": [
      [
        "COURSE_CATALOG_SUBJECT_OFFERED.TERM_CODE",
        "ACADEMIC_TERMS.TERM_CODE"
      ],
      [
        "COURSE_CATALOG_SUBJECT_OFFERED.DEPARTMENT_CODE",
        "SIS_DEPARTMENT.DEPARTMENT_CODE"
      ],
      [
        "SIS_COURSE_DESCRIPTION.COURSE",
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_CODE"
      ]
    ],
    "original_sql": "WITH SubjectsByTerm AS (\n  SELECT\n    cc.SUBJECT_ID,\n    cc.SUBJECT_TITLE,\n    cc.TOTAL_UNITS,\n    cc.DEPARTMENT_NAME,\n    CASE\n      WHEN cc.TERM_CODE LIKE '%FA'\n      THEN 'Fall'\n      WHEN cc.TERM_CODE LIKE '%SP'\n      THEN 'Spring'\n    END AS offered_term,\n    at.TERM_DESCRIPTION AS term_description,\n    sd.SCHOOL_NAME,\n    scd.COURSE_LEVEL,\n    cc.FALL_INSTRUCTORS,\n    cc.SPRING_INSTRUCTORS\n  FROM COURSE_CATALOG_SUBJECT_OFFERED AS cc\n  JOIN ACADEMIC_TERMS AS at\n    ON cc.TERM_CODE = at.TERM_CODE\n  LEFT JOIN SIS_DEPARTMENT AS sd\n    ON cc.DEPARTMENT_CODE = sd.DEPARTMENT_CODE\n  LEFT JOIN SIS_COURSE_DESCRIPTION AS scd\n    ON cc.SUBJECT_CODE = scd.COURSE\n  WHERE\n    cc.IS_OFFERED_THIS_YEAR = 'Y'\n    AND (\n      cc.TERM_CODE LIKE '%FA' OR cc.TERM_CODE LIKE '%SP'\n    )\n), SubjectsAggregated AS (\n  SELECT\n    SUBJECT_ID,\n    SUBJECT_TITLE,\n    DEPARTMENT_NAME,\n    SCHOOL_NAME,\n    COURSE_LEVEL,\n    TOTAL_UNITS,\n    offered_term,\n    term_description,\n    COUNT(DISTINCT FALL_INSTRUCTORS) AS num_fall_instructors,\n    COUNT(DISTINCT SPRING_INSTRUCTORS) AS num_spring_instructors\n  FROM SubjectsByTerm\n  GROUP BY\n    SUBJECT_ID,\n    SUBJECT_TITLE,\n    DEPARTMENT_NAME,\n    SCHOOL_NAME,\n    COURSE_LEVEL,\n    TOTAL_UNITS,\n    offered_term,\n    term_description\n)\nSELECT\n  DEPARTMENT_NAME,\n  SCHOOL_NAME,\n  SUBJECT_ID,\n  SUBJECT_TITLE,\n  COURSE_LEVEL,\n  TOTAL_UNITS,\n  offered_term,\n  term_description,\n  num_fall_instructors,\n  num_spring_instructors\nFROM SubjectsAggregated\nORDER BY\n  DEPARTMENT_NAME,\n  SUBJECT_ID,\n  SUBJECT_TITLE,\n  offered_term",
    "meta": {
      "features": {
        "query_table_count": 6,
        "query_column_count": 52,
        "query_nested_count": 2,
        "query_aggregate_count": 2,
        "query_sort_count": 4,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "551ce5c13fc2",
    "question": "For Political Science courses with HASS attributes, for each attribute, list the name and description of the attribute, the number of unique subjects, average units, the total enrollment, the number of departments that grant degrees, and the subject code description.",
    "db_id": "dw",
    "sql": [
      "WITH HASSAttributes AS (\n  SELECT\n    cc.HASS_ATTRIBUTE,\n    cc.HASS_ATTRIBUTE_DESC,\n    cc.SUBJECT_ID,\n    cc.TOTAL_UNITS,\n    sos.NUM_ENROLLED_STUDENTS,\n    sd.DEPARTMENT_NAME,\n    sd.IS_DEGREE_GRANTING,\n    sc.SUBJECT_CODE_DESC\n  FROM CIS_COURSE_CATALOG AS cc\n  JOIN SIS_SUBJECT_CODE AS sc\n    ON cc.SUBJECT_CODE = sc.SUBJECT_CODE\n  JOIN SUBJECT_OFFERED_SUMMARY AS sos\n    ON cc.SUBJECT_ID = sos.SUBJECT_ID\n  LEFT JOIN SIS_DEPARTMENT AS sd\n    ON sc.DEPARTMENT_CODE = sd.DEPARTMENT_CODE\n  WHERE\n    NOT cc.HASS_ATTRIBUTE IS NULL AND sd.DEPARTMENT_NAME = 'Political Science'\n)\nSELECT\n  HASS_ATTRIBUTE,\n  HASS_ATTRIBUTE_DESC,\n  COUNT(DISTINCT SUBJECT_ID) AS num_subjects,\n  AVG(TOTAL_UNITS) AS avg_units,\n  SUM(NUM_ENROLLED_STUDENTS) AS total_enrollment,\n  COUNT(DISTINCT CASE WHEN IS_DEGREE_GRANTING = 'Y' THEN DEPARTMENT_NAME END) AS num_degree_granting,\n  SUBJECT_CODE_DESC\nFROM HASSAttributes\nGROUP BY\n  HASS_ATTRIBUTE,\n  HASS_ATTRIBUTE_DESC,\n  SUBJECT_CODE_DESC\nORDER BY\n  HASS_ATTRIBUTE,\n  HASS_ATTRIBUTE_DESC,\n  SUBJECT_CODE_DESC"
    ],
    "oracle_sql": "WITH HASSAttributes AS (SELECT cc.HASS_ATTRIBUTE, cc.HASS_ATTRIBUTE_DESC, cc.SUBJECT_ID, cc.TOTAL_UNITS, sos.NUM_ENROLLED_STUDENTS, sd.DEPARTMENT_NAME, sd.IS_DEGREE_GRANTING, sc.SUBJECT_CODE_DESC FROM CIS_COURSE_CATALOG cc JOIN SIS_SUBJECT_CODE sc ON cc.SUBJECT_CODE = sc.SUBJECT_CODE JOIN SUBJECT_OFFERED_SUMMARY sos ON cc.SUBJECT_ID = sos.SUBJECT_ID LEFT JOIN SIS_DEPARTMENT sd ON sc.DEPARTMENT_CODE = sd.DEPARTMENT_CODE WHERE cc.HASS_ATTRIBUTE IS NOT NULL AND sd.DEPARTMENT_NAME = 'Political Science') SELECT HASS_ATTRIBUTE, HASS_ATTRIBUTE_DESC, COUNT(DISTINCT SUBJECT_ID) AS num_subjects, AVG(TOTAL_UNITS) AS avg_units, SUM(NUM_ENROLLED_STUDENTS) AS total_enrollment, COUNT(DISTINCT CASE WHEN IS_DEGREE_GRANTING = 'Y' THEN DEPARTMENT_NAME END) AS num_degree_granting, SUBJECT_CODE_DESC FROM HASSAttributes GROUP BY HASS_ATTRIBUTE, HASS_ATTRIBUTE_DESC, SUBJECT_CODE_DESC ORDER BY HASS_ATTRIBUTE, HASS_ATTRIBUTE_DESC, SUBJECT_CODE_DESC;",
    "gold_tables": [
      "dw#sep#CIS_COURSE_CATALOG",
      "dw#sep#SIS_SUBJECT_CODE",
      "dw#sep#SUBJECT_OFFERED_SUMMARY",
      "dw#sep#SIS_DEPARTMENT"
    ],
    "mapping": {
      "Political Science": [
        "SIS_DEPARTMENT.DEPARTMENT_NAME"
      ],
      "name": [
        "CIS_COURSE_CATALOG.HASS_ATTRIBUTE"
      ],
      "description": [
        "CIS_COURSE_CATALOG.HASS_ATTRIBUTE_DESC"
      ],
      "subjects": [
        "CIS_COURSE_CATALOG.SUBJECT_ID"
      ],
      "units": [
        "CIS_COURSE_CATALOG.TOTAL_UNITS"
      ],
      "enrollment": [
        "SUBJECT_OFFERED_SUMMARY.NUM_ENROLLED_STUDENTS"
      ],
      "departments that grant degrees": [
        "SIS_DEPARTMENT.IS_DEGREE_GRANTING"
      ],
      "subject code description": [
        "SIS_SUBJECT_CODE.SUBJECT_CODE_DESC"
      ]
    },
    "join_keys": [
      [
        "CIS_COURSE_CATALOG.SUBJECT_CODE",
        "SIS_SUBJECT_CODE.SUBJECT_CODE"
      ],
      [
        "SUBJECT_OFFERED_SUMMARY.SUBJECT_ID",
        "CIS_COURSE_CATALOG.SUBJECT_ID"
      ],
      [
        "SIS_DEPARTMENT.DEPARTMENT_CODE",
        "SIS_SUBJECT_CODE.DEPARTMENT_CODE"
      ]
    ],
    "original_sql": "WITH HASSAttributes AS (\n  SELECT\n    cc.HASS_ATTRIBUTE,\n    cc.HASS_ATTRIBUTE_DESC,\n    cc.SUBJECT_ID,\n    cc.TOTAL_UNITS,\n    sos.NUM_ENROLLED_STUDENTS,\n    sd.DEPARTMENT_NAME,\n    sd.IS_DEGREE_GRANTING,\n    sc.SUBJECT_CODE_DESC\n  FROM CIS_COURSE_CATALOG AS cc\n  JOIN SIS_SUBJECT_CODE AS sc\n    ON cc.SUBJECT_CODE = sc.SUBJECT_CODE\n  JOIN SUBJECT_OFFERED_SUMMARY AS sos\n    ON cc.SUBJECT_ID = sos.SUBJECT_ID\n  LEFT JOIN SIS_DEPARTMENT AS sd\n    ON sc.DEPARTMENT_CODE = sd.DEPARTMENT_CODE\n  WHERE\n    NOT cc.HASS_ATTRIBUTE IS NULL AND sd.DEPARTMENT_NAME = 'Political Science'\n)\nSELECT\n  HASS_ATTRIBUTE,\n  HASS_ATTRIBUTE_DESC,\n  COUNT(DISTINCT SUBJECT_ID) AS num_subjects,\n  AVG(TOTAL_UNITS) AS avg_units,\n  SUM(NUM_ENROLLED_STUDENTS) AS total_enrollment,\n  COUNT(DISTINCT CASE WHEN IS_DEGREE_GRANTING = 'Y' THEN DEPARTMENT_NAME END) AS num_degree_granting,\n  SUBJECT_CODE_DESC\nFROM HASSAttributes\nGROUP BY\n  HASS_ATTRIBUTE,\n  HASS_ATTRIBUTE_DESC,\n  SUBJECT_CODE_DESC\nORDER BY\n  HASS_ATTRIBUTE,\n  HASS_ATTRIBUTE_DESC,\n  SUBJECT_CODE_DESC",
    "meta": {
      "features": {
        "query_table_count": 5,
        "query_column_count": 30,
        "query_nested_count": 1,
        "query_aggregate_count": 4,
        "query_sort_count": 3,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "4d53637af7c7",
    "question": "Group subjects by cluster type, department offering the subject, and the school name. For each group, list the cluster type, name of the department, school name, whether the department grants degrees, total number of subjects, total enrollment, and average enrollment. Exclude clusters or schools with no student data.",
    "db_id": "dw",
    "sql": [
      "WITH ClusterSummary AS (\n  SELECT\n    sos.CLUSTER_TYPE,\n    sos.OFFER_DEPT_NAME AS DEPARTMENT,\n    sd.SCHOOL_NAME,\n    COUNT(DISTINCT sos.SUBJECT_ID) AS num_subjects,\n    SUM(sos.NUM_ENROLLED_STUDENTS) AS total_enrollment,\n    AVG(sos.NUM_ENROLLED_STUDENTS) AS avg_enrollment,\n    sd.IS_DEGREE_GRANTING AS degree_granting_status\n  FROM SUBJECT_OFFERED_SUMMARY AS sos\n  LEFT JOIN SIS_COURSE_DESCRIPTION AS scd\n    ON sos.COURSE_NUMBER = scd.COURSE\n  LEFT JOIN SIS_DEPARTMENT AS sd\n    ON sos.OFFER_DEPT_CODE = sd.DEPARTMENT_CODE\n  WHERE\n    NOT sos.CLUSTER_TYPE IS NULL\n    AND sos.NUM_ENROLLED_STUDENTS > 0\n    AND NOT sd.SCHOOL_NAME IS NULL\n  GROUP BY\n    sos.CLUSTER_TYPE,\n    sos.OFFER_DEPT_NAME,\n    sd.SCHOOL_NAME,\n    sd.IS_DEGREE_GRANTING\n)\nSELECT\n  CLUSTER_TYPE,\n  DEPARTMENT,\n  SCHOOL_NAME,\n  degree_granting_status,\n  num_subjects,\n  total_enrollment,\n  avg_enrollment\nFROM ClusterSummary\nORDER BY\n  CLUSTER_TYPE,\n  DEPARTMENT,\n  SCHOOL_NAME"
    ],
    "oracle_sql": "WITH ClusterSummary AS (SELECT sos.CLUSTER_TYPE, sos.OFFER_DEPT_NAME AS DEPARTMENT, sd.SCHOOL_NAME, COUNT(DISTINCT sos.SUBJECT_ID) AS num_subjects, SUM(sos.NUM_ENROLLED_STUDENTS) AS total_enrollment, AVG(sos.NUM_ENROLLED_STUDENTS) AS avg_enrollment, sd.IS_DEGREE_GRANTING AS degree_granting_status FROM SUBJECT_OFFERED_SUMMARY sos LEFT JOIN SIS_COURSE_DESCRIPTION scd ON sos.COURSE_NUMBER = scd.COURSE LEFT JOIN SIS_DEPARTMENT sd ON sos.OFFER_DEPT_CODE = sd.DEPARTMENT_CODE WHERE sos.CLUSTER_TYPE IS NOT NULL AND sos.NUM_ENROLLED_STUDENTS > 0 AND sd.SCHOOL_NAME IS NOT NULL GROUP BY sos.CLUSTER_TYPE, sos.OFFER_DEPT_NAME, sd.SCHOOL_NAME, sd.IS_DEGREE_GRANTING) SELECT CLUSTER_TYPE, DEPARTMENT, SCHOOL_NAME, degree_granting_status, num_subjects, total_enrollment, avg_enrollment FROM ClusterSummary ORDER BY CLUSTER_TYPE, DEPARTMENT, SCHOOL_NAME;",
    "gold_tables": [
      "dw#sep#SUBJECT_OFFERED_SUMMARY",
      "dw#sep#SIS_COURSE_DESCRIPTION",
      "dw#sep#SIS_DEPARTMENT"
    ],
    "mapping": {
      "cluster type": [
        "SUBJECT_OFFERED_SUMMARY.CLUSTER_TYPE"
      ],
      "name of the department": [
        "SUBJECT_OFFERED_SUMMARY.OFFER_DEPT_NAME"
      ],
      "school name": [
        "SIS_DEPARTMENT.SCHOOL_NAME"
      ],
      "whether the department grants degrees": [
        "SIS_DEPARTMENT.IS_DEGREE_GRANTING"
      ],
      "subjects": [
        "SUBJECT_OFFERED_SUMMARY.SUBJECT_ID"
      ],
      "enrollment": [
        "SUBJECT_OFFERED_SUMMARY.NUM_ENROLLED_STUDENTS"
      ]
    },
    "join_keys": [
      [
        "SUBJECT_OFFERED_SUMMARY.COURSE_NUMBER",
        "SIS_COURSE_DESCRIPTION.COURSE"
      ],
      [
        "SIS_DEPARTMENT.DEPARTMENT_CODE",
        "SUBJECT_OFFERED_SUMMARY.OFFER_DEPT_CODE"
      ]
    ],
    "original_sql": "WITH ClusterSummary AS (\n  SELECT\n    sos.CLUSTER_TYPE,\n    sos.OFFER_DEPT_NAME AS DEPARTMENT,\n    sd.SCHOOL_NAME,\n    COUNT(DISTINCT sos.SUBJECT_ID) AS num_subjects,\n    SUM(sos.NUM_ENROLLED_STUDENTS) AS total_enrollment,\n    AVG(sos.NUM_ENROLLED_STUDENTS) AS avg_enrollment,\n    sd.IS_DEGREE_GRANTING AS degree_granting_status\n  FROM SUBJECT_OFFERED_SUMMARY AS sos\n  LEFT JOIN SIS_COURSE_DESCRIPTION AS scd\n    ON sos.COURSE_NUMBER = scd.COURSE\n  LEFT JOIN SIS_DEPARTMENT AS sd\n    ON sos.OFFER_DEPT_CODE = sd.DEPARTMENT_CODE\n  WHERE\n    NOT sos.CLUSTER_TYPE IS NULL\n    AND sos.NUM_ENROLLED_STUDENTS > 0\n    AND NOT sd.SCHOOL_NAME IS NULL\n  GROUP BY\n    sos.CLUSTER_TYPE,\n    sos.OFFER_DEPT_NAME,\n    sd.SCHOOL_NAME,\n    sd.IS_DEGREE_GRANTING\n)\nSELECT\n  CLUSTER_TYPE,\n  DEPARTMENT,\n  SCHOOL_NAME,\n  degree_granting_status,\n  num_subjects,\n  total_enrollment,\n  avg_enrollment\nFROM ClusterSummary\nORDER BY\n  CLUSTER_TYPE,\n  DEPARTMENT,\n  SCHOOL_NAME",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 28,
        "query_nested_count": 1,
        "query_aggregate_count": 3,
        "query_sort_count": 3,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "8047831ff881",
    "question": "Group classes that take place in buildings at MIT by the building name and course level. For each group, provide the name of the building, the course level ('Graduate' or 'Undergraduate'), the total number of unique courses of such level, and total instructors for these courses. Include subtotals for each building and course level and a grand total across all buildings and course levels.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  ba.BUILDING_NAME,\n  ba.course_level,\n  ba.unique_courses,\n  ba.total_instructors\nFROM (\n  SELECT\n    b.BUILDING_NAME,\n    CASE\n      WHEN scd.COURSE_LEVEL = 'G'\n      THEN 'Graduate'\n      WHEN scd.COURSE_LEVEL = 'U'\n      THEN 'Undergraduate'\n      ELSE 'Other'\n    END AS course_level,\n    COUNT(DISTINCT s.SUBJECT_ID) AS unique_courses,\n    SUM(COUNT(DISTINCT s.RESPONSIBLE_FACULTY_NAME)) OVER (PARTITION BY b.BUILDING_NAME) AS total_instructors\n  FROM FAC_BUILDING AS b\n  JOIN SUBJECT_OFFERED AS s\n    ON b.FAC_BUILDING_KEY = s.MEET_PLACE\n  JOIN SIS_COURSE_DESCRIPTION AS scd\n    ON s.COURSE_NUMBER = scd.COURSE\n  JOIN FAC_BUILDING_ADDRESS AS ba\n    ON b.FAC_BUILDING_KEY = ba.BUILDING_KEY\n  WHERE\n    b.SITE = 'MIT'\n  GROUP BY\n    b.BUILDING_NAME,\n    scd.COURSE_LEVEL\n) AS ba\nORDER BY\n  ba.unique_courses DESC,\n  ba.BUILDING_NAME"
    ],
    "oracle_sql": "WITH BuildingSubjectDetails AS (SELECT b.FAC_BUILDING_KEY, b.BUILDING_NAME, s.SUBJECT_ID, CASE WHEN scd.COURSE_LEVEL = 'G' THEN 'Graduate' WHEN scd.COURSE_LEVEL = 'U' THEN 'Undergraduate' ELSE 'Other' END AS course_level, COUNT(DISTINCT s.RESPONSIBLE_FACULTY_NAME) AS num_instructors FROM FAC_BUILDING b JOIN SUBJECT_OFFERED s ON b.FAC_BUILDING_KEY = s.MEET_PLACE JOIN SIS_COURSE_DESCRIPTION scd ON s.COURSE_NUMBER = scd.COURSE JOIN FAC_BUILDING_ADDRESS ba ON b.FAC_BUILDING_KEY = ba.BUILDING_KEY WHERE b.SITE = 'MIT' GROUP BY b.FAC_BUILDING_KEY, b.BUILDING_NAME, s.SUBJECT_ID, scd.COURSE_LEVEL), BuildingAggregates AS (SELECT BUILDING_NAME, course_level, COUNT(DISTINCT SUBJECT_ID) AS unique_courses, SUM(num_instructors) AS total_instructors FROM BuildingSubjectDetails GROUP BY ROLLUP(BUILDING_NAME, course_level)) SELECT BUILDING_NAME, course_level, unique_courses, total_instructors FROM BuildingAggregates ORDER BY unique_courses DESC, BUILDING_NAME;",
    "gold_tables": [
      "dw#sep#FAC_BUILDING",
      "dw#sep#SUBJECT_OFFERED",
      "dw#sep#SIS_COURSE_DESCRIPTION",
      "dw#sep#FAC_BUILDING_ADDRESS"
    ],
    "mapping": {
      "buildings at MIT": [
        "FAC_BUILDING.SITE"
      ],
      "name of the building": [
        "FAC_BUILDING.BUILDING_NAME"
      ],
      "course level": [
        "SIS_COURSE_DESCRIPTION.COURSE_LEVEL"
      ],
      "courses": [
        "SUBJECT_OFFERED_SUMMARY.SUBJECT_ID"
      ],
      "instructors": [
        "SUBJECT_OFFERED_SUMMARY.RESPONSIBLE_FACULTY_NAME"
      ]
    },
    "join_keys": [
      [
        "FAC_BUILDING.FAC_BUILDING_KEY",
        "SUBJECT_OFFERED.MEET_PLACE"
      ],
      [
        "SUBJECT_OFFERED.COURSE_NUMBER",
        "SIS_COURSE_DESCRIPTION.COURSE"
      ],
      [
        "FAC_BUILDING_ADDRESS.BUILDING_KEY",
        "FAC_BUILDING.FAC_BUILDING_KEY"
      ]
    ],
    "original_sql": "SELECT\n  ba.BUILDING_NAME,\n  ba.course_level,\n  ba.unique_courses,\n  ba.total_instructors\nFROM (\n  SELECT\n    b.BUILDING_NAME,\n    CASE\n      WHEN scd.COURSE_LEVEL = 'G'\n      THEN 'Graduate'\n      WHEN scd.COURSE_LEVEL = 'U'\n      THEN 'Undergraduate'\n      ELSE 'Other'\n    END AS course_level,\n    COUNT(DISTINCT s.SUBJECT_ID) AS unique_courses,\n    SUM(COUNT(DISTINCT s.RESPONSIBLE_FACULTY_NAME)) OVER (PARTITION BY b.BUILDING_NAME) AS total_instructors\n  FROM FAC_BUILDING AS b\n  JOIN SUBJECT_OFFERED AS s\n    ON b.FAC_BUILDING_KEY = s.MEET_PLACE\n  JOIN SIS_COURSE_DESCRIPTION AS scd\n    ON s.COURSE_NUMBER = scd.COURSE\n  JOIN FAC_BUILDING_ADDRESS AS ba\n    ON b.FAC_BUILDING_KEY = ba.BUILDING_KEY\n  WHERE\n    b.SITE = 'MIT'\n  GROUP BY\n    b.BUILDING_NAME,\n    scd.COURSE_LEVEL\n) AS ba\nORDER BY\n  ba.unique_courses DESC,\n  ba.BUILDING_NAME",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 21,
        "query_nested_count": 1,
        "query_aggregate_count": 3,
        "query_sort_count": 2,
        "query_window_func_count": 1,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "528edbedd06b",
    "question": "For each course, provide the room number of course location, building name, building number, building city, building state, area, organization name, room usage, term code, course level, the total number of subjects, unique meeting times, and total units. Do not include meet place or meet times with NULL values.",
    "db_id": "dw",
    "sql": [
      "WITH MeetingPlaceDetails AS (\n  SELECT\n    c.MEET_PLACE AS room_number,\n    c.MEET_TIME,\n    c.TERM_CODE,\n    c.SUBJECT_ID,\n    c.TOTAL_UNITS,\n    b.BUILDING_NAME,\n    b.BUILDING_NUMBER,\n    ba.CITY AS building_city,\n    ba.STATE AS building_state,\n    fr.AREA,\n    fr.ORGANIZATION_NAME,\n    fmu.MAJOR_USE,\n    scd.COURSE_LEVEL AS course_level,\n    scd.COURSE_DESCRIPTION AS course_description\n  FROM COURSE_CATALOG_SUBJECT_OFFERED AS c\n  JOIN FAC_ROOMS AS fr\n    ON c.MEET_PLACE = fr.FAC_ROOM_KEY\n  JOIN FAC_BUILDING AS b\n    ON fr.BUILDING_KEY = b.FAC_BUILDING_KEY\n  JOIN FAC_MAJOR_USE AS fmu\n    ON fr.MAJOR_USE_KEY = fmu.MAJOR_USE_KEY\n  LEFT JOIN FAC_BUILDING_ADDRESS AS ba\n    ON b.FAC_BUILDING_KEY = ba.BUILDING_KEY\n  LEFT JOIN SIS_COURSE_DESCRIPTION AS scd\n    ON c.SUBJECT_ID = scd.COURSE\n  WHERE\n    NOT c.MEET_PLACE IS NULL AND NOT c.MEET_TIME IS NULL\n), MeetingPlaceAggregates AS (\n  SELECT\n    room_number,\n    BUILDING_NAME,\n    BUILDING_NUMBER,\n    building_city,\n    building_state,\n    AREA,\n    ORGANIZATION_NAME,\n    MAJOR_USE,\n    TERM_CODE,\n    course_level,\n    COUNT(DISTINCT SUBJECT_ID) AS num_subjects,\n    COUNT(DISTINCT MEET_TIME) AS unique_meet_times,\n    SUM(TOTAL_UNITS) AS total_units\n  FROM MeetingPlaceDetails\n  GROUP BY\n    room_number,\n    BUILDING_NAME,\n    BUILDING_NUMBER,\n    building_city,\n    building_state,\n    AREA,\n    ORGANIZATION_NAME,\n    MAJOR_USE,\n    TERM_CODE,\n    course_level\n)\nSELECT\n  room_number,\n  BUILDING_NAME,\n  BUILDING_NUMBER,\n  building_city,\n  building_state,\n  AREA,\n  ORGANIZATION_NAME,\n  MAJOR_USE,\n  TERM_CODE,\n  course_level,\n  num_subjects,\n  unique_meet_times,\n  total_units\nFROM MeetingPlaceAggregates\nORDER BY\n  TERM_CODE,\n  total_units DESC,\n  room_number"
    ],
    "oracle_sql": "WITH MeetingPlaceDetails AS ( SELECT c.MEET_PLACE AS room_number, c.MEET_TIME, c.TERM_CODE, c.SUBJECT_ID, c.TOTAL_UNITS, b.BUILDING_NAME, b.BUILDING_NUMBER, ba.CITY AS building_city, ba.STATE AS building_state, fr.AREA, fr.ORGANIZATION_NAME, fmu.MAJOR_USE, scd.COURSE_LEVEL AS course_level, scd.COURSE_DESCRIPTION AS course_description FROM COURSE_CATALOG_SUBJECT_OFFERED c JOIN FAC_ROOMS fr ON c.MEET_PLACE = fr.FAC_ROOM_KEY JOIN FAC_BUILDING b ON fr.BUILDING_KEY = b.FAC_BUILDING_KEY JOIN FAC_MAJOR_USE fmu ON fr.MAJOR_USE_KEY = fmu.MAJOR_USE_KEY LEFT JOIN FAC_BUILDING_ADDRESS ba ON b.FAC_BUILDING_KEY = ba.BUILDING_KEY LEFT JOIN SIS_COURSE_DESCRIPTION scd ON c.SUBJECT_ID = scd.COURSE WHERE c.MEET_PLACE IS NOT NULL AND c.MEET_TIME IS NOT NULL ), MeetingPlaceAggregates AS ( SELECT room_number, BUILDING_NAME, BUILDING_NUMBER, building_city, building_state, AREA, ORGANIZATION_NAME, MAJOR_USE, TERM_CODE, course_level, COUNT(DISTINCT SUBJECT_ID) AS num_subjects, COUNT(DISTINCT MEET_TIME) AS unique_meet_times, SUM(TOTAL_UNITS) AS total_units FROM MeetingPlaceDetails GROUP BY room_number, BUILDING_NAME, BUILDING_NUMBER, building_city, building_state, AREA, ORGANIZATION_NAME, MAJOR_USE, TERM_CODE, course_level ) SELECT room_number, BUILDING_NAME, BUILDING_NUMBER, building_city, building_state, AREA, ORGANIZATION_NAME, MAJOR_USE, TERM_CODE, course_level, num_subjects, unique_meet_times, total_units FROM MeetingPlaceAggregates ORDER BY TERM_CODE, total_units DESC, room_number;",
    "gold_tables": [
      "dw#sep#COURSE_CATALOG_SUBJECT_OFFERED",
      "dw#sep#FAC_ROOMS",
      "dw#sep#FAC_BUILDING",
      "dw#sep#FAC_MAJOR_USE",
      "dw#sep#FAC_BUILDING_ADDRESS",
      "dw#sep#SIS_COURSE_DESCRIPTION"
    ],
    "mapping": {
      "room number": [
        "COURSE_CATALOG_SUBJECT_OFFERED.MEET_PLACE"
      ],
      "building name": [
        "FAC_BUILDING.BUILDING_NAME"
      ],
      "building number": [
        "FAC_BUILDING.BUILDING_NUMBER"
      ],
      "building city": [
        "FAC_BUILDING_ADDRESS.CITY"
      ],
      "building state": [
        "FAC_BUILDING_ADDRESS.STATE"
      ],
      "area": [
        "FAC_ROOMS.AREA"
      ],
      "organization name": [
        "FAC_ROOMS.ORGANIZATION_NAME"
      ],
      "room usage": [
        "FAC_MAJOR_USE.MAJOR_USE"
      ],
      "term code": [
        "COURSE_CATALOG_SUBJECT_OFFERED.TERM_CODE"
      ],
      "course level": [
        "SIS_COURSE_DESCRIPTION.COURSE_LEVEL"
      ],
      "subjects": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_ID"
      ],
      "meeting times": [
        "COURSE_CATALOG_SUBJECT_OFFERED.MEET_TIME"
      ],
      "units": [
        "COURSE_CATALOG_SUBJECT_OFFERED.TOTAL_UNITS"
      ]
    },
    "join_keys": [
      [
        "FAC_ROOMS.FAC_ROOM_KEY",
        "COURSE_CATALOG_SUBJECT_OFFERED.MEET_PLACE"
      ],
      [
        "FAC_ROOMS.BUILDING_KEY",
        "FAC_BUILDING.FAC_BUILDING_KEY"
      ],
      [
        "FAC_ROOMS.MAJOR_USE_KEY",
        "FAC_MAJOR_USE.MAJOR_USE_KEY"
      ],
      [
        "FAC_BUILDING_ADDRESS.BUILDING_KEY",
        "FAC_BUILDING.FAC_BUILDING_KEY"
      ],
      [
        "SIS_COURSE_DESCRIPTION.COURSE",
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_ID"
      ]
    ],
    "original_sql": "WITH MeetingPlaceDetails AS (\n  SELECT\n    c.MEET_PLACE AS room_number,\n    c.MEET_TIME,\n    c.TERM_CODE,\n    c.SUBJECT_ID,\n    c.TOTAL_UNITS,\n    b.BUILDING_NAME,\n    b.BUILDING_NUMBER,\n    ba.CITY AS building_city,\n    ba.STATE AS building_state,\n    fr.AREA,\n    fr.ORGANIZATION_NAME,\n    fmu.MAJOR_USE,\n    scd.COURSE_LEVEL AS course_level,\n    scd.COURSE_DESCRIPTION AS course_description\n  FROM COURSE_CATALOG_SUBJECT_OFFERED AS c\n  JOIN FAC_ROOMS AS fr\n    ON c.MEET_PLACE = fr.FAC_ROOM_KEY\n  JOIN FAC_BUILDING AS b\n    ON fr.BUILDING_KEY = b.FAC_BUILDING_KEY\n  JOIN FAC_MAJOR_USE AS fmu\n    ON fr.MAJOR_USE_KEY = fmu.MAJOR_USE_KEY\n  LEFT JOIN FAC_BUILDING_ADDRESS AS ba\n    ON b.FAC_BUILDING_KEY = ba.BUILDING_KEY\n  LEFT JOIN SIS_COURSE_DESCRIPTION AS scd\n    ON c.SUBJECT_ID = scd.COURSE\n  WHERE\n    NOT c.MEET_PLACE IS NULL AND NOT c.MEET_TIME IS NULL\n), MeetingPlaceAggregates AS (\n  SELECT\n    room_number,\n    BUILDING_NAME,\n    BUILDING_NUMBER,\n    building_city,\n    building_state,\n    AREA,\n    ORGANIZATION_NAME,\n    MAJOR_USE,\n    TERM_CODE,\n    course_level,\n    COUNT(DISTINCT SUBJECT_ID) AS num_subjects,\n    COUNT(DISTINCT MEET_TIME) AS unique_meet_times,\n    SUM(TOTAL_UNITS) AS total_units\n  FROM MeetingPlaceDetails\n  GROUP BY\n    room_number,\n    BUILDING_NAME,\n    BUILDING_NUMBER,\n    building_city,\n    building_state,\n    AREA,\n    ORGANIZATION_NAME,\n    MAJOR_USE,\n    TERM_CODE,\n    course_level\n)\nSELECT\n  room_number,\n  BUILDING_NAME,\n  BUILDING_NUMBER,\n  building_city,\n  building_state,\n  AREA,\n  ORGANIZATION_NAME,\n  MAJOR_USE,\n  TERM_CODE,\n  course_level,\n  num_subjects,\n  unique_meet_times,\n  total_units\nFROM MeetingPlaceAggregates\nORDER BY\n  TERM_CODE,\n  total_units DESC,\n  room_number",
    "meta": {
      "features": {
        "query_table_count": 8,
        "query_column_count": 65,
        "query_nested_count": 2,
        "query_aggregate_count": 3,
        "query_sort_count": 3,
        "query_window_func_count": 0,
        "query_join_count": 5
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "12e917519a51",
    "question": "Consider only books cataloged on or after 2000. For each library material status and department, list the material status, department name, number of associated catalog items, and the total number of enrolled students in courses using those materials. Include subtotals for each material status and a grand total across all status (the corresponding status field is 'Grand Total').",
    "db_id": "dw",
    "sql": [
      "WITH MaterialUsage AS (\n  SELECT\n    lms.LIBRARY_MATERIAL_STATUS,\n    sc.DEPARTMENT_NAME AS department,\n    COUNT(DISTINCT lrc.LIBRARY_RESERVE_CATALOG_KEY) AS num_catalog_items,\n    SUM(lso.NUM_ENROLLED_STUDENTS) AS total_students\n  FROM LIBRARY_RESERVE_MATRL_DETAIL AS lrd\n  JOIN LIBRARY_MATERIAL_STATUS AS lms\n    ON lrd.LIBRARY_MATERIAL_STATUS_KEY = lms.LIBRARY_MATERIAL_STATUS_KEY\n  JOIN LIBRARY_RESERVE_CATALOG AS lrc\n    ON lrd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY\n  JOIN LIBRARY_SUBJECT_OFFERED AS lso\n    ON lrd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY\n  LEFT JOIN SIS_SUBJECT_CODE AS sc\n    ON lso.COURSE_NUMBER = sc.COURSE_NUMBER\n  WHERE\n    lrc.CATALOG_YEAR >= 2000\n  GROUP BY\n    lms.LIBRARY_MATERIAL_STATUS,\n    sc.DEPARTMENT_NAME\n), MaterialSubtotals AS (\n  SELECT\n    LIBRARY_MATERIAL_STATUS,\n    NULL AS department,\n    SUM(num_catalog_items) AS total_catalog_items,\n    SUM(total_students) AS total_students\n  FROM MaterialUsage\n  GROUP BY\n    LIBRARY_MATERIAL_STATUS\n), MaterialGrandTotal AS (\n  SELECT\n    'Grand Total' AS LIBRARY_MATERIAL_STATUS,\n    NULL AS department,\n    SUM(num_catalog_items) AS total_catalog_items,\n    SUM(total_students) AS total_students\n  FROM MaterialUsage\n), MaterialCombined AS (\n  SELECT\n    LIBRARY_MATERIAL_STATUS,\n    department,\n    num_catalog_items,\n    total_students\n  FROM MaterialUsage\n  UNION ALL\n  SELECT\n    LIBRARY_MATERIAL_STATUS,\n    department,\n    total_catalog_items,\n    total_students\n  FROM MaterialSubtotals\n  UNION ALL\n  SELECT\n    LIBRARY_MATERIAL_STATUS,\n    department,\n    total_catalog_items,\n    total_students\n  FROM MaterialGrandTotal\n)\nSELECT\n  COALESCE(LIBRARY_MATERIAL_STATUS, 'Subtotal') AS LIBRARY_MATERIAL_STATUS,\n  department,\n  num_catalog_items,\n  total_students\nFROM MaterialCombined\nORDER BY\n  CASE\n    WHEN LIBRARY_MATERIAL_STATUS = 'Grand Total'\n    THEN 1\n    WHEN department IS NULL\n    THEN 2\n    ELSE 0\n  END,\n  LIBRARY_MATERIAL_STATUS,\n  department"
    ],
    "oracle_sql": "WITH MaterialUsage AS ( SELECT lms.LIBRARY_MATERIAL_STATUS, sc.DEPARTMENT_NAME AS department, COUNT(DISTINCT lrc.LIBRARY_RESERVE_CATALOG_KEY) AS num_catalog_items, SUM(lso.NUM_ENROLLED_STUDENTS) AS total_students FROM LIBRARY_RESERVE_MATRL_DETAIL lrd JOIN LIBRARY_MATERIAL_STATUS lms ON lrd.LIBRARY_MATERIAL_STATUS_KEY = lms.LIBRARY_MATERIAL_STATUS_KEY JOIN LIBRARY_RESERVE_CATALOG lrc ON lrd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY JOIN LIBRARY_SUBJECT_OFFERED lso ON lrd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY LEFT JOIN SIS_SUBJECT_CODE sc ON lso.COURSE_NUMBER = sc.COURSE_NUMBER WHERE lrc.CATALOG_YEAR >= 2000 GROUP BY lms.LIBRARY_MATERIAL_STATUS, sc.DEPARTMENT_NAME ), MaterialSubtotals AS ( SELECT LIBRARY_MATERIAL_STATUS, NULL AS department, SUM(num_catalog_items) AS total_catalog_items, SUM(total_students) AS total_students FROM MaterialUsage GROUP BY LIBRARY_MATERIAL_STATUS ), MaterialGrandTotal AS ( SELECT 'Grand Total' AS LIBRARY_MATERIAL_STATUS, NULL AS department, SUM(num_catalog_items) AS total_catalog_items, SUM(total_students) AS total_students FROM MaterialUsage ), MaterialCombined AS ( SELECT LIBRARY_MATERIAL_STATUS, department, num_catalog_items, total_students FROM MaterialUsage UNION ALL SELECT LIBRARY_MATERIAL_STATUS, department, total_catalog_items, total_students FROM MaterialSubtotals UNION ALL SELECT LIBRARY_MATERIAL_STATUS, department, total_catalog_items, total_students FROM MaterialGrandTotal ) SELECT COALESCE(LIBRARY_MATERIAL_STATUS, 'Subtotal') AS library_material_status, department, num_catalog_items, total_students FROM MaterialCombined ORDER BY CASE WHEN LIBRARY_MATERIAL_STATUS = 'Grand Total' THEN 1 WHEN department IS NULL THEN 2 ELSE 0 END, LIBRARY_MATERIAL_STATUS, department;",
    "gold_tables": [
      "dw#sep#LIBRARY_RESERVE_MATRL_DETAIL",
      "dw#sep#LIBRARY_MATERIAL_STATUS",
      "dw#sep#LIBRARY_RESERVE_CATALOG",
      "dw#sep#LIBRARY_SUBJECT_OFFERED",
      "dw#sep#SIS_SUBJECT_CODE"
    ],
    "mapping": {
      "cataloged on or after 2000": [
        "LIBRARY_RESERVE_CATALOG.CATALOG_YEAR"
      ],
      "material status": [
        "LIBRARY_MATERIAL_STATUS.LIBRARY_MATERIAL_STATUS"
      ],
      "department name": [
        "SIS_SUBJECT_CODE.DEPARTMENT_NAME"
      ],
      "catalog items": [
        "LIBRARY_RESERVE_CATALOG.LIBRARY_RESERVE_CATALOG_KEY"
      ],
      "enrolled students": [
        "LIBRARY_SUBJECT_OFFERED.NUM_ENROLLED_STUDENTS"
      ]
    },
    "join_keys": [
      [
        "LIBRARY_MATERIAL_STATUS.LIBRARY_MATERIAL_STATUS_KEY",
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_MATERIAL_STATUS_KEY"
      ],
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_RESERVE_CATALOG_KEY",
        "LIBRARY_RESERVE_CATALOG.LIBRARY_RESERVE_CATALOG_KEY"
      ],
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_SUBJECT_OFFERED_KEY",
        "LIBRARY_SUBJECT_OFFERED.LIBRARY_SUBJECT_OFFERED_KEY"
      ],
      [
        "LIBRARY_SUBJECT_OFFERED.COURSE_NUMBER",
        "SIS_SUBJECT_CODE.COURSE_NUMBER"
      ]
    ],
    "original_sql": "WITH MaterialUsage AS (\n  SELECT\n    lms.LIBRARY_MATERIAL_STATUS,\n    sc.DEPARTMENT_NAME AS department,\n    COUNT(DISTINCT lrc.LIBRARY_RESERVE_CATALOG_KEY) AS num_catalog_items,\n    SUM(lso.NUM_ENROLLED_STUDENTS) AS total_students\n  FROM LIBRARY_RESERVE_MATRL_DETAIL AS lrd\n  JOIN LIBRARY_MATERIAL_STATUS AS lms\n    ON lrd.LIBRARY_MATERIAL_STATUS_KEY = lms.LIBRARY_MATERIAL_STATUS_KEY\n  JOIN LIBRARY_RESERVE_CATALOG AS lrc\n    ON lrd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY\n  JOIN LIBRARY_SUBJECT_OFFERED AS lso\n    ON lrd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY\n  LEFT JOIN SIS_SUBJECT_CODE AS sc\n    ON lso.COURSE_NUMBER = sc.COURSE_NUMBER\n  WHERE\n    lrc.CATALOG_YEAR >= 2000\n  GROUP BY\n    lms.LIBRARY_MATERIAL_STATUS,\n    sc.DEPARTMENT_NAME\n), MaterialSubtotals AS (\n  SELECT\n    LIBRARY_MATERIAL_STATUS,\n    NULL AS department,\n    SUM(num_catalog_items) AS total_catalog_items,\n    SUM(total_students) AS total_students\n  FROM MaterialUsage\n  GROUP BY\n    LIBRARY_MATERIAL_STATUS\n), MaterialGrandTotal AS (\n  SELECT\n    'Grand Total' AS LIBRARY_MATERIAL_STATUS,\n    NULL AS department,\n    SUM(num_catalog_items) AS total_catalog_items,\n    SUM(total_students) AS total_students\n  FROM MaterialUsage\n), MaterialCombined AS (\n  SELECT\n    LIBRARY_MATERIAL_STATUS,\n    department,\n    num_catalog_items,\n    total_students\n  FROM MaterialUsage\n  UNION ALL\n  SELECT\n    LIBRARY_MATERIAL_STATUS,\n    department,\n    total_catalog_items,\n    total_students\n  FROM MaterialSubtotals\n  UNION ALL\n  SELECT\n    LIBRARY_MATERIAL_STATUS,\n    department,\n    total_catalog_items,\n    total_students\n  FROM MaterialGrandTotal\n)\nSELECT\n  COALESCE(LIBRARY_MATERIAL_STATUS, 'Subtotal') AS library_material_status,\n  department,\n  num_catalog_items,\n  total_students\nFROM MaterialCombined\nORDER BY\n  CASE\n    WHEN LIBRARY_MATERIAL_STATUS = 'Grand Total'\n    THEN 1\n    WHEN department IS NULL\n    THEN 2\n    ELSE 0\n  END,\n  LIBRARY_MATERIAL_STATUS,\n  department",
    "meta": {
      "features": {
        "query_table_count": 11,
        "query_column_count": 41,
        "query_nested_count": 6,
        "query_aggregate_count": 6,
        "query_sort_count": 3,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "849d97fa5ee2",
    "question": "For each department in the library system, list the name of the department, total number of courses using library materials, the number of catalog items associated with those courses, and the average enrollment per course. Include a grand total across all departments (the corresponding department field should be 'Grand Total').",
    "db_id": "dw",
    "sql": [
      "WITH DepartmentLibraryUsage AS (\n  SELECT\n    lci.DEPARTMENT,\n    lci.COURSE_NAME,\n    COUNT(DISTINCT lrc.LIBRARY_RESERVE_CATALOG_KEY) AS num_catalog_items,\n    SUM(lso.NUM_ENROLLED_STUDENTS) AS total_students\n  FROM LIBRARY_RESERVE_MATRL_DETAIL AS lrd\n  JOIN LIBRARY_COURSE_INSTRUCTOR AS lci\n    ON lrd.LIBRARY_COURSE_INSTRUCTOR_KEY = lci.LIBRARY_COURSE_INSTRUCTOR_KEY\n  JOIN LIBRARY_RESERVE_CATALOG AS lrc\n    ON lrd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY\n  JOIN LIBRARY_SUBJECT_OFFERED AS lso\n    ON lrd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY\n  WHERE\n    lso.NUM_ENROLLED_STUDENTS > 0\n  GROUP BY\n    lci.DEPARTMENT,\n    lci.COURSE_NAME\n), DepartmentAggregates AS (\n  SELECT\n    DEPARTMENT,\n    COUNT(DISTINCT COURSE_NAME) AS total_courses,\n    SUM(num_catalog_items) AS total_catalog_items,\n    AVG(total_students) AS avg_students_per_course\n  FROM DepartmentLibraryUsage\n  GROUP BY\n    DEPARTMENT\n), GrandTotal AS (\n  SELECT\n    'Grand Total' AS DEPARTMENT,\n    SUM(total_courses) AS total_courses,\n    SUM(total_catalog_items) AS total_catalog_items,\n    AVG(avg_students_per_course) AS avg_students_per_course\n  FROM DepartmentAggregates\n)\nSELECT\n  *\nFROM (\n  SELECT\n    *\n  FROM GrandTotal\n  UNION ALL\n  SELECT\n    *\n  FROM DepartmentAggregates\n) AS CombinedResults\nORDER BY\n  CASE WHEN DEPARTMENT = 'Grand Total' THEN 0 ELSE 1 END,\n  DEPARTMENT"
    ],
    "oracle_sql": "WITH DepartmentLibraryUsage AS ( SELECT lci.DEPARTMENT, lci.COURSE_NAME, COUNT(DISTINCT lrc.LIBRARY_RESERVE_CATALOG_KEY) AS num_catalog_items, SUM(lso.NUM_ENROLLED_STUDENTS) AS total_students FROM LIBRARY_RESERVE_MATRL_DETAIL lrd JOIN LIBRARY_COURSE_INSTRUCTOR lci ON lrd.LIBRARY_COURSE_INSTRUCTOR_KEY = lci.LIBRARY_COURSE_INSTRUCTOR_KEY JOIN LIBRARY_RESERVE_CATALOG lrc ON lrd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY JOIN LIBRARY_SUBJECT_OFFERED lso ON lrd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY WHERE lso.NUM_ENROLLED_STUDENTS > 0 GROUP BY lci.DEPARTMENT, lci.COURSE_NAME ), DepartmentAggregates AS ( SELECT DEPARTMENT, COUNT(DISTINCT COURSE_NAME) AS total_courses, SUM(num_catalog_items) AS total_catalog_items, AVG(total_students) AS avg_students_per_course FROM DepartmentLibraryUsage GROUP BY DEPARTMENT ), GrandTotal AS ( SELECT 'Grand Total' AS DEPARTMENT, SUM(total_courses) AS total_courses, SUM(total_catalog_items) AS total_catalog_items, AVG(avg_students_per_course) AS avg_students_per_course FROM DepartmentAggregates ) SELECT * FROM ( SELECT * FROM GrandTotal UNION ALL SELECT * FROM DepartmentAggregates ) CombinedResults ORDER BY CASE WHEN DEPARTMENT = 'Grand Total' THEN 0 ELSE 1 END, DEPARTMENT;",
    "gold_tables": [
      "dw#sep#LIBRARY_RESERVE_MATRL_DETAIL",
      "dw#sep#LIBRARY_COURSE_INSTRUCTOR",
      "dw#sep#LIBRARY_RESERVE_CATALOG",
      "dw#sep#LIBRARY_SUBJECT_OFFERED"
    ],
    "mapping": {
      "name of the department": [
        "LIBRARY_COURSE_INSTRUCTOR.DEPARTMENT"
      ],
      "courses": [
        "LIBRARY_COURSE_INSTRUCTOR.COURSE_NAME"
      ],
      "catalog items": [
        "LIBRARY_RESERVE_CATALOG.LIBRARY_RESERVE_CATALOG_KEY"
      ],
      "enrollment": [
        "LIBRARY_SUBJECT_OFFERED.NUM_ENROLLED_STUDENTS"
      ]
    },
    "join_keys": [
      [
        "LIBRARY_COURSE_INSTRUCTOR.LIBRARY_COURSE_INSTRUCTOR_KEY",
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_COURSE_INSTRUCTOR_KEY"
      ],
      [
        "LIBRARY_RESERVE_CATALOG.LIBRARY_RESERVE_CATALOG_KEY",
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_RESERVE_CATALOG_KEY"
      ],
      [
        "LIBRARY_SUBJECT_OFFERED.LIBRARY_SUBJECT_OFFERED_KEY",
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_SUBJECT_OFFERED_KEY"
      ]
    ],
    "original_sql": "WITH DepartmentLibraryUsage AS (\n  SELECT\n    lci.DEPARTMENT,\n    lci.COURSE_NAME,\n    COUNT(DISTINCT lrc.LIBRARY_RESERVE_CATALOG_KEY) AS num_catalog_items,\n    SUM(lso.NUM_ENROLLED_STUDENTS) AS total_students\n  FROM LIBRARY_RESERVE_MATRL_DETAIL AS lrd\n  JOIN LIBRARY_COURSE_INSTRUCTOR AS lci\n    ON lrd.LIBRARY_COURSE_INSTRUCTOR_KEY = lci.LIBRARY_COURSE_INSTRUCTOR_KEY\n  JOIN LIBRARY_RESERVE_CATALOG AS lrc\n    ON lrd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY\n  JOIN LIBRARY_SUBJECT_OFFERED AS lso\n    ON lrd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY\n  WHERE\n    lso.NUM_ENROLLED_STUDENTS > 0\n  GROUP BY\n    lci.DEPARTMENT,\n    lci.COURSE_NAME\n), DepartmentAggregates AS (\n  SELECT\n    DEPARTMENT,\n    COUNT(DISTINCT COURSE_NAME) AS total_courses,\n    SUM(num_catalog_items) AS total_catalog_items,\n    AVG(total_students) AS avg_students_per_course\n  FROM DepartmentLibraryUsage\n  GROUP BY\n    DEPARTMENT\n), GrandTotal AS (\n  SELECT\n    'Grand Total' AS DEPARTMENT,\n    SUM(total_courses) AS total_courses,\n    SUM(total_catalog_items) AS total_catalog_items,\n    AVG(avg_students_per_course) AS avg_students_per_course\n  FROM DepartmentAggregates\n)\nSELECT\n  *\nFROM (\n  SELECT\n    *\n  FROM GrandTotal\n  UNION ALL\n  SELECT\n    *\n  FROM DepartmentAggregates\n) AS CombinedResults\nORDER BY\n  CASE WHEN DEPARTMENT = 'Grand Total' THEN 0 ELSE 1 END,\n  DEPARTMENT",
    "meta": {
      "features": {
        "query_table_count": 8,
        "query_column_count": 23,
        "query_nested_count": 5,
        "query_aggregate_count": 8,
        "query_sort_count": 2,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "c5269b8b63c7",
    "question": "For each department and school offering courses with materials, list the department name, school name, number of unique course materials, number of courses, average new and used shelf prices of materials, total material records, and number of distinct material statuses. Include a grand total across all schools and departments (the corresponding school and department fields should be null).",
    "db_id": "dw",
    "sql": [
      "WITH MaterialCostDetails AS (\n  SELECT\n    tso.OFFER_DEPT_NAME AS department_name,\n    tso.SUBJECT_TITLE,\n    tm.TITLE AS material_title,\n    tm.NEW_SHELF_PRICE,\n    tm.USED_SHELF_PRICE,\n    tms.TIP_MATERIAL_STATUS AS material_status,\n    tms.TIP_MATERIAL_STATUS_CODE AS material_status_code,\n    td.RECORD_COUNT AS material_record_count,\n    ts.SCHOOL_NAME AS school_name\n  FROM TIP_DETAIL AS td\n  JOIN TIP_MATERIAL AS tm\n    ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY\n  JOIN TIP_SUBJECT_OFFERED AS tso\n    ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY\n  JOIN TIP_MATERIAL_STATUS AS tms\n    ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY\n  JOIN SIS_DEPARTMENT AS ts\n    ON tso.OFFER_DEPT_CODE = ts.DEPARTMENT_CODE\n  WHERE\n    tso.IS_NO_COURSE_MATERIAL = 'N'\n), MaterialCostAggregates AS (\n  SELECT\n    department_name,\n    school_name,\n    COUNT(DISTINCT material_title) AS num_unique_materials,\n    COUNT(DISTINCT SUBJECT_TITLE) AS num_courses,\n    AVG(NEW_SHELF_PRICE) AS avg_new_price,\n    AVG(USED_SHELF_PRICE) AS avg_used_price,\n    SUM(material_record_count) AS total_material_records,\n    COUNT(DISTINCT material_status) AS num_material_statuses\n  FROM MaterialCostDetails\n  GROUP BY\n    department_name,\n    school_name\n), GrandTotal AS (\n  SELECT\n    NULL AS department_name,\n    NULL AS school_name,\n    COUNT(DISTINCT material_title) AS num_unique_materials,\n    COUNT(DISTINCT SUBJECT_TITLE) AS num_courses,\n    AVG(NEW_SHELF_PRICE) AS avg_new_price,\n    AVG(USED_SHELF_PRICE) AS avg_used_price,\n    SUM(material_record_count) AS total_material_records,\n    COUNT(DISTINCT material_status) AS num_material_statuses\n  FROM MaterialCostDetails\n)\nSELECT\n  department_name,\n  school_name,\n  num_unique_materials,\n  num_courses,\n  avg_new_price,\n  avg_used_price,\n  total_material_records,\n  num_material_statuses\nFROM MaterialCostAggregates\nUNION ALL\nSELECT\n  department_name,\n  school_name,\n  num_unique_materials,\n  num_courses,\n  avg_new_price,\n  avg_used_price,\n  total_material_records,\n  num_material_statuses\nFROM GrandTotal\nORDER BY\n  school_name,\n  department_name"
    ],
    "oracle_sql": "WITH MaterialCostDetails AS ( SELECT tso.OFFER_DEPT_NAME AS department_name, tso.SUBJECT_TITLE, tm.TITLE AS material_title, tm.NEW_SHELF_PRICE, tm.USED_SHELF_PRICE, tms.TIP_MATERIAL_STATUS AS material_status, tms.TIP_MATERIAL_STATUS_CODE AS material_status_code, td.RECORD_COUNT AS material_record_count, ts.SCHOOL_NAME AS school_name FROM TIP_DETAIL td JOIN TIP_MATERIAL tm ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY JOIN TIP_SUBJECT_OFFERED tso ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY JOIN TIP_MATERIAL_STATUS tms ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY JOIN SIS_DEPARTMENT ts ON tso.OFFER_DEPT_CODE = ts.DEPARTMENT_CODE WHERE tso.IS_NO_COURSE_MATERIAL = 'N' ), MaterialCostAggregates AS ( SELECT department_name, school_name, COUNT(DISTINCT material_title) AS num_unique_materials, COUNT(DISTINCT SUBJECT_TITLE) AS num_courses, AVG(NEW_SHELF_PRICE) AS avg_new_price, AVG(USED_SHELF_PRICE) AS avg_used_price, SUM(material_record_count) AS total_material_records, COUNT(DISTINCT material_status) AS num_material_statuses FROM MaterialCostDetails GROUP BY department_name, school_name ), GrandTotal AS ( SELECT NULL AS department_name, NULL AS school_name, COUNT(DISTINCT material_title) AS num_unique_materials, COUNT(DISTINCT SUBJECT_TITLE) AS num_courses, AVG(NEW_SHELF_PRICE) AS avg_new_price, AVG(USED_SHELF_PRICE) AS avg_used_price, SUM(material_record_count) AS total_material_records, COUNT(DISTINCT material_status) AS num_material_statuses FROM MaterialCostDetails ) SELECT department_name, school_name, num_unique_materials, num_courses, avg_new_price, avg_used_price, total_material_records, num_material_statuses FROM MaterialCostAggregates UNION ALL SELECT department_name, school_name, num_unique_materials, num_courses, avg_new_price, avg_used_price, total_material_records, num_material_statuses FROM GrandTotal ORDER BY school_name, department_name;",
    "gold_tables": [
      "dw#sep#TIP_DETAIL",
      "dw#sep#TIP_MATERIAL",
      "dw#sep#TIP_SUBJECT_OFFERED",
      "dw#sep#TIP_MATERIAL_STATUS",
      "dw#sep#SIS_DEPARTMENT"
    ],
    "mapping": {
      "courses with materials": [
        "TIP_SUBJECT_OFFERED.IS_NO_COURSE_MATERIAL"
      ],
      "department name": [
        "TIP_SUBJECT_OFFERED.OFFER_DEPT_NAME"
      ],
      "school name": [
        "SIS_DEPARTMENT.SCHOOL_NAME"
      ],
      "course materials": [
        "TIP_MATERIAL.TITLE"
      ],
      "courses": [
        "TIP_SUBJECT_OFFERED.SUBJECT_TITLE"
      ],
      "new": [
        "TIP_MATERIAL.NEW_SHELF_PRICE"
      ],
      "used": [
        "TIP_MATERIAL.USED_SHELF_PRICE"
      ],
      "material records": [
        "TIP_DETAIL.RECORD_COUNT"
      ],
      "material statuses": [
        "TIP_MATERIAL_STATUS.TIP_MATERIAL_STATUS"
      ]
    },
    "join_keys": [
      [
        "TIP_MATERIAL.TIP_MATERIAL_KEY",
        "TIP_DETAIL.TIP_MATERIAL_KEY"
      ],
      [
        "TIP_SUBJECT_OFFERED.TIP_SUBJECT_OFFERED_KEY",
        "TIP_DETAIL.TIP_SUBJECT_OFFERED_KEY"
      ],
      [
        "TIP_DETAIL.TIP_MATERIAL_STATUS_KEY",
        "TIP_MATERIAL_STATUS.TIP_MATERIAL_STATUS_KEY"
      ],
      [
        "SIS_DEPARTMENT.DEPARTMENT_CODE",
        "TIP_SUBJECT_OFFERED.OFFER_DEPT_CODE"
      ]
    ],
    "original_sql": "WITH MaterialCostDetails AS (\n  SELECT\n    tso.OFFER_DEPT_NAME AS department_name,\n    tso.SUBJECT_TITLE,\n    tm.TITLE AS material_title,\n    tm.NEW_SHELF_PRICE,\n    tm.USED_SHELF_PRICE,\n    tms.TIP_MATERIAL_STATUS AS material_status,\n    tms.TIP_MATERIAL_STATUS_CODE AS material_status_code,\n    td.RECORD_COUNT AS material_record_count,\n    ts.SCHOOL_NAME AS school_name\n  FROM TIP_DETAIL AS td\n  JOIN TIP_MATERIAL AS tm\n    ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY\n  JOIN TIP_SUBJECT_OFFERED AS tso\n    ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY\n  JOIN TIP_MATERIAL_STATUS AS tms\n    ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY\n  JOIN SIS_DEPARTMENT AS ts\n    ON tso.OFFER_DEPT_CODE = ts.DEPARTMENT_CODE\n  WHERE\n    tso.IS_NO_COURSE_MATERIAL = 'N'\n), MaterialCostAggregates AS (\n  SELECT\n    department_name,\n    school_name,\n    COUNT(DISTINCT material_title) AS num_unique_materials,\n    COUNT(DISTINCT SUBJECT_TITLE) AS num_courses,\n    AVG(NEW_SHELF_PRICE) AS avg_new_price,\n    AVG(USED_SHELF_PRICE) AS avg_used_price,\n    SUM(material_record_count) AS total_material_records,\n    COUNT(DISTINCT material_status) AS num_material_statuses\n  FROM MaterialCostDetails\n  GROUP BY\n    department_name,\n    school_name\n), GrandTotal AS (\n  SELECT\n    NULL AS department_name,\n    NULL AS school_name,\n    COUNT(DISTINCT material_title) AS num_unique_materials,\n    COUNT(DISTINCT SUBJECT_TITLE) AS num_courses,\n    AVG(NEW_SHELF_PRICE) AS avg_new_price,\n    AVG(USED_SHELF_PRICE) AS avg_used_price,\n    SUM(material_record_count) AS total_material_records,\n    COUNT(DISTINCT material_status) AS num_material_statuses\n  FROM MaterialCostDetails\n)\nSELECT\n  department_name,\n  school_name,\n  num_unique_materials,\n  num_courses,\n  avg_new_price,\n  avg_used_price,\n  total_material_records,\n  num_material_statuses\nFROM MaterialCostAggregates\nUNION ALL\nSELECT\n  department_name,\n  school_name,\n  num_unique_materials,\n  num_courses,\n  avg_new_price,\n  avg_used_price,\n  total_material_records,\n  num_material_statuses\nFROM GrandTotal\nORDER BY\n  school_name,\n  department_name",
    "meta": {
      "features": {
        "query_table_count": 9,
        "query_column_count": 52,
        "query_nested_count": 4,
        "query_aggregate_count": 12,
        "query_sort_count": 2,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "71cdba296740",
    "question": "For each TIP material status, list the total number of unique materials associated with the status, the total number of records associated with the status, and the total student enrollment associated with the status. Any material status with null values should be displayed as 'No material status'. Additionally, include a grand total across all material status (the material status for this row should be displayed as 'Grand Total').",
    "db_id": "dw",
    "sql": [
      "SELECT\n  COALESCE(material_status, 'Grand Total') AS material_status,\n  num_materials,\n  total_record_count,\n  total_enrollment\nFROM (\n  SELECT\n    CASE WHEN material_status IS NULL THEN 'No material status' ELSE material_status END AS material_status,\n    COUNT(DISTINCT material_title) AS num_materials,\n    SUM(RECORD_COUNT) AS total_record_count,\n    SUM(NUM_ENROLLED_STUDENTS) AS total_enrollment\n  FROM (\n    SELECT\n      tms.TIP_MATERIAL_STATUS AS material_status,\n      tm.TITLE AS material_title,\n      td.RECORD_COUNT,\n      tso.NUM_ENROLLED_STUDENTS\n    FROM TIP_DETAIL AS td\n    JOIN TIP_MATERIAL_STATUS AS tms\n      ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY\n    JOIN TIP_MATERIAL AS tm\n      ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY\n    JOIN TIP_SUBJECT_OFFERED AS tso\n      ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY\n    WHERE\n      td.RECORD_COUNT > 0\n  ) AS MaterialStatusDetails\n  GROUP BY\n    material_status\n    WITH ROLLUP\n) AS MaterialStatusAggregates\nORDER BY\n  CASE WHEN material_status = 'Grand Total' THEN 1 ELSE 0 END,\n  total_record_count DESC,\n  material_status"
    ],
    "oracle_sql": "WITH MaterialStatusDetails AS ( SELECT tms.TIP_MATERIAL_STATUS AS material_status, tm.TITLE AS material_title, td.RECORD_COUNT, tso.NUM_ENROLLED_STUDENTS FROM TIP_DETAIL td JOIN TIP_MATERIAL_STATUS tms ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY JOIN TIP_MATERIAL tm ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY JOIN TIP_SUBJECT_OFFERED tso ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY WHERE td.RECORD_COUNT > 0 ), MaterialStatusAggregates AS ( SELECT CASE WHEN GROUPING(material_status) = 1 THEN NULL WHEN material_status IS NULL THEN 'No material status' ELSE material_status END AS material_status, COUNT(DISTINCT material_title) AS num_materials, SUM(RECORD_COUNT) AS total_record_count, SUM(NUM_ENROLLED_STUDENTS) AS total_enrollment FROM MaterialStatusDetails GROUP BY ROLLUP(material_status) ) SELECT COALESCE(material_status, 'Grand Total') AS material_status, num_materials, total_record_count, total_enrollment FROM MaterialStatusAggregates ORDER BY CASE WHEN material_status = 'Grand Total' THEN 1 ELSE 0 END, total_record_count DESC, material_status;",
    "gold_tables": [
      "dw#sep#TIP_DETAIL",
      "dw#sep#TIP_MATERIAL_STATUS",
      "dw#sep#TIP_MATERIAL",
      "dw#sep#TIP_SUBJECT_OFFERED"
    ],
    "mapping": {
      "TIP material status": [
        "TIP_MATERIAL_STATUS.TIP_MATERIAL_STATUS"
      ],
      "materials": [
        "TIP_MATERIAL.TITLE"
      ],
      "records": [
        "TIP_DETAIL.RECORD_COUNT"
      ],
      "student enrollment": [
        "TIP_SUBJECT_OFFERED.NUM_ENROLLED_STUDENTS"
      ]
    },
    "join_keys": [
      [
        "TIP_DETAIL.TIP_MATERIAL_STATUS_KEY",
        "TIP_MATERIAL_STATUS.TIP_MATERIAL_STATUS_KEY"
      ],
      [
        "TIP_DETAIL.TIP_MATERIAL_KEY",
        "TIP_MATERIAL.TIP_MATERIAL_KEY"
      ],
      [
        "TIP_DETAIL.TIP_SUBJECT_OFFERED_KEY",
        "TIP_SUBJECT_OFFERED.TIP_SUBJECT_OFFERED_KEY"
      ]
    ],
    "original_sql": "SELECT\n  COALESCE(material_status, 'Grand Total') AS material_status,\n  num_materials,\n  total_record_count,\n  total_enrollment\nFROM (\n  SELECT\n    CASE WHEN material_status IS NULL THEN 'No material status' ELSE material_status END AS material_status,\n    COUNT(DISTINCT material_title) AS num_materials,\n    SUM(RECORD_COUNT) AS total_record_count,\n    SUM(NUM_ENROLLED_STUDENTS) AS total_enrollment\n  FROM (\n    SELECT\n      tms.TIP_MATERIAL_STATUS AS material_status,\n      tm.TITLE AS material_title,\n      td.RECORD_COUNT,\n      tso.NUM_ENROLLED_STUDENTS\n    FROM TIP_DETAIL AS td\n    JOIN TIP_MATERIAL_STATUS AS tms\n      ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY\n    JOIN TIP_MATERIAL AS tm\n      ON td.TIP_MATERIAL_KEY = tm.TIP_MATERIAL_KEY\n    JOIN TIP_SUBJECT_OFFERED AS tso\n      ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY\n    WHERE\n      td.RECORD_COUNT > 0\n  ) AS MaterialStatusDetails\n  GROUP BY\n    material_status\n    WITH ROLLUP\n) AS MaterialStatusAggregates\nORDER BY\n  CASE WHEN material_status = 'Grand Total' THEN 1 ELSE 0 END,\n  total_record_count DESC,\n  material_status",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 24,
        "query_nested_count": 2,
        "query_aggregate_count": 3,
        "query_sort_count": 3,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "3c3f3e02b676",
    "question": "For each room, list its associated building name, floor number, room number, ownership type, organization name, number of rooms, area, and percentage of area relative to the building. Include subtotals across floors, subtotals across all floors for each building, and a grand total across all buildings. For the subtotal for each building and the grand total, the percentage of area should be relative to area of all buildings. All numeric values should be rounded to integers and formatted using commas as thousands separators except the relative percentages which should be rounded to two decimal places.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  Building_Name,\n  FLOOR,\n  Room,\n  OWNERSHIP_TYPE,\n  Organization_Name,\n  FORMAT(Total_Rooms, 0) AS Total_Rooms,\n  FORMAT(Total_Area, 0) AS Total_Area,\n  Percent_Of_Total\nFROM (\n  SELECT\n    0 AS SortOrder,\n    NULL AS Building_Name,\n    NULL AS FLOOR,\n    NULL AS Room,\n    NULL AS OWNERSHIP_TYPE,\n    NULL AS Organization_Name,\n    SUM(Total_Rooms) AS Total_Rooms,\n    SUM(Total_Area) AS Total_Area,\n    100 AS Percent_Of_Total\n  FROM (\n    SELECT\n      b.BUILDING_NAME_LONG AS Building_Name,\n      f.FLOOR,\n      r.BUILDING_ROOM AS Room,\n      COUNT(r.FCLT_ROOM_KEY) AS Total_Rooms,\n      SUM(r.AREA) AS Total_Area,\n      b.OWNERSHIP_TYPE,\n      o.ORGANIZATION_NAME AS Organization_Name,\n      (\n        SELECT\n          SUM(r2.AREA)\n        FROM FCLT_ROOMS AS r2\n        JOIN FCLT_FLOOR AS f2\n          ON r2.FCLT_FLOOR_KEY = f2.FCLT_FLOOR_KEY\n        WHERE\n          f2.FCLT_BUILDING_KEY = f.FCLT_BUILDING_KEY\n      ) AS Building_Total_Area,\n      (\n        SELECT\n          SUM(r3.AREA)\n        FROM FCLT_ROOMS AS r3\n      ) AS Overall_Total_Area\n    FROM FCLT_FLOOR AS f\n    LEFT JOIN FCLT_ROOMS AS r\n      ON f.FCLT_FLOOR_KEY = r.FCLT_FLOOR_KEY\n    LEFT JOIN FCLT_BUILDING AS b\n      ON f.FCLT_BUILDING_KEY = b.FCLT_BUILDING_KEY\n    LEFT JOIN FCLT_ORGANIZATION AS o\n      ON r.FCLT_ORGANIZATION_KEY = o.FCLT_ORGANIZATION_KEY\n    GROUP BY\n      b.BUILDING_NAME_LONG,\n      f.FLOOR,\n      r.BUILDING_ROOM,\n      b.OWNERSHIP_TYPE,\n      o.ORGANIZATION_NAME,\n      f.FCLT_BUILDING_KEY\n  ) AS FloorStats\n  WHERE\n    NOT Building_Name IS NULL\n  UNION ALL\n  SELECT\n    1 AS SortOrder,\n    Building_Name,\n    FLOOR,\n    Room,\n    OWNERSHIP_TYPE,\n    Organization_Name,\n    Total_Rooms,\n    Total_Area,\n    CASE\n      WHEN NOT FLOOR IS NULL AND Building_Total_Area > 0\n      THEN ROUND(Total_Area * 100.0 / Building_Total_Area, 2)\n      WHEN FLOOR IS NULL AND NOT Building_Name IS NULL AND Overall_Total_Area > 0\n      THEN ROUND(Total_Area * 100.0 / Overall_Total_Area, 2)\n      ELSE NULL\n    END AS Percent_Of_Total\n  FROM (\n    SELECT\n      b.BUILDING_NAME_LONG AS Building_Name,\n      f.FLOOR,\n      r.BUILDING_ROOM AS Room,\n      COUNT(r.FCLT_ROOM_KEY) AS Total_Rooms,\n      SUM(r.AREA) AS Total_Area,\n      b.OWNERSHIP_TYPE,\n      o.ORGANIZATION_NAME AS Organization_Name,\n      (\n        SELECT\n          SUM(r2.AREA)\n        FROM FCLT_ROOMS AS r2\n        JOIN FCLT_FLOOR AS f2\n          ON r2.FCLT_FLOOR_KEY = f2.FCLT_FLOOR_KEY\n        WHERE\n          f2.FCLT_BUILDING_KEY = f.FCLT_BUILDING_KEY\n      ) AS Building_Total_Area,\n      (\n        SELECT\n          SUM(r3.AREA)\n        FROM FCLT_ROOMS AS r3\n      ) AS Overall_Total_Area\n    FROM FCLT_FLOOR AS f\n    LEFT JOIN FCLT_ROOMS AS r\n      ON f.FCLT_FLOOR_KEY = r.FCLT_FLOOR_KEY\n    LEFT JOIN FCLT_BUILDING AS b\n      ON f.FCLT_BUILDING_KEY = b.FCLT_BUILDING_KEY\n    LEFT JOIN FCLT_ORGANIZATION AS o\n      ON r.FCLT_ORGANIZATION_KEY = o.FCLT_ORGANIZATION_KEY\n    GROUP BY\n      b.BUILDING_NAME_LONG,\n      f.FLOOR,\n      r.BUILDING_ROOM,\n      b.OWNERSHIP_TYPE,\n      o.ORGANIZATION_NAME,\n      f.FCLT_BUILDING_KEY\n      WITH ROLLUP\n  ) AS RollupWithPercentages\n  WHERE\n    NOT Building_Name IS NULL\n) AS AllData\nORDER BY\n  SortOrder,\n  Building_Name,\n  FLOOR,\n  Room"
    ],
    "oracle_sql": "WITH FloorStats AS (SELECT f.FCLT_BUILDING_KEY, b.BUILDING_NAME_LONG AS Building_Name, f.FLOOR, r.BUILDING_ROOM AS Room, COUNT(r.FCLT_ROOM_KEY) AS Room_Count, SUM(r.AREA) AS Total_Floor_Area, SUM(SUM(r.AREA)) OVER (PARTITION BY f.FCLT_BUILDING_KEY) AS Building_Total_Area, SUM(SUM(r.AREA)) OVER () AS Overall_Total_Area, b.OWNERSHIP_TYPE, o.ORGANIZATION_NAME AS Organization_Name FROM FCLT_FLOOR f LEFT JOIN FCLT_ROOMS r ON f.FCLT_FLOOR_KEY = r.FCLT_FLOOR_KEY LEFT JOIN FCLT_BUILDING b ON f.FCLT_BUILDING_KEY = b.FCLT_BUILDING_KEY LEFT JOIN FCLT_ORGANIZATION o ON r.FCLT_ORGANIZATION_KEY = o.FCLT_ORGANIZATION_KEY GROUP BY f.FCLT_BUILDING_KEY, b.BUILDING_NAME_LONG, f.FLOOR, r.BUILDING_ROOM, b.OWNERSHIP_TYPE, o.ORGANIZATION_NAME), RollupWithPercentages AS (SELECT Building_Name, FLOOR, CASE WHEN GROUPING(Room) = 0 THEN Room ELSE NULL END AS Room, CASE WHEN GROUPING_ID(Building_Name, FLOOR, Room) > 0 THEN NULL ELSE OWNERSHIP_TYPE END AS OWNERSHIP_TYPE, MAX(Organization_Name) AS Organization_Name, SUM(Room_Count) AS Total_Rooms, SUM(Total_Floor_Area) AS Total_Area, MAX(Building_Total_Area) AS Building_Total_Area, MAX(Overall_Total_Area) AS Overall_Total_Area FROM FloorStats GROUP BY ROLLUP(Building_Name, FLOOR, Room), OWNERSHIP_TYPE, Organization_Name), GrandTotal AS (SELECT NULL AS Building_Name, NULL AS FLOOR, NULL AS Room, NULL AS OWNERSHIP_TYPE, NULL AS Organization_Name, SUM(Total_Rooms) AS Total_Rooms, SUM(Total_Area) AS Total_Area, NULL AS Building_Total_Area, MAX(Overall_Total_Area) AS Overall_Total_Area, 0 AS SortOrder, 100 AS Percent_Of_Total FROM RollupWithPercentages WHERE Building_Name IS NOT NULL), AllData AS (SELECT 0 AS SortOrder, Building_Name, FLOOR, Room, NULL AS OWNERSHIP_TYPE, NULL AS Organization_Name, Total_Rooms, Total_Area, Percent_Of_Total FROM GrandTotal UNION ALL SELECT 1 AS SortOrder, Building_Name, FLOOR, Room, CASE WHEN Building_Name IS NOT NULL THEN OWNERSHIP_TYPE ELSE NULL END AS OWNERSHIP_TYPE, Organization_Name, Total_Rooms, Total_Area, CASE WHEN FLOOR IS NOT NULL AND Building_Total_Area > 0 THEN ROUND(Total_Area * 100.0 / Building_Total_Area, 2) WHEN FLOOR IS NULL AND Building_Name IS NOT NULL AND Overall_Total_Area > 0 THEN ROUND(Total_Area * 100.0 / Overall_Total_Area, 2) ELSE NULL END AS Percent_Of_Total FROM RollupWithPercentages) SELECT Building_Name, FLOOR, Room, OWNERSHIP_TYPE, Organization_Name, TO_CHAR(Total_Rooms, '999,999') AS Total_Rooms, TO_CHAR(Total_Area, '999,999,999') AS Total_Area, Percent_Of_Total FROM AllData ORDER BY SortOrder, Building_Name, FLOOR, Room;",
    "gold_tables": [
      "dw#sep#FCLT_ROOMS",
      "dw#sep#FCLT_FLOOR",
      "dw#sep#FCLT_BUILDING",
      "dw#sep#FCLT_ORGANIZATION"
    ],
    "mapping": {
      "room": [
        "FCLT_ROOMS.FCLT_ROOM_KEY"
      ],
      "building name": [
        "FCLT_BUILDING.BUILDING_NAME_LONG"
      ],
      "floor number": [
        "FCLT_FLOOR.FLOOR"
      ],
      "room number": [
        "FCLT_ROOMS.BUILDING_ROOM"
      ],
      "ownership type": [
        "FCLT_BUILDING.OWNERSHIP_TYPE"
      ],
      "organization name": [
        "FCLT_ORGANIZATION.ORGANIZATION_NAME"
      ],
      "number of rooms": [
        "FCLT_ROOMS.FCLT_ROOM_KEY"
      ],
      "area": [
        "FCLT_ROOMS.AREA"
      ]
    },
    "join_keys": [
      [
        "FCLT_FLOOR.FCLT_FLOOR_KEY",
        "FCLT_ROOMS.FCLT_FLOOR_KEY"
      ],
      [
        "FCLT_BUILDING.FCLT_BUILDING_KEY",
        "FCLT_FLOOR.FCLT_BUILDING_KEY"
      ],
      [
        "FCLT_ORGANIZATION.FCLT_ORGANIZATION_KEY",
        "FCLT_ROOMS.FCLT_ORGANIZATION_KEY"
      ]
    ],
    "original_sql": "SELECT\n  Building_Name,\n  FLOOR,\n  Room,\n  OWNERSHIP_TYPE,\n  Organization_Name,\n  FORMAT(Total_Rooms, 0) AS Total_Rooms,\n  FORMAT(Total_Area, 0) AS Total_Area,\n  Percent_Of_Total\nFROM (\n  SELECT\n    0 AS SortOrder,\n    NULL AS Building_Name,\n    NULL AS FLOOR,\n    NULL AS Room,\n    NULL AS OWNERSHIP_TYPE,\n    NULL AS Organization_Name,\n    SUM(Total_Rooms) AS Total_Rooms,\n    SUM(Total_Area) AS Total_Area,\n    100 AS Percent_Of_Total\n  FROM (\n    SELECT\n      b.BUILDING_NAME_LONG AS Building_Name,\n      f.FLOOR,\n      r.BUILDING_ROOM AS Room,\n      COUNT(r.FCLT_ROOM_KEY) AS Total_Rooms,\n      SUM(r.AREA) AS Total_Area,\n      b.OWNERSHIP_TYPE,\n      o.ORGANIZATION_NAME AS Organization_Name,\n      (\n        SELECT\n          SUM(r2.AREA)\n        FROM FCLT_ROOMS AS r2\n        JOIN FCLT_FLOOR AS f2\n          ON r2.FCLT_FLOOR_KEY = f2.FCLT_FLOOR_KEY\n        WHERE\n          f2.FCLT_BUILDING_KEY = f.FCLT_BUILDING_KEY\n      ) AS Building_Total_Area,\n      (\n        SELECT\n          SUM(r3.AREA)\n        FROM FCLT_ROOMS AS r3\n      ) AS Overall_Total_Area\n    FROM FCLT_FLOOR AS f\n    LEFT JOIN FCLT_ROOMS AS r\n      ON f.FCLT_FLOOR_KEY = r.FCLT_FLOOR_KEY\n    LEFT JOIN FCLT_BUILDING AS b\n      ON f.FCLT_BUILDING_KEY = b.FCLT_BUILDING_KEY\n    LEFT JOIN FCLT_ORGANIZATION AS o\n      ON r.FCLT_ORGANIZATION_KEY = o.FCLT_ORGANIZATION_KEY\n    GROUP BY\n      b.BUILDING_NAME_LONG,\n      f.FLOOR,\n      r.BUILDING_ROOM,\n      b.OWNERSHIP_TYPE,\n      o.ORGANIZATION_NAME,\n      f.FCLT_BUILDING_KEY\n  ) AS FloorStats\n  WHERE\n    NOT Building_Name IS NULL\n  UNION ALL\n  SELECT\n    1 AS SortOrder,\n    Building_Name,\n    FLOOR,\n    Room,\n    OWNERSHIP_TYPE,\n    Organization_Name,\n    Total_Rooms,\n    Total_Area,\n    CASE\n      WHEN NOT FLOOR IS NULL AND Building_Total_Area > 0\n      THEN ROUND(Total_Area * 100.0 / Building_Total_Area, 2)\n      WHEN FLOOR IS NULL AND NOT Building_Name IS NULL AND Overall_Total_Area > 0\n      THEN ROUND(Total_Area * 100.0 / Overall_Total_Area, 2)\n      ELSE NULL\n    END AS Percent_Of_Total\n  FROM (\n    SELECT\n      b.BUILDING_NAME_LONG AS Building_Name,\n      f.FLOOR,\n      r.BUILDING_ROOM AS Room,\n      COUNT(r.FCLT_ROOM_KEY) AS Total_Rooms,\n      SUM(r.AREA) AS Total_Area,\n      b.OWNERSHIP_TYPE,\n      o.ORGANIZATION_NAME AS Organization_Name,\n      (\n        SELECT\n          SUM(r2.AREA)\n        FROM FCLT_ROOMS AS r2\n        JOIN FCLT_FLOOR AS f2\n          ON r2.FCLT_FLOOR_KEY = f2.FCLT_FLOOR_KEY\n        WHERE\n          f2.FCLT_BUILDING_KEY = f.FCLT_BUILDING_KEY\n      ) AS Building_Total_Area,\n      (\n        SELECT\n          SUM(r3.AREA)\n        FROM FCLT_ROOMS AS r3\n      ) AS Overall_Total_Area\n    FROM FCLT_FLOOR AS f\n    LEFT JOIN FCLT_ROOMS AS r\n      ON f.FCLT_FLOOR_KEY = r.FCLT_FLOOR_KEY\n    LEFT JOIN FCLT_BUILDING AS b\n      ON f.FCLT_BUILDING_KEY = b.FCLT_BUILDING_KEY\n    LEFT JOIN FCLT_ORGANIZATION AS o\n      ON r.FCLT_ORGANIZATION_KEY = o.FCLT_ORGANIZATION_KEY\n    GROUP BY\n      b.BUILDING_NAME_LONG,\n      f.FLOOR,\n      r.BUILDING_ROOM,\n      b.OWNERSHIP_TYPE,\n      o.ORGANIZATION_NAME,\n      f.FCLT_BUILDING_KEY\n      WITH ROLLUP\n  ) AS RollupWithPercentages\n  WHERE\n    NOT Building_Name IS NULL\n) AS AllData\nORDER BY\n  SortOrder,\n  Building_Name,\n  FLOOR,\n  Room",
    "meta": {
      "features": {
        "query_table_count": 14,
        "query_column_count": 82,
        "query_nested_count": 8,
        "query_aggregate_count": 10,
        "query_sort_count": 4,
        "query_window_func_count": 0,
        "query_join_count": 8
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "2e0f709250e7",
    "question": "For each financial aid year and academic year, list the number of fiscal periods, quarters, the start term date, the end term date, and number of distinct department-level term parameters.",
    "db_id": "dw",
    "sql": [
      "WITH FinancialAidDetails AS (\n  SELECT\n    at.TERM_CODE,\n    at.TERM_DESCRIPTION,\n    at.ACADEMIC_YEAR,\n    at.FINANCIAL_AID_YEAR,\n    td.START_DATE AS Term_Start_Date,\n    td.END_DATE AS Term_End_Date,\n    tm.FISCAL_PERIOD,\n    tm.FISCAL_YEAR,\n    tq.FY_QUARTER_CODE,\n    tp.TERM_PARAMETER AS Dept_Term_Param\n  FROM ACADEMIC_TERMS AS at\n  JOIN TIME_DAY AS td\n    ON at.TERM_START_DATE = td.CALENDAR_DATE\n  JOIN TIME_MONTH AS tm\n    ON td.FISCAL_PERIOD = tm.FISCAL_PERIOD AND td.FISCAL_YEAR = tm.FISCAL_YEAR\n  JOIN TIME_QUARTER AS tq\n    ON tm.FISCAL_YEAR = tq.FISCAL_YEAR AND tm.FY_QUARTER_CODE = tq.FY_QUARTER_CODE\n  LEFT JOIN ACADEMIC_TERM_PARAMETER AS tp\n    ON at.TERM_CODE = tp.TERM_CODE\n  WHERE\n    NOT at.FINANCIAL_AID_YEAR IS NULL\n)\nSELECT\n  FINANCIAL_AID_YEAR,\n  ACADEMIC_YEAR,\n  COUNT(DISTINCT FISCAL_PERIOD) AS Total_Fiscal_Periods,\n  COUNT(DISTINCT FY_QUARTER_CODE) AS Total_Quarters,\n  MIN(Term_Start_Date) AS First_Term_Start_Date,\n  MAX(Term_End_Date) AS Last_Term_End_Date,\n  COUNT(DISTINCT Dept_Term_Param) AS Distinct_Term_Params\nFROM FinancialAidDetails\nGROUP BY\n  FINANCIAL_AID_YEAR,\n  ACADEMIC_YEAR\nORDER BY\n  FINANCIAL_AID_YEAR DESC,\n  ACADEMIC_YEAR ASC"
    ],
    "oracle_sql": "WITH FinancialAidDetails AS ( SELECT at.TERM_CODE, at.TERM_DESCRIPTION, at.ACADEMIC_YEAR, at.FINANCIAL_AID_YEAR, td.START_DATE AS Term_Start_Date, td.END_DATE AS Term_End_Date, tm.FISCAL_PERIOD, tm.FISCAL_YEAR, tq.FY_QUARTER_CODE, tp.TERM_PARAMETER AS Dept_Term_Param FROM ACADEMIC_TERMS at JOIN TIME_DAY td ON at.TERM_START_DATE = td.CALENDAR_DATE JOIN TIME_MONTH tm ON td.FISCAL_PERIOD = tm.FISCAL_PERIOD AND td.FISCAL_YEAR = tm.FISCAL_YEAR JOIN TIME_QUARTER tq ON tm.FISCAL_YEAR = tq.FISCAL_YEAR AND tm.FY_QUARTER_CODE = tq.FY_QUARTER_CODE LEFT JOIN ACADEMIC_TERM_PARAMETER tp ON at.TERM_CODE = tp.TERM_CODE WHERE at.FINANCIAL_AID_YEAR IS NOT NULL ) SELECT FINANCIAL_AID_YEAR, ACADEMIC_YEAR, COUNT(DISTINCT FISCAL_PERIOD) AS Total_Fiscal_Periods, COUNT(DISTINCT FY_QUARTER_CODE) AS Total_Quarters, MIN(Term_Start_Date) AS First_Term_Start_Date, MAX(Term_End_Date) AS Last_Term_End_Date, COUNT(DISTINCT Dept_Term_Param) AS Distinct_Term_Params FROM FinancialAidDetails GROUP BY FINANCIAL_AID_YEAR, ACADEMIC_YEAR ORDER BY FINANCIAL_AID_YEAR DESC, ACADEMIC_YEAR ASC;",
    "gold_tables": [
      "dw#sep#ACADEMIC_TERMS",
      "dw#sep#TIME_DAY",
      "dw#sep#TIME_MONTH",
      "dw#sep#TIME_QUARTER",
      "dw#sep#ACADEMIC_TERM_PARAMETER"
    ],
    "mapping": {
      "financial aid year": [
        "ACADEMIC_TERMS.FINANCIAL_AID_YEAR"
      ],
      "academic year": [
        "ACADEMIC_TERMS.ACADEMIC_YEAR"
      ],
      "fiscal periods": [
        "TIME_MONTH.FISCAL_PERIOD"
      ],
      "quarters": [
        "TIME_QUARTER.FY_QUARTER_CODE"
      ],
      "start term date": [
        "TIME_DAY.START_DATE"
      ],
      "end term date": [
        "TIME_DAY.END_DATE"
      ],
      "department-level term parameters": [
        "ACADEMIC_TERM_PARAMETER.TERM_PARAMETER"
      ]
    },
    "join_keys": [
      [
        "ACADEMIC_TERMS.TERM_START_DATE",
        "TIME_DAY.CALENDAR_DATE"
      ],
      [
        "TIME_DAY.FISCAL_PERIOD",
        "TIME_MONTH.FISCAL_PERIOD"
      ],
      [
        "TIME_QUARTER.FISCAL_YEAR",
        "TIME_MONTH.FISCAL_YEAR"
      ],
      [
        "ACADEMIC_TERM_PARAMETER.TERM_CODE",
        "ACADEMIC_TERMS.TERM_CODE"
      ]
    ],
    "original_sql": "WITH FinancialAidDetails AS (\n  SELECT\n    at.TERM_CODE,\n    at.TERM_DESCRIPTION,\n    at.ACADEMIC_YEAR,\n    at.FINANCIAL_AID_YEAR,\n    td.START_DATE AS Term_Start_Date,\n    td.END_DATE AS Term_End_Date,\n    tm.FISCAL_PERIOD,\n    tm.FISCAL_YEAR,\n    tq.FY_QUARTER_CODE,\n    tp.TERM_PARAMETER AS Dept_Term_Param\n  FROM ACADEMIC_TERMS AS at\n  JOIN TIME_DAY AS td\n    ON at.TERM_START_DATE = td.CALENDAR_DATE\n  JOIN TIME_MONTH AS tm\n    ON td.FISCAL_PERIOD = tm.FISCAL_PERIOD AND td.FISCAL_YEAR = tm.FISCAL_YEAR\n  JOIN TIME_QUARTER AS tq\n    ON tm.FISCAL_YEAR = tq.FISCAL_YEAR AND tm.FY_QUARTER_CODE = tq.FY_QUARTER_CODE\n  LEFT JOIN ACADEMIC_TERM_PARAMETER AS tp\n    ON at.TERM_CODE = tp.TERM_CODE\n  WHERE\n    NOT at.FINANCIAL_AID_YEAR IS NULL\n)\nSELECT\n  FINANCIAL_AID_YEAR,\n  ACADEMIC_YEAR,\n  COUNT(DISTINCT FISCAL_PERIOD) AS Total_Fiscal_Periods,\n  COUNT(DISTINCT FY_QUARTER_CODE) AS Total_Quarters,\n  MIN(Term_Start_Date) AS First_Term_Start_Date,\n  MAX(Term_End_Date) AS Last_Term_End_Date,\n  COUNT(DISTINCT Dept_Term_Param) AS Distinct_Term_Params\nFROM FinancialAidDetails\nGROUP BY\n  FINANCIAL_AID_YEAR,\n  ACADEMIC_YEAR\nORDER BY\n  FINANCIAL_AID_YEAR DESC,\n  ACADEMIC_YEAR ASC",
    "meta": {
      "features": {
        "query_table_count": 6,
        "query_column_count": 34,
        "query_nested_count": 1,
        "query_aggregate_count": 5,
        "query_sort_count": 2,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "ec4c501666a9",
    "question": "Group buildings by campus sectors. For each group, list the campus sector, name of the building, city and state where the building is located, total number of floors, total assignable area, total number of rooms, total number of organizations, ownership type, and a rank column indicating the order (1-indexed) of this row within each sector based on the descending order of assignable area. Include subtotals for each sector and a grand total across all sectors. The subtotal and grand total only need to computed over the total number of floors and assignable area.",
    "db_id": "dw",
    "sql": [
      "WITH BuildingArea AS (\n  SELECT\n    b.CAMPUS_SECTOR,\n    b.BUILDING_NAME_LONG AS Building_Name,\n    f.FLOOR AS Floor_Number,\n    b.ASSIGNABLE_AREA,\n    ba.CITY AS Building_City,\n    ba.STATE AS Building_State\n  FROM FCLT_BUILDING AS b\n  LEFT JOIN FCLT_FLOOR AS f\n    ON b.FCLT_BUILDING_KEY = f.FCLT_BUILDING_KEY\n  LEFT JOIN FCLT_BUILDING_ADDRESS AS ba\n    ON b.FCLT_BUILDING_KEY = ba.FCLT_BUILDING_KEY\n), TotalRooms AS (\n  SELECT\n    b.BUILDING_NAME_LONG AS Building_Name,\n    COUNT(r.FCLT_ROOM_KEY) AS Total_Rooms\n  FROM FCLT_BUILDING AS b\n  LEFT JOIN FCLT_ROOMS AS r\n    ON b.FCLT_BUILDING_KEY = r.FCLT_BUILDING_KEY\n  GROUP BY\n    b.BUILDING_NAME_LONG\n), TotalOrganizations AS (\n  SELECT\n    b.BUILDING_NAME_LONG AS Building_Name,\n    COUNT(DISTINCT o.FCLT_ORGANIZATION_KEY) AS Total_Organizations\n  FROM FCLT_BUILDING AS b\n  LEFT JOIN FCLT_ROOMS AS r\n    ON b.FCLT_BUILDING_KEY = r.FCLT_BUILDING_KEY\n  LEFT JOIN FCLT_ORGANIZATION AS o\n    ON r.FCLT_ORGANIZATION_KEY = o.FCLT_ORGANIZATION_KEY\n  GROUP BY\n    b.BUILDING_NAME_LONG\n), BuildingDetails AS (\n  SELECT\n    b.BUILDING_NAME_LONG AS Building_Name,\n    b.OWNERSHIP_TYPE AS Ownership_Type\n  FROM FCLT_BUILDING AS b\n), RollupRows AS (\n  SELECT\n    CAMPUS_SECTOR,\n    Building_Name,\n    MAX(Building_City) AS Building_City,\n    MAX(Building_State) AS Building_State,\n    COUNT(DISTINCT Floor_Number) AS Total_Floors,\n    SUM(ASSIGNABLE_AREA) AS Assignable_Area\n  FROM BuildingArea\n  GROUP BY\n    CAMPUS_SECTOR,\n    Building_Name\n    WITH ROLLUP\n), RankedRows AS (\n  SELECT\n    rr.CAMPUS_SECTOR AS Campus_Sector,\n    rr.Building_Name,\n    rr.Building_City,\n    rr.Building_State,\n    rr.Total_Floors,\n    rr.Assignable_Area,\n    tr.Total_Rooms,\n    toz.Total_Organizations,\n    bd.Ownership_Type,\n    CASE\n      WHEN NOT rr.Building_Name IS NULL\n      THEN RANK() OVER (PARTITION BY rr.CAMPUS_SECTOR ORDER BY rr.Assignable_Area DESC) - 1\n      ELSE NULL\n    END AS Adjusted_Sector_Rank\n  FROM RollupRows AS rr\n  LEFT JOIN TotalRooms AS tr\n    ON rr.Building_Name = tr.Building_Name\n  LEFT JOIN TotalOrganizations AS toz\n    ON rr.Building_Name = toz.Building_Name\n  LEFT JOIN BuildingDetails AS bd\n    ON rr.Building_Name = bd.Building_Name\n  WHERE\n    NOT rr.CAMPUS_SECTOR IS NULL\n), GrandTotal AS (\n  SELECT\n    NULL AS Campus_Sector,\n    NULL AS Building_Name,\n    NULL AS Building_City,\n    NULL AS Building_State,\n    SUM(Total_Floors) AS Total_Floors,\n    SUM(Assignable_Area) AS Assignable_Area,\n    NULL AS Total_Rooms,\n    NULL AS Total_Organizations,\n    NULL AS Ownership_Type,\n    1 AS Adjusted_Sector_Rank\n  FROM RankedRows\n)\nSELECT\n  Campus_Sector,\n  Building_Name,\n  Building_City,\n  Building_State,\n  Total_Floors,\n  FORMAT(Assignable_Area, 0) AS Assignable_Area,\n  Total_Rooms,\n  Total_Organizations,\n  Ownership_Type,\n  Adjusted_Sector_Rank\nFROM RankedRows\nUNION ALL\nSELECT\n  Campus_Sector,\n  Building_Name,\n  NULL AS Building_City,\n  NULL AS Building_State,\n  Total_Floors,\n  FORMAT(Assignable_Area, 0) AS Assignable_Area,\n  NULL AS Total_Rooms,\n  NULL AS Total_Organizations,\n  Ownership_Type,\n  Adjusted_Sector_Rank\nFROM GrandTotal\nORDER BY\n  Campus_Sector,\n  Adjusted_Sector_Rank,\n  Building_Name"
    ],
    "oracle_sql": "WITH BuildingArea AS ( SELECT b.CAMPUS_SECTOR, b.BUILDING_NAME_LONG AS Building_Name, f.FLOOR AS Floor_Number, b.ASSIGNABLE_AREA, ba.CITY AS Building_City, ba.STATE AS Building_State FROM FCLT_BUILDING b LEFT JOIN FCLT_FLOOR f ON b.FCLT_BUILDING_KEY = f.FCLT_BUILDING_KEY LEFT JOIN FCLT_BUILDING_ADDRESS ba ON b.FCLT_BUILDING_KEY = ba.FCLT_BUILDING_KEY ), TotalRooms AS ( SELECT b.BUILDING_NAME_LONG AS Building_Name, COUNT(r.FCLT_ROOM_KEY) AS Total_Rooms FROM FCLT_BUILDING b LEFT JOIN FCLT_ROOMS r ON b.FCLT_BUILDING_KEY = r.FCLT_BUILDING_KEY GROUP BY b.BUILDING_NAME_LONG ), TotalOrganizations AS ( SELECT b.BUILDING_NAME_LONG AS Building_Name, COUNT(DISTINCT o.FCLT_ORGANIZATION_KEY) AS Total_Organizations FROM FCLT_BUILDING b LEFT JOIN FCLT_ROOMS r ON b.FCLT_BUILDING_KEY = r.FCLT_BUILDING_KEY LEFT JOIN FCLT_ORGANIZATION o ON r.FCLT_ORGANIZATION_KEY = o.FCLT_ORGANIZATION_KEY GROUP BY b.BUILDING_NAME_LONG ), BuildingDetails AS ( SELECT b.BUILDING_NAME_LONG AS Building_Name, b.OWNERSHIP_TYPE AS Ownership_Type FROM FCLT_BUILDING b ), RollupRows AS ( SELECT CASE WHEN GROUPING(CAMPUS_SECTOR) = 1 THEN NULL ELSE CAMPUS_SECTOR END AS Campus_Sector, CASE WHEN GROUPING(Building_Name) = 1 THEN NULL ELSE Building_Name END AS Building_Name, CASE WHEN GROUPING(Building_Name) = 1 THEN NULL ELSE MAX(Building_City) END AS Building_City, CASE WHEN GROUPING(Building_Name) = 1 THEN NULL ELSE MAX(Building_State) END AS Building_State, COUNT(DISTINCT Floor_Number) AS Total_Floors, SUM(ASSIGNABLE_AREA) AS Assignable_Area FROM BuildingArea GROUP BY ROLLUP(CAMPUS_SECTOR, Building_Name) ), RankedRows AS ( SELECT rr.Campus_Sector, rr.Building_Name, rr.Building_City, rr.Building_State, rr.Total_Floors, rr.Assignable_Area, tr.Total_Rooms, toz.Total_Organizations, bd.Ownership_Type, CASE WHEN rr.Building_Name IS NOT NULL THEN RANK() OVER (PARTITION BY rr.Campus_Sector ORDER BY rr.Assignable_Area DESC) - 1 ELSE NULL END AS Adjusted_Sector_Rank FROM RollupRows rr LEFT JOIN TotalRooms tr ON rr.Building_Name = tr.Building_Name LEFT JOIN TotalOrganizations toz ON rr.Building_Name = toz.Building_Name LEFT JOIN BuildingDetails bd ON rr.Building_Name = bd.Building_Name WHERE rr.Campus_Sector IS NOT NULL ), GrandTotal AS ( SELECT NULL AS Campus_Sector, NULL AS Building_Name, NULL AS Building_City, NULL AS Building_State, SUM(Total_Floors) AS Total_Floors, SUM(Assignable_Area) AS Assignable_Area, NULL AS Total_Rooms, NULL AS Total_Organizations, NULL AS Ownership_Type, 1 AS Adjusted_Sector_Rank FROM RankedRows ) SELECT Campus_Sector, Building_Name, Building_City, Building_State, Total_Floors, TO_CHAR(Assignable_Area, '999,999,999') AS Assignable_Area, Total_Rooms, Total_Organizations, Ownership_Type, Adjusted_Sector_Rank FROM RankedRows UNION ALL SELECT Campus_Sector, Building_Name, NULL AS Building_City, NULL AS Building_State, Total_Floors, TO_CHAR(Assignable_Area, '999,999,999') AS Assignable_Area, NULL AS Total_Rooms, NULL AS Total_Organizations, Ownership_Type, Adjusted_Sector_Rank FROM GrandTotal ORDER BY Campus_Sector, Adjusted_Sector_Rank, Building_Name;",
    "gold_tables": [
      "dw#sep#FCLT_BUILDING",
      "dw#sep#FCLT_FLOOR",
      "dw#sep#FCLT_BUILDING_ADDRESS",
      "dw#sep#FCLT_ROOMS",
      "dw#sep#FCLT_ORGANIZATION"
    ],
    "mapping": {
      "campus sector": [
        "FCLT_BUILDING.CAMPUS_SECTOR"
      ],
      "name of the building": [
        "FCLT_BUILDING.BUILDING_NAME_LONG"
      ],
      "city": [
        "FCLT_BUILDING_ADDRESS.CITY"
      ],
      "state": [
        "FCLT_BUILDING_ADDRESS.STATE"
      ],
      "floors": [
        "FCLT_FLOOR.FLOOR"
      ],
      "area": [
        "FCLT_BUILDING.ASSIGNABLE_AREA"
      ],
      "rooms": [
        "FCLT_ROOMS.FCLT_ROOM_KEY"
      ],
      "organizations": [
        "FCLT_ORGANIZATION.FCLT_ORGANIZATION_KEY"
      ],
      "ownership type": [
        "FCLT_BUILDING.OWNERSHIP_TYPE"
      ]
    },
    "join_keys": [
      [
        "FCLT_BUILDING.FCLT_BUILDING_KEY",
        "FCLT_FLOOR.FCLT_BUILDING_KEY"
      ],
      [
        "FCLT_BUILDING.FCLT_BUILDING_KEY",
        "FCLT_BUILDING_ADDRESS.FCLT_BUILDING_KEY"
      ],
      [
        "FCLT_BUILDING.FCLT_BUILDING_KEY",
        "FCLT_ROOMS.FCLT_BUILDING_KEY"
      ],
      [
        "FCLT_ROOMS.FCLT_BUILDING_KEY",
        "FCLT_BUILDING.FCLT_BUILDING_KEY"
      ],
      [
        "FCLT_ROOMS.FCLT_ORGANIZATION_KEY",
        "FCLT_ORGANIZATION.FCLT_ORGANIZATION_KEY"
      ]
    ],
    "original_sql": "WITH BuildingArea AS (\n  SELECT\n    b.CAMPUS_SECTOR,\n    b.BUILDING_NAME_LONG AS Building_Name,\n    f.FLOOR AS Floor_Number,\n    b.ASSIGNABLE_AREA,\n    ba.CITY AS Building_City,\n    ba.STATE AS Building_State\n  FROM FCLT_BUILDING AS b\n  LEFT JOIN FCLT_FLOOR AS f\n    ON b.FCLT_BUILDING_KEY = f.FCLT_BUILDING_KEY\n  LEFT JOIN FCLT_BUILDING_ADDRESS AS ba\n    ON b.FCLT_BUILDING_KEY = ba.FCLT_BUILDING_KEY\n), TotalRooms AS (\n  SELECT\n    b.BUILDING_NAME_LONG AS Building_Name,\n    COUNT(r.FCLT_ROOM_KEY) AS Total_Rooms\n  FROM FCLT_BUILDING AS b\n  LEFT JOIN FCLT_ROOMS AS r\n    ON b.FCLT_BUILDING_KEY = r.FCLT_BUILDING_KEY\n  GROUP BY\n    b.BUILDING_NAME_LONG\n), TotalOrganizations AS (\n  SELECT\n    b.BUILDING_NAME_LONG AS Building_Name,\n    COUNT(DISTINCT o.FCLT_ORGANIZATION_KEY) AS Total_Organizations\n  FROM FCLT_BUILDING AS b\n  LEFT JOIN FCLT_ROOMS AS r\n    ON b.FCLT_BUILDING_KEY = r.FCLT_BUILDING_KEY\n  LEFT JOIN FCLT_ORGANIZATION AS o\n    ON r.FCLT_ORGANIZATION_KEY = o.FCLT_ORGANIZATION_KEY\n  GROUP BY\n    b.BUILDING_NAME_LONG\n), BuildingDetails AS (\n  SELECT\n    b.BUILDING_NAME_LONG AS Building_Name,\n    b.OWNERSHIP_TYPE AS Ownership_Type\n  FROM FCLT_BUILDING AS b\n), RollupRows AS (\n  SELECT\n    CAMPUS_SECTOR,\n    Building_Name,\n    MAX(Building_City) AS Building_City,\n    MAX(Building_State) AS Building_State,\n    COUNT(DISTINCT Floor_Number) AS Total_Floors,\n    SUM(ASSIGNABLE_AREA) AS Assignable_Area\n  FROM BuildingArea\n  GROUP BY\n    CAMPUS_SECTOR,\n    Building_Name\n    WITH ROLLUP\n), RankedRows AS (\n  SELECT\n    rr.CAMPUS_SECTOR AS Campus_Sector,\n    rr.Building_Name,\n    rr.Building_City,\n    rr.Building_State,\n    rr.Total_Floors,\n    rr.Assignable_Area,\n    tr.Total_Rooms,\n    toz.Total_Organizations,\n    bd.Ownership_Type,\n    CASE\n      WHEN NOT rr.Building_Name IS NULL\n      THEN RANK() OVER (PARTITION BY rr.CAMPUS_SECTOR ORDER BY rr.Assignable_Area DESC) - 1\n      ELSE NULL\n    END AS Adjusted_Sector_Rank\n  FROM RollupRows AS rr\n  LEFT JOIN TotalRooms AS tr\n    ON rr.Building_Name = tr.Building_Name\n  LEFT JOIN TotalOrganizations AS toz\n    ON rr.Building_Name = toz.Building_Name\n  LEFT JOIN BuildingDetails AS bd\n    ON rr.Building_Name = bd.Building_Name\n  WHERE\n    NOT rr.CAMPUS_SECTOR IS NULL\n), GrandTotal AS (\n  SELECT\n    NULL AS Campus_Sector,\n    NULL AS Building_Name,\n    NULL AS Building_City,\n    NULL AS Building_State,\n    SUM(Total_Floors) AS Total_Floors,\n    SUM(Assignable_Area) AS Assignable_Area,\n    NULL AS Total_Rooms,\n    NULL AS Total_Organizations,\n    NULL AS Ownership_Type,\n    1 AS Adjusted_Sector_Rank\n  FROM RankedRows\n)\nSELECT\n  Campus_Sector,\n  Building_Name,\n  Building_City,\n  Building_State,\n  Total_Floors,\n  FORMAT(Assignable_Area, 0) AS Assignable_Area,\n  Total_Rooms,\n  Total_Organizations,\n  Ownership_Type,\n  Adjusted_Sector_Rank\nFROM RankedRows\nUNION ALL\nSELECT\n  Campus_Sector,\n  Building_Name,\n  NULL AS Building_City,\n  NULL AS Building_State,\n  Total_Floors,\n  FORMAT(Assignable_Area, 0) AS Assignable_Area,\n  NULL AS Total_Rooms,\n  NULL AS Total_Organizations,\n  Ownership_Type,\n  Adjusted_Sector_Rank\nFROM GrandTotal\nORDER BY\n  Campus_Sector,\n  Adjusted_Sector_Rank,\n  Building_Name",
    "meta": {
      "features": {
        "query_table_count": 17,
        "query_column_count": 72,
        "query_nested_count": 8,
        "query_aggregate_count": 9,
        "query_sort_count": 4,
        "query_window_func_count": 1,
        "query_join_count": 8
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "1e927d17b174",
    "question": "For each department, list the name of the department, the title of the TIP material associated with the department, author, ISBN, library term code, and whether it is available in the library reserves ('Available in Library' if yes and 'Not Available in Library' otherwise), the total number of instructors per library book for the department, the total number of materials available in the library for the department, and the total number of available materials across all departments.",
    "db_id": "dw",
    "sql": [
      "WITH TIPMaterials AS (\n  SELECT\n    tm.TITLE AS TIP_Title,\n    tm.ISBN AS TIP_ISBN,\n    tso.OFFER_DEPT_NAME AS TIP_Department\n  FROM TIP_MATERIAL AS tm\n  JOIN TIP_DETAIL AS td\n    ON tm.TIP_MATERIAL_KEY = td.TIP_MATERIAL_KEY\n  JOIN TIP_SUBJECT_OFFERED AS tso\n    ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY\n), InstructorCounts AS (\n  SELECT\n    lrc.CATALOG_ISBN AS ISBN,\n    COUNT(DISTINCT lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY) AS Num_Instructors\n  FROM LIBRARY_RESERVE_CATALOG AS lrc\n  JOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n    ON lrc.LIBRARY_RESERVE_CATALOG_KEY = lrmd.LIBRARY_RESERVE_CATALOG_KEY\n  GROUP BY\n    lrc.CATALOG_ISBN\n), DepartmentMaterials AS (\n  SELECT\n    lso.OFFER_DEPT_NAME AS Department,\n    COUNT(DISTINCT lrc.CATALOG_ISBN) AS Total_Available_Materials_Per_Dept\n  FROM LIBRARY_RESERVE_CATALOG AS lrc\n  JOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n    ON lrc.LIBRARY_RESERVE_CATALOG_KEY = lrmd.LIBRARY_RESERVE_CATALOG_KEY\n  JOIN LIBRARY_SUBJECT_OFFERED AS lso\n    ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY\n  GROUP BY\n    lso.OFFER_DEPT_NAME\n), OverallMaterials AS (\n  SELECT\n    COUNT(DISTINCT lrc.CATALOG_ISBN) AS Total_Available_Materials_All_Departments\n  FROM LIBRARY_RESERVE_CATALOG AS lrc\n  JOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n    ON lrc.LIBRARY_RESERVE_CATALOG_KEY = lrmd.LIBRARY_RESERVE_CATALOG_KEY\n)\nSELECT DISTINCT\n  tm.TIP_Department AS Department,\n  tm.TIP_Title,\n  tm.TIP_ISBN,\n  lrmd.TERM_CODE AS Library_Term_Code,\n  CASE\n    WHEN NOT lrc.CATALOG_ISBN IS NULL\n    THEN 'Available in Library'\n    ELSE 'Not Available in Library'\n  END AS Availability_Status,\n  COALESCE(ic.Num_Instructors, 0) AS Num_Instructors,\n  COALESCE(dm.Total_Available_Materials_Per_Dept, 0) AS Total_Available_Materials_Per_Dept,\n  COALESCE(om.Total_Available_Materials_All_Departments, 0) AS Total_Available_Materials_All_Departments\nFROM TIPMaterials AS tm\nLEFT JOIN LIBRARY_RESERVE_CATALOG AS lrc\n  ON tm.TIP_ISBN = lrc.CATALOG_ISBN\nLEFT JOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n  ON lrc.LIBRARY_RESERVE_CATALOG_KEY = lrmd.LIBRARY_RESERVE_CATALOG_KEY\nLEFT JOIN InstructorCounts AS ic\n  ON tm.TIP_ISBN = ic.ISBN\nLEFT JOIN DepartmentMaterials AS dm\n  ON tm.TIP_Department = dm.Department\nLEFT JOIN OverallMaterials AS om\n  ON 1 = 1\nORDER BY\n  tm.TIP_Department,\n  tm.TIP_Title"
    ],
    "oracle_sql": "WITH TIPMaterials AS (SELECT tm.TITLE AS TIP_Title, tm.AUTHOR AS TIP_Author, tm.ISBN AS TIP_ISBN, tso.OFFER_DEPT_NAME AS TIP_Department FROM TIP_MATERIAL tm JOIN TIP_DETAIL td ON tm.TIP_MATERIAL_KEY = td.TIP_MATERIAL_KEY JOIN TIP_SUBJECT_OFFERED tso ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY), LibraryReserves AS (SELECT lrc.CATALOG_ISBN AS Library_ISBN, lso.OFFER_DEPT_NAME AS Library_Department, lrmd.TERM_CODE, lci.INSTRUCTOR_NAME AS Library_Instructor_Name FROM LIBRARY_RESERVE_CATALOG lrc JOIN LIBRARY_RESERVE_MATRL_DETAIL lrmd ON lrc.LIBRARY_RESERVE_CATALOG_KEY = lrmd.LIBRARY_RESERVE_CATALOG_KEY JOIN LIBRARY_SUBJECT_OFFERED lso ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY JOIN LIBRARY_COURSE_INSTRUCTOR lci ON lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY = lci.LIBRARY_COURSE_INSTRUCTOR_KEY), CombinedData AS (SELECT tm.TIP_Title, tm.TIP_Author, tm.TIP_ISBN, tm.TIP_Department, lr.TERM_CODE, CASE WHEN lr.Library_ISBN IS NOT NULL THEN 'Available in Library' ELSE 'Not Available in Library' END AS Availability_Status, COUNT(DISTINCT lr.Library_Instructor_Name) OVER (PARTITION BY lr.Library_Department) AS Num_Instructors_Per_Dept FROM TIPMaterials tm LEFT JOIN LibraryReserves lr ON tm.TIP_ISBN = lr.Library_ISBN) SELECT DISTINCT TIP_Department, TIP_Title, TIP_Author, TIP_ISBN, TERM_CODE, Availability_Status, Num_Instructors_Per_Dept, COUNT(CASE WHEN Availability_Status = 'Available in Library' THEN 1 END) OVER (PARTITION BY TIP_Department) AS Available_Materials_Per_Dept, COUNT(CASE WHEN Availability_Status = 'Available in Library' THEN 1 END) OVER () AS Total_Available_Materials FROM CombinedData ORDER BY TIP_Department, TIP_Title;",
    "gold_tables": [
      "dw#sep#TIP_MATERIAL",
      "dw#sep#TIP_DETAIL",
      "dw#sep#TIP_SUBJECT_OFFERED",
      "dw#sep#LIBRARY_RESERVE_CATALOG",
      "dw#sep#LIBRARY_RESERVE_MATRL_DETAIL",
      "dw#sep#LIBRARY_SUBJECT_OFFERED"
    ],
    "mapping": {
      "name of the department": [
        "TIP_SUBJECT_OFFERED.OFFER_DEPT_NAME"
      ],
      "title of the TIP material": [
        "TIP_MATERIAL.TITLE"
      ],
      "author": [
        "TIP_MATERIAL.AUTHOR"
      ],
      "ISBN": [
        "TIP_MATERIAL.ISBN"
      ],
      "library term code": [
        "LIBRARY_RESERVE_MATRL_DETAIL.TERM_CODE"
      ],
      "available in the library reserves": [
        "LIBRARY_RESERVE_CATALOG.CATALOG_ISBN"
      ],
      "instructors": [
        "LIBRARY_COURSE_INSTRUCTOR.INSTRUCTOR_NAME"
      ]
    },
    "join_keys": [
      [
        "TIP_MATERIAL.TIP_MATERIAL_KEY",
        "TIP_DETAIL.TIP_MATERIAL_KEY"
      ],
      [
        "TIP_SUBJECT_OFFERED.TIP_SUBJECT_OFFERED_KEY",
        "TIP_DETAIL.TIP_SUBJECT_OFFERED_KEY"
      ],
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_RESERVE_CATALOG_KEY",
        "LIBRARY_RESERVE_CATALOG.LIBRARY_RESERVE_CATALOG_KEY"
      ],
      [
        "LIBRARY_SUBJECT_OFFERED.LIBRARY_SUBJECT_OFFERED_KEY",
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_SUBJECT_OFFERED_KEY"
      ],
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_COURSE_INSTRUCTOR_KEY",
        "LIBRARY_COURSE_INSTRUCTOR.LIBRARY_COURSE_INSTRUCTOR_KEY"
      ]
    ],
    "original_sql": "WITH TIPMaterials AS (\n  SELECT\n    tm.TITLE AS TIP_Title,\n    tm.ISBN AS TIP_ISBN,\n    tso.OFFER_DEPT_NAME AS TIP_Department\n  FROM TIP_MATERIAL AS tm\n  JOIN TIP_DETAIL AS td\n    ON tm.TIP_MATERIAL_KEY = td.TIP_MATERIAL_KEY\n  JOIN TIP_SUBJECT_OFFERED AS tso\n    ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY\n), InstructorCounts AS (\n  SELECT\n    lrc.CATALOG_ISBN AS ISBN,\n    COUNT(DISTINCT lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY) AS Num_Instructors\n  FROM LIBRARY_RESERVE_CATALOG AS lrc\n  JOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n    ON lrc.LIBRARY_RESERVE_CATALOG_KEY = lrmd.LIBRARY_RESERVE_CATALOG_KEY\n  GROUP BY\n    lrc.CATALOG_ISBN\n), DepartmentMaterials AS (\n  SELECT\n    lso.OFFER_DEPT_NAME AS Department,\n    COUNT(DISTINCT lrc.CATALOG_ISBN) AS Total_Available_Materials_Per_Dept\n  FROM LIBRARY_RESERVE_CATALOG AS lrc\n  JOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n    ON lrc.LIBRARY_RESERVE_CATALOG_KEY = lrmd.LIBRARY_RESERVE_CATALOG_KEY\n  JOIN LIBRARY_SUBJECT_OFFERED AS lso\n    ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY\n  GROUP BY\n    lso.OFFER_DEPT_NAME\n), OverallMaterials AS (\n  SELECT\n    COUNT(DISTINCT lrc.CATALOG_ISBN) AS Total_Available_Materials_All_Departments\n  FROM LIBRARY_RESERVE_CATALOG AS lrc\n  JOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n    ON lrc.LIBRARY_RESERVE_CATALOG_KEY = lrmd.LIBRARY_RESERVE_CATALOG_KEY\n)\nSELECT DISTINCT\n  tm.TIP_Department AS Department,\n  tm.TIP_Title,\n  tm.TIP_ISBN,\n  lrmd.TERM_CODE AS Library_Term_Code,\n  CASE\n    WHEN NOT lrc.CATALOG_ISBN IS NULL\n    THEN 'Available in Library'\n    ELSE 'Not Available in Library'\n  END AS Availability_Status,\n  COALESCE(ic.Num_Instructors, 0) AS Num_Instructors,\n  COALESCE(dm.Total_Available_Materials_Per_Dept, 0) AS Total_Available_Materials_Per_Dept,\n  COALESCE(om.Total_Available_Materials_All_Departments, 0) AS Total_Available_Materials_All_Departments\nFROM TIPMaterials AS tm\nLEFT JOIN LIBRARY_RESERVE_CATALOG AS lrc\n  ON tm.TIP_ISBN = lrc.CATALOG_ISBN\nLEFT JOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n  ON lrc.LIBRARY_RESERVE_CATALOG_KEY = lrmd.LIBRARY_RESERVE_CATALOG_KEY\nLEFT JOIN InstructorCounts AS ic\n  ON tm.TIP_ISBN = ic.ISBN\nLEFT JOIN DepartmentMaterials AS dm\n  ON tm.TIP_Department = dm.Department\nLEFT JOIN OverallMaterials AS om\n  ON 1 = 1\nORDER BY\n  tm.TIP_Department,\n  tm.TIP_Title",
    "meta": {
      "features": {
        "query_table_count": 16,
        "query_column_count": 40,
        "query_nested_count": 4,
        "query_aggregate_count": 3,
        "query_sort_count": 2,
        "query_window_func_count": 0,
        "query_join_count": 11
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "e64e2208cf69",
    "question": "For each department and material status, list the name of the department, the material status, the number of TIP materials associated with this department and status, the number of library materials associated with this department and status, the total number of TIP and library materials associated with this department and status. Include a subtotal for each department and a grand total across all departments.",
    "db_id": "dw",
    "sql": [
      "WITH TIPMaterialStatuses AS (\n  SELECT\n    tso.OFFER_DEPT_NAME AS Department,\n    tms.TIP_MATERIAL_STATUS AS Status,\n    COUNT(td.TIP_MATERIAL_KEY) AS Total_TIP_Materials\n  FROM TIP_DETAIL AS td\n  JOIN TIP_SUBJECT_OFFERED AS tso\n    ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY\n  JOIN TIP_MATERIAL_STATUS AS tms\n    ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY\n  GROUP BY\n    tso.OFFER_DEPT_NAME,\n    tms.TIP_MATERIAL_STATUS\n), LibraryMaterialStatuses AS (\n  SELECT\n    lso.OFFER_DEPT_NAME AS Department,\n    lms.LIBRARY_MATERIAL_STATUS AS Status,\n    COUNT(lrmd.LIBRARY_RESERVE_CATALOG_KEY) AS Total_Library_Materials\n  FROM LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n  JOIN LIBRARY_SUBJECT_OFFERED AS lso\n    ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY\n  JOIN LIBRARY_MATERIAL_STATUS AS lms\n    ON lrmd.LIBRARY_MATERIAL_STATUS_KEY = lms.LIBRARY_MATERIAL_STATUS_KEY\n  GROUP BY\n    lso.OFFER_DEPT_NAME,\n    lms.LIBRARY_MATERIAL_STATUS\n), CombinedStatuses AS (\n  SELECT\n    Department,\n    Status,\n    Total_TIP_Materials,\n    0 AS Total_Library_Materials\n  FROM TIPMaterialStatuses\n  UNION ALL\n  SELECT\n    Department,\n    Status,\n    0 AS Total_TIP_Materials,\n    Total_Library_Materials\n  FROM LibraryMaterialStatuses\n)\nSELECT\n  Department,\n  Status,\n  SUM(Total_TIP_Materials) AS Total_TIP_Materials,\n  SUM(Total_Library_Materials) AS Total_Library_Materials,\n  SUM(Total_TIP_Materials + Total_Library_Materials) AS Total_All_Materials\nFROM CombinedStatuses\nGROUP BY\n  Department,\n  Status\n  WITH ROLLUP\nORDER BY\n  Department,\n  Status"
    ],
    "oracle_sql": "WITH TIPMaterialStatuses AS ( SELECT tso.OFFER_DEPT_NAME AS Department, tms.TIP_MATERIAL_STATUS AS Status, COUNT(td.TIP_MATERIAL_KEY) AS Total_TIP_Materials FROM TIP_DETAIL td JOIN TIP_SUBJECT_OFFERED tso ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY JOIN TIP_MATERIAL_STATUS tms ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY GROUP BY tso.OFFER_DEPT_NAME, tms.TIP_MATERIAL_STATUS ), LibraryMaterialStatuses AS ( SELECT lso.OFFER_DEPT_NAME AS Department, lms.LIBRARY_MATERIAL_STATUS AS Status, COUNT(lrmd.LIBRARY_RESERVE_CATALOG_KEY) AS Total_Library_Materials FROM LIBRARY_RESERVE_MATRL_DETAIL lrmd JOIN LIBRARY_SUBJECT_OFFERED lso ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY JOIN LIBRARY_MATERIAL_STATUS lms ON lrmd.LIBRARY_MATERIAL_STATUS_KEY = lms.LIBRARY_MATERIAL_STATUS_KEY GROUP BY lso.OFFER_DEPT_NAME, lms.LIBRARY_MATERIAL_STATUS ), CombinedStatuses AS ( SELECT COALESCE(tms.Department, lms.Department) AS Department, COALESCE(tms.Status, lms.Status) AS Status, COALESCE(tms.Total_TIP_Materials, 0) AS Total_TIP_Materials, COALESCE(lms.Total_Library_Materials, 0) AS Total_Library_Materials FROM TIPMaterialStatuses tms FULL OUTER JOIN LibraryMaterialStatuses lms ON tms.Department = lms.Department AND tms.Status = lms.Status ) SELECT Department, Status, SUM(Total_TIP_Materials) AS Total_TIP_Materials, SUM(Total_Library_Materials) AS Total_Library_Materials, SUM(Total_TIP_Materials + Total_Library_Materials) AS Total_All_Materials FROM CombinedStatuses GROUP BY ROLLUP(Department, Status) ORDER BY Department, Status;",
    "gold_tables": [
      "dw#sep#TIP_DETAIL",
      "dw#sep#TIP_SUBJECT_OFFERED",
      "dw#sep#TIP_MATERIAL_STATUS",
      "dw#sep#LIBRARY_RESERVE_MATRL_DETAIL",
      "dw#sep#LIBRARY_SUBJECT_OFFERED",
      "dw#sep#LIBRARY_MATERIAL_STATUS"
    ],
    "mapping": {
      "name of the department": [
        "TIP_SUBJECT_OFFERED.OFFER_DEPT_NAME"
      ],
      "material status": [
        "TIP_MATERIAL_STATUS.TIP_MATERIAL_STATUS"
      ],
      "TIP materials": [
        "TIP_DETAIL.TIP_MATERIAL_KEY"
      ],
      "library materials": [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_RESERVE_CATALOG_KEY"
      ]
    },
    "join_keys": [
      [
        "TIP_DETAIL.TIP_SUBJECT_OFFERED_KEY",
        "TIP_SUBJECT_OFFERED.TIP_SUBJECT_OFFERED_KEY"
      ],
      [
        "TIP_MATERIAL_STATUS.TIP_MATERIAL_STATUS_KEY",
        "TIP_DETAIL.TIP_MATERIAL_STATUS_KEY"
      ],
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_SUBJECT_OFFERED_KEY",
        "LIBRARY_SUBJECT_OFFERED.LIBRARY_SUBJECT_OFFERED_KEY"
      ],
      [
        "LIBRARY_MATERIAL_STATUS.LIBRARY_MATERIAL_STATUS_KEY",
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_MATERIAL_STATUS_KEY"
      ]
    ],
    "original_sql": "WITH TIPMaterialStatuses AS (\n  SELECT\n    tso.OFFER_DEPT_NAME AS Department,\n    tms.TIP_MATERIAL_STATUS AS Status,\n    COUNT(td.TIP_MATERIAL_KEY) AS Total_TIP_Materials\n  FROM TIP_DETAIL AS td\n  JOIN TIP_SUBJECT_OFFERED AS tso\n    ON td.TIP_SUBJECT_OFFERED_KEY = tso.TIP_SUBJECT_OFFERED_KEY\n  JOIN TIP_MATERIAL_STATUS AS tms\n    ON td.TIP_MATERIAL_STATUS_KEY = tms.TIP_MATERIAL_STATUS_KEY\n  GROUP BY\n    tso.OFFER_DEPT_NAME,\n    tms.TIP_MATERIAL_STATUS\n), LibraryMaterialStatuses AS (\n  SELECT\n    lso.OFFER_DEPT_NAME AS Department,\n    lms.LIBRARY_MATERIAL_STATUS AS Status,\n    COUNT(lrmd.LIBRARY_RESERVE_CATALOG_KEY) AS Total_Library_Materials\n  FROM LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n  JOIN LIBRARY_SUBJECT_OFFERED AS lso\n    ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY\n  JOIN LIBRARY_MATERIAL_STATUS AS lms\n    ON lrmd.LIBRARY_MATERIAL_STATUS_KEY = lms.LIBRARY_MATERIAL_STATUS_KEY\n  GROUP BY\n    lso.OFFER_DEPT_NAME,\n    lms.LIBRARY_MATERIAL_STATUS\n), CombinedStatuses AS (\n  SELECT\n    Department,\n    Status,\n    Total_TIP_Materials,\n    0 AS Total_Library_Materials\n  FROM TIPMaterialStatuses\n  UNION ALL\n  SELECT\n    Department,\n    Status,\n    0 AS Total_TIP_Materials,\n    Total_Library_Materials\n  FROM LibraryMaterialStatuses\n)\nSELECT\n  Department,\n  Status,\n  SUM(Total_TIP_Materials) AS Total_TIP_Materials,\n  SUM(Total_Library_Materials) AS Total_Library_Materials,\n  SUM(Total_TIP_Materials + Total_Library_Materials) AS Total_All_Materials\nFROM CombinedStatuses\nGROUP BY\n  Department,\n  Status\n  WITH ROLLUP\nORDER BY\n  Department,\n  Status",
    "meta": {
      "features": {
        "query_table_count": 9,
        "query_column_count": 34,
        "query_nested_count": 4,
        "query_aggregate_count": 5,
        "query_sort_count": 2,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "aa8d30fa049a",
    "question": "For each building that is not a subdivision, list the building number, full name, street address, building type, occupancy date, ownership type, and site location. You should also include three rows at the end showing the number of owned, leased, all buildings at MIT that are not subdivisions, in the format of (null, #building Buildings, null, null, null, null, null).",
    "db_id": "dw",
    "sql": [
      "SELECT\n  *\nFROM (\n  SELECT\n    FAC_BUILDING.BUILDING_NUMBER AS BUILDING,\n    FAC_BUILDING.BUILDING_NAME_LONG AS NAME,\n    BUILDINGS.BUILDING_STREET_ADDRESS AS `STREET ADDRESS`,\n    FAC_BUILDING.BUILDING_TYPE AS TYPE,\n    FAC_BUILDING.DATE_OCCUPIED,\n    FAC_BUILDING.OWNERSHIP_TYPE AS OWNERSHIP,\n    FAC_BUILDING.SITE AS SITE\n  FROM FAC_BUILDING_ADDRESS\n  JOIN FAC_BUILDING\n    ON FAC_BUILDING_ADDRESS.BUILDING_KEY = FAC_BUILDING.FAC_BUILDING_KEY\n  JOIN BUILDINGS\n    ON FAC_BUILDING_ADDRESS.BUILDING_KEY = BUILDINGS.BUILDING_KEY\n  WHERE\n    FAC_BUILDING_ADDRESS.ADDRESS_PURPOSE = 'STREET'\n    AND FAC_BUILDING.PARENT_BUILDING_NUMBER IS NULL\n) AS tbl1\nUNION ALL\nSELECT\n  NULL,\n  CONCAT(COUNT(FAC_BUILDING.BUILDING_NUMBER), ' BUILDINGS'),\n  NULL,\n  NULL,\n  NULL,\n  NULL,\n  NULL\nFROM FAC_BUILDING_ADDRESS\nJOIN FAC_BUILDING\n  ON FAC_BUILDING_ADDRESS.BUILDING_KEY = FAC_BUILDING.FAC_BUILDING_KEY\nWHERE\n  FAC_BUILDING.OWNERSHIP_TYPE = 'OWNED'\n  AND FAC_BUILDING_ADDRESS.ADDRESS_PURPOSE = 'STREET'\n  AND FAC_BUILDING.PARENT_BUILDING_NUMBER IS NULL\n  AND FAC_BUILDING.SITE = 'MIT'\nUNION ALL\nSELECT\n  NULL,\n  CONCAT(COUNT(FAC_BUILDING.BUILDING_NUMBER), ' BUILDINGS'),\n  NULL,\n  NULL,\n  NULL,\n  NULL,\n  NULL\nFROM FAC_BUILDING_ADDRESS\nJOIN FAC_BUILDING\n  ON FAC_BUILDING_ADDRESS.BUILDING_KEY = FAC_BUILDING.FAC_BUILDING_KEY\nWHERE\n  FAC_BUILDING.OWNERSHIP_TYPE = 'LEASED'\n  AND FAC_BUILDING_ADDRESS.ADDRESS_PURPOSE = 'STREET'\n  AND FAC_BUILDING.PARENT_BUILDING_NUMBER IS NULL\n  AND FAC_BUILDING.SITE = 'MIT'\nUNION ALL\nSELECT\n  NULL,\n  CONCAT(COUNT(FAC_BUILDING.BUILDING_NUMBER), ' BUILDINGS'),\n  NULL,\n  NULL,\n  NULL,\n  NULL,\n  NULL\nFROM FAC_BUILDING_ADDRESS\nJOIN FAC_BUILDING\n  ON FAC_BUILDING_ADDRESS.BUILDING_KEY = FAC_BUILDING.FAC_BUILDING_KEY\nWHERE\n  FAC_BUILDING_ADDRESS.ADDRESS_PURPOSE = 'STREET'\n  AND FAC_BUILDING.PARENT_BUILDING_NUMBER IS NULL\n  AND FAC_BUILDING.SITE = 'MIT'"
    ],
    "oracle_sql": "SELECT * FROM ( SELECT FAC_BUILDING.BUILDING_NUMBER AS BUILDING, FAC_BUILDING.BUILDING_NAME_LONG AS NAME, BUILDINGS.BUILDING_STREET_ADDRESS AS \"STREET ADDRESS\", FAC_BUILDING.BUILDING_TYPE AS TYPE, FAC_BUILDING.DATE_OCCUPIED, FAC_BUILDING.OWNERSHIP_TYPE AS OWNERSHIP, FAC_BUILDING.SITE AS SITE FROM FAC_BUILDING_ADDRESS JOIN FAC_BUILDING on FAC_BUILDING_ADDRESS.BUILDING_KEY = FAC_BUILDING.FAC_BUILDING_KEY JOIN BUILDINGS on FAC_BUILDING_ADDRESS.BUILDING_KEY = BUILDINGS.BUILDING_KEY WHERE FAC_BUILDING_ADDRESS.ADDRESS_PURPOSE = 'STREET' AND FAC_BUILDING.PARENT_BUILDING_NUMBER IS NULL ) UNION ALL SELECT null, TO_CHAR(COUNT(FAC_BUILDING.BUILDING_NUMBER)) || ' Buildings', null, null, null, null, null FROM FAC_BUILDING_ADDRESS JOIN FAC_BUILDING on FAC_BUILDING_ADDRESS.BUILDING_KEY = FAC_BUILDING.FAC_BUILDING_KEY WHERE FAC_BUILDING.OWNERSHIP_TYPE = 'OWNED' AND FAC_BUILDING_ADDRESS.ADDRESS_PURPOSE = 'STREET' AND FAC_BUILDING.PARENT_BUILDING_NUMBER IS NULL AND FAC_BUILDING.SITE = 'MIT' UNION ALL SELECT null, TO_CHAR(COUNT(FAC_BUILDING.BUILDING_NUMBER)) || ' Buildings', null, null, null, null, null FROM FAC_BUILDING_ADDRESS JOIN FAC_BUILDING ON FAC_BUILDING_ADDRESS.BUILDING_KEY = FAC_BUILDING.FAC_BUILDING_KEY WHERE FAC_BUILDING.OWNERSHIP_TYPE = 'LEASED' AND FAC_BUILDING_ADDRESS.ADDRESS_PURPOSE = 'STREET' AND FAC_BUILDING.PARENT_BUILDING_NUMBER IS NULL AND FAC_BUILDING.SITE = 'MIT' UNION ALL SELECT null, TO_CHAR(COUNT(FAC_BUILDING.BUILDING_NUMBER)) || ' Buildings', null, null, null, null, null FROM FAC_BUILDING_ADDRESS JOIN FAC_BUILDING ON FAC_BUILDING_ADDRESS.BUILDING_KEY = FAC_BUILDING.FAC_BUILDING_KEY WHERE FAC_BUILDING_ADDRESS.ADDRESS_PURPOSE = 'STREET' AND FAC_BUILDING.PARENT_BUILDING_NUMBER IS NULL AND FAC_BUILDING.SITE = 'MIT';",
    "gold_tables": [
      "dw#sep#FAC_BUILDING_ADDRESS",
      "dw#sep#FAC_BUILDING",
      "dw#sep#BUILDINGS"
    ],
    "mapping": {
      "subdivision": [
        "FAC_BUILDING.PARENT_BUILDING_NUMBER"
      ],
      "building number": [
        "FAC_BUILDING.BUILDING_NUMBER"
      ],
      "full name": [
        "FAC_BUILDING.BUILDING_NAME_LONG"
      ],
      "street address": [
        "BUILDINGS.BUILDING_STREET_ADDRESS",
        "FAC_BUILDING_ADDRESS.ADDRESS_PURPOSE"
      ],
      "building type": [
        "FAC_BUILDING.BUILDING_TYPE"
      ],
      "occupancy date": [
        "FAC_BUILDING.DATE_OCCUPIED"
      ],
      "ownership type": [
        "FAC_BUILDING.OWNERSHIP_TYPE"
      ],
      "site location": [
        "FAC_BUILDING.SITE"
      ]
    },
    "join_keys": [
      [
        "FAC_BUILDING_ADDRESS.BUILDING_KEY",
        "FAC_BUILDING.FAC_BUILDING_KEY"
      ],
      [
        "BUILDINGS.BUILDING_KEY",
        "FAC_BUILDING_ADDRESS.BUILDING_KEY"
      ],
      [
        "FAC_BUILDING.FAC_BUILDING_KEY",
        "FAC_BUILDING_ADDRESS.BUILDING_KEY"
      ],
      [
        "FAC_BUILDING.FAC_BUILDING_KEY",
        "FAC_BUILDING_ADDRESS.BUILDING_KEY"
      ],
      [
        "FAC_BUILDING.FAC_BUILDING_KEY",
        "FAC_BUILDING_ADDRESS.BUILDING_KEY"
      ]
    ],
    "original_sql": "SELECT\n  *\nFROM (\n  SELECT\n    FAC_BUILDING.BUILDING_NUMBER AS BUILDING,\n    FAC_BUILDING.BUILDING_NAME_LONG AS NAME,\n    BUILDINGS.BUILDING_STREET_ADDRESS AS `STREET ADDRESS`,\n    FAC_BUILDING.BUILDING_TYPE AS TYPE,\n    FAC_BUILDING.DATE_OCCUPIED,\n    FAC_BUILDING.OWNERSHIP_TYPE AS OWNERSHIP,\n    FAC_BUILDING.SITE AS SITE\n  FROM FAC_BUILDING_ADDRESS\n  JOIN FAC_BUILDING\n    ON FAC_BUILDING_ADDRESS.BUILDING_KEY = FAC_BUILDING.FAC_BUILDING_KEY\n  JOIN BUILDINGS\n    ON FAC_BUILDING_ADDRESS.BUILDING_KEY = BUILDINGS.BUILDING_KEY\n  WHERE\n    FAC_BUILDING_ADDRESS.ADDRESS_PURPOSE = 'STREET'\n    AND FAC_BUILDING.PARENT_BUILDING_NUMBER IS NULL\n) AS tbl1\nUNION ALL\nSELECT\n  NULL,\n  CONCAT(COUNT(FAC_BUILDING.BUILDING_NUMBER), ' Buildings'),\n  NULL,\n  NULL,\n  NULL,\n  NULL,\n  NULL\nFROM FAC_BUILDING_ADDRESS\nJOIN FAC_BUILDING\n  ON FAC_BUILDING_ADDRESS.BUILDING_KEY = FAC_BUILDING.FAC_BUILDING_KEY\nWHERE\n  FAC_BUILDING.OWNERSHIP_TYPE = 'OWNED'\n  AND FAC_BUILDING_ADDRESS.ADDRESS_PURPOSE = 'STREET'\n  AND FAC_BUILDING.PARENT_BUILDING_NUMBER IS NULL\n  AND FAC_BUILDING.SITE = 'MIT'\nUNION ALL\nSELECT\n  NULL,\n  CONCAT(COUNT(FAC_BUILDING.BUILDING_NUMBER), ' Buildings'),\n  NULL,\n  NULL,\n  NULL,\n  NULL,\n  NULL\nFROM FAC_BUILDING_ADDRESS\nJOIN FAC_BUILDING\n  ON FAC_BUILDING_ADDRESS.BUILDING_KEY = FAC_BUILDING.FAC_BUILDING_KEY\nWHERE\n  FAC_BUILDING.OWNERSHIP_TYPE = 'LEASED'\n  AND FAC_BUILDING_ADDRESS.ADDRESS_PURPOSE = 'STREET'\n  AND FAC_BUILDING.PARENT_BUILDING_NUMBER IS NULL\n  AND FAC_BUILDING.SITE = 'MIT'\nUNION ALL\nSELECT\n  NULL,\n  CONCAT(COUNT(FAC_BUILDING.BUILDING_NUMBER), ' Buildings'),\n  NULL,\n  NULL,\n  NULL,\n  NULL,\n  NULL\nFROM FAC_BUILDING_ADDRESS\nJOIN FAC_BUILDING\n  ON FAC_BUILDING_ADDRESS.BUILDING_KEY = FAC_BUILDING.FAC_BUILDING_KEY\nWHERE\n  FAC_BUILDING_ADDRESS.ADDRESS_PURPOSE = 'STREET'\n  AND FAC_BUILDING.PARENT_BUILDING_NUMBER IS NULL\n  AND FAC_BUILDING.SITE = 'MIT'",
    "meta": {
      "features": {
        "query_table_count": 9,
        "query_column_count": 33,
        "query_nested_count": 4,
        "query_aggregate_count": 3,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 5
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "cc2271cde280",
    "question": "For each owned building that is not a subdivision, list the construction start year, the building number, and the year of initial occupancy. Display the construction start year only if it differs from the previous row. If the year of initial occupancy or construction start year is unknown, display 'UNKNOWN'. You should also include a row at the end showing the total number of owned buildings that are not subdivisions, in the format of (null, #building Buildings, null).",
    "db_id": "dw",
    "sql": [
      "SELECT\n  CASE\n    WHEN LAG(year_construct_began) OVER (ORDER BY year_construct_began, building_sort, BUILDING_NUMBER) = year_construct_began\n    THEN NULL\n    WHEN BUILDING_NUMBER IS NULL\n    THEN NULL\n    ELSE year_construct_began\n  END AS `YEAR CONSTRUCT BEGAN`,\n  BUILDING_NUMBER AS BUILDING,\n  year_occupied AS `YEAR INITIALLY OCCUPIED`\nFROM (\n  SELECT\n    year_construct_began,\n    temp2.BUILDING_NUMBER,\n    CASE\n      WHEN NOT FAC_BUILDING.BUILDING_NUMBER IS NULL\n      THEN COALESCE(DATE_FORMAT(STR_TO_DATE(FAC_BUILDING.DATE_OCCUPIED, '%m/%d/%Y'), '%Y'), 'UNKNOWN')\n      ELSE NULL\n    END AS year_occupied,\n    CASE WHEN NOT FAC_BUILDING.BUILDING_NUMBER IS NULL THEN building_sort ELSE NULL END AS building_sort\n  FROM (\n    SELECT\n      CASE\n        WHEN NOT BUILDING_NUMBER IS NULL\n        THEN year_construct_began\n        ELSE CONCAT(year_construct_began, '*')\n      END AS year_construct_began,\n      BUILDING_NUMBER\n    FROM (\n      SELECT\n        COALESCE(DATE_FORMAT(STR_TO_DATE(DATE_BUILT, '%m/%d/%Y'), '%Y'), 'UNKNOWN') AS year_construct_began,\n        BUILDING_NUMBER\n      FROM FAC_BUILDING\n      WHERE\n        ownership_type = 'OWNED' AND PARENT_BUILDING_NUMBER IS NULL\n    ) AS temp1\n    GROUP BY\n      year_construct_began,\n      BUILDING_NUMBER\n    HAVING\n      NOT year_construct_began IS NULL\n  ) AS temp2\n  LEFT JOIN FAC_BUILDING\n    ON FAC_BUILDING.BUILDING_NUMBER = temp2.BUILDING_NUMBER\n) AS temp3\nUNION ALL\nSELECT\n  NULL,\n  CONCAT(COUNT(FAC_BUILDING.BUILDING_NUMBER), ' BUILDINGS'),\n  NULL\nFROM FAC_BUILDING\nWHERE\n  ownership_type = 'OWNED' AND PARENT_BUILDING_NUMBER IS NULL"
    ],
    "oracle_sql": "SELECT CASE WHEN LAG(year_construct_began) OVER (ORDER BY year_construct_began, building_sort, BUILDING_NUMBER) = year_construct_began THEN NULL WHEN BUILDING_NUMBER IS NULL THEN NULL ELSE year_construct_began END AS \"YEAR CONSTRUCT BEGAN\", BUILDING_NUMBER AS BUILDING, year_occupied AS \"YEAR INITIALLY OCCUPIED\" FROM ( SELECT year_construct_began, temp2.BUILDING_NUMBER, CASE WHEN FAC_BUILDING.BUILDING_NUMBER IS NOT NULL THEN NVL(TO_CHAR(TO_DATE(FAC_BUILDING.DATE_OCCUPIED, 'MM/DD/YYYY'), 'YYYY'), 'UNKNOWN') ELSE NULL END AS year_occupied, CASE WHEN FAC_BUILDING.BUILDING_NUMBER IS NOT NULL THEN building_sort ELSE NULL END AS building_sort FROM ( SELECT CASE WHEN BUILDING_NUMBER IS NOT NULL THEN year_construct_began ELSE year_construct_began || '*' END AS year_construct_began, BUILDING_NUMBER FROM ( SELECT NVL(TO_CHAR(TO_DATE(DATE_BUILT, 'MM/DD/YYYY'), 'YYYY'), 'UNKNOWN') AS year_construct_began, BUILDING_NUMBER FROM FAC_BUILDING WHERE ownership_type = 'OWNED' AND PARENT_BUILDING_NUMBER IS NULL ) temp1 GROUP BY year_construct_began, BUILDING_NUMBER HAVING year_construct_began IS NOT NULL ) temp2 LEFT JOIN FAC_BUILDING ON FAC_BUILDING.BUILDING_NUMBER = temp2.BUILDING_NUMBER ) temp3 UNION ALL SELECT NULL, TO_CHAR(COUNT(FAC_BUILDING.BUILDING_NUMBER)) || ' Buildings', NULL FROM FAC_BUILDING WHERE ownership_type = 'OWNED' AND PARENT_BUILDING_NUMBER IS NULL;",
    "gold_tables": [
      "dw#sep#FAC_BUILDING"
    ],
    "mapping": {
      "subdivision": [
        "FAC_BUILDING.PARENT_BUILDING_NUMBER"
      ],
      "construction start year": [
        "FAC_BUILDING.DATE_BUILT"
      ],
      "building number": [
        "FAC_BUILDING.PARENT_BUILDING_NUMBER"
      ],
      "year of initial occupancy": [
        "FAC_BUILDING.DATE_OCCUPIED"
      ]
    },
    "join_keys": [],
    "original_sql": "SELECT\n  CASE\n    WHEN LAG(year_construct_began) OVER (ORDER BY year_construct_began, building_sort, BUILDING_NUMBER) = year_construct_began\n    THEN NULL\n    WHEN BUILDING_NUMBER IS NULL\n    THEN NULL\n    ELSE year_construct_began\n  END AS `YEAR CONSTRUCT BEGAN`,\n  BUILDING_NUMBER AS BUILDING,\n  year_occupied AS `YEAR INITIALLY OCCUPIED`\nFROM (\n  SELECT\n    year_construct_began,\n    temp2.BUILDING_NUMBER,\n    CASE\n      WHEN NOT FAC_BUILDING.BUILDING_NUMBER IS NULL\n      THEN COALESCE(DATE_FORMAT(STR_TO_DATE(FAC_BUILDING.DATE_OCCUPIED, '%m/%d/%Y'), '%Y'), 'UNKNOWN')\n      ELSE NULL\n    END AS year_occupied,\n    CASE WHEN NOT FAC_BUILDING.BUILDING_NUMBER IS NULL THEN building_sort ELSE NULL END AS building_sort\n  FROM (\n    SELECT\n      CASE\n        WHEN NOT BUILDING_NUMBER IS NULL\n        THEN year_construct_began\n        ELSE CONCAT(year_construct_began, '*')\n      END AS year_construct_began,\n      BUILDING_NUMBER\n    FROM (\n      SELECT\n        COALESCE(DATE_FORMAT(STR_TO_DATE(DATE_BUILT, '%m/%d/%Y'), '%Y'), 'UNKNOWN') AS year_construct_began,\n        BUILDING_NUMBER\n      FROM FAC_BUILDING\n      WHERE\n        ownership_type = 'OWNED' AND PARENT_BUILDING_NUMBER IS NULL\n    ) AS temp1\n    GROUP BY\n      year_construct_began,\n      BUILDING_NUMBER\n    HAVING\n      NOT year_construct_began IS NULL\n  ) AS temp2\n  LEFT JOIN FAC_BUILDING\n    ON FAC_BUILDING.BUILDING_NUMBER = temp2.BUILDING_NUMBER\n) AS temp3\nUNION ALL\nSELECT\n  NULL,\n  CONCAT(COUNT(FAC_BUILDING.BUILDING_NUMBER), ' Buildings'),\n  NULL\nFROM FAC_BUILDING\nWHERE\n  ownership_type = 'OWNED' AND PARENT_BUILDING_NUMBER IS NULL",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 31,
        "query_nested_count": 4,
        "query_aggregate_count": 2,
        "query_sort_count": 3,
        "query_window_func_count": 1,
        "query_join_count": 1
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "6b668d689106",
    "question": "Group all buildings at MIT into either owned or leased. For each group, state the ownership type, usage type, number of buildings, gross square footage, number of rooms, and the number of associated organizations. Display the ownership type only if it differs from the previous row. Include subtotals for each group and a grand total across all groups. The subtotal and grand total rows should not include ownership type and usage type. Footage should be rounded to integers and formatted using commas as thousands separators.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  CASE\n    WHEN LAG(OWNERSHIP) OVER (ORDER BY OWNERSHIP_TYPE DESC, TYPE) = OWNERSHIP\n    THEN NULL\n    ELSE OWNERSHIP\n  END AS OWNERSHIP,\n  TYPE,\n  BUILDINGS,\n  GROSS_SQFT,\n  ROOM_COUNT,\n  ORG_COUNT\nFROM (\n  SELECT\n    CASE\n      WHEN FLOOR.OWNERSHIP_TYPE IS NULL OR FLOOR.BUILDING_USE IS NULL\n      THEN 'UNKNOWN'\n      ELSE CONCAT(FLOOR.OWNERSHIP_TYPE, '2')\n    END AS OWNERSHIP_TYPE,\n    CASE\n      WHEN FLOOR.BUILDING_USE IS NULL OR FLOOR.OWNERSHIP_TYPE IS NULL\n      THEN NULL\n      ELSE FLOOR.OWNERSHIP_TYPE\n    END AS OWNERSHIP,\n    FLOOR.BUILDING_USE AS TYPE,\n    COUNT(DISTINCT COALESCE(FLOOR.PARENT_BUILDING_NUMBER, FLOOR.FCLT_BUILDING_KEY)) AS BUILDINGS,\n    SUM(FLOOR.EXT_GROSS_AREA) AS GROSS_SQFT,\n    COUNT(DISTINCT rm.FCLT_ROOM_KEY) AS ROOM_COUNT,\n    COUNT(DISTINCT org.FCLT_ORGANIZATION_KEY) AS ORG_COUNT\n  FROM FCLT_BUILDING_HIST AS FLOOR\n  LEFT JOIN FCLT_ROOMS AS rm\n    ON FLOOR.FCLT_BUILDING_KEY = rm.FCLT_BUILDING_KEY\n  LEFT JOIN FCLT_ORGANIZATION AS org\n    ON rm.FCLT_ORGANIZATION_KEY = org.FCLT_ORGANIZATION_KEY\n  WHERE\n    FLOOR.SITE = 'MIT'\n  GROUP BY\n    FLOOR.OWNERSHIP_TYPE,\n    FLOOR.BUILDING_USE\n  ORDER BY\n    FLOOR.OWNERSHIP_TYPE DESC,\n    FLOOR.BUILDING_USE\n) AS tbltmp"
    ],
    "oracle_sql": "SELECT CASE WHEN LAG(OWNERSHIP) OVER (ORDER BY OWNERSHIP_TYPE DESC, TYPE) = OWNERSHIP THEN NULL ELSE OWNERSHIP END AS OWNERSHIP, TYPE, BUILDINGS, GROSS_SQFT, ROOM_COUNT, ORG_COUNT FROM ( SELECT CASE WHEN GROUPING(FLOOR.OWNERSHIP_TYPE) = 1 AND GROUPING(FLOOR.BUILDING_USE) = 0 THEN FLOOR.OWNERSHIP_TYPE || '1' ELSE FLOOR.OWNERSHIP_TYPE || '2' END AS OWNERSHIP_TYPE, CASE WHEN GROUPING(FLOOR.BUILDING_USE) = 1 AND GROUPING(FLOOR.OWNERSHIP_TYPE) = 0 THEN null WHEN GROUPING(FLOOR.BUILDING_USE) = 1 AND GROUPING(FLOOR.OWNERSHIP_TYPE) = 1 THEN null ELSE FLOOR.OWNERSHIP_TYPE END AS OWNERSHIP, FLOOR.BUILDING_USE AS TYPE, COUNT(DISTINCT NVL(FLOOR.PARENT_BUILDING_NUMBER, FLOOR.FCLT_BUILDING_KEY)) AS BUILDINGS, TO_CHAR(SUM(FLOOR.EXT_GROSS_AREA), '999,999,999,999') AS GROSS_SQFT, COUNT(DISTINCT rm.FCLT_ROOM_KEY) AS ROOM_COUNT, COUNT(DISTINCT org.FCLT_ORGANIZATION_KEY) AS ORG_COUNT FROM FCLT_BUILDING_HIST FLOOR LEFT JOIN FCLT_ROOMS rm ON FLOOR.FCLT_BUILDING_KEY = rm.FCLT_BUILDING_KEY LEFT JOIN FCLT_ORGANIZATION org ON rm.FCLT_ORGANIZATION_KEY = org.FCLT_ORGANIZATION_KEY WHERE FLOOR.SITE = 'MIT' GROUP BY ROLLUP(FLOOR.OWNERSHIP_TYPE, FLOOR.BUILDING_USE) ORDER BY FLOOR.OWNERSHIP_TYPE DESC, FLOOR.BUILDING_USE ) tbltmp;",
    "gold_tables": [
      "dw#sep#FCLT_BUILDING_HIST",
      "dw#sep#FCLT_ROOMS",
      "dw#sep#FCLT_ORGANIZATION"
    ],
    "mapping": {
      "buildings at MIT": [
        "FCLT_BUILDING_HIST.SITE"
      ],
      "ownership type": [
        "FCLT_BUILDING_HIST.OWNERSHIP_TYPE"
      ],
      "usage type": [
        "FCLT_BUILDING_HIST.BUILDING_USE"
      ],
      "buildings": [
        "FCLT_BUILDING_HIST.PARENT_BUILDING_NUMBER",
        "FCLT_BUILDING_HIST.FCLT_BUILDING_KEY"
      ],
      "gross square footage": [
        "FCLT_BUILDING_HIST.EXT_GROSS_AREA"
      ],
      "rooms": [
        "FCLT_ROOMS.FCLT_ROOM_KEY"
      ],
      "organizations": [
        "FCLT_ORGANIZATION.FCLT_ORGANIZATION_KEY"
      ]
    },
    "join_keys": [
      [
        "FCLT_ROOMS.FCLT_BUILDING_KEY",
        "FCLT_BUILDING_HIST.FCLT_BUILDING_KEY"
      ],
      [
        "FCLT_ORGANIZATION.FCLT_ORGANIZATION_KEY",
        "FCLT_ROOMS.FCLT_ORGANIZATION_KEY"
      ]
    ],
    "original_sql": "SELECT\n  CASE\n    WHEN LAG(OWNERSHIP) OVER (ORDER BY OWNERSHIP_TYPE DESC, TYPE) = OWNERSHIP\n    THEN NULL\n    ELSE OWNERSHIP\n  END AS OWNERSHIP,\n  TYPE,\n  BUILDINGS,\n  GROSS_SQFT,\n  ROOM_COUNT,\n  ORG_COUNT\nFROM (\n  SELECT\n    CASE\n      WHEN FLOOR.OWNERSHIP_TYPE IS NULL OR FLOOR.BUILDING_USE IS NULL\n      THEN 'UNKNOWN'\n      ELSE CONCAT(FLOOR.OWNERSHIP_TYPE, '2')\n    END AS OWNERSHIP_TYPE,\n    CASE\n      WHEN FLOOR.BUILDING_USE IS NULL OR FLOOR.OWNERSHIP_TYPE IS NULL\n      THEN NULL\n      ELSE FLOOR.OWNERSHIP_TYPE\n    END AS OWNERSHIP,\n    FLOOR.BUILDING_USE AS TYPE,\n    COUNT(DISTINCT COALESCE(FLOOR.PARENT_BUILDING_NUMBER, FLOOR.FCLT_BUILDING_KEY)) AS BUILDINGS,\n    SUM(FLOOR.EXT_GROSS_AREA) AS GROSS_SQFT,\n    COUNT(DISTINCT rm.FCLT_ROOM_KEY) AS ROOM_COUNT,\n    COUNT(DISTINCT org.FCLT_ORGANIZATION_KEY) AS ORG_COUNT\n  FROM FCLT_BUILDING_HIST AS FLOOR\n  LEFT JOIN FCLT_ROOMS AS rm\n    ON FLOOR.FCLT_BUILDING_KEY = rm.FCLT_BUILDING_KEY\n  LEFT JOIN FCLT_ORGANIZATION AS org\n    ON rm.FCLT_ORGANIZATION_KEY = org.FCLT_ORGANIZATION_KEY\n  WHERE\n    FLOOR.SITE = 'MIT'\n  GROUP BY\n    FLOOR.OWNERSHIP_TYPE,\n    FLOOR.BUILDING_USE\n  ORDER BY\n    FLOOR.OWNERSHIP_TYPE DESC,\n    FLOOR.BUILDING_USE\n) AS tbltmp",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 31,
        "query_nested_count": 1,
        "query_aggregate_count": 5,
        "query_sort_count": 4,
        "query_window_func_count": 1,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "5b44eb1e8757",
    "question": "For each building use, list the type, the number of distinct buildings (excluding subdivisions) of this use, the total gross square footage of these buildings, and the number of unique organizations associated with the rooms in these buildings. If the building is used as a residence, display the usage type as \"RESIDENTIAL.\" You should also include a row at the end showing the total number of buildings, the gross square footage, and the number of organizations across all types of building use. All numerical values should be rounded to integers and formatted using commas as thousands separators.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  *\nFROM (\n  SELECT\n    CASE\n      WHEN FLOOR.BUILDING_USE = 'RESIDENT'\n      THEN 'RESIDENTIAL'\n      ELSE FLOOR.BUILDING_USE\n    END AS TYPE,\n    COUNT(DISTINCT COALESCE(FLOOR.PARENT_BUILDING_NUMBER, FLOOR.FCLT_BUILDING_KEY)) AS BUILDINGS,\n    FORMAT(SUM(FLOOR.EXT_GROSS_AREA), 0) AS GROSS_SQFT,\n    COUNT(DISTINCT org.FCLT_ORGANIZATION_KEY) AS NUM_ORGANIZATIONS\n  FROM FCLT_BUILDING AS FLOOR\n  LEFT JOIN FCLT_ROOMS AS rm\n    ON FLOOR.FCLT_BUILDING_KEY = rm.FCLT_BUILDING_KEY\n  LEFT JOIN FCLT_ORGANIZATION AS org\n    ON rm.FCLT_ORGANIZATION_KEY = org.FCLT_ORGANIZATION_KEY\n  WHERE\n    NOT FLOOR.BUILDING_USE IS NULL\n  GROUP BY\n    FLOOR.BUILDING_USE\n) AS derived_table\nUNION ALL\nSELECT\n  NULL AS TYPE,\n  COUNT(DISTINCT COALESCE(FLOOR.PARENT_BUILDING_NUMBER, FLOOR.FCLT_BUILDING_KEY)) AS BUILDINGS,\n  FORMAT(SUM(FLOOR.EXT_GROSS_AREA), 0) AS GROSS_SQFT,\n  COUNT(DISTINCT org.FCLT_ORGANIZATION_KEY) AS NUM_ORGANIZATIONS\nFROM FCLT_BUILDING AS FLOOR\nLEFT JOIN FCLT_ROOMS AS rm\n  ON FLOOR.FCLT_BUILDING_KEY = rm.FCLT_BUILDING_KEY\nLEFT JOIN FCLT_ORGANIZATION AS org\n  ON rm.FCLT_ORGANIZATION_KEY = org.FCLT_ORGANIZATION_KEY"
    ],
    "oracle_sql": "SELECT * FROM ( SELECT CASE WHEN FLOOR.BUILDING_USE = 'RESIDENT' THEN 'RESIDENTIAL' ELSE FLOOR.BUILDING_USE END AS TYPE, COUNT(DISTINCT NVL(FLOOR.PARENT_BUILDING_NUMBER, FLOOR.FCLT_BUILDING_KEY)) AS BUILDINGS, TO_CHAR(SUM(FLOOR.EXT_GROSS_AREA), '999,999,999,999,999') AS GROSS_SQFT, COUNT(DISTINCT org.FCLT_ORGANIZATION_KEY) AS NUM_ORGANIZATIONS FROM FCLT_BUILDING FLOOR LEFT JOIN FCLT_ROOMS rm ON FLOOR.FCLT_BUILDING_KEY = rm.FCLT_BUILDING_KEY LEFT JOIN FCLT_ORGANIZATION org ON rm.FCLT_ORGANIZATION_KEY = org.FCLT_ORGANIZATION_KEY WHERE FLOOR.BUILDING_USE IS NOT NULL GROUP BY FLOOR.BUILDING_USE ) UNION ALL SELECT NULL AS TYPE, COUNT(DISTINCT NVL(FLOOR.PARENT_BUILDING_NUMBER, FLOOR.FCLT_BUILDING_KEY)) AS BUILDINGS, TO_CHAR(SUM(FLOOR.EXT_GROSS_AREA), '999,999,999,999,999') AS GROSS_SQFT, COUNT(DISTINCT org.FCLT_ORGANIZATION_KEY) AS NUM_ORGANIZATIONS FROM FCLT_BUILDING FLOOR LEFT JOIN FCLT_ROOMS rm ON FLOOR.FCLT_BUILDING_KEY = rm.FCLT_BUILDING_KEY LEFT JOIN FCLT_ORGANIZATION org ON rm.FCLT_ORGANIZATION_KEY = org.FCLT_ORGANIZATION_KEY;",
    "gold_tables": [
      "dw#sep#FCLT_BUILDING",
      "dw#sep#FCLT_ROOMS",
      "dw#sep#FCLT_ORGANIZATION"
    ],
    "mapping": {
      "building use": [
        "FCLT_BUILDING.BUILDING_USE"
      ],
      "buildings": [
        "FCLT_BUILDING.PARENT_BUILDING_NUMBER",
        "FCLT_BUILDING.FCLT_BUILDING_KEY"
      ],
      "gross square footage": [
        "FCLT_BUILDING.EXT_GROSS_AREA"
      ],
      "organizations": [
        "FCLT_ORGANIZATION.FCLT_ORGANIZATION_KEY"
      ]
    },
    "join_keys": [
      [
        "FCLT_ROOMS.FCLT_BUILDING_KEY",
        "FCLT_BUILDING.FCLT_BUILDING_KEY"
      ],
      [
        "FCLT_ROOMS.FCLT_ORGANIZATION_KEY",
        "FCLT_ORGANIZATION.FCLT_ORGANIZATION_KEY"
      ],
      [
        "FCLT_ROOMS.FCLT_BUILDING_KEY",
        "FCLT_BUILDING.FCLT_BUILDING_KEY"
      ],
      [
        "FCLT_ROOMS.FCLT_ORGANIZATION_KEY",
        "FCLT_ORGANIZATION.FCLT_ORGANIZATION_KEY"
      ]
    ],
    "original_sql": "SELECT\n  *\nFROM (\n  SELECT\n    CASE\n      WHEN FLOOR.BUILDING_USE = 'RESIDENT'\n      THEN 'RESIDENTIAL'\n      ELSE FLOOR.BUILDING_USE\n    END AS TYPE,\n    COUNT(DISTINCT COALESCE(FLOOR.PARENT_BUILDING_NUMBER, FLOOR.FCLT_BUILDING_KEY)) AS BUILDINGS,\n    FORMAT(SUM(FLOOR.EXT_GROSS_AREA), 0) AS GROSS_SQFT,\n    COUNT(DISTINCT org.FCLT_ORGANIZATION_KEY) AS NUM_ORGANIZATIONS\n  FROM FCLT_BUILDING AS FLOOR\n  LEFT JOIN FCLT_ROOMS AS rm\n    ON FLOOR.FCLT_BUILDING_KEY = rm.FCLT_BUILDING_KEY\n  LEFT JOIN FCLT_ORGANIZATION AS org\n    ON rm.FCLT_ORGANIZATION_KEY = org.FCLT_ORGANIZATION_KEY\n  WHERE\n    NOT FLOOR.BUILDING_USE IS NULL\n  GROUP BY\n    FLOOR.BUILDING_USE\n) AS derived_table\nUNION ALL\nSELECT\n  NULL AS TYPE,\n  COUNT(DISTINCT COALESCE(FLOOR.PARENT_BUILDING_NUMBER, FLOOR.FCLT_BUILDING_KEY)) AS BUILDINGS,\n  FORMAT(SUM(FLOOR.EXT_GROSS_AREA), 0) AS GROSS_SQFT,\n  COUNT(DISTINCT org.FCLT_ORGANIZATION_KEY) AS NUM_ORGANIZATIONS\nFROM FCLT_BUILDING AS FLOOR\nLEFT JOIN FCLT_ROOMS AS rm\n  ON FLOOR.FCLT_BUILDING_KEY = rm.FCLT_BUILDING_KEY\nLEFT JOIN FCLT_ORGANIZATION AS org\n  ON rm.FCLT_ORGANIZATION_KEY = org.FCLT_ORGANIZATION_KEY",
    "meta": {
      "features": {
        "query_table_count": 6,
        "query_column_count": 20,
        "query_nested_count": 2,
        "query_aggregate_count": 6,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "04d9e2cc69f0",
    "question": "For each organization except Cambridge-MIT Institute, list its ID, number, level, formatted name according to level (if level is 2, there should be 1 space before the name, if level is 3, there should be 2 space before the name, up to level 6), whether it is assignable ('ASSIGNABLE' if assignable, 'NON-ASSIGNABLE' otherwise), total area, number of rooms, and average room area. Area and number of rooms should be rounded to integers and formatted using commas as thousands separators.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  o1.organization_id,\n  organization_number,\n  organization_level,\n  CASE\n    WHEN organization_level = 2\n    THEN CONCAT(' ', organization_name)\n    WHEN organization_level = 3\n    THEN CONCAT(' ', organization_name)\n    WHEN organization_level = 4\n    THEN CONCAT(' ', organization_name)\n    WHEN organization_level = 5\n    THEN CONCAT(' ', organization_name)\n    WHEN organization_level = 6\n    THEN CONCAT(' ', organization_name)\n    ELSE organization_name\n  END AS formatted_name,\n  CASE WHEN ASSIGNABLE = 1 THEN 'ASSIGNABLE' ELSE 'NON-ASSIGNABLE' END AS assign,\n  (\n    SELECT\n      FORMAT(SUM(area), 0)\n    FROM FCLT_ROOMS AS r\n    JOIN FCLT_ORGANIZATION AS o\n      ON r.FCLT_ORGANIZATION_KEY = o.FCLT_ORGANIZATION_KEY\n    WHERE\n      o.organization_id = o1.organization_id\n  ) AS area,\n  (\n    SELECT\n      FORMAT(COUNT(ROOM), 0)\n    FROM FCLT_ROOMS AS r\n    JOIN FCLT_ORGANIZATION AS o\n      ON r.FCLT_ORGANIZATION_KEY = o.FCLT_ORGANIZATION_KEY\n    WHERE\n      o.organization_id = o1.organization_id\n  ) AS rmcnt,\n  (\n    SELECT\n      FORMAT(AVG(area), 0)\n    FROM FCLT_ROOMS AS r\n    JOIN FCLT_ORGANIZATION AS o\n      ON r.FCLT_ORGANIZATION_KEY = o.FCLT_ORGANIZATION_KEY\n    WHERE\n      o.organization_id = o1.organization_id\n  ) AS area_avg\nFROM FCLT_ORGANIZATION AS o1\nJOIN MASTER_DEPT_HIERARCHY\n  ON o1.DLC_KEY = MASTER_DEPT_HIERARCHY.DLC_KEY\nWHERE\n  NOT o1.organization_name IN ('CAMBRIDGE-MIT INST')"
    ],
    "oracle_sql": "SELECT o1.organization_id, organization_number, organization_level, CASE WHEN organization_level = 2 THEN ' ' || organization_name WHEN organization_level = 3 THEN ' ' || organization_name WHEN organization_level = 4 THEN ' ' || organization_name WHEN organization_level = 5 THEN ' ' || organization_name WHEN organization_level = 6 THEN ' ' || organization_name ELSE organization_name END AS formatted_name, CASE WHEN ASSIGNABLE = 1 THEN 'ASSIGNABLE' ELSE 'NON-ASSIGNABLE' END AS assign, (SELECT TO_CHAR(SUM(area), '999,999,999') FROM FCLT_ROOMS r JOIN FCLT_ORGANIZATION o on r.FCLT_ORGANIZATION_KEY = o.FCLT_ORGANIZATION_KEY WHERE o.organization_id = o1.organization_id) AS area, (SELECT TO_CHAR(COUNT(ROOM), '999,999,999') FROM FCLT_ROOMS r JOIN FCLT_ORGANIZATION o on r.FCLT_ORGANIZATION_KEY = o.FCLT_ORGANIZATION_KEY WHERE o.organization_id = o1.organization_id) AS rmcnt, (SELECT TO_CHAR(AVG(area), '999,999,999') FROM FCLT_ROOMS r JOIN FCLT_ORGANIZATION o on r.FCLT_ORGANIZATION_KEY = o.FCLT_ORGANIZATION_KEY WHERE o.organization_id = o1.organization_id) AS area_avg FROM FCLT_ORGANIZATION o1 JOIN MASTER_DEPT_HIERARCHY ON o1.DLC_KEY = MASTER_DEPT_HIERARCHY.DLC_KEY WHERE o1.organization_name NOT IN ('CAMBRIDGE-MIT INST')",
    "gold_tables": [
      "dw#sep#FCLT_ROOMS",
      "dw#sep#FCLT_ORGANIZATION",
      "dw#sep#MASTER_DEPT_HIERARCHY"
    ],
    "mapping": {
      "Cambridge-MIT Institute": [
        "FCLT_ORGANIZATION.ORGANIZATION_NAME"
      ],
      "ID": [
        "FCLT_ORGANIZATION.ORGANIZATION_ID"
      ],
      "number": [
        "FCLT_ORGANIZATION.ORGANIZATION_NUMBER"
      ],
      "level": [
        "FCLT_ORGANIZATION.ORGANIZATION_LEVEL"
      ],
      "name": [
        "FCLT_ORGANIZATION.ORGANIZATION_NAME"
      ],
      "assignable": [
        "FCLT_ORGANIZATION.ASSIGNABLE"
      ],
      "area": [
        "FCLT_ROOMS.AREA"
      ],
      "rooms": [
        "FCLT_ROOMS.ROOM"
      ],
      "room area": [
        "FCLT_ROOMS.AREA"
      ]
    },
    "join_keys": [
      [
        "FCLT_ORGANIZATION.FCLT_ORGANIZATION_KEY",
        "FCLT_ROOMS.FCLT_ORGANIZATION_KEY"
      ],
      [
        "FCLT_ROOMS.FCLT_ORGANIZATION_KEY",
        "FCLT_ORGANIZATION.FCLT_ORGANIZATION_KEY"
      ],
      [
        "FCLT_ROOMS.FCLT_ORGANIZATION_KEY",
        "FCLT_ORGANIZATION.FCLT_ORGANIZATION_KEY"
      ],
      [
        "FCLT_ORGANIZATION.DLC_KEY",
        "MASTER_DEPT_HIERARCHY.DLC_KEY"
      ]
    ],
    "original_sql": "SELECT\n  o1.organization_id,\n  organization_number,\n  organization_level,\n  CASE\n    WHEN organization_level = 2\n    THEN CONCAT(' ', organization_name)\n    WHEN organization_level = 3\n    THEN CONCAT(' ', organization_name)\n    WHEN organization_level = 4\n    THEN CONCAT(' ', organization_name)\n    WHEN organization_level = 5\n    THEN CONCAT(' ', organization_name)\n    WHEN organization_level = 6\n    THEN CONCAT(' ', organization_name)\n    ELSE organization_name\n  END AS formatted_name,\n  CASE WHEN ASSIGNABLE = 1 THEN 'ASSIGNABLE' ELSE 'NON-ASSIGNABLE' END AS assign,\n  (\n    SELECT\n      FORMAT(SUM(area), 0)\n    FROM FCLT_ROOMS AS r\n    JOIN FCLT_ORGANIZATION AS o\n      ON r.FCLT_ORGANIZATION_KEY = o.FCLT_ORGANIZATION_KEY\n    WHERE\n      o.organization_id = o1.organization_id\n  ) AS area,\n  (\n    SELECT\n      FORMAT(COUNT(ROOM), 0)\n    FROM FCLT_ROOMS AS r\n    JOIN FCLT_ORGANIZATION AS o\n      ON r.FCLT_ORGANIZATION_KEY = o.FCLT_ORGANIZATION_KEY\n    WHERE\n      o.organization_id = o1.organization_id\n  ) AS rmcnt,\n  (\n    SELECT\n      FORMAT(AVG(area), 0)\n    FROM FCLT_ROOMS AS r\n    JOIN FCLT_ORGANIZATION AS o\n      ON r.FCLT_ORGANIZATION_KEY = o.FCLT_ORGANIZATION_KEY\n    WHERE\n      o.organization_id = o1.organization_id\n  ) AS area_avg\nFROM FCLT_ORGANIZATION AS o1\nJOIN MASTER_DEPT_HIERARCHY\n  ON o1.DLC_KEY = MASTER_DEPT_HIERARCHY.DLC_KEY\nWHERE\n  NOT o1.organization_name IN ('CAMBRIDGE-MIT INST')",
    "meta": {
      "features": {
        "query_table_count": 8,
        "query_column_count": 33,
        "query_nested_count": 3,
        "query_aggregate_count": 3,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "04421c7d7e19",
    "question": "Group all rooms into whether or not they are assignable and the major use descriptions. For each group, state \"ASSIGNABLE\" if the room is assignable and \"NON-ASSIGNABLE\" otherwise, the major use description, the total number of rooms, total area, and average area. Include subtotals for each group and a grand total across all groups. The assignable status and major use descriptions should only be displayed when they differ from the previous row. Do not include rooms whose major use or major use description starts with 'ZUSE.' The results should be sorted by assignable status and major use description. The subtotal and grand total rows should not include assignable status or major use description.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  CASE WHEN LAG(assign) OVER (ORDER BY assign) = assign THEN NULL ELSE assign END AS assign,\n  CASE WHEN LAG(muse) OVER (ORDER BY assign, muse_sort) = muse THEN NULL ELSE muse END AS muse,\n  rmcnt,\n  area,\n  area_avg\nFROM (\n  SELECT\n    CASE\n      WHEN GROUPING(ASSIGNABLE) = 1\n      THEN NULL\n      ELSE CASE WHEN ASSIGNABLE = 1 THEN 'ASSIGNABLE' ELSE 'NON-ASSIGNABLE' END\n    END AS assign,\n    CASE\n      WHEN GROUPING(FCLT_ROOMS.MAJOR_USE_DESC) = 1 AND GROUPING(ASSIGNABLE) = 0\n      THEN NULL\n      ELSE FCLT_ROOMS.MAJOR_USE_DESC\n    END AS muse,\n    CASE\n      WHEN GROUPING(FCLT_ROOMS.MAJOR_USE_DESC) = 1 AND GROUPING(ASSIGNABLE) = 0\n      THEN 'zzz'\n      ELSE FCLT_ROOMS.MAJOR_USE_DESC\n    END AS muse_sort,\n    COUNT(ROOM) AS rmcnt,\n    SUM(FCLT_ROOMS.AREA) AS area,\n    AVG(FCLT_ROOMS.AREA) AS area_avg\n  FROM FCLT_ROOMS\n  JOIN FCLT_MAJOR_USE\n    ON FCLT_MAJOR_USE.FCLT_MAJOR_USE_KEY = FCLT_ROOMS.FCLT_MAJOR_USE_KEY\n  WHERE\n    NOT FCLT_MAJOR_USE.MAJOR_USE LIKE 'ZUSE%'\n    AND NOT FCLT_MAJOR_USE.DESCRIPTION LIKE 'ZUSE%'\n  GROUP BY\n    ASSIGNABLE,\n    FCLT_ROOMS.MAJOR_USE_DESC\n    WITH ROLLUP\n  ORDER BY\n    assign,\n    muse_sort\n) AS tbltmp"
    ],
    "oracle_sql": "SELECT CASE WHEN LAG(assign) OVER (ORDER BY assign) = assign THEN NULL ELSE assign END AS assign, CASE WHEN LAG(muse) OVER (ORDER BY assign, muse_sort) = muse THEN NULL ELSE muse END AS muse, rmcnt, area, area_avg FROM (SELECT CASE WHEN GROUPING(ASSIGNABLE) = 1 THEN NULL ELSE CASE WHEN ASSIGNABLE = 1 THEN 'ASSIGNABLE' ELSE 'NON-ASSIGNABLE' END END AS assign, CASE WHEN GROUPING(FCLT_ROOMS.MAJOR_USE_DESC) = 1 AND GROUPING(ASSIGNABLE) = 0 THEN NULL ELSE FCLT_ROOMS.MAJOR_USE_DESC END AS muse, CASE WHEN GROUPING(FCLT_ROOMS.MAJOR_USE_DESC) = 1 AND GROUPING(ASSIGNABLE) = 0 THEN 'zzz' ELSE FCLT_ROOMS.MAJOR_USE_DESC END AS muse_sort, TO_CHAR(COUNT(ROOM), '999,999,999') AS rmcnt, TO_CHAR(SUM(FCLT_ROOMS.AREA), '999,999,999') AS area, TO_CHAR(AVG(FCLT_ROOMS.AREA), '999,999,999') AS area_avg FROM FCLT_ROOMS JOIN FCLT_MAJOR_USE ON FCLT_MAJOR_USE.FCLT_MAJOR_USE_KEY = FCLT_ROOMS.FCLT_MAJOR_USE_KEY WHERE FCLT_MAJOR_USE.MAJOR_USE NOT LIKE 'ZUSE%' AND FCLT_MAJOR_USE.DESCRIPTION NOT LIKE 'ZUSE%' GROUP BY ROLLUP(ASSIGNABLE, FCLT_ROOMS.MAJOR_USE_DESC) ORDER BY assign, muse_sort) tbltmp;",
    "gold_tables": [
      "dw#sep#FCLT_ROOMS",
      "dw#sep#FCLT_MAJOR_USE"
    ],
    "mapping": {
      "rooms": [
        "FCLT_ROOMS.ROOM"
      ],
      "assignable": [
        "FCLT_MAJOR_USE.ASSIGNABLE"
      ],
      "major use description": [
        "FCLT_MAJOR_USE.MAJOR_USE",
        "FCLT_ROOMS.MAJOR_USE_DESC",
        "FCLT_MAJOR_USE.DESCRIPTION"
      ],
      "area": [
        "FCLT_ROOMS.AREA"
      ]
    },
    "join_keys": [
      [
        "FCLT_ROOMS.FCLT_MAJOR_USE_KEY",
        "FCLT_MAJOR_USE.FCLT_MAJOR_USE_KEY"
      ]
    ],
    "original_sql": "SELECT\n  CASE WHEN LAG(assign) OVER (ORDER BY assign) = assign THEN NULL ELSE assign END AS assign,\n  CASE WHEN LAG(muse) OVER (ORDER BY assign, muse_sort) = muse THEN NULL ELSE muse END AS muse,\n  rmcnt,\n  area,\n  area_avg\nFROM (\n  SELECT\n    CASE\n      WHEN GROUPING(ASSIGNABLE) = 1\n      THEN NULL\n      ELSE CASE WHEN ASSIGNABLE = 1 THEN 'ASSIGNABLE' ELSE 'NON-ASSIGNABLE' END\n    END AS assign,\n    CASE\n      WHEN GROUPING(FCLT_ROOMS.MAJOR_USE_DESC) = 1 AND GROUPING(ASSIGNABLE) = 0\n      THEN NULL\n      ELSE FCLT_ROOMS.MAJOR_USE_DESC\n    END AS muse,\n    CASE\n      WHEN GROUPING(FCLT_ROOMS.MAJOR_USE_DESC) = 1 AND GROUPING(ASSIGNABLE) = 0\n      THEN 'zzz'\n      ELSE FCLT_ROOMS.MAJOR_USE_DESC\n    END AS muse_sort,\n    COUNT(ROOM) AS rmcnt,\n    SUM(FCLT_ROOMS.AREA) AS area,\n    AVG(FCLT_ROOMS.AREA) AS area_avg\n  FROM FCLT_ROOMS\n  JOIN FCLT_MAJOR_USE\n    ON FCLT_MAJOR_USE.FCLT_MAJOR_USE_KEY = FCLT_ROOMS.FCLT_MAJOR_USE_KEY\n  WHERE\n    NOT FCLT_MAJOR_USE.MAJOR_USE LIKE 'ZUSE%'\n    AND NOT FCLT_MAJOR_USE.DESCRIPTION LIKE 'ZUSE%'\n  GROUP BY\n    ASSIGNABLE,\n    FCLT_ROOMS.MAJOR_USE_DESC\n    WITH ROLLUP\n  ORDER BY\n    assign,\n    muse_sort\n) AS tbltmp",
    "meta": {
      "features": {
        "query_table_count": 2,
        "query_column_count": 31,
        "query_nested_count": 1,
        "query_aggregate_count": 10,
        "query_sort_count": 5,
        "query_window_func_count": 2,
        "query_join_count": 1
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "b1b49b6724fb",
    "question": "List each floor key and department name within the Stata building, as well as the number of rooms, total area, and average area per department on each floor. Include subtotals for each floor and a grand total across all floors. Sort the results by floor key and department name in ascending order. Exclude departments without any rooms in the building. Only the first row of each floor group should include the floor key, and the subtotal and grand total rows should not include floor key or department name. Number of rooms and area should be rounded to integers and formatted using commas as thousands separators.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  CASE\n    WHEN LAG(FLOOR_KEY) OVER (ORDER BY COALESCE(FAC_FLOOR.FLOOR_SORT_SEQUENCE, 999), flsort, orgname) = FLOOR_KEY\n    THEN NULL\n    ELSE FLOOR_KEY\n  END AS flid2,\n  CASE WHEN orgname = 'zzz' THEN NULL ELSE orgname END AS dept,\n  rmcnt,\n  areasum,\n  area_avg\nFROM (\n  SELECT\n    FLOOR_KEY AS flsort,\n    CASE\n      WHEN GROUPING(FLOOR_KEY) = 0 AND GROUPING(org.ORGANIZATION_NAME) = 1\n      THEN 'SUBTOTAL'\n      WHEN GROUPING(FLOOR_KEY) = 1 AND GROUPING(org.ORGANIZATION_NAME) = 1\n      THEN 'TOTAL'\n      ELSE FLOOR_KEY\n    END AS flid,\n    CASE\n      WHEN GROUPING(FLOOR_KEY) = 0 AND GROUPING(org.ORGANIZATION_NAME) = 1\n      THEN 'zzz'\n      ELSE org.ORGANIZATION_NAME\n    END AS orgname,\n    COUNT(rm.FAC_ROOM_KEY) AS rmcnt,\n    SUM(rm.AREA) AS areasum,\n    AVG(rm.AREA) AS area_avg\n  FROM FAC_ROOMS AS rm\n  JOIN FCLT_ORGANIZATION AS org\n    ON rm.ORGANIZATION_KEY = org.FCLT_ORGANIZATION_KEY\n  JOIN BUILDINGS AS bu\n    ON rm.BUILDING_KEY = bu.BUILDING_KEY\n  WHERE\n    bu.BUILDING_NAME = 'Ray and Maria Stata Center'\n  GROUP BY\n    FLOOR_KEY,\n    org.ORGANIZATION_NAME\n    WITH ROLLUP\n  ORDER BY\n    flsort,\n    orgname\n) AS tbltmp\nLEFT JOIN FAC_FLOOR\n  ON FLOOR_KEY = flsort"
    ],
    "oracle_sql": "SELECT CASE WHEN LAG(FLOOR_KEY) OVER (ORDER BY NVL(FAC_FLOOR.FLOOR_SORT_SEQUENCE, 999), flsort, orgname) = FLOOR_KEY THEN NULL ELSE FLOOR_KEY END AS flid2, CASE WHEN orgname = 'zzz' THEN NULL ELSE orgname END AS dept, rmcnt, areasum, area_avg FROM ( SELECT CASE WHEN GROUPING(FLOOR_KEY) = 1 AND GROUPING(org.ORGANIZATION_NAME) = 1 THEN 'zzz' ELSE FLOOR_KEY END AS flsort, CASE WHEN GROUPING(FLOOR_KEY) = 0 AND GROUPING(org.ORGANIZATION_NAME) = 1 THEN 'SUBTOTAL' WHEN GROUPING(FLOOR_KEY) = 1 AND GROUPING(org.ORGANIZATION_NAME) = 1 THEN 'TOTAL' ELSE FLOOR_KEY END AS flid, CASE WHEN GROUPING(FLOOR_KEY) = 0 AND GROUPING(org.ORGANIZATION_NAME) = 1 THEN 'zzz' ELSE org.ORGANIZATION_NAME END AS orgname, TO_CHAR(COUNT(rm.FAC_ROOM_KEY), '999,999,999') AS rmcnt, TO_CHAR(SUM(rm.AREA), '999,999,999') AS areasum, TO_CHAR(AVG(rm.AREA), '999,999,999') AS area_avg FROM FAC_ROOMS rm JOIN FCLT_ORGANIZATION org ON rm.ORGANIZATION_KEY = org.FCLT_ORGANIZATION_KEY JOIN BUILDINGS bu ON rm.BUILDING_KEY = bu.BUILDING_KEY WHERE bu.BUILDING_NAME = 'Ray and Maria Stata Center' GROUP BY ROLLUP(FLOOR_KEY, org.ORGANIZATION_NAME) ORDER BY flsort, orgname ) tbltmp LEFT JOIN FAC_FLOOR ON FLOOR_KEY = flsort;",
    "gold_tables": [
      "dw#sep#FAC_ROOMS",
      "dw#sep#FCLT_ORGANIZATION",
      "dw#sep#BUILDINGS",
      "dw#sep#FAC_FLOOR"
    ],
    "mapping": {
      "floor key": [
        "FAC_FLOOR.FLOOR_KEY"
      ],
      "department name": [
        "FCLT_ORGANIZATION.ORGANIZATION_NAME"
      ],
      "Stata building": [
        "BUILDINGS.BUILDING_NAME"
      ],
      "rooms": [
        "FAC_ROOMS.FAC_ROOM_KEY"
      ],
      "area": [
        "FAC_ROOMS.AREA"
      ]
    },
    "join_keys": [
      [
        "FCLT_ORGANIZATION.FCLT_ORGANIZATION_KEY",
        "FAC_ROOMS.ORGANIZATION_KEY"
      ],
      [
        "BUILDINGS.BUILDING_KEY",
        "FAC_ROOMS.BUILDING_KEY"
      ]
    ],
    "original_sql": "SELECT\n  CASE\n    WHEN LAG(FLOOR_KEY) OVER (ORDER BY COALESCE(FAC_FLOOR.FLOOR_SORT_SEQUENCE, 999), flsort, orgname) = FLOOR_KEY\n    THEN NULL\n    ELSE FLOOR_KEY\n  END AS flid2,\n  CASE WHEN orgname = 'zzz' THEN NULL ELSE orgname END AS dept,\n  rmcnt,\n  areasum,\n  area_avg\nFROM (\n  SELECT\n    FLOOR_KEY AS flsort,\n    CASE\n      WHEN GROUPING(FLOOR_KEY) = 0 AND GROUPING(org.ORGANIZATION_NAME) = 1\n      THEN 'SUBTOTAL'\n      WHEN GROUPING(FLOOR_KEY) = 1 AND GROUPING(org.ORGANIZATION_NAME) = 1\n      THEN 'TOTAL'\n      ELSE FLOOR_KEY\n    END AS flid,\n    CASE\n      WHEN GROUPING(FLOOR_KEY) = 0 AND GROUPING(org.ORGANIZATION_NAME) = 1\n      THEN 'zzz'\n      ELSE org.ORGANIZATION_NAME\n    END AS orgname,\n    COUNT(rm.FAC_ROOM_KEY) AS rmcnt,\n    SUM(rm.AREA) AS areasum,\n    AVG(rm.AREA) AS area_avg\n  FROM FAC_ROOMS AS rm\n  JOIN FCLT_ORGANIZATION AS org\n    ON rm.ORGANIZATION_KEY = org.FCLT_ORGANIZATION_KEY\n  JOIN BUILDINGS AS bu\n    ON rm.BUILDING_KEY = bu.BUILDING_KEY\n  WHERE\n    bu.BUILDING_NAME = 'Ray and Maria Stata Center'\n  GROUP BY\n    FLOOR_KEY,\n    org.ORGANIZATION_NAME\n    WITH ROLLUP\n  ORDER BY\n    flsort,\n    orgname\n) AS tbltmp\nLEFT JOIN FAC_FLOOR\n  ON FLOOR_KEY = flsort",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 34,
        "query_nested_count": 1,
        "query_aggregate_count": 10,
        "query_sort_count": 5,
        "query_window_func_count": 1,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "2adb5b643f21",
    "question": "List each building key and floor key within the department of facilities, the number of rooms, total area, average area per floor, building name, access level, zip code, and city. Include subtotals for each building and a grand total across all buildings. The subtotals and grand total should not include zip code or city. Numbers of rooms and area should be rounded to integers and formatted using commas as thousands separators.",
    "db_id": "dw",
    "sql": [
      "SELECT DISTINCT\n  tbltmp.blsort AS building_id,\n  tbltmp.flsort AS floor_id,\n  tbltmp.rmcnt AS total_rooms,\n  tbltmp.areasum AS total_area,\n  tbltmp.area_avg AS avg_area,\n  fb.BUILDING_NAME_LONG AS building_name,\n  fb.ACCESS_LEVEL_NAME AS access_level,\n  CASE WHEN tbltmp.flsort IS NULL THEN NULL ELSE fba.POSTAL_CODE END AS postal_code,\n  CASE WHEN tbltmp.flsort IS NULL THEN NULL ELSE fba.CITY END AS city\nFROM (\n  SELECT\n    rm.BUILDING_KEY AS blsort,\n    rm.FLOOR_KEY AS flsort,\n    COUNT(rm.FAC_ROOM_KEY) AS rmcnt,\n    SUM(rm.AREA) AS areasum,\n    AVG(rm.AREA) AS area_avg\n  FROM FAC_ROOMS AS rm\n  JOIN FAC_ORGANIZATION AS fo\n    ON rm.ORGANIZATION_KEY = fo.ORGANIZATION_KEY\n  WHERE\n    fo.ORGANIZATION_NAME = 'DP OF FACILITIES'\n  GROUP BY\n    rm.BUILDING_KEY,\n    rm.FLOOR_KEY\n    WITH ROLLUP\n) AS tbltmp\nLEFT JOIN FAC_FLOOR AS fl\n  ON fl.BUILDING_KEY = tbltmp.blsort AND fl.FLOOR_KEY = tbltmp.flsort\nLEFT JOIN FAC_BUILDING AS fb\n  ON tbltmp.blsort = fb.FAC_BUILDING_KEY\nLEFT JOIN FAC_BUILDING_ADDRESS AS fba\n  ON tbltmp.blsort = fba.BUILDING_KEY\nORDER BY\n  building_id,\n  floor_id,\n  postal_code,\n  city"
    ],
    "oracle_sql": "SELECT DISTINCT tbltmp.blsort AS building_id, tbltmp.flsort AS floor_id, tbltmp.rmcnt AS total_rooms, tbltmp.areasum AS total_area, tbltmp.area_avg AS avg_area, fb.BUILDING_NAME_LONG AS building_name, fb.ACCESS_LEVEL_NAME AS access_level, CASE WHEN tbltmp.flsort IS NULL THEN NULL ELSE fba.POSTAL_CODE END AS postal_code, CASE WHEN tbltmp.flsort IS NULL THEN NULL ELSE fba.CITY END AS city FROM ( SELECT CASE WHEN GROUPING(rm.BUILDING_KEY) = 1 THEN NULL ELSE rm.BUILDING_KEY END AS blsort, CASE WHEN GROUPING(rm.FLOOR_KEY) = 1 THEN NULL ELSE rm.FLOOR_KEY END AS flsort, TO_CHAR(COUNT(rm.FAC_ROOM_KEY), '999,999,999') AS rmcnt, TO_CHAR(SUM(rm.AREA), '999,999,999') AS areasum, TO_CHAR(AVG(rm.AREA), '999,999,999') AS area_avg FROM FAC_ROOMS rm JOIN FAC_ORGANIZATION fo ON rm.ORGANIZATION_KEY = fo.ORGANIZATION_KEY WHERE fo.ORGANIZATION_NAME = 'DP OF FACILITIES' GROUP BY ROLLUP(rm.BUILDING_KEY, rm.FLOOR_KEY) ) tbltmp LEFT JOIN FAC_FLOOR fl ON fl.BUILDING_KEY = tbltmp.blsort AND fl.FLOOR_KEY = tbltmp.flsort LEFT JOIN FAC_BUILDING fb ON tbltmp.blsort = fb.FAC_BUILDING_KEY LEFT JOIN FAC_BUILDING_ADDRESS fba ON tbltmp.blsort = fba.BUILDING_KEY ORDER BY building_id, floor_id, postal_code, city;",
    "gold_tables": [
      "dw#sep#FAC_ROOMS",
      "dw#sep#FAC_ORGANIZATION",
      "dw#sep#FAC_FLOOR",
      "dw#sep#FAC_BUILDING",
      "dw#sep#FAC_BUILDING_ADDRESS"
    ],
    "mapping": {
      "building key": [
        "FAC_ROOMS.BUILDING_KEY"
      ],
      "floor key": [
        "FAC_ROOMS.FLOOR_KEY"
      ],
      "department": [
        "FAC_ORGANIZATION.ORGANIZATION_NAME"
      ],
      "rooms": [
        "FAC_ROOMS.FAC_ROOM_KEY"
      ],
      "area": [
        "FAC_ROOMS.AREA"
      ],
      "building name": [
        "FAC_BUILDING.BUILDING_NAME_LONG"
      ],
      "access level": [
        "FAC_BUILDING.ACCESS_LEVEL_NAME"
      ],
      "zip code": [
        "FAC_BUILDING_ADDRESS.POSTAL_CODE"
      ],
      "city": [
        "FAC_BUILDING_ADDRESS.CITY"
      ]
    },
    "join_keys": [
      [
        "FAC_ORGANIZATION.ORGANIZATION_KEY",
        "FAC_ROOMS.ORGANIZATION_KEY"
      ]
    ],
    "original_sql": "SELECT DISTINCT\n  tbltmp.blsort AS building_id,\n  tbltmp.flsort AS floor_id,\n  tbltmp.rmcnt AS total_rooms,\n  tbltmp.areasum AS total_area,\n  tbltmp.area_avg AS avg_area,\n  fb.BUILDING_NAME_LONG AS building_name,\n  fb.ACCESS_LEVEL_NAME AS access_level,\n  CASE WHEN tbltmp.flsort IS NULL THEN NULL ELSE fba.POSTAL_CODE END AS postal_code,\n  CASE WHEN tbltmp.flsort IS NULL THEN NULL ELSE fba.CITY END AS city\nFROM (\n  SELECT\n    rm.BUILDING_KEY AS blsort,\n    rm.FLOOR_KEY AS flsort,\n    COUNT(rm.FAC_ROOM_KEY) AS rmcnt,\n    SUM(rm.AREA) AS areasum,\n    AVG(rm.AREA) AS area_avg\n  FROM FAC_ROOMS AS rm\n  JOIN FAC_ORGANIZATION AS fo\n    ON rm.ORGANIZATION_KEY = fo.ORGANIZATION_KEY\n  WHERE\n    fo.ORGANIZATION_NAME = 'DP OF FACILITIES'\n  GROUP BY\n    rm.BUILDING_KEY,\n    rm.FLOOR_KEY\n    WITH ROLLUP\n) AS tbltmp\nLEFT JOIN FAC_FLOOR AS fl\n  ON fl.BUILDING_KEY = tbltmp.blsort AND fl.FLOOR_KEY = tbltmp.flsort\nLEFT JOIN FAC_BUILDING AS fb\n  ON tbltmp.blsort = fb.FAC_BUILDING_KEY\nLEFT JOIN FAC_BUILDING_ADDRESS AS fba\n  ON tbltmp.blsort = fba.BUILDING_KEY\nORDER BY\n  building_id,\n  floor_id,\n  postal_code,\n  city",
    "meta": {
      "features": {
        "query_table_count": 5,
        "query_column_count": 33,
        "query_nested_count": 1,
        "query_aggregate_count": 3,
        "query_sort_count": 4,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "3ffa6563a91e",
    "question": "List the department, school, course number, subject title, total number of enrolled students, term code, and count of distinct catalog ISBNs. Add a summary row at the bottom showing the total number of students and distinct catalog ISBNs for the current term in the format of ('TOTAL:', null, null, null, total number of students, null, number of distinct catalog ISBNs).",
    "db_id": "dw",
    "sql": [
      "SELECT\n  *\nFROM (\n  SELECT\n    OFFER_DEPT_NAME AS DEPT,\n    OFFER_SCHOOL_NAME AS SCHOOL,\n    COURSE_NUMBER AS COURSE_NR,\n    SUBJECT_TITLE AS TITLE,\n    SUM(NUM_ENROLLED_STUDENTS) AS TOTAL_ENROLLED,\n    lso.TERM_CODE,\n    COUNT(DISTINCT CATALOG_ISBN) AS OWNERSHIP\n  FROM LIBRARY_SUBJECT_OFFERED AS lso\n  JOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n    ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY\n  JOIN LIBRARY_RESERVE_CATALOG AS lrc\n    ON lrc.LIBRARY_RESERVE_CATALOG_KEY = lrmd.LIBRARY_RESERVE_CATALOG_KEY\n  GROUP BY\n    OFFER_DEPT_NAME,\n    OFFER_SCHOOL_NAME,\n    COURSE_NUMBER,\n    SUBJECT_TITLE,\n    lso.TERM_CODE\n) AS SubQuery\nUNION ALL\nSELECT\n  'TOTAL:',\n  NULL,\n  NULL,\n  NULL,\n  SUM(NUM_ENROLLED_STUDENTS),\n  NULL,\n  COUNT(DISTINCT CATALOG_ISBN)\nFROM LIBRARY_SUBJECT_OFFERED AS lso\nJOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n  ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY\nJOIN LIBRARY_RESERVE_CATALOG AS lrc\n  ON lrc.LIBRARY_RESERVE_CATALOG_KEY = lrmd.LIBRARY_RESERVE_CATALOG_KEY\nJOIN ACADEMIC_TERM_PARAMETER AS acp\n  ON lso.TERM_CODE = acp.TERM_CODE\nWHERE\n  IS_CURRENT_TERM = 'Y'\nGROUP BY\n  IS_CURRENT_TERM\nORDER BY\n  DEPT,\n  COURSE_NR,\n  TITLE,\n  TERM_CODE"
    ],
    "oracle_sql": "SELECT * FROM (SELECT OFFER_DEPT_NAME AS \"DEPT\", OFFER_SCHOOL_NAME AS \"SCHOOL\", COURSE_NUMBER AS COURSE_NR, SUBJECT_TITLE AS TITLE, SUM(NUM_ENROLLED_STUDENTS) AS TYPE, lso.TERM_CODE, COUNT(DISTINCT CATALOG_ISBN) AS OWNERSHIP FROM LIBRARY_SUBJECT_OFFERED lso JOIN LIBRARY_RESERVE_MATRL_DETAIL lrmd ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY JOIN LIBRARY_RESERVE_CATALOG lrc ON lrc.LIBRARY_RESERVE_CATALOG_KEY = lrmd.LIBRARY_RESERVE_CATALOG_KEY GROUP BY OFFER_DEPT_NAME, OFFER_SCHOOL_NAME, COURSE_NUMBER, SUBJECT_TITLE, lso.TERM_CODE ORDER BY OFFER_DEPT_NAME, COURSE_NUMBER, SUBJECT_TITLE, lso.TERM_CODE) UNION ALL SELECT 'TOTAL:', NULL, NULL, NULL, SUM(NUM_ENROLLED_STUDENTS), NULL, COUNT(DISTINCT CATALOG_ISBN) FROM LIBRARY_SUBJECT_OFFERED lso JOIN LIBRARY_RESERVE_MATRL_DETAIL lrmd ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY JOIN LIBRARY_RESERVE_CATALOG lrc ON lrc.LIBRARY_RESERVE_CATALOG_KEY = lrmd.LIBRARY_RESERVE_CATALOG_KEY JOIN ACADEMIC_TERM_PARAMETER acp ON lso.TERM_CODE = acp.TERM_CODE WHERE IS_CURRENT_TERM = 'Y'",
    "gold_tables": [
      "dw#sep#LIBRARY_SUBJECT_OFFERED",
      "dw#sep#LIBRARY_RESERVE_MATRL_DETAIL",
      "dw#sep#LIBRARY_RESERVE_CATALOG",
      "dw#sep#ACADEMIC_TERM_PARAMETER"
    ],
    "mapping": {
      "department": [
        "LIBRARY_SUBJECT_OFFERED.OFFER_DEPT_NAME"
      ],
      "school": [
        "LIBRARY_SUBJECT_OFFERED.OFFER_SCHOOL_NAME"
      ],
      "course number": [
        "LIBRARY_SUBJECT_OFFERED.COURSE_NUMBER"
      ],
      "subject title": [
        "LIBRARY_SUBJECT_OFFERED.SUBJECT_TITLE"
      ],
      "enrolled students": [
        "LIBRARY_SUBJECT_OFFERED.NUM_ENROLLED_STUDENTS"
      ],
      "term code": [
        "LIBRARY_SUBJECT_OFFERED.TERM_CODE"
      ],
      "catalog ISBNs": [
        "LIBRARY_RESERVE_CATALOG.CATALOG_ISBN"
      ]
    },
    "join_keys": [
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_SUBJECT_OFFERED_KEY",
        "LIBRARY_SUBJECT_OFFERED.LIBRARY_SUBJECT_OFFERED_KEY"
      ],
      [
        "LIBRARY_RESERVE_CATALOG.LIBRARY_RESERVE_CATALOG_KEY",
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_RESERVE_CATALOG_KEY"
      ],
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_SUBJECT_OFFERED_KEY",
        "LIBRARY_SUBJECT_OFFERED.LIBRARY_SUBJECT_OFFERED_KEY"
      ],
      [
        "LIBRARY_RESERVE_CATALOG.LIBRARY_RESERVE_CATALOG_KEY",
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_RESERVE_CATALOG_KEY"
      ],
      [
        "ACADEMIC_TERM_PARAMETER.TERM_CODE",
        "LIBRARY_SUBJECT_OFFERED.TERM_CODE"
      ]
    ],
    "original_sql": "SELECT\n  *\nFROM (\n  SELECT\n    OFFER_DEPT_NAME AS DEPT,\n    OFFER_SCHOOL_NAME AS SCHOOL,\n    COURSE_NUMBER AS COURSE_NR,\n    SUBJECT_TITLE AS TITLE,\n    SUM(NUM_ENROLLED_STUDENTS) AS TOTAL_ENROLLED,\n    lso.TERM_CODE,\n    COUNT(DISTINCT CATALOG_ISBN) AS OWNERSHIP\n  FROM LIBRARY_SUBJECT_OFFERED AS lso\n  JOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n    ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY\n  JOIN LIBRARY_RESERVE_CATALOG AS lrc\n    ON lrc.LIBRARY_RESERVE_CATALOG_KEY = lrmd.LIBRARY_RESERVE_CATALOG_KEY\n  GROUP BY\n    OFFER_DEPT_NAME,\n    OFFER_SCHOOL_NAME,\n    COURSE_NUMBER,\n    SUBJECT_TITLE,\n    lso.TERM_CODE\n) AS SubQuery\nUNION ALL\nSELECT\n  'TOTAL:',\n  NULL,\n  NULL,\n  NULL,\n  SUM(NUM_ENROLLED_STUDENTS),\n  NULL,\n  COUNT(DISTINCT CATALOG_ISBN)\nFROM LIBRARY_SUBJECT_OFFERED AS lso\nJOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n  ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY\nJOIN LIBRARY_RESERVE_CATALOG AS lrc\n  ON lrc.LIBRARY_RESERVE_CATALOG_KEY = lrmd.LIBRARY_RESERVE_CATALOG_KEY\nJOIN ACADEMIC_TERM_PARAMETER AS acp\n  ON lso.TERM_CODE = acp.TERM_CODE\nWHERE\n  IS_CURRENT_TERM = 'Y'\nGROUP BY\n  IS_CURRENT_TERM\nORDER BY\n  DEPT,\n  COURSE_NR,\n  TITLE,\n  TERM_CODE",
    "meta": {
      "features": {
        "query_table_count": 7,
        "query_column_count": 30,
        "query_nested_count": 2,
        "query_aggregate_count": 4,
        "query_sort_count": 4,
        "query_window_func_count": 0,
        "query_join_count": 5
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "ee4ffed455e7",
    "question": "For each mailing list that involves subscribers that work in departments with names starting with 'Computer Science', state the ownership type, the list name, the number of owners, and the number of subscribers. Display the ownership type only if it differs from the previous entry. Include subtotals (the corresponding type field shoud be 'SUBTOTAL') for each ownership type and a grand total (the corresponding type field shoud be 'TOTAL') across all ownership types.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  CASE\n    WHEN LAG(OWNERSHIP_TYPE) OVER (ORDER BY OWNERSHIP_TYPE_gr DESC, ML) = OWNERSHIP_TYPE\n    THEN NULL\n    ELSE OWNERSHIP_TYPE\n  END AS OWNERSHIP_TYPE,\n  ML,\n  nr_owner,\n  nr_member\nFROM (\n  SELECT\n    CASE\n      WHEN OWNER_TYPE IS NULL AND NOT MOIRA_LIST_NAME IS NULL\n      THEN CONCAT(OWNER_TYPE, '1')\n      ELSE CONCAT(OWNER_TYPE, '2')\n    END AS OWNERSHIP_TYPE_gr,\n    CASE\n      WHEN MOIRA_LIST_NAME IS NULL AND NOT OWNER_TYPE IS NULL\n      THEN 'SUBTOTAL'\n      WHEN MOIRA_LIST_NAME IS NULL AND OWNER_TYPE IS NULL\n      THEN 'TOTAL'\n      ELSE OWNER_TYPE\n    END AS OWNERSHIP_TYPE,\n    MOIRA_LIST_NAME AS ML,\n    COUNT(DISTINCT OWNER) AS nr_owner,\n    COUNT(DISTINCT MOIRA_LIST_MEMBER_MIT_ID) AS nr_member\n  FROM MOIRA_LIST_OWNER AS mlo\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON mld.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY\n  JOIN MOIRA_LIST AS ml\n    ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  JOIN EMPLOYEE_DIRECTORY\n    ON MIT_ID = MOIRA_LIST_MEMBER_MIT_ID\n  WHERE\n    department_name LIKE 'Computer Science%'\n  GROUP BY\n    OWNER_TYPE,\n    MOIRA_LIST_NAME\n    WITH ROLLUP\n  ORDER BY\n    OWNER_TYPE DESC,\n    MOIRA_LIST_NAME\n) AS tbltmp"
    ],
    "oracle_sql": "SELECT CASE WHEN LAG(OWNERSHIP_TYPE) OVER (ORDER BY OWNERSHIP_TYPE_gr DESC, ML) = OWNERSHIP_TYPE THEN NULL ELSE OWNERSHIP_TYPE END AS OWNERSHIP_TYPE, ML, nr_owner, nr_member FROM (SELECT CASE WHEN GROUPING(OWNER_TYPE) = 1 AND GROUPING(MOIRA_LIST_NAME) = 0 THEN OWNER_TYPE || '1' ELSE OWNER_TYPE || '2' END AS OWNERSHIP_TYPE_gr, CASE WHEN GROUPING(MOIRA_LIST_NAME) = 1 AND GROUPING(OWNER_TYPE) = 0 THEN 'SUBTOTAL' WHEN GROUPING(MOIRA_LIST_NAME) = 1 AND GROUPING(OWNER_TYPE) = 1 THEN 'TOTAL' ELSE OWNER_TYPE END AS OWNERSHIP_TYPE, MOIRA_LIST_NAME AS ML, COUNT(DISTINCT OWNER) AS nr_owner, COUNT(DISTINCT MOIRA_LIST_MEMBER_MIT_ID) AS nr_member FROM MOIRA_LIST_OWNER mlo JOIN MOIRA_LIST_DETAIL mld ON mld.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY JOIN MOIRA_LIST ml ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY JOIN EMPLOYEE_DIRECTORY ON MIT_ID = MOIRA_LIST_MEMBER_MIT_ID WHERE department_name LIKE 'Computer Science%' GROUP BY ROLLUP(OWNER_TYPE, MOIRA_LIST_NAME) ORDER BY OWNER_TYPE DESC, MOIRA_LIST_NAME) tbltmp",
    "gold_tables": [
      "dw#sep#MOIRA_LIST_OWNER",
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#MOIRA_LIST",
      "dw#sep#EMPLOYEE_DIRECTORY"
    ],
    "mapping": {
      "departments with names starting with 'Computer Science'": [
        "EMPLOYEE_DIRECTORY.DEPARTMENT_NAME"
      ],
      "ownership type": [
        "MOIRA_LIST_OWNER.OWNER_TYPE"
      ],
      "list name": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "owners": [
        "MOIRA_LIST_OWNER.OWNER"
      ],
      "subscribers": [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER_MIT_ID"
      ]
    },
    "join_keys": [
      [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_OWNER_KEY",
        "MOIRA_LIST_OWNER.MOIRA_LIST_OWNER_KEY"
      ],
      [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY",
        "MOIRA_LIST.MOIRA_LIST_KEY"
      ],
      [
        "EMPLOYEE_DIRECTORY.MIT_ID",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER_MIT_ID"
      ]
    ],
    "original_sql": "SELECT\n  CASE\n    WHEN LAG(OWNERSHIP_TYPE) OVER (ORDER BY OWNERSHIP_TYPE_gr DESC, ML) = OWNERSHIP_TYPE\n    THEN NULL\n    ELSE OWNERSHIP_TYPE\n  END AS OWNERSHIP_TYPE,\n  ML,\n  nr_owner,\n  nr_member\nFROM (\n  SELECT\n    CASE\n      WHEN OWNER_TYPE IS NULL AND NOT MOIRA_LIST_NAME IS NULL\n      THEN CONCAT(OWNER_TYPE, '1')\n      ELSE CONCAT(OWNER_TYPE, '2')\n    END AS OWNERSHIP_TYPE_gr,\n    CASE\n      WHEN MOIRA_LIST_NAME IS NULL AND NOT OWNER_TYPE IS NULL\n      THEN 'SUBTOTAL'\n      WHEN MOIRA_LIST_NAME IS NULL AND OWNER_TYPE IS NULL\n      THEN 'TOTAL'\n      ELSE OWNER_TYPE\n    END AS OWNERSHIP_TYPE,\n    MOIRA_LIST_NAME AS ML,\n    COUNT(DISTINCT OWNER) AS nr_owner,\n    COUNT(DISTINCT MOIRA_LIST_MEMBER_MIT_ID) AS nr_member\n  FROM MOIRA_LIST_OWNER AS mlo\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON mld.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY\n  JOIN MOIRA_LIST AS ml\n    ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  JOIN EMPLOYEE_DIRECTORY\n    ON MIT_ID = MOIRA_LIST_MEMBER_MIT_ID\n  WHERE\n    department_name LIKE 'Computer Science%'\n  GROUP BY\n    OWNER_TYPE,\n    MOIRA_LIST_NAME\n    WITH ROLLUP\n  ORDER BY\n    OWNER_TYPE DESC,\n    MOIRA_LIST_NAME\n) AS tbltmp",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 31,
        "query_nested_count": 1,
        "query_aggregate_count": 3,
        "query_sort_count": 4,
        "query_window_func_count": 1,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "a11c26197828",
    "question": "For each IAP category, list its name, number of unique sessions, total number of attendees, active period (in the format of 'beginning term code-end term code'), the most common sponsor name, and the most common session start time. Include a grand total row showing the total number of sessions and attendees across all categories in the format of ('TOTAL', number of sessions, number of attendees, null, null, null).",
    "db_id": "dw",
    "sql": [
      "WITH SponsorAndStartTime AS (\n  SELECT\n    isc.IAP_CATEGORY_NAME,\n    isp.SPONSOR_NAME,\n    iss.SESSION_START_TIME,\n    COUNT(isp.SPONSOR_NAME) AS sponsor_count,\n    COUNT(iss.SESSION_START_TIME) AS start_time_count\n  FROM IAP_SUBJECT_CATEGORY AS isc\n  JOIN IAP_SUBJECT_DETAIL AS isd\n    ON isd.IAP_SUBJECT_CATEGORY_KEY = isc.IAP_SUBJECT_CATEGORY_KEY\n  LEFT JOIN IAP_SUBJECT_SESSION AS iss\n    ON isd.IAP_SUBJECT_SESSION_KEY = iss.IAP_SUBJECT_SESSION_KEY\n  LEFT JOIN IAP_SUBJECT_SPONSOR AS isp\n    ON isd.IAP_SUBJECT_SPONSOR_KEY = isp.IAP_SUBJECT_SPONSOR_KEY\n  GROUP BY\n    isc.IAP_CATEGORY_NAME,\n    isp.SPONSOR_NAME,\n    iss.SESSION_START_TIME\n), MostCommonDetails AS (\n  SELECT\n    IAP_CATEGORY_NAME,\n    (\n      SELECT\n        SPONSOR_NAME\n      FROM SponsorAndStartTime\n      WHERE\n        IAP_CATEGORY_NAME = sast.IAP_CATEGORY_NAME\n      GROUP BY\n        SPONSOR_NAME\n      ORDER BY\n        COUNT(*) DESC\n      LIMIT 1\n    ) AS most_common_sponsor,\n    (\n      SELECT\n        SESSION_START_TIME\n      FROM SponsorAndStartTime\n      WHERE\n        IAP_CATEGORY_NAME = sast.IAP_CATEGORY_NAME\n      GROUP BY\n        SESSION_START_TIME\n      ORDER BY\n        COUNT(*) DESC\n      LIMIT 1\n    ) AS most_common_start_time\n  FROM SponsorAndStartTime AS sast\n  GROUP BY\n    IAP_CATEGORY_NAME\n), CategorySummary AS (\n  SELECT\n    isc.IAP_CATEGORY_NAME AS TYPE,\n    COUNT(DISTINCT isd.IAP_SUBJECT_SESSION_KEY) AS nr_sessions,\n    FORMAT(SUM(isd.MAX_ENROLLMENT), 0) AS total_attend,\n    MIN(isd.TERM_CODE) AS first_active_year,\n    MAX(isd.TERM_CODE) AS last_active_year,\n    mcd.most_common_sponsor,\n    mcd.most_common_start_time\n  FROM IAP_SUBJECT_CATEGORY AS isc\n  JOIN IAP_SUBJECT_DETAIL AS isd\n    ON isd.IAP_SUBJECT_CATEGORY_KEY = isc.IAP_SUBJECT_CATEGORY_KEY\n  LEFT JOIN MostCommonDetails AS mcd\n    ON isc.IAP_CATEGORY_NAME = mcd.IAP_CATEGORY_NAME\n  GROUP BY\n    isc.IAP_CATEGORY_NAME,\n    mcd.most_common_sponsor,\n    mcd.most_common_start_time\n)\nSELECT\n  TYPE,\n  nr_sessions,\n  total_attend,\n  CONCAT(first_active_year, '-', last_active_year) AS active_years,\n  most_common_sponsor,\n  most_common_start_time\nFROM CategorySummary\nUNION ALL\nSELECT\n  'TOTAL',\n  COUNT(DISTINCT IAP_SUBJECT_SESSION_KEY),\n  FORMAT(SUM(MAX_ENROLLMENT), 0),\n  NULL,\n  NULL,\n  NULL\nFROM IAP_SUBJECT_DETAIL\nORDER BY\n  TYPE"
    ],
    "oracle_sql": "WITH SponsorAndStartTime AS ( SELECT isc.IAP_CATEGORY_NAME, isp.SPONSOR_NAME, iss.SESSION_START_TIME, COUNT(isp.SPONSOR_NAME) AS sponsor_count, COUNT(iss.SESSION_START_TIME) AS start_time_count FROM IAP_SUBJECT_CATEGORY isc JOIN IAP_SUBJECT_DETAIL isd ON isd.IAP_SUBJECT_CATEGORY_KEY = isc.IAP_SUBJECT_CATEGORY_KEY LEFT JOIN IAP_SUBJECT_SESSION iss ON isd.IAP_SUBJECT_SESSION_KEY = iss.IAP_SUBJECT_SESSION_KEY LEFT JOIN IAP_SUBJECT_SPONSOR isp ON isd.IAP_SUBJECT_SPONSOR_KEY = isp.IAP_SUBJECT_SPONSOR_KEY GROUP BY isc.IAP_CATEGORY_NAME, isp.SPONSOR_NAME, iss.SESSION_START_TIME ), MostCommonDetails AS ( SELECT IAP_CATEGORY_NAME, MAX(SPONSOR_NAME) KEEP (DENSE_RANK FIRST ORDER BY sponsor_count DESC) AS most_common_sponsor, MAX(SESSION_START_TIME) KEEP (DENSE_RANK FIRST ORDER BY start_time_count DESC) AS most_common_start_time FROM SponsorAndStartTime GROUP BY IAP_CATEGORY_NAME ), CategorySummary AS ( SELECT isc.IAP_CATEGORY_NAME AS TYPE, COUNT(DISTINCT isd.IAP_SUBJECT_SESSION_KEY) AS nr_sessions, TO_CHAR(SUM(isd.MAX_ENROLLMENT), '999,999,999,999') AS total_attend, MIN(isd.TERM_CODE) AS first_active_year, MAX(isd.TERM_CODE) AS last_active_year, mcd.most_common_sponsor, mcd.most_common_start_time FROM IAP_SUBJECT_CATEGORY isc JOIN IAP_SUBJECT_DETAIL isd ON isd.IAP_SUBJECT_CATEGORY_KEY = isc.IAP_SUBJECT_CATEGORY_KEY LEFT JOIN MostCommonDetails mcd ON isc.IAP_CATEGORY_NAME = mcd.IAP_CATEGORY_NAME GROUP BY isc.IAP_CATEGORY_NAME, mcd.most_common_sponsor, mcd.most_common_start_time ) SELECT TYPE, nr_sessions, total_attend, first_active_year || '-' || last_active_year AS active_years, most_common_sponsor, most_common_start_time FROM CategorySummary UNION ALL SELECT 'TOTAL', COUNT(DISTINCT IAP_SUBJECT_SESSION_KEY), TO_CHAR(SUM(MAX_ENROLLMENT), '999,999,999,999'), NULL, NULL, NULL FROM IAP_SUBJECT_DETAIL ORDER BY TYPE;",
    "gold_tables": [
      "dw#sep#IAP_SUBJECT_CATEGORY",
      "dw#sep#IAP_SUBJECT_DETAIL",
      "dw#sep#IAP_SUBJECT_SESSION",
      "dw#sep#IAP_SUBJECT_SPONSOR"
    ],
    "mapping": {
      "name": [
        "IAP_SUBJECT_CATEGORY.IAP_CATEGORY_NAME"
      ],
      "sessions": [
        "IAP_SUBJECT_SESSION.IAP_SUBJECT_SESSION_KEY"
      ],
      "attendees": [
        "IAP_SUBJECT_DETAIL.MAX_ENROLLMENT"
      ],
      "active period": [
        "IAP_SUBJECT_DETAIL.TERM_CODE"
      ],
      "sponsor name": [
        "IAP_SUBJECT_SPONSOR.SPONSOR_NAME"
      ],
      "session start time": [
        "IAP_SUBJECT_SESSION.SESSION_START_TIME"
      ]
    },
    "join_keys": [
      [
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_CATEGORY_KEY",
        "IAP_SUBJECT_CATEGORY.IAP_SUBJECT_CATEGORY_KEY"
      ],
      [
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_SESSION_KEY",
        "IAP_SUBJECT_SESSION.IAP_SUBJECT_SESSION_KEY"
      ],
      [
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_SPONSOR_KEY",
        "IAP_SUBJECT_SPONSOR.IAP_SUBJECT_SPONSOR_KEY"
      ],
      [
        "IAP_SUBJECT_CATEGORY.IAP_SUBJECT_CATEGORY_KEY",
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_CATEGORY_KEY"
      ]
    ],
    "original_sql": "WITH SponsorAndStartTime AS (\n  SELECT\n    isc.IAP_CATEGORY_NAME,\n    isp.SPONSOR_NAME,\n    iss.SESSION_START_TIME,\n    COUNT(isp.SPONSOR_NAME) AS sponsor_count,\n    COUNT(iss.SESSION_START_TIME) AS start_time_count\n  FROM IAP_SUBJECT_CATEGORY AS isc\n  JOIN IAP_SUBJECT_DETAIL AS isd\n    ON isd.IAP_SUBJECT_CATEGORY_KEY = isc.IAP_SUBJECT_CATEGORY_KEY\n  LEFT JOIN IAP_SUBJECT_SESSION AS iss\n    ON isd.IAP_SUBJECT_SESSION_KEY = iss.IAP_SUBJECT_SESSION_KEY\n  LEFT JOIN IAP_SUBJECT_SPONSOR AS isp\n    ON isd.IAP_SUBJECT_SPONSOR_KEY = isp.IAP_SUBJECT_SPONSOR_KEY\n  GROUP BY\n    isc.IAP_CATEGORY_NAME,\n    isp.SPONSOR_NAME,\n    iss.SESSION_START_TIME\n), MostCommonDetails AS (\n  SELECT\n    IAP_CATEGORY_NAME,\n    (\n      SELECT\n        SPONSOR_NAME\n      FROM SponsorAndStartTime\n      WHERE\n        IAP_CATEGORY_NAME = sast.IAP_CATEGORY_NAME\n      GROUP BY\n        SPONSOR_NAME\n      ORDER BY\n        COUNT(*) DESC\n      LIMIT 1\n    ) AS most_common_sponsor,\n    (\n      SELECT\n        SESSION_START_TIME\n      FROM SponsorAndStartTime\n      WHERE\n        IAP_CATEGORY_NAME = sast.IAP_CATEGORY_NAME\n      GROUP BY\n        SESSION_START_TIME\n      ORDER BY\n        COUNT(*) DESC\n      LIMIT 1\n    ) AS most_common_start_time\n  FROM SponsorAndStartTime AS sast\n  GROUP BY\n    IAP_CATEGORY_NAME\n), CategorySummary AS (\n  SELECT\n    isc.IAP_CATEGORY_NAME AS TYPE,\n    COUNT(DISTINCT isd.IAP_SUBJECT_SESSION_KEY) AS nr_sessions,\n    FORMAT(SUM(isd.MAX_ENROLLMENT), 0) AS total_attend,\n    MIN(isd.TERM_CODE) AS first_active_year,\n    MAX(isd.TERM_CODE) AS last_active_year,\n    mcd.most_common_sponsor,\n    mcd.most_common_start_time\n  FROM IAP_SUBJECT_CATEGORY AS isc\n  JOIN IAP_SUBJECT_DETAIL AS isd\n    ON isd.IAP_SUBJECT_CATEGORY_KEY = isc.IAP_SUBJECT_CATEGORY_KEY\n  LEFT JOIN MostCommonDetails AS mcd\n    ON isc.IAP_CATEGORY_NAME = mcd.IAP_CATEGORY_NAME\n  GROUP BY\n    isc.IAP_CATEGORY_NAME,\n    mcd.most_common_sponsor,\n    mcd.most_common_start_time\n)\nSELECT\n  TYPE,\n  nr_sessions,\n  total_attend,\n  CONCAT(first_active_year, '-', last_active_year) AS active_years,\n  most_common_sponsor,\n  most_common_start_time\nFROM CategorySummary\nUNION ALL\nSELECT\n  'TOTAL',\n  COUNT(DISTINCT IAP_SUBJECT_SESSION_KEY),\n  FORMAT(SUM(MAX_ENROLLMENT), 0),\n  NULL,\n  NULL,\n  NULL\nFROM IAP_SUBJECT_DETAIL\nORDER BY\n  TYPE",
    "meta": {
      "features": {
        "query_table_count": 12,
        "query_column_count": 48,
        "query_nested_count": 6,
        "query_aggregate_count": 10,
        "query_sort_count": 3,
        "query_window_func_count": 0,
        "query_join_count": 5
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "d90dd18e5b25",
    "question": "For each building type, list the name of the building type, the number of buildings that are not subdivisions, number of employees, number of unique building street address, number of unique city, number of unique state, number of unique postal code, and average gross square footage per employee. For building type of 'resident', display it as 'RESIDENTIAL'. Include a grand total across all building types (the corresponding type field is 'TOTAL').",
    "db_id": "dw",
    "sql": [
      "SELECT\n  *\nFROM (\n  SELECT\n    CASE WHEN BUILDING_TYPE = 'RESIDENT' THEN 'RESIDENTIAL' ELSE BUILDING_TYPE END AS TYPE,\n    COUNT(DISTINCT COALESCE(PARENT_BUILDING_NUMBER, FCLT_BUILDING_KEY)) AS BUILDINGS,\n    COUNT(DISTINCT MIT_ID) AS MIT_ID_COUNT,\n    COUNT(DISTINCT BUILDINGS.BUILDING_STREET_ADDRESS) AS ADDRESS_COUNT,\n    COUNT(DISTINCT FAC_BUILDING_ADDRESS.CITY) AS CITY_COUNT,\n    COUNT(DISTINCT FAC_BUILDING_ADDRESS.STATE) AS STATE_COUNT,\n    COUNT(DISTINCT FAC_BUILDING_ADDRESS.POSTAL_CODE) AS POSTAL_CODE_COUNT,\n    SUM(FLOOR.EXT_GROSS_AREA) / NULLIF(COUNT(DISTINCT MIT_ID), 0) AS AVG_AREA\n  FROM FCLT_BUILDING_HIST AS FLOOR\n  JOIN FAC_BUILDING_ADDRESS\n    ON FLOOR.fclt_building_key = FAC_BUILDING_ADDRESS.BUILDING_KEY\n  JOIN BUILDINGS\n    ON BUILDINGS.BUILDING_KEY = FAC_BUILDING_ADDRESS.BUILDING_KEY\n  JOIN FAC_ROOMS AS fr\n    ON fr.BUILDING_KEY = BUILDINGS.BUILDING_KEY\n  JOIN EMPLOYEE_DIRECTORY AS e\n    ON e.OFFICE_LOCATION = fr.FAC_ROOM_KEY\n  WHERE\n    FAC_BUILDING_ADDRESS.ADDRESS_PURPOSE = 'STREET'\n  GROUP BY\n    BUILDING_TYPE\n  ORDER BY\n    BUILDING_TYPE ASC\n) AS subquery1\nUNION ALL\nSELECT\n  'TOTAL',\n  COUNT(DISTINCT COALESCE(PARENT_BUILDING_NUMBER, FCLT_BUILDING_KEY)),\n  COUNT(DISTINCT MIT_ID),\n  COUNT(DISTINCT BUILDINGS.BUILDING_STREET_ADDRESS),\n  COUNT(DISTINCT FAC_BUILDING_ADDRESS.CITY),\n  COUNT(DISTINCT FAC_BUILDING_ADDRESS.STATE),\n  COUNT(DISTINCT FAC_BUILDING_ADDRESS.POSTAL_CODE),\n  SUM(FLOOR.EXT_GROSS_AREA) / NULLIF(COUNT(DISTINCT MIT_ID), 0)\nFROM FCLT_BUILDING_HIST AS FLOOR\nJOIN FAC_BUILDING_ADDRESS\n  ON FLOOR.fclt_building_key = FAC_BUILDING_ADDRESS.BUILDING_KEY\nJOIN BUILDINGS\n  ON BUILDINGS.BUILDING_KEY = FAC_BUILDING_ADDRESS.BUILDING_KEY\nJOIN FAC_ROOMS AS fr\n  ON fr.BUILDING_KEY = BUILDINGS.BUILDING_KEY\nJOIN EMPLOYEE_DIRECTORY AS e\n  ON e.OFFICE_LOCATION = fr.FAC_ROOM_KEY\nWHERE\n  FAC_BUILDING_ADDRESS.ADDRESS_PURPOSE = 'STREET'"
    ],
    "oracle_sql": "SELECT * FROM (SELECT CASE WHEN BUILDING_TYPE = 'RESIDENT' THEN 'RESIDENTIAL' ELSE BUILDING_TYPE END AS TYPE, COUNT(DISTINCT NVL(PARENT_BUILDING_NUMBER, FCLT_BUILDING_KEY)) AS BUILDINGS,count(distinct MIT_ID),count(distinct BUILDINGS.BUILDING_STREET_ADDRESS), count(distinct fac_building_address.CITY), count(distinct fac_building_address.STATE), count(distinct fac_building_address.POSTAL_CODE),SUM(FLOOR.EXT_GROSS_AREA)/count(distinct MIT_ID) FROM FCLT_BUILDING_HIST FLOOR JOIN fac_building_address ON FLOOR.fclt_building_key = fac_building_address.BUILDING_KEY JOIN BUILDINGS ON BUILDINGS.BUILDING_KEY = fac_building_address.BUILDING_KEY JOIN FAC_ROOMS fr ON fr.BUILDING_KEY = BUILDINGS.BUILDING_KEY JOIN EMPLOYEE_DIRECTORY e ON e.OFFICE_LOCATION = fr.FAC_ROOM_KEY WHERE fac_building_address.ADDRESS_PURPOSE = 'STREET' GROUP BY BUILDING_TYPE ORDER BY BUILDING_TYPE ASC) UNION ALL SELECT 'TOTAL', COUNT(DISTINCT NVL(PARENT_BUILDING_NUMBER, FCLT_BUILDING_KEY)), count(distinct MIT_ID), count(distinct BUILDINGS.BUILDING_STREET_ADDRESS), count(distinct fac_building_address.CITY), count(distinct fac_building_address.STATE), count(distinct fac_building_address.POSTAL_CODE),SUM(FLOOR.EXT_GROSS_AREA)/count(distinct MIT_ID) FROM FCLT_BUILDING_HIST FLOOR JOIN fac_building_address ON FLOOR.fclt_building_key = fac_building_address.BUILDING_KEY JOIN BUILDINGS ON BUILDINGS.BUILDING_KEY = fac_building_address.BUILDING_KEY JOIN FAC_ROOMS fr ON fr.BUILDING_KEY = BUILDINGS.BUILDING_KEY JOIN EMPLOYEE_DIRECTORY e ON e.OFFICE_LOCATION = fr.FAC_ROOM_KEY WHERE fac_building_address.ADDRESS_PURPOSE = 'STREET'",
    "gold_tables": [
      "dw#sep#FCLT_BUILDING_HIST",
      "dw#sep#FAC_BUILDING_ADDRESS",
      "dw#sep#BUILDINGS",
      "dw#sep#FAC_ROOMS",
      "dw#sep#EMPLOYEE_DIRECTORY"
    ],
    "mapping": {
      "name of the building type": [
        "FCLT_BUILDING_HIST.BUILDING_TYPE"
      ],
      "buildings that are not subdivisions": [
        "FCLT_BUILDING_HIST.FCLT_BUILDING_KEY",
        "FCLT_BUILDING_HIST.PARENT_BUILDING_NUMBER"
      ],
      "employees": [
        "EMPLOYEE_DIRECTORY.MIT_ID"
      ],
      "street address": [
        "BUILDINGS.BUILDING_STREET_ADDRESS",
        "FAC_BUILDING_ADDRESS.ADDRESS_PURPOSE"
      ],
      "city": [
        "FAC_BUILDING_ADDRESS.CITY"
      ],
      "state": [
        "FAC_BUILDING_ADDRESS.STATE"
      ],
      "postal code": [
        "FAC_BUILDING_ADDRESS.POSTAL_CODE"
      ],
      "gross square footage": [
        "FCLT_BUILDING_HIST.EXT_GROSS_AREA"
      ]
    },
    "join_keys": [
      [
        "FAC_BUILDING_ADDRESS.BUILDING_KEY",
        "FCLT_BUILDING_HIST.FCLT_BUILDING_KEY"
      ],
      [
        "FAC_BUILDING_ADDRESS.BUILDING_KEY",
        "BUILDINGS.BUILDING_KEY"
      ],
      [
        "BUILDINGS.BUILDING_KEY",
        "FAC_ROOMS.BUILDING_KEY"
      ],
      [
        "EMPLOYEE_DIRECTORY.OFFICE_LOCATION",
        "FAC_ROOMS.FAC_ROOM_KEY"
      ],
      [
        "FCLT_BUILDING_HIST.FCLT_BUILDING_KEY",
        "FAC_BUILDING_ADDRESS.BUILDING_KEY"
      ],
      [
        "FAC_BUILDING_ADDRESS.BUILDING_KEY",
        "BUILDINGS.BUILDING_KEY"
      ],
      [
        "BUILDINGS.BUILDING_KEY",
        "FAC_ROOMS.BUILDING_KEY"
      ],
      [
        "FAC_ROOMS.FAC_ROOM_KEY",
        "EMPLOYEE_DIRECTORY.OFFICE_LOCATION"
      ]
    ],
    "original_sql": "SELECT\n  *\nFROM (\n  SELECT\n    CASE WHEN BUILDING_TYPE = 'RESIDENT' THEN 'RESIDENTIAL' ELSE BUILDING_TYPE END AS TYPE,\n    COUNT(DISTINCT COALESCE(PARENT_BUILDING_NUMBER, FCLT_BUILDING_KEY)) AS BUILDINGS,\n    COUNT(DISTINCT MIT_ID) AS MIT_ID_COUNT,\n    COUNT(DISTINCT BUILDINGS.BUILDING_STREET_ADDRESS) AS ADDRESS_COUNT,\n    COUNT(DISTINCT fac_building_address.CITY) AS CITY_COUNT,\n    COUNT(DISTINCT fac_building_address.STATE) AS STATE_COUNT,\n    COUNT(DISTINCT fac_building_address.POSTAL_CODE) AS POSTAL_CODE_COUNT,\n    SUM(FLOOR.EXT_GROSS_AREA) / NULLIF(COUNT(DISTINCT MIT_ID), 0) AS AVG_AREA\n  FROM FCLT_BUILDING_HIST AS FLOOR\n  JOIN FAC_BUILDING_ADDRESS\n    ON FLOOR.fclt_building_key = fac_building_address.BUILDING_KEY\n  JOIN BUILDINGS\n    ON BUILDINGS.BUILDING_KEY = fac_building_address.BUILDING_KEY\n  JOIN FAC_ROOMS AS fr\n    ON fr.BUILDING_KEY = BUILDINGS.BUILDING_KEY\n  JOIN EMPLOYEE_DIRECTORY AS e\n    ON e.OFFICE_LOCATION = fr.FAC_ROOM_KEY\n  WHERE\n    fac_building_address.ADDRESS_PURPOSE = 'STREET'\n  GROUP BY\n    BUILDING_TYPE\n  ORDER BY\n    BUILDING_TYPE ASC\n) AS subquery1\nUNION ALL\nSELECT\n  'TOTAL',\n  COUNT(DISTINCT COALESCE(PARENT_BUILDING_NUMBER, FCLT_BUILDING_KEY)),\n  COUNT(DISTINCT MIT_ID),\n  COUNT(DISTINCT BUILDINGS.BUILDING_STREET_ADDRESS),\n  COUNT(DISTINCT fac_building_address.CITY),\n  COUNT(DISTINCT fac_building_address.STATE),\n  COUNT(DISTINCT fac_building_address.POSTAL_CODE),\n  SUM(FLOOR.EXT_GROSS_AREA) / NULLIF(COUNT(DISTINCT MIT_ID), 0)\nFROM FCLT_BUILDING_HIST AS FLOOR\nJOIN FAC_BUILDING_ADDRESS\n  ON FLOOR.fclt_building_key = fac_building_address.BUILDING_KEY\nJOIN BUILDINGS\n  ON BUILDINGS.BUILDING_KEY = fac_building_address.BUILDING_KEY\nJOIN FAC_ROOMS AS fr\n  ON fr.BUILDING_KEY = BUILDINGS.BUILDING_KEY\nJOIN EMPLOYEE_DIRECTORY AS e\n  ON e.OFFICE_LOCATION = fr.FAC_ROOM_KEY\nWHERE\n  fac_building_address.ADDRESS_PURPOSE = 'STREET'",
    "meta": {
      "features": {
        "query_table_count": 10,
        "query_column_count": 40,
        "query_nested_count": 2,
        "query_aggregate_count": 16,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 8
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "cfa689a41ce7",
    "question": "Group spaces in the Stata building by the access level and usage type. For each group, state the access level, usage type, name of the space, the number of spaces, total area across all rooms in the space, and average area across all rooms in the space. Display the access level only if it differs from the previous entry. Include subtotals for each access level, usage type, and space name, subtotals for each access level, and a grand total across all access levels. Exclude usage type that includes \"STORAGE\". All numerical values should be rounded to integers and formatted using commas as thousands separators.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  CASE WHEN LAG(assign) OVER (ORDER BY assign) = assign THEN NULL ELSE assign END AS assign,\n  CASE WHEN LAG(muse) OVER (ORDER BY assign, muse_sort) = muse THEN NULL ELSE muse END AS muse,\n  rmuse,\n  rmcnt,\n  area,\n  area_avg\nFROM (\n  SELECT\n    CASE WHEN ACCESS_LEVEL IS NULL THEN 'TOTAL' ELSE ACCESS_LEVEL END AS assign,\n    CASE\n      WHEN su2.SPACE_USAGE IS NULL AND NOT ACCESS_LEVEL IS NULL\n      THEN 'SUBTOTAL'\n      ELSE su2.SPACE_USAGE\n    END AS muse,\n    CASE\n      WHEN su2.SPACE_USAGE IS NULL AND NOT ACCESS_LEVEL IS NULL\n      THEN 'zzz'\n      ELSE su2.SPACE_USAGE\n    END AS muse_sort,\n    CASE\n      WHEN DLC_NAME IS NULL AND NOT su2.SPACE_USAGE IS NULL\n      THEN 'SUBTOTAL'\n      ELSE DLC_NAME\n    END AS rmuse,\n    CASE\n      WHEN DLC_NAME IS NULL AND NOT su2.SPACE_USAGE IS NULL\n      THEN 'zzz'\n      ELSE DLC_NAME\n    END AS rmuse_sort,\n    FORMAT(COUNT(DISTINCT SPACE_UNIT), 0) AS rmcnt,\n    FORMAT(SUM(ROOM_SQUARE_FOOTAGE), 0) AS area,\n    FORMAT(AVG(ROOM_SQUARE_FOOTAGE), 0) AS area_avg\n  FROM SPACE_UNIT AS su\n  JOIN (\n    SELECT\n      *\n    FROM SPACE_DETAIL\n    WHERE\n      BUILDING_KEY = '32'\n  ) AS sd\n    ON sd.SPACE_UNIT_KEY = su.SPACE_UNIT_KEY\n  JOIN SPACE_USAGE AS su2\n    ON su2.SPACE_USAGE_KEY = sd.SPACE_USAGE_KEY\n  JOIN (\n    SELECT\n      *\n    FROM ZPM_ROOMS_LOAD\n    WHERE\n      BUILDING_COMPONENT = '32'\n  ) AS zrl\n    ON zrl.SPACE_UNIT_CODE = su.SPACE_UNIT_CODE\n  JOIN FCLT_ORGANIZATION AS fo\n    ON fo.FCLT_ORGANIZATION_KEY = su.FCLT_ORGANIZATION_KEY\n  WHERE\n    NOT su2.SPACE_USAGE LIKE '%STORAGE%'\n  GROUP BY\n    ACCESS_LEVEL,\n    su2.SPACE_USAGE,\n    DLC_NAME\n    WITH ROLLUP\n  ORDER BY\n    assign,\n    muse_sort,\n    rmuse_sort\n) AS tbltmp"
    ],
    "oracle_sql": "SELECT CASE WHEN LAG(assign) OVER (ORDER BY assign) = assign THEN NULL ELSE assign END AS assign, CASE WHEN LAG(muse) OVER (ORDER BY assign, muse_sort) = muse THEN NULL ELSE muse END AS muse, rmuse, rmcnt, area, area_avg FROM (SELECT CASE WHEN GROUPING(ACCESS_LEVEL) = 1 THEN 'TOTAL' ELSE ACCESS_LEVEL END AS assign, CASE WHEN GROUPING(su2.SPACE_USAGE) = 1 AND GROUPING(ACCESS_LEVEL) = 0 THEN 'SUBTOTAL' ELSE su2.SPACE_USAGE END AS muse, CASE WHEN GROUPING(su2.SPACE_USAGE) = 1 AND GROUPING(ACCESS_LEVEL) = 0 THEN 'zzz' ELSE su2.SPACE_USAGE END AS muse_sort, CASE WHEN GROUPING(DLC_NAME) = 1 AND GROUPING(su2.SPACE_USAGE) = 0 THEN 'SUBTOTAL' ELSE DLC_NAME END AS rmuse, CASE WHEN GROUPING(DLC_NAME) = 1 AND GROUPING(su2.SPACE_USAGE) = 0 THEN 'zzz' ELSE DLC_NAME END AS rmuse_sort, TO_CHAR(COUNT(DISTINCT SPACE_UNIT), '999,999,999') AS rmcnt,TO_CHAR(SUM(ROOM_SQUARE_FOOTAGE), '999,999,999') AS area, TO_CHAR(AVG(ROOM_SQUARE_FOOTAGE), '999,999,999') AS area_avg FROM SPACE_UNIT su JOIN (SELECT * FROM SPACE_DETAIL WHERE BUILDING_KEY = '32') sd ON sd.SPACE_UNIT_KEY=su.SPACE_UNIT_KEY JOIN SPACE_USAGE su2 ON su2.SPACE_USAGE_KEY=sd.SPACE_USAGE_KEY JOIN (SELECT * FROM ZPM_ROOMS_LOAD where BUILDING_COMPONENT='32') zrl ON zrl.SPACE_UNIT_CODE = su.SPACE_UNIT_CODE JOIN FCLT_ORGANIZATION fo ON fo.FCLT_ORGANIZATION_KEY = su.FCLT_ORGANIZATION_KEY WHERE su2.SPACE_USAGE NOT LIKE '%STORAGE%' GROUP BY ROLLUP(ACCESS_LEVEL, su2.SPACE_USAGE, DLC_NAME) ORDER BY assign, muse_sort, rmuse_sort) tbltmp",
    "gold_tables": [
      "dw#sep#SPACE_UNIT",
      "dw#sep#SPACE_DETAIL",
      "dw#sep#SPACE_USAGE",
      "dw#sep#ZPM_ROOMS_LOAD",
      "dw#sep#FCLT_ORGANIZATION"
    ],
    "mapping": {
      "Stata building": [
        "SPACE_DETAIL.BUILDING_KEY"
      ],
      "access level": [
        "ZPM_ROOMS_LOAD.ACCESS_LEVEL"
      ],
      "usage type": [
        "SPACE_USAGE.SPACE_USAGE"
      ],
      "name of the space": [
        "FCLT_ORGANIZATION.DLC_NAME"
      ],
      "spaces": [
        "SPACE_UNIT.SPACE_UNIT"
      ],
      "area": [
        "SPACE_DETAIL.ROOM_SQUARE_FOOTAGE"
      ]
    },
    "join_keys": [
      [
        "FCLT_ORGANIZATION.FCLT_ORGANIZATION_KEY",
        "SPACE_UNIT.FCLT_ORGANIZATION_KEY"
      ]
    ],
    "original_sql": "SELECT\n  CASE WHEN LAG(assign) OVER (ORDER BY assign) = assign THEN NULL ELSE assign END AS assign,\n  CASE WHEN LAG(muse) OVER (ORDER BY assign, muse_sort) = muse THEN NULL ELSE muse END AS muse,\n  rmuse,\n  rmcnt,\n  area,\n  area_avg\nFROM (\n  SELECT\n    CASE WHEN ACCESS_LEVEL IS NULL THEN 'TOTAL' ELSE ACCESS_LEVEL END AS assign,\n    CASE\n      WHEN su2.SPACE_USAGE IS NULL AND NOT ACCESS_LEVEL IS NULL\n      THEN 'SUBTOTAL'\n      ELSE su2.SPACE_USAGE\n    END AS muse,\n    CASE\n      WHEN su2.SPACE_USAGE IS NULL AND NOT ACCESS_LEVEL IS NULL\n      THEN 'zzz'\n      ELSE su2.SPACE_USAGE\n    END AS muse_sort,\n    CASE\n      WHEN DLC_NAME IS NULL AND NOT su2.SPACE_USAGE IS NULL\n      THEN 'SUBTOTAL'\n      ELSE DLC_NAME\n    END AS rmuse,\n    CASE\n      WHEN DLC_NAME IS NULL AND NOT su2.SPACE_USAGE IS NULL\n      THEN 'zzz'\n      ELSE DLC_NAME\n    END AS rmuse_sort,\n    FORMAT(COUNT(DISTINCT SPACE_UNIT), 0) AS rmcnt,\n    FORMAT(SUM(ROOM_SQUARE_FOOTAGE), 0) AS area,\n    FORMAT(AVG(ROOM_SQUARE_FOOTAGE), 0) AS area_avg\n  FROM SPACE_UNIT AS su\n  JOIN (\n    SELECT\n      *\n    FROM SPACE_DETAIL\n    WHERE\n      BUILDING_KEY = '32'\n  ) AS sd\n    ON sd.SPACE_UNIT_KEY = su.SPACE_UNIT_KEY\n  JOIN SPACE_USAGE AS su2\n    ON su2.SPACE_USAGE_KEY = sd.SPACE_USAGE_KEY\n  JOIN (\n    SELECT\n      *\n    FROM ZPM_ROOMS_LOAD\n    WHERE\n      BUILDING_COMPONENT = '32'\n  ) AS zrl\n    ON zrl.SPACE_UNIT_CODE = su.SPACE_UNIT_CODE\n  JOIN FCLT_ORGANIZATION AS fo\n    ON fo.FCLT_ORGANIZATION_KEY = su.FCLT_ORGANIZATION_KEY\n  WHERE\n    NOT su2.SPACE_USAGE LIKE '%STORAGE%'\n  GROUP BY\n    ACCESS_LEVEL,\n    su2.SPACE_USAGE,\n    DLC_NAME\n    WITH ROLLUP\n  ORDER BY\n    assign,\n    muse_sort,\n    rmuse_sort\n) AS tbltmp",
    "meta": {
      "features": {
        "query_table_count": 5,
        "query_column_count": 47,
        "query_nested_count": 3,
        "query_aggregate_count": 5,
        "query_sort_count": 6,
        "query_window_func_count": 2,
        "query_join_count": 4
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "7e5b1e3efdf1",
    "question": "List each organization's break group, ID, name, and formatted name according to its level, along with whether its members are emeritus or non-emeritus. Also, include the organization number, level, employer count, and hierarchy type for each organization. Exclude organizations '139' and '250'. Sort the results by hierarchy type and ensure totals for employer counts are displayed.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  SUBSTRING(organization_sort, 5, 2) AS breakgrp,\n  organization_id,\n  organization_name,\n  CASE\n    WHEN organization_level = 4\n    THEN ' ' OR organization_name\n    WHEN organization_level = 5\n    THEN ' ' OR organization_name\n    WHEN organization_level = 6\n    THEN ' ' OR organization_name\n    ELSE organization_name\n  END AS formatted_name,\n  CASE WHEN EMERITUS_STATUS = 'Emeritus' THEN 'EMERITUS' ELSE 'NON-EMERITUS' END AS assign,\n  organization_number,\n  organization_level,\n  (\n    SELECT\n      COUNT(DISTINCT hfr2.MIT_ID) AS employer_count\n    FROM HR_FACULTY_ROSTER AS hfr2\n    WHERE\n      hfr2.HR_ORG_UNIT_TITLE = hou.HR_ORG_UNIT_TITLE\n  ),\n  HIERARCHY_TYPE,\n  organization_sort\nFROM FCLT_ORGANIZATION\nJOIN MASTER_DEPT_HIERARCHY\n  ON FCLT_ORGANIZATION.DLC_KEY = MASTER_DEPT_HIERARCHY.DLC_KEY\nJOIN HR_ORG_UNIT AS hou\n  ON hou.DLC_KEY = FCLT_ORGANIZATION.DLC_KEY\nJOIN HR_FACULTY_ROSTER AS hfr\n  ON hfr.HR_ORG_UNIT_TITLE = hou.HR_ORG_UNIT_TITLE\nWHERE\n  organization_level IN ('3', '4', '5', '6')\n  AND NOT organization_id IN ('139', '250')\nORDER BY\n  HIERARCHY_TYPE"
    ],
    "oracle_sql": "SELECT SUBSTR(organization_sort, 5, 2) AS breakgrp, organization_id, organization_name, CASE WHEN organization_level = 4 THEN ' ' || organization_name WHEN organization_level = 5 THEN ' ' || organization_name WHEN organization_level = 6 THEN ' ' || organization_name ELSE organization_name END AS formatted_name, CASE WHEN EMERITUS_STATUS = 'Emeritus' THEN 'EMERITUS' ELSE 'NON-EMERITUS' END AS assign, organization_number, organization_level, (SELECT COUNT(DISTINCT hfr2.MIT_ID) AS employer_count FROM HR_FACULTY_ROSTER hfr2 WHERE hfr2.HR_ORG_UNIT_TITLE=hou.HR_ORG_UNIT_TITLE) , HIERARCHY_TYPE, organization_sort FROM FCLT_ORGANIZATION JOIN MASTER_DEPT_HIERARCHY ON FCLT_ORGANIZATION.DLC_KEY = MASTER_DEPT_HIERARCHY.DLC_KEY JOIN HR_ORG_UNIT hou on hou.DLC_KEY=FCLT_ORGANIZATION.DLC_KEY JOIN HR_FACULTY_ROSTER hfr ON hfr.HR_ORG_UNIT_TITLE=hou.HR_ORG_UNIT_TITLE WHERE organization_level IN ('3', '4', '5', '6') AND organization_id NOT IN ('139', '250') ORDER BY HIERARCHY_TYPE",
    "gold_tables": [
      "dw#sep#HR_FACULTY_ROSTER",
      "dw#sep#FCLT_ORGANIZATION",
      "dw#sep#MASTER_DEPT_HIERARCHY",
      "dw#sep#HR_ORG_UNIT"
    ],
    "mapping": {
      "break group": [
        "FCLT_ORGANIZATION.ORGANIZATION_SORT"
      ],
      "ID": [
        "FCLT_ORGANIZATION.ORGANIZATION_ID"
      ],
      "name": [
        "FCLT_ORGANIZATION.ORGANIZATION_NAME"
      ],
      "level": [
        "FCLT_ORGANIZATION.ORGANIZATION_LEVEL"
      ],
      "number": [
        "FCLT_ORGANIZATION.ORGANIZATION_NUMBER"
      ],
      "employer": [
        "HR_FACULTY_ROSTER.MIT_ID"
      ],
      "hierarchy type": [
        "MASTER_DEPT_HIERARCHY.HIERARCHY_TYPE"
      ]
    },
    "join_keys": [
      [
        "FCLT_ORGANIZATION.DLC_KEY",
        "MASTER_DEPT_HIERARCHY.DLC_KEY"
      ],
      [
        "FCLT_ORGANIZATION.DLC_KEY",
        "HR_ORG_UNIT.DLC_KEY"
      ],
      [
        "HR_ORG_UNIT.HR_ORG_UNIT_TITLE",
        "HR_FACULTY_ROSTER.HR_ORG_UNIT_TITLE"
      ]
    ],
    "original_sql": "SELECT\n  SUBSTRING(organization_sort, 5, 2) AS breakgrp,\n  organization_id,\n  organization_name,\n  CASE\n    WHEN organization_level = 4\n    THEN ' ' OR organization_name\n    WHEN organization_level = 5\n    THEN ' ' OR organization_name\n    WHEN organization_level = 6\n    THEN ' ' OR organization_name\n    ELSE organization_name\n  END AS formatted_name,\n  CASE WHEN EMERITUS_STATUS = 'Emeritus' THEN 'EMERITUS' ELSE 'NON-EMERITUS' END AS assign,\n  organization_number,\n  organization_level,\n  (\n    SELECT\n      COUNT(DISTINCT hfr2.MIT_ID) AS employer_count\n    FROM HR_FACULTY_ROSTER AS hfr2\n    WHERE\n      hfr2.HR_ORG_UNIT_TITLE = hou.HR_ORG_UNIT_TITLE\n  ),\n  HIERARCHY_TYPE,\n  organization_sort\nFROM FCLT_ORGANIZATION\nJOIN MASTER_DEPT_HIERARCHY\n  ON FCLT_ORGANIZATION.DLC_KEY = MASTER_DEPT_HIERARCHY.DLC_KEY\nJOIN HR_ORG_UNIT AS hou\n  ON hou.DLC_KEY = FCLT_ORGANIZATION.DLC_KEY\nJOIN HR_FACULTY_ROSTER AS hfr\n  ON hfr.HR_ORG_UNIT_TITLE = hou.HR_ORG_UNIT_TITLE\nWHERE\n  organization_level IN ('3', '4', '5', '6')\n  AND NOT organization_id IN ('139', '250')\nORDER BY\n  HIERARCHY_TYPE",
    "meta": {
      "features": {
        "query_table_count": 5,
        "query_column_count": 27,
        "query_nested_count": 1,
        "query_aggregate_count": 1,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "0e94de4393d6",
    "question": "For each course, list its title, name of the building of the course location, duration (in terms of days), and a running average of the duration (in terms of days) using a window of two preceding and two following courses (partitioned by academic year and sorted by course start date).",
    "db_id": "dw",
    "sql": [
      "SELECT DISTINCT\n  ccso.subject_title,\n  building_name,\n  ccso.duration,\n  AVG(duration) OVER (\n    PARTITION BY ccso.academic_year\n    ORDER BY ccso.term_start_date\n    rows BETWEEN 2 preceding AND 2 following\n  )\nFROM (\n  SELECT DISTINCT\n    subject_title,\n    term_start_date,\n    term_end_date - term_start_date AS duration,\n    cis.academic_year,\n    meet_place\n  FROM ACADEMIC_TERMS\n  JOIN COURSE_CATALOG_SUBJECT_OFFERED AS cis\n    ON cis.effective_term_code = ACADEMIC_TERMS.term_code\n) AS ccso\nJOIN FCLT_ROOMS AS fr\n  ON ccso.MEET_PLACE = fr.FCLT_ROOM_KEY\nJOIN FCLT_BUILDING AS fb\n  ON fb.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY"
    ],
    "oracle_sql": "select distinct ccso.subject_title, building_name, ccso.duration, avg(duration) over (partition by ccso.academic_year order by ccso.term_start_date rows between 2 preceding and 2 following) from (select distinct subject_title, term_start_date, term_end_date-term_start_date as duration, cis.academic_year, meet_place from academic_terms join COURSE_CATALOG_SUBJECT_OFFERED cis on cis.effective_term_code=academic_terms.term_code) ccso JOIN FCLT_ROOMS fr ON ccso.MEET_PLACE = fr.FCLT_ROOM_KEY JOIN FCLT_BUILDING fb ON fb.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY;",
    "gold_tables": [
      "dw#sep#ACADEMIC_TERMS",
      "dw#sep#COURSE_CATALOG_SUBJECT_OFFERED",
      "dw#sep#FCLT_ROOMS",
      "dw#sep#FCLT_BUILDING"
    ],
    "mapping": {
      "title": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_TITLE"
      ],
      "name of the building": [
        "FCLT_BUILDING.BUILDING_NAME"
      ],
      "duration": [
        "ACADEMIC_TERMS.TERM_END_DATE",
        "ACADEMIC_TERMS.TERM_START_DATE"
      ]
    },
    "join_keys": [
      [
        "COURSE_CATALOG_SUBJECT_OFFERED.EFFECTIVE_TERM_CODE",
        "ACADEMIC_TERMS.TERM_CODE"
      ],
      [
        "FCLT_ROOMS.FCLT_BUILDING_KEY",
        "FCLT_BUILDING.FCLT_BUILDING_KEY"
      ]
    ],
    "original_sql": "SELECT DISTINCT\n  ccso.subject_title,\n  building_name,\n  ccso.duration,\n  AVG(duration) OVER (\n    PARTITION BY ccso.academic_year\n    ORDER BY ccso.term_start_date\n    rows BETWEEN 2 preceding AND 2 following\n  )\nFROM (\n  SELECT DISTINCT\n    subject_title,\n    term_start_date,\n    term_end_date - term_start_date AS duration,\n    cis.academic_year,\n    meet_place\n  FROM ACADEMIC_TERMS\n  JOIN COURSE_CATALOG_SUBJECT_OFFERED AS cis\n    ON cis.effective_term_code = academic_terms.term_code\n) AS ccso\nJOIN FCLT_ROOMS AS fr\n  ON ccso.MEET_PLACE = fr.FCLT_ROOM_KEY\nJOIN FCLT_BUILDING AS fb\n  ON fb.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 18,
        "query_nested_count": 1,
        "query_aggregate_count": 1,
        "query_sort_count": 1,
        "query_window_func_count": 1,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "5092a43c68ee",
    "question": "For each course, list its name, name of the building of the course location, the start date, the name of the course before it, and the name of the course after it, access level of the building, and the assignable area of the room used for the course, sorted by the ascending order start date and course name.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  ccso.subject_title,\n  fb.BUILDING_NAME_LONG AS building_name,\n  at.TERM_START_DATE AS term_start_date,\n  LAG(ccso.subject_title) OVER (ORDER BY at.TERM_START_DATE ASC, ccso.subject_title ASC) AS previous_subject_title,\n  LEAD(ccso.subject_title) OVER (ORDER BY at.TERM_START_DATE ASC, ccso.subject_title ASC) AS next_subject_title,\n  fb.ACCESS_LEVEL_NAME AS access_level,\n  fr.AREA AS room_assignable_area\nFROM (\n  SELECT DISTINCT\n    subject_id,\n    subject_title,\n    effective_term_code,\n    meet_place\n  FROM COURSE_CATALOG_SUBJECT_OFFERED\n) AS ccso\nJOIN ACADEMIC_TERMS AS at\n  ON at.TERM_CODE = ccso.effective_term_code\nJOIN FCLT_ROOMS AS fr\n  ON ccso.MEET_PLACE = fr.FCLT_ROOM_KEY\nJOIN FCLT_BUILDING AS fb\n  ON fb.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY\nORDER BY\n  at.TERM_START_DATE ASC,\n  ccso.subject_title ASC"
    ],
    "oracle_sql": "SELECT ccso.subject_title, fb.BUILDING_NAME_LONG AS building_name, at.TERM_START_DATE AS term_start_date, lag(ccso.subject_title) OVER ( ORDER BY at.TERM_START_DATE ASC, ccso.subject_title ASC ) AS previous_subject_title, lead(ccso.subject_title) OVER ( ORDER BY at.TERM_START_DATE ASC, ccso.subject_title ASC ) AS next_subject_title, fb.ACCESS_LEVEL_NAME AS access_level, fr.AREA AS room_assignable_area FROM ( SELECT DISTINCT subject_id, subject_title, effective_term_code, meet_place FROM COURSE_CATALOG_SUBJECT_OFFERED ) ccso JOIN ACADEMIC_TERMS at ON at.TERM_CODE = ccso.effective_term_code JOIN FCLT_ROOMS fr ON ccso.MEET_PLACE = fr.FCLT_ROOM_KEY JOIN FCLT_BUILDING fb ON fb.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY ORDER BY at.TERM_START_DATE ASC, ccso.subject_title ASC;",
    "gold_tables": [
      "dw#sep#COURSE_CATALOG_SUBJECT_OFFERED",
      "dw#sep#ACADEMIC_TERMS",
      "dw#sep#FCLT_ROOMS",
      "dw#sep#FCLT_BUILDING"
    ],
    "mapping": {
      "name": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_TITLE"
      ],
      "name of the building": [
        "FCLT_BUILDING.BUILDING_NAME_LONG"
      ],
      "start date": [
        "ACADEMIC_TERMS.TERM_START_DATE"
      ],
      "name of the course": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_TITLE"
      ],
      "access level": [
        "FCLT_BUILDING.ACCESS_LEVEL_NAME"
      ],
      "area": [
        "FCLT_ROOMS.AREA"
      ]
    },
    "join_keys": [
      [
        "FCLT_BUILDING.FCLT_BUILDING_KEY",
        "FCLT_ROOMS.FCLT_BUILDING_KEY"
      ]
    ],
    "original_sql": "SELECT\n  ccso.subject_title,\n  fb.BUILDING_NAME_LONG AS building_name,\n  at.TERM_START_DATE AS term_start_date,\n  LAG(ccso.subject_title) OVER (ORDER BY at.TERM_START_DATE ASC, ccso.subject_title ASC) AS previous_subject_title,\n  LEAD(ccso.subject_title) OVER (ORDER BY at.TERM_START_DATE ASC, ccso.subject_title ASC) AS next_subject_title,\n  fb.ACCESS_LEVEL_NAME AS access_level,\n  fr.AREA AS room_assignable_area\nFROM (\n  SELECT DISTINCT\n    subject_id,\n    subject_title,\n    effective_term_code,\n    meet_place\n  FROM COURSE_CATALOG_SUBJECT_OFFERED\n) AS ccso\nJOIN ACADEMIC_TERMS AS at\n  ON at.TERM_CODE = ccso.effective_term_code\nJOIN FCLT_ROOMS AS fr\n  ON ccso.MEET_PLACE = fr.FCLT_ROOM_KEY\nJOIN FCLT_BUILDING AS fb\n  ON fb.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY\nORDER BY\n  at.TERM_START_DATE ASC,\n  ccso.subject_title ASC",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 23,
        "query_nested_count": 1,
        "query_aggregate_count": 2,
        "query_sort_count": 6,
        "query_window_func_count": 2,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "86a463034922",
    "question": "For each course, list its name, name of the building of the course location, and the cumulative number of courses, including the course itself, held in the same year or preceding years (partitioned by academic year and sorted in the ascending order of course start date).",
    "db_id": "dw",
    "sql": [
      "SELECT DISTINCT\n  subject_title,\n  building_name,\n  COUNT(ccso.subject_id) OVER (\n    PARTITION BY ccso.academic_year\n    ORDER BY term_start_date ASC\n    range BETWEEN UNBOUNDED preceding AND CURRENT ROW\n  )\nFROM COURSE_CATALOG_SUBJECT_OFFERED AS ccso\nJOIN ACADEMIC_TERMS\n  ON ccso.effective_term_code = ACADEMIC_TERMS.term_code\nJOIN FCLT_ROOMS AS fr\n  ON ccso.MEET_PLACE = fr.FCLT_ROOM_KEY\nJOIN FCLT_BUILDING AS fb\n  ON fb.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY"
    ],
    "oracle_sql": "select distinct subject_title, building_name, count(ccso.subject_id) over (partition by ccso.academic_year order by term_start_date asc range between unbounded preceding and current row) from COURSE_CATALOG_SUBJECT_OFFERED ccso join academic_terms on ccso.effective_term_code =academic_terms.term_code JOIN FCLT_ROOMS fr ON ccso.MEET_PLACE = fr.FCLT_ROOM_KEY JOIN FCLT_BUILDING fb ON fb.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY",
    "gold_tables": [
      "dw#sep#COURSE_CATALOG_SUBJECT_OFFERED",
      "dw#sep#ACADEMIC_TERMS",
      "dw#sep#FCLT_ROOMS",
      "dw#sep#FCLT_BUILDING"
    ],
    "mapping": {
      "name": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_TITLE"
      ],
      "name of the building": [
        "FCLT_BUILDING.BUILDING_NAME"
      ],
      "courses": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_ID"
      ],
      "academic year": [
        "COURSE_CATALOG_SUBJECT_OFFERED.ACADEMIC_YEAR"
      ],
      "course start date": [
        "ACADEMIC_TERMS.TERM_START_DATE"
      ]
    },
    "join_keys": [
      [
        "COURSE_CATALOG_SUBJECT_OFFERED.EFFECTIVE_TERM_CODE",
        "ACADEMIC_TERMS.TERM_CODE"
      ],
      [
        "COURSE_CATALOG_SUBJECT_OFFERED.MEET_PLACE",
        "FCLT_ROOMS.FCLT_ROOM_KEY"
      ]
    ],
    "original_sql": "SELECT DISTINCT\n  subject_title,\n  building_name,\n  COUNT(ccso.subject_id) OVER (\n    PARTITION BY ccso.academic_year\n    ORDER BY term_start_date ASC\n    range BETWEEN UNBOUNDED preceding AND CURRENT ROW\n  )\nFROM COURSE_CATALOG_SUBJECT_OFFERED AS ccso\nJOIN ACADEMIC_TERMS\n  ON ccso.effective_term_code = academic_terms.term_code\nJOIN FCLT_ROOMS AS fr\n  ON ccso.MEET_PLACE = fr.FCLT_ROOM_KEY\nJOIN FCLT_BUILDING AS fb\n  ON fb.FCLT_BUILDING_KEY = fr.FCLT_BUILDING_KEY",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 11,
        "query_nested_count": 0,
        "query_aggregate_count": 1,
        "query_sort_count": 1,
        "query_window_func_count": 1,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "18f89e6ab372",
    "question": "Group courses in the biology and chemistry department by whether they are current or not and the cluster type. For each group, list the current status ('CURRENT' if yes and 'NON-CURRENT' otherwise), cluster type, the maximum duration of courses (in terms of days), the maximum units, average duration (in terms of days), and average units. Include subtotals for each current status (the corresponding current status field is 'SUBTOTAL') and a grand total across all current status (the corresponding current status field is 'TOTAL'). Do not repeat the current status if it is the same as the previous row. Sort the table by current status and cluster type.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  CASE\n    WHEN LAG(assign) OVER (ORDER BY IS_CURRENT_TERM DESC, assign, CLUSTER_TYPE ASC) = assign\n    THEN NULL\n    ELSE assign\n  END AS assign,\n  CLUSTER_TYPE,\n  max_duration,\n  max_units,\n  avg_dur,\n  avg_unit\nFROM (\n  SELECT\n    CASE\n      WHEN GROUPING(CLUSTER_TYPE) = 1 AND GROUPING(IS_CURRENT_TERM) = 0\n      THEN 'SUBTOTAL'\n      WHEN GROUPING(CLUSTER_TYPE) = 1 AND GROUPING(IS_CURRENT_TERM) = 1\n      THEN 'TOTAL'\n      ELSE CASE WHEN IS_CURRENT_TERM = 'Y' THEN 'CURRENT' ELSE 'NON-CURRENT' END\n    END AS assign,\n    IS_CURRENT_TERM,\n    CLUSTER_TYPE,\n    MAX(\n      DATEDIFF(STR_TO_DATE(term_end_date, '%d-%b-%y'), STR_TO_DATE(term_start_date, '%d-%b-%y'))\n    ) AS max_duration,\n    MAX(TOTAL_UNITS) AS max_units,\n    AVG(\n      DATEDIFF(STR_TO_DATE(term_end_date, '%d-%b-%y'), STR_TO_DATE(term_start_date, '%d-%b-%y'))\n    ) AS avg_dur,\n    AVG(TOTAL_UNITS) AS avg_unit\n  FROM SUBJECT_SUMMARY AS ss\n  JOIN ACADEMIC_TERMS_ALL AS ata\n    ON ata.TERM_CODE = ss.TERM_CODE\n  WHERE\n    NOT CLUSTER_TYPE IS NULL AND ss.department_name IN ('Chemistry', 'Biology')\n  GROUP BY\n    IS_CURRENT_TERM,\n    CLUSTER_TYPE\n    WITH ROLLUP\n  ORDER BY\n    IS_CURRENT_TERM DESC,\n    assign,\n    CLUSTER_TYPE ASC\n) AS tbltmp"
    ],
    "oracle_sql": "SELECT CASE WHEN LAG(assign) OVER (ORDER BY IS_CURRENT_TERM DESC, assign, CLUSTER_TYPE ASC) = assign THEN NULL ELSE assign END AS assign, CLUSTER_TYPE, max_duration, max_units, avg_dur, avg_unit FROM (SELECT CASE WHEN GROUPING(CLUSTER_TYPE) = 1 AND GROUPING(IS_CURRENT_TERM) = 0 THEN 'SUBTOTAL' WHEN GROUPING(CLUSTER_TYPE) = 1 AND GROUPING(IS_CURRENT_TERM) = 1 THEN 'TOTAL' ELSE CASE WHEN IS_CURRENT_TERM = 'Y' THEN 'CURRENT' ELSE 'NON-CURRENT' END END AS assign, IS_CURRENT_TERM, CLUSTER_TYPE, max(term_end_date-term_start_date) AS max_duration, MAX(TOTAL_UNITS) AS max_units, AVG(term_end_date-term_start_date) AS avg_dur, AVG(TOTAL_UNITS) AS avg_unit FROM SUBJECT_SUMMARY ss JOIN ACADEMIC_TERMS_ALL ata ON ata.TERM_CODE = ss.TERM_CODE WHERE CLUSTER_TYPE IS NOT NULL and ss.department_name in ('Chemistry', 'Biology') GROUP BY ROLLUP(IS_CURRENT_TERM, CLUSTER_TYPE) ORDER BY IS_CURRENT_TERM DESC, assign, CLUSTER_TYPE ASC) tbltmp",
    "gold_tables": [
      "dw#sep#SUBJECT_SUMMARY",
      "dw#sep#ACADEMIC_TERMS_ALL"
    ],
    "mapping": {
      "biology and chemistry department": [
        "SUBJECT_SUMMARY.DEPARTMENT_NAME"
      ],
      "current status": [
        "ACADEMIC_TERMS_ALL.IS_CURRENT_TERM"
      ],
      "cluster type": [
        "SUBJECT_SUMMARY.CLUSTER_TYPE"
      ],
      "duration": [
        "ACADEMIC_TERMS_ALL.TERM_END_DATE",
        "ACADEMIC_TERMS_ALL.TERM_START_DATE"
      ],
      "units": [
        "SUBJECT_SUMMARY.TOTAL_UNITS"
      ]
    },
    "join_keys": [
      [
        "ACADEMIC_TERMS_ALL.TERM_CODE",
        "SUBJECT_SUMMARY.TERM_CODE"
      ]
    ],
    "original_sql": "SELECT\n  CASE\n    WHEN LAG(assign) OVER (ORDER BY IS_CURRENT_TERM DESC, assign, CLUSTER_TYPE ASC) = assign\n    THEN NULL\n    ELSE assign\n  END AS assign,\n  CLUSTER_TYPE,\n  max_duration,\n  max_units,\n  avg_dur,\n  avg_unit\nFROM (\n  SELECT\n    CASE\n      WHEN GROUPING(CLUSTER_TYPE) = 1 AND GROUPING(IS_CURRENT_TERM) = 0\n      THEN 'SUBTOTAL'\n      WHEN GROUPING(CLUSTER_TYPE) = 1 AND GROUPING(IS_CURRENT_TERM) = 1\n      THEN 'TOTAL'\n      ELSE CASE WHEN IS_CURRENT_TERM = 'Y' THEN 'CURRENT' ELSE 'NON-CURRENT' END\n    END AS assign,\n    IS_CURRENT_TERM,\n    CLUSTER_TYPE,\n    MAX(\n      DATEDIFF(STR_TO_DATE(term_end_date, '%d-%b-%y'), STR_TO_DATE(term_start_date, '%d-%b-%y'))\n    ) AS max_duration,\n    MAX(TOTAL_UNITS) AS max_units,\n    AVG(\n      DATEDIFF(STR_TO_DATE(term_end_date, '%d-%b-%y'), STR_TO_DATE(term_start_date, '%d-%b-%y'))\n    ) AS avg_dur,\n    AVG(TOTAL_UNITS) AS avg_unit\n  FROM SUBJECT_SUMMARY AS ss\n  JOIN ACADEMIC_TERMS_ALL AS ata\n    ON ata.TERM_CODE = ss.TERM_CODE\n  WHERE\n    NOT CLUSTER_TYPE IS NULL AND ss.department_name IN ('Chemistry', 'Biology')\n  GROUP BY\n    IS_CURRENT_TERM,\n    CLUSTER_TYPE\n    WITH ROLLUP\n  ORDER BY\n    IS_CURRENT_TERM DESC,\n    assign,\n    CLUSTER_TYPE ASC\n) AS tbltmp",
    "meta": {
      "features": {
        "query_table_count": 2,
        "query_column_count": 33,
        "query_nested_count": 1,
        "query_aggregate_count": 9,
        "query_sort_count": 6,
        "query_window_func_count": 1,
        "query_join_count": 1
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "bd4a437aa3cd",
    "question": "Group courses in the biology and chemistry department by whether they are current or not and the department name. For each group, list the current status ('CURRENT' if yes and 'NON-CURRENT' otherwise), department name, the maximum duration of courses (in terms of days), the maximum units, average duration (in terms of days), and average units. Include subtotals for each current status (the corresponding current status field is 'SUBTOTAL') and a grand total across all current status (the corresponding current status field is 'TOTAL'). Do not repeat the current status if it is the same as the previous row. Sort the table by current status and department.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  CASE\n    WHEN LAG(assign) OVER (ORDER BY IS_CURRENT_TERM DESC, assign, OFFER_DEPT_NAME ASC) = assign\n    THEN NULL\n    ELSE assign\n  END AS assign,\n  OFFER_DEPT_NAME,\n  max_duration,\n  max_units,\n  avg_dur,\n  avg_unit\nFROM (\n  SELECT\n    CASE\n      WHEN GROUPING(OFFER_DEPT_NAME) = 1 AND GROUPING(IS_CURRENT_TERM) = 0\n      THEN 'SUBTOTAL'\n      WHEN GROUPING(OFFER_DEPT_NAME) = 1 AND GROUPING(IS_CURRENT_TERM) = 1\n      THEN 'TOTAL'\n      ELSE CASE WHEN IS_CURRENT_TERM = 'Y' THEN 'CURRENT' ELSE 'NON-CURRENT' END\n    END AS assign,\n    IS_CURRENT_TERM,\n    OFFER_DEPT_NAME,\n    MAX(\n      DATEDIFF(STR_TO_DATE(term_end_date, '%d-%b-%y'), STR_TO_DATE(term_start_date, '%d-%b-%y'))\n    ) AS max_duration,\n    MAX(TOTAL_UNITS) AS max_units,\n    AVG(\n      DATEDIFF(STR_TO_DATE(term_end_date, '%d-%b-%y'), STR_TO_DATE(term_start_date, '%d-%b-%y'))\n    ) AS avg_dur,\n    AVG(TOTAL_UNITS) AS avg_unit\n  FROM SUBJECT_SUMMARY AS ss\n  JOIN ACADEMIC_TERMS_ALL AS ata\n    ON ata.TERM_CODE = ss.TERM_CODE\n  JOIN SUBJECT_OFFERED AS so\n    ON so.SUBJECT_ID = ss.SUBJECT_ID\n  WHERE\n    so.offer_dept_name IN ('Chemistry', 'Biology')\n  GROUP BY\n    IS_CURRENT_TERM,\n    OFFER_DEPT_NAME\n    WITH ROLLUP\n  ORDER BY\n    IS_CURRENT_TERM DESC,\n    assign,\n    OFFER_DEPT_NAME ASC\n) AS tbltmp"
    ],
    "oracle_sql": "SELECT CASE WHEN LAG(assign) OVER (ORDER BY IS_CURRENT_TERM DESC, assign, OFFER_DEPT_NAME ASC) = assign THEN NULL ELSE assign END AS assign, OFFER_DEPT_NAME, max_duration, max_units, avg_dur, avg_unit FROM (SELECT CASE WHEN GROUPING(OFFER_DEPT_NAME) = 1 AND GROUPING(IS_CURRENT_TERM) = 0 THEN 'SUBTOTAL' WHEN GROUPING(OFFER_DEPT_NAME) = 1 AND GROUPING(IS_CURRENT_TERM) = 1 THEN 'TOTAL' ELSE CASE WHEN IS_CURRENT_TERM = 'Y' THEN 'CURRENT' ELSE 'NON-CURRENT' END END AS assign, IS_CURRENT_TERM, OFFER_DEPT_NAME, max(term_end_date-term_start_date) AS max_duration, MAX(TOTAL_UNITS) AS max_units, AVG(term_end_date-term_start_date) AS avg_dur, AVG(TOTAL_UNITS) AS avg_unit FROM SUBJECT_SUMMARY ss JOIN ACADEMIC_TERMS_ALL ata ON ata.TERM_CODE = ss.TERM_CODE JOIN SUBJECT_OFFERED so ON so.SUBJECT_ID = ss.SUBJECT_ID where so.offer_dept_name in ('Chemistry', 'Biology') GROUP BY ROLLUP(IS_CURRENT_TERM, OFFER_DEPT_NAME) ORDER BY IS_CURRENT_TERM DESC, assign, OFFER_DEPT_NAME ASC) tbltmp",
    "gold_tables": [
      "dw#sep#SUBJECT_SUMMARY",
      "dw#sep#ACADEMIC_TERMS_ALL",
      "dw#sep#SUBJECT_OFFERED"
    ],
    "mapping": {
      "biology and chemistry department": [
        "SUBJECT_OFFERED.OFFER_DEPT_NAME"
      ],
      "current status": [
        "ACADEMIC_TERMS_ALL.IS_CURRENT_TERM"
      ],
      "duration": [
        "ACADEMIC_TERMS_ALL.TERM_END_DATE",
        "ACADEMIC_TERMS_ALL.TERM_START_DATE"
      ],
      "units": [
        "SUBJECT_SUMMARY.TOTAL_UNITS"
      ]
    },
    "join_keys": [
      [
        "ACADEMIC_TERMS_ALL.TERM_CODE",
        "SUBJECT_SUMMARY.TERM_CODE"
      ],
      [
        "SUBJECT_SUMMARY.SUBJECT_ID",
        "SUBJECT_OFFERED.SUBJECT_ID"
      ]
    ],
    "original_sql": "SELECT\n  CASE\n    WHEN LAG(assign) OVER (ORDER BY IS_CURRENT_TERM DESC, assign, OFFER_DEPT_NAME ASC) = assign\n    THEN NULL\n    ELSE assign\n  END AS assign,\n  OFFER_DEPT_NAME,\n  max_duration,\n  max_units,\n  avg_dur,\n  avg_unit\nFROM (\n  SELECT\n    CASE\n      WHEN GROUPING(OFFER_DEPT_NAME) = 1 AND GROUPING(IS_CURRENT_TERM) = 0\n      THEN 'SUBTOTAL'\n      WHEN GROUPING(OFFER_DEPT_NAME) = 1 AND GROUPING(IS_CURRENT_TERM) = 1\n      THEN 'TOTAL'\n      ELSE CASE WHEN IS_CURRENT_TERM = 'Y' THEN 'CURRENT' ELSE 'NON-CURRENT' END\n    END AS assign,\n    IS_CURRENT_TERM,\n    OFFER_DEPT_NAME,\n    MAX(\n      DATEDIFF(STR_TO_DATE(term_end_date, '%d-%b-%y'), STR_TO_DATE(term_start_date, '%d-%b-%y'))\n    ) AS max_duration,\n    MAX(TOTAL_UNITS) AS max_units,\n    AVG(\n      DATEDIFF(STR_TO_DATE(term_end_date, '%d-%b-%y'), STR_TO_DATE(term_start_date, '%d-%b-%y'))\n    ) AS avg_dur,\n    AVG(TOTAL_UNITS) AS avg_unit\n  FROM SUBJECT_SUMMARY AS ss\n  JOIN ACADEMIC_TERMS_ALL AS ata\n    ON ata.TERM_CODE = ss.TERM_CODE\n  JOIN SUBJECT_OFFERED AS so\n    ON so.SUBJECT_ID = ss.SUBJECT_ID\n  WHERE\n    so.offer_dept_name IN ('Chemistry', 'Biology')\n  GROUP BY\n    IS_CURRENT_TERM,\n    OFFER_DEPT_NAME\n    WITH ROLLUP\n  ORDER BY\n    IS_CURRENT_TERM DESC,\n    assign,\n    OFFER_DEPT_NAME ASC\n) AS tbltmp",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 34,
        "query_nested_count": 1,
        "query_aggregate_count": 9,
        "query_sort_count": 6,
        "query_window_func_count": 1,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "907ef3d18176",
    "question": "Group master courses by department. For each group, state the name of the department, the master course code, the number of subjects, the total new shelf price of associated TIP materials, and the number of unique TIP materials. Display the department and master course only if it differs from the previous entry. Include subtotals for each department and a grand total across all departments. All numerical values should be rounded to integers and formatted using commas as thousands separators.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  CASE\n    WHEN LAG(dept) OVER (ORDER BY dept, dept_sort, master) = dept\n    THEN NULL\n    ELSE dept\n  END AS dept,\n  CASE WHEN master = 'zzz' THEN NULL ELSE master END AS master,\n  subcnt,\n  totalprice,\n  matcnt\nFROM (\n  SELECT\n    CASE\n      WHEN GROUPING(OFFER_DEPT_NAME) = 1 AND GROUPING(MASTER_COURSE_NUMBER) = 1\n      THEN 'zzz'\n      ELSE OFFER_DEPT_NAME\n    END AS dept_sort,\n    CASE\n      WHEN GROUPING(OFFER_DEPT_NAME) = 0 AND GROUPING(MASTER_COURSE_NUMBER) = 1\n      THEN 'SUBTOTAL'\n      WHEN GROUPING(OFFER_DEPT_NAME) = 1 AND GROUPING(MASTER_COURSE_NUMBER) = 1\n      THEN 'TOTAL'\n      ELSE OFFER_DEPT_NAME\n    END AS dept,\n    CASE\n      WHEN GROUPING(OFFER_DEPT_NAME) = 0 AND GROUPING(MASTER_COURSE_NUMBER) = 1\n      THEN 'zzz'\n      ELSE MASTER_COURSE_NUMBER\n    END AS master,\n    FORMAT(COUNT(DISTINCT tso.SUBJECT_ID), 0) AS subcnt,\n    FORMAT(SUM(NEW_SHELF_PRICE), 0) AS totalprice,\n    FORMAT(COUNT(DISTINCT tm.ISBN), 0) AS matcnt\n  FROM TIP_DETAIL AS td\n  JOIN TIP_SUBJECT_OFFERED AS tso\n    ON tso.TIP_SUBJECT_OFFERED_KEY = td.TIP_SUBJECT_OFFERED_KEY\n  JOIN TIP_MATERIAL AS tm\n    ON tm.TIP_MATERIAL_KEY = td.TIP_MATERIAL_KEY\n  GROUP BY\n    OFFER_DEPT_NAME,\n    MASTER_COURSE_NUMBER\n    WITH ROLLUP\n  ORDER BY\n    dept_sort,\n    master\n) AS tbltmp"
    ],
    "oracle_sql": "SELECT CASE WHEN LAG(dept) OVER (ORDER BY dept, dept_sort, master) = dept THEN NULL ELSE dept END AS dept, CASE WHEN master = 'zzz' THEN NULL ELSE master END AS master, subcnt, totalprice, matcnt FROM ( SELECT CASE WHEN GROUPING(OFFER_DEPT_NAME) = 1 AND GROUPING(MASTER_COURSE_NUMBER) = 1 THEN 'zzz' ELSE OFFER_DEPT_NAME END AS dept_sort, CASE WHEN GROUPING(OFFER_DEPT_NAME) = 0 AND GROUPING(MASTER_COURSE_NUMBER) = 1 THEN 'SUBTOTAL' WHEN GROUPING(OFFER_DEPT_NAME) = 1 AND GROUPING(MASTER_COURSE_NUMBER) = 1 THEN 'TOTAL' ELSE OFFER_DEPT_NAME END AS dept, CASE WHEN GROUPING(OFFER_DEPT_NAME) = 0 AND GROUPING(MASTER_COURSE_NUMBER) = 1 THEN 'zzz' ELSE MASTER_COURSE_NUMBER END AS master, TO_CHAR(COUNT(distinct tso.SUBJECT_ID), '999,999,999') AS subcnt, TO_CHAR(SUM(NEW_SHELF_PRICE), '999,999,999') AS totalprice, TO_CHAR(COUNT(DISTINCT tm.ISBN), '999,999,999') AS matcnt FROM TIP_DETAIL td JOIN TIP_SUBJECT_OFFERED tso ON tso.TIP_SUBJECT_OFFERED_KEY = td. TIP_SUBJECT_OFFERED_KEY JOIN TIP_MATERIAL tm ON tm.TIP_MATERIAL_KEY = td.TIP_MATERIAL_KEY GROUP BY ROLLUP(OFFER_DEPT_NAME, MASTER_COURSE_NUMBER) ORDER BY dept_sort, master ) tbltmp",
    "gold_tables": [
      "dw#sep#TIP_DETAIL",
      "dw#sep#TIP_SUBJECT_OFFERED",
      "dw#sep#TIP_MATERIAL"
    ],
    "mapping": {
      "name of the department": [
        "TIP_SUBJECT_OFFERED.OFFER_DEPT_NAME"
      ],
      "master course code": [
        "TIP_SUBJECT_OFFERED.MASTER_COURSE_NUMBER"
      ],
      "subjects": [
        "TIP_SUBJECT_OFFERED.SUBJECT_ID"
      ],
      "new shelf price": [
        "TIP_MATERIAL.NEW_SHELF_PRICE"
      ],
      "TIP materials": [
        "TIP_MATERIAL.ISBN"
      ]
    },
    "join_keys": [
      [
        "TIP_DETAIL.TIP_MATERIAL_KEY",
        "TIP_MATERIAL.TIP_MATERIAL_KEY"
      ]
    ],
    "original_sql": "SELECT\n  CASE\n    WHEN LAG(dept) OVER (ORDER BY dept, dept_sort, master) = dept\n    THEN NULL\n    ELSE dept\n  END AS dept,\n  CASE WHEN master = 'zzz' THEN NULL ELSE master END AS master,\n  subcnt,\n  totalprice,\n  matcnt\nFROM (\n  SELECT\n    CASE\n      WHEN GROUPING(OFFER_DEPT_NAME) = 1 AND GROUPING(MASTER_COURSE_NUMBER) = 1\n      THEN 'zzz'\n      ELSE OFFER_DEPT_NAME\n    END AS dept_sort,\n    CASE\n      WHEN GROUPING(OFFER_DEPT_NAME) = 0 AND GROUPING(MASTER_COURSE_NUMBER) = 1\n      THEN 'SUBTOTAL'\n      WHEN GROUPING(OFFER_DEPT_NAME) = 1 AND GROUPING(MASTER_COURSE_NUMBER) = 1\n      THEN 'TOTAL'\n      ELSE OFFER_DEPT_NAME\n    END AS dept,\n    CASE\n      WHEN GROUPING(OFFER_DEPT_NAME) = 0 AND GROUPING(MASTER_COURSE_NUMBER) = 1\n      THEN 'zzz'\n      ELSE MASTER_COURSE_NUMBER\n    END AS master,\n    FORMAT(COUNT(DISTINCT tso.SUBJECT_ID), 0) AS subcnt,\n    FORMAT(SUM(NEW_SHELF_PRICE), 0) AS totalprice,\n    FORMAT(COUNT(DISTINCT tm.ISBN), 0) AS matcnt\n  FROM TIP_DETAIL AS td\n  JOIN TIP_SUBJECT_OFFERED AS tso\n    ON tso.TIP_SUBJECT_OFFERED_KEY = td.TIP_SUBJECT_OFFERED_KEY\n  JOIN TIP_MATERIAL AS tm\n    ON tm.TIP_MATERIAL_KEY = td.TIP_MATERIAL_KEY\n  GROUP BY\n    OFFER_DEPT_NAME,\n    MASTER_COURSE_NUMBER\n    WITH ROLLUP\n  ORDER BY\n    dept_sort,\n    master\n) AS tbltmp",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 33,
        "query_nested_count": 1,
        "query_aggregate_count": 12,
        "query_sort_count": 5,
        "query_window_func_count": 1,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "ae13161e245b",
    "question": "For each term and department, list the term, department, the number of courses, average number of equivalent subjects, the school name, and department phone number. Include subtotals for each term (the corresponding term field is 'SUBTOTAL') and a grand total across all terms (the corresponding term field is 'TOTAL'). Do not repeat the term if it is the same as the previous row. Sort the table by term and department.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  CASE\n    WHEN LAG(term) OVER (ORDER BY term_sort, term, dept_sort) = term\n    THEN NULL\n    ELSE term\n  END AS term,\n  dept,\n  subcnt,\n  avgeqisub,\n  sd.SCHOOL_NAME AS school_name,\n  ad.DEPARTMENT_PHONE_NUMBER AS department_phone\nFROM (\n  SELECT\n    CASE\n      WHEN GROUPING(TERM_CODE) = 1 AND GROUPING(DEPARTMENT_NAME) = 1\n      THEN 'zzz'\n      ELSE TERM_CODE\n    END AS term_sort,\n    CASE\n      WHEN GROUPING(TERM_CODE) = 0 AND GROUPING(DEPARTMENT_NAME) = 1\n      THEN 'SUBTOTAL'\n      WHEN GROUPING(TERM_CODE) = 1 AND GROUPING(DEPARTMENT_NAME) = 1\n      THEN 'TOTAL'\n      ELSE TERM_CODE\n    END AS term,\n    CASE\n      WHEN GROUPING(TERM_CODE) = 0 AND GROUPING(DEPARTMENT_NAME) = 1\n      THEN 'zzz'\n      ELSE DEPARTMENT_NAME\n    END AS dept_sort,\n    DEPARTMENT_NAME AS dept,\n    COUNT(DISTINCT SUBJECT_ID) AS subcnt,\n    MIN(MEET_TIME) AS mintime,\n    AVG(\n      CASE\n        WHEN equivalent_subjects IS NULL\n        THEN 0\n        ELSE 1 + LENGTH(equivalent_subjects) - LENGTH(REPLACE(equivalent_subjects, ',', ''))\n      END\n    ) AS avgeqisub\n  FROM COURSE_CATALOG_SUBJECT_OFFERED\n  GROUP BY\n    TERM_CODE,\n    DEPARTMENT_NAME\n    WITH ROLLUP\n) AS tbltmp\nLEFT JOIN SIS_DEPARTMENT AS sd\n  ON tbltmp.dept = sd.DEPARTMENT_NAME\nLEFT JOIN SIS_ADMIN_DEPARTMENT AS ad\n  ON sd.DEPARTMENT_CODE = ad.SIS_ADMIN_DEPARTMENT_CODE\nORDER BY\n  term_sort,\n  dept_sort"
    ],
    "oracle_sql": "SELECT CASE WHEN LAG(term) OVER (ORDER BY term_sort, term, dept_sort) = term THEN NULL ELSE term END AS term, dept, subcnt, avgeqisub, sd.SCHOOL_NAME AS school_name, ad.DEPARTMENT_PHONE_NUMBER AS department_phone FROM ( SELECT CASE WHEN GROUPING(TERM_CODE) = 1 AND GROUPING(DEPARTMENT_NAME) = 1 THEN 'zzz' ELSE TERM_CODE END AS term_sort, CASE WHEN GROUPING(TERM_CODE) = 0 AND GROUPING(DEPARTMENT_NAME) = 1 THEN 'SUBTOTAL' WHEN GROUPING(TERM_CODE) = 1 AND GROUPING(DEPARTMENT_NAME) = 1 THEN 'TOTAL' ELSE TERM_CODE END AS term, CASE WHEN GROUPING(TERM_CODE) = 0 AND GROUPING(DEPARTMENT_NAME) = 1 THEN 'zzz' ELSE DEPARTMENT_NAME END AS dept_sort, DEPARTMENT_NAME AS dept, COUNT(DISTINCT SUBJECT_ID) AS subcnt, MIN(MEET_TIME) AS mintime, AVG(CASE WHEN equivalent_subjects IS NULL THEN 0 ELSE 1 + LENGTH(equivalent_subjects) - LENGTH(REPLACE(equivalent_subjects, ',', '')) END) AS avgeqisub FROM COURSE_CATALOG_SUBJECT_OFFERED GROUP BY ROLLUP(TERM_CODE, DEPARTMENT_NAME) ) tbltmp LEFT JOIN SIS_DEPARTMENT sd ON tbltmp.dept = sd.DEPARTMENT_NAME LEFT JOIN SIS_ADMIN_DEPARTMENT ad ON sd.DEPARTMENT_CODE = ad.SIS_ADMIN_DEPARTMENT_CODE ORDER BY term_sort, dept_sort;",
    "gold_tables": [
      "dw#sep#COURSE_CATALOG_SUBJECT_OFFERED",
      "dw#sep#SIS_DEPARTMENT",
      "dw#sep#SIS_ADMIN_DEPARTMENT"
    ],
    "mapping": {
      "term": [
        "COURSE_CATALOG_SUBJECT_OFFERED.TERM_CODE"
      ],
      "department": [
        "COURSE_CATALOG_SUBJECT_OFFERED.DEPARTMENT_NAME"
      ],
      "courses": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_ID"
      ],
      "equivalent subjects": [
        "COURSE_CATALOG_SUBJECT_OFFERED.EQUIVALENT_SUBJECTS"
      ],
      "school name": [
        "SIS_DEPARTMENT.SCHOOL_NAME"
      ],
      "department phone number": [
        "SIS_ADMIN_DEPARTMENT.DEPARTMENT_PHONE_NUMBER"
      ]
    },
    "join_keys": [
      [
        "SIS_ADMIN_DEPARTMENT.SIS_ADMIN_DEPARTMENT_CODE",
        "SIS_DEPARTMENT.DEPARTMENT_CODE"
      ]
    ],
    "original_sql": "SELECT\n  CASE\n    WHEN LAG(term) OVER (ORDER BY term_sort, term, dept_sort) = term\n    THEN NULL\n    ELSE term\n  END AS term,\n  dept,\n  subcnt,\n  avgeqisub,\n  sd.SCHOOL_NAME AS school_name,\n  ad.DEPARTMENT_PHONE_NUMBER AS department_phone\nFROM (\n  SELECT\n    CASE\n      WHEN GROUPING(TERM_CODE) = 1 AND GROUPING(DEPARTMENT_NAME) = 1\n      THEN 'zzz'\n      ELSE TERM_CODE\n    END AS term_sort,\n    CASE\n      WHEN GROUPING(TERM_CODE) = 0 AND GROUPING(DEPARTMENT_NAME) = 1\n      THEN 'SUBTOTAL'\n      WHEN GROUPING(TERM_CODE) = 1 AND GROUPING(DEPARTMENT_NAME) = 1\n      THEN 'TOTAL'\n      ELSE TERM_CODE\n    END AS term,\n    CASE\n      WHEN GROUPING(TERM_CODE) = 0 AND GROUPING(DEPARTMENT_NAME) = 1\n      THEN 'zzz'\n      ELSE DEPARTMENT_NAME\n    END AS dept_sort,\n    DEPARTMENT_NAME AS dept,\n    COUNT(DISTINCT SUBJECT_ID) AS subcnt,\n    MIN(MEET_TIME) AS mintime,\n    AVG(\n      CASE\n        WHEN equivalent_subjects IS NULL\n        THEN 0\n        ELSE 1 + LENGTH(equivalent_subjects) - LENGTH(REPLACE(equivalent_subjects, ',', ''))\n      END\n    ) AS avgeqisub\n  FROM COURSE_CATALOG_SUBJECT_OFFERED\n  GROUP BY\n    TERM_CODE,\n    DEPARTMENT_NAME\n    WITH ROLLUP\n) AS tbltmp\nLEFT JOIN SIS_DEPARTMENT AS sd\n  ON tbltmp.dept = sd.DEPARTMENT_NAME\nLEFT JOIN SIS_ADMIN_DEPARTMENT AS ad\n  ON sd.DEPARTMENT_CODE = ad.SIS_ADMIN_DEPARTMENT_CODE\nORDER BY\n  term_sort,\n  dept_sort",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 36,
        "query_nested_count": 1,
        "query_aggregate_count": 12,
        "query_sort_count": 5,
        "query_window_func_count": 1,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "83928817fcbe",
    "question": "Group sessions by their current term status. For each group, state the status ('CURRENT' if is current term and 'NOT CURRENT' otherwise), name of the session, number of IAP sessions, total IAP session time in days, and average IAP session time in days. Show a subtotal for each current status and a grand total row across all status. Order the results by current status and cluster type. Display the the current status only if it differs from the previous entry.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  CASE WHEN LAG(assign) OVER (ORDER BY assign) = assign THEN NULL ELSE assign END AS assign,\n  muse,\n  session_count,\n  total_time,\n  avg_time\nFROM (\n  SELECT\n    CASE\n      WHEN IS_CURRENT_TERM IS NULL AND NOT IAP_CATEGORY_NAME IS NULL\n      THEN 'SUBTOTAL'\n      WHEN IS_CURRENT_TERM IS NULL AND IAP_CATEGORY_NAME IS NULL\n      THEN 'TOTAL'\n      ELSE CASE WHEN IS_CURRENT_TERM = 'Y' THEN 'CURRENT' ELSE 'NOT CURRENT' END\n    END AS assign,\n    IAP_CATEGORY_NAME AS muse,\n    COUNT(SESSION_DATE) AS session_count,\n    SUM(\n      COALESCE(\n        TIMESTAMPDIFF(\n          HOUR,\n          STR_TO_DATE(\n            CONCAT(\n              LEFT(SESSION_START_TIME, 2),\n              ':',\n              SUBSTRING(SESSION_START_TIME, 3, 2),\n              ' ',\n              RIGHT(SESSION_START_TIME, 2)\n            ),\n            '%h:%i %p'\n          ),\n          STR_TO_DATE(\n            CONCAT(\n              LEFT(SESSION_END_TIME, 2),\n              ':',\n              SUBSTRING(SESSION_END_TIME, 3, 2),\n              ' ',\n              RIGHT(SESSION_END_TIME, 2)\n            ),\n            '%h:%i %p'\n          )\n        ) / 24.0,\n        0\n      )\n    ) AS total_time,\n    AVG(\n      COALESCE(\n        TIMESTAMPDIFF(\n          HOUR,\n          STR_TO_DATE(\n            CONCAT(\n              LEFT(SESSION_START_TIME, 2),\n              ':',\n              SUBSTRING(SESSION_START_TIME, 3, 2),\n              ' ',\n              RIGHT(SESSION_START_TIME, 2)\n            ),\n            '%h:%i %p'\n          ),\n          STR_TO_DATE(\n            CONCAT(\n              LEFT(SESSION_END_TIME, 2),\n              ':',\n              SUBSTRING(SESSION_END_TIME, 3, 2),\n              ' ',\n              RIGHT(SESSION_END_TIME, 2)\n            ),\n            '%h:%i %p'\n          )\n        ) / 24.0,\n        0\n      )\n    ) AS avg_time\n  FROM IAP_SUBJECT_DETAIL AS ss\n  JOIN ACADEMIC_TERMS AS at\n    ON at.TERM_CODE = ss.TERM_CODE\n  JOIN IAP_SUBJECT_SESSION AS iss\n    ON iss.IAP_SUBJECT_SESSION_KEY = ss.IAP_SUBJECT_SESSION_KEY\n  JOIN IAP_SUBJECT_CATEGORY AS isc\n    ON isc.IAP_SUBJECT_CATEGORY_KEY = ss.IAP_SUBJECT_CATEGORY_KEY\n  GROUP BY\n    IS_CURRENT_TERM,\n    IAP_CATEGORY_NAME\n    WITH ROLLUP\n  HAVING\n    NOT IS_CURRENT_TERM IS NULL OR NOT IAP_CATEGORY_NAME IS NULL\n) AS tbltmp\nORDER BY\n  assign,\n  muse"
    ],
    "oracle_sql": "SELECT CASE WHEN LAG(assign) OVER (ORDER BY assign) = assign THEN NULL ELSE assign END AS assign, muse, session_count, total_time, avg_time FROM (SELECT CASE WHEN GROUPING(IAP_CATEGORY_NAME) = 1 AND GROUPING(IS_CURRENT_TERM) = 0 THEN 'SUBTOTAL' WHEN GROUPING(IAP_CATEGORY_NAME) = 1 AND GROUPING(IAP_CATEGORY_NAME) = 1 THEN 'TOTAL' ELSE CASE WHEN IS_CURRENT_TERM = 'Y' THEN 'CURRENT' ELSE 'NOT CURRENT' END END AS assign, IAP_CATEGORY_NAME AS muse, COUNT(SESSION_DATE) AS session_count, SUM(COALESCE(TO_DATE(SESSION_END_TIME, 'HHMIPM') - TO_DATE(SESSION_START_TIME, 'HHMIPM'), 0)) AS total_time, AVG(COALESCE(TO_DATE(SESSION_END_TIME, 'HHMIPM') - TO_DATE(SESSION_START_TIME, 'HHMIPM'), 0)) AS avg_time FROM IAP_SUBJECT_DETAIL ss JOIN ACADEMIC_TERMS at ON at.TERM_CODE = ss.TERM_CODE JOIN IAP_SUBJECT_SESSION iss ON iss.IAP_SUBJECT_SESSION_KEY =ss.IAP_SUBJECT_SESSION_KEY JOIN IAP_SUBJECT_CATEGORY isc ON isc.IAP_SUBJECT_CATEGORY_KEY=ss.IAP_SUBJECT_CATEGORY_KEY GROUP BY ROLLUP(IS_CURRENT_TERM, IAP_CATEGORY_NAME) ORDER BY assign, muse) tbltmp",
    "gold_tables": [
      "dw#sep#IAP_SUBJECT_DETAIL",
      "dw#sep#ACADEMIC_TERMS",
      "dw#sep#IAP_SUBJECT_SESSION",
      "dw#sep#IAP_SUBJECT_CATEGORY"
    ],
    "mapping": {
      "current term status": [
        "ACADEMIC_TERMS.IS_CURRENT_TERM"
      ],
      "name of the session": [
        "IAP_SUBJECT_CATEGORY.IAP_CATEGORY_NAME"
      ],
      "IAP sessions": [
        "IAP_SUBJECT_SESSION.SESSION_DATE"
      ],
      "session time": [
        "IAP_SUBJECT_SESSION.SESSION_START_TIME",
        "IAP_SUBJECT_SESSION.SESSION_END_TIME"
      ]
    },
    "join_keys": [
      [
        "IAP_SUBJECT_DETAIL.TERM_CODE",
        "ACADEMIC_TERMS.TERM_CODE"
      ],
      [
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_SESSION_KEY",
        "IAP_SUBJECT_SESSION.IAP_SUBJECT_SESSION_KEY"
      ],
      [
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_CATEGORY_KEY",
        "IAP_SUBJECT_CATEGORY.IAP_SUBJECT_CATEGORY_KEY"
      ]
    ],
    "original_sql": "SELECT\n  CASE WHEN LAG(assign) OVER (ORDER BY assign) = assign THEN NULL ELSE assign END AS assign,\n  muse,\n  session_count,\n  total_time,\n  avg_time\nFROM (\n  SELECT\n    CASE\n      WHEN IS_CURRENT_TERM IS NULL AND NOT IAP_CATEGORY_NAME IS NULL\n      THEN 'SUBTOTAL'\n      WHEN IS_CURRENT_TERM IS NULL AND IAP_CATEGORY_NAME IS NULL\n      THEN 'TOTAL'\n      ELSE CASE WHEN IS_CURRENT_TERM = 'Y' THEN 'CURRENT' ELSE 'NOT CURRENT' END\n    END AS assign,\n    IAP_CATEGORY_NAME AS muse,\n    COUNT(SESSION_DATE) AS session_count,\n    SUM(\n      COALESCE(\n        TIMESTAMPDIFF(\n          HOUR,\n          STR_TO_DATE(\n            CONCAT(\n              LEFT(SESSION_START_TIME, 2),\n              ':',\n              SUBSTRING(SESSION_START_TIME, 3, 2),\n              ' ',\n              RIGHT(SESSION_START_TIME, 2)\n            ),\n            '%h:%i %p'\n          ),\n          STR_TO_DATE(\n            CONCAT(\n              LEFT(SESSION_END_TIME, 2),\n              ':',\n              SUBSTRING(SESSION_END_TIME, 3, 2),\n              ' ',\n              RIGHT(SESSION_END_TIME, 2)\n            ),\n            '%h:%i %p'\n          )\n        ) / 24.0,\n        0\n      )\n    ) AS total_time,\n    AVG(\n      COALESCE(\n        TIMESTAMPDIFF(\n          HOUR,\n          STR_TO_DATE(\n            CONCAT(\n              LEFT(SESSION_START_TIME, 2),\n              ':',\n              SUBSTRING(SESSION_START_TIME, 3, 2),\n              ' ',\n              RIGHT(SESSION_START_TIME, 2)\n            ),\n            '%h:%i %p'\n          ),\n          STR_TO_DATE(\n            CONCAT(\n              LEFT(SESSION_END_TIME, 2),\n              ':',\n              SUBSTRING(SESSION_END_TIME, 3, 2),\n              ' ',\n              RIGHT(SESSION_END_TIME, 2)\n            ),\n            '%h:%i %p'\n          )\n        ) / 24.0,\n        0\n      )\n    ) AS avg_time\n  FROM IAP_SUBJECT_DETAIL AS ss\n  JOIN ACADEMIC_TERMS AS at\n    ON at.TERM_CODE = ss.TERM_CODE\n  JOIN IAP_SUBJECT_SESSION AS iss\n    ON iss.IAP_SUBJECT_SESSION_KEY = ss.IAP_SUBJECT_SESSION_KEY\n  JOIN IAP_SUBJECT_CATEGORY AS isc\n    ON isc.IAP_SUBJECT_CATEGORY_KEY = ss.IAP_SUBJECT_CATEGORY_KEY\n  GROUP BY\n    IS_CURRENT_TERM,\n    IAP_CATEGORY_NAME\n    WITH ROLLUP\n  HAVING\n    NOT IS_CURRENT_TERM IS NULL OR NOT IAP_CATEGORY_NAME IS NULL\n) AS tbltmp\nORDER BY\n  assign,\n  muse",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 39,
        "query_nested_count": 1,
        "query_aggregate_count": 4,
        "query_sort_count": 3,
        "query_window_func_count": 1,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "769f22255704",
    "question": "List each academic year, the term code, and the number of newly introduced subjects in this term. Display the academic year only if it differs from the previous entry. Include a grand total (the corresponding year field should be 'TOTAL') stating the total number of subjects across all academic years.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  CASE\n    WHEN LAG(ACADEMIC_YEAR) OVER (ORDER BY ata.TERM_CODE) = ACADEMIC_YEAR\n    THEN NULL\n    ELSE ACADEMIC_YEAR\n  END AS ACADEMIC_YEAR,\n  ata.TERM_CODE,\n  COUNT(DISTINCT si) AS distinct_subject_count\nFROM ACADEMIC_TERMS_ALL AS ata\nLEFT OUTER JOIN (\n  SELECT\n    CASE\n      WHEN LAG(subject_id) OVER (ORDER BY SUBJECT_ID, TERM_CODE ASC, ACADEMIC_YEAR ASC) = subject_id\n      THEN NULL\n      ELSE subject_id\n    END AS si,\n    CASE\n      WHEN LAG(TERM_CODE) OVER (ORDER BY SUBJECT_ID, TERM_CODE ASC, ACADEMIC_YEAR ASC) = TERM_CODE\n      THEN NULL\n      ELSE term_code\n    END AS term_code\n  FROM COURSE_CATALOG_SUBJECT_OFFERED\n) AS a\n  ON ata.TERM_CODE = a.TERM_CODE\nGROUP BY\n  ata.TERM_CODE,\n  ACADEMIC_YEAR\nUNION ALL\nSELECT\n  'TOTAL',\n  NULL,\n  COUNT(DISTINCT SUBJECT_ID) AS total_distinct_subject_count\nFROM COURSE_CATALOG_SUBJECT_OFFERED"
    ],
    "oracle_sql": "select CASE WHEN Lag(ACADEMIC_YEAR)over (order by ata.TERM_CODE) =ACADEMIC_YEAR THEN NULL ELSE ACADEMIC_YEAR end AS ACADEMIC_YEAR,ata.TERM_CODE, COUNT(distinct si) from ACADEMIC_TERMS_ALL ata LEFT OUTER JOIN (select * from (select CASE WHEN LAG(subject_id) over(ORDER BY SUBJECT_ID, TERM_CODE ASC, ACADEMIC_YEAR ASC) = subject_id then NULL else subject_id end as si, case when LAG(TERM_CODE) over (ORDER BY SUBJECT_ID, TERM_CODE ASC, ACADEMIC_YEAR ASC) =TERM_CODE then null else term_code end as term_code from course_catalog_subject_offered) where si is not null) a ON ata.TERM_CODE=a.TERM_CODE GROUP BY ata.TERM_CODE, ACADEMIC_YEAR UNION ALL SELECT 'TOTAL', NULL, COUNT(DISTINCT SUBJECT_ID) FROM COURSE_CATALOG_SUBJECT_OFFERED",
    "gold_tables": [
      "dw#sep#ACADEMIC_TERMS_ALL",
      "dw#sep#COURSE_CATALOG_SUBJECT_OFFERED"
    ],
    "mapping": {
      "academic year": [
        "ACADEMIC_TERMS_ALL.ACADEMIC_YEAR"
      ],
      "term code": [
        "ACADEMIC_TERMS_ALL.TERM_CODE"
      ],
      "subjects": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_ID"
      ]
    },
    "join_keys": [],
    "original_sql": "SELECT\n  CASE\n    WHEN LAG(ACADEMIC_YEAR) OVER (ORDER BY ata.TERM_CODE) = ACADEMIC_YEAR\n    THEN NULL\n    ELSE ACADEMIC_YEAR\n  END AS ACADEMIC_YEAR,\n  ata.TERM_CODE,\n  COUNT(DISTINCT si) AS distinct_subject_count\nFROM ACADEMIC_TERMS_ALL AS ata\nLEFT OUTER JOIN (\n  SELECT\n    CASE\n      WHEN LAG(subject_id) OVER (ORDER BY SUBJECT_ID, TERM_CODE ASC, ACADEMIC_YEAR ASC) = subject_id\n      THEN NULL\n      ELSE subject_id\n    END AS si,\n    CASE\n      WHEN LAG(TERM_CODE) OVER (ORDER BY SUBJECT_ID, TERM_CODE ASC, ACADEMIC_YEAR ASC) = TERM_CODE\n      THEN NULL\n      ELSE term_code\n    END AS term_code\n  FROM COURSE_CATALOG_SUBJECT_OFFERED\n) AS a\n  ON ata.TERM_CODE = a.TERM_CODE\nGROUP BY\n  ata.TERM_CODE,\n  ACADEMIC_YEAR\nUNION ALL\nSELECT\n  'TOTAL',\n  NULL,\n  COUNT(DISTINCT SUBJECT_ID) AS total_distinct_subject_count\nFROM COURSE_CATALOG_SUBJECT_OFFERED",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 23,
        "query_nested_count": 2,
        "query_aggregate_count": 5,
        "query_sort_count": 7,
        "query_window_func_count": 3,
        "query_join_count": 1
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting",
        "has_window_function"
      ]
    }
  },
  {
    "id": "84f73385c02f",
    "question": "For email lists with names starting with e (case insensitive), containing 10 to 20 members inclusive, and where over 75% are computer science students, provide the list name, owner, and member count.",
    "db_id": "dw",
    "sql": [
      "WITH FilteredLists AS (\n  SELECT\n    ml.MOIRA_LIST_NAME,\n    mlo.OWNER,\n    COUNT(mld.MOIRA_LIST_MEMBER) AS TOTAL_MEMBER_COUNT\n  FROM MOIRA_LIST AS ml\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  JOIN MOIRA_LIST_OWNER AS mlo\n    ON mld.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY\n  WHERE\n    UPPER(ml.MOIRA_LIST_NAME) LIKE 'E%'\n  GROUP BY\n    ml.MOIRA_LIST_NAME,\n    mlo.OWNER\n  HAVING\n    COUNT(mld.MOIRA_LIST_MEMBER) BETWEEN 10 AND 20\n), CSStudentCounts AS (\n  SELECT\n    ml.MOIRA_LIST_NAME,\n    COUNT(CASE WHEN msd.DEPARTMENT = '6' THEN 1 ELSE NULL END) AS CS_STUDENT_COUNT\n  FROM FilteredLists AS fl\n  JOIN MOIRA_LIST AS ml\n    ON fl.MOIRA_LIST_NAME = ml.MOIRA_LIST_NAME\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  JOIN SE_PERSON AS se\n    ON UPPER(mld.MOIRA_LIST_MEMBER) = UPPER(se.KRB_NAME)\n  JOIN MIT_STUDENT_DIRECTORY AS msd\n    ON se.FULL_NAME = msd.FULL_NAME\n  GROUP BY\n    ml.MOIRA_LIST_NAME\n)\nSELECT\n  fl.MOIRA_LIST_NAME,\n  fl.OWNER,\n  fl.TOTAL_MEMBER_COUNT\nFROM FilteredLists AS fl\nJOIN CSStudentCounts AS cs\n  ON fl.MOIRA_LIST_NAME = cs.MOIRA_LIST_NAME\nWHERE\n  cs.CS_STUDENT_COUNT > 0.75 * fl.TOTAL_MEMBER_COUNT"
    ],
    "oracle_sql": "WITH FilteredLists AS (SELECT ml.MOIRA_LIST_NAME, mlo.OWNER, COUNT(mld.MOIRA_LIST_MEMBER) AS TOTAL_MEMBER_COUNT FROM MOIRA_LIST ml JOIN MOIRA_LIST_DETAIL mld ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY JOIN MOIRA_LIST_OWNER mlo ON mld.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY WHERE UPPER(ml.MOIRA_LIST_NAME) LIKE 'E%' GROUP BY ml.MOIRA_LIST_NAME, mlo.OWNER HAVING COUNT(mld.MOIRA_LIST_MEMBER) BETWEEN 10 AND 20), CSStudentCounts AS (SELECT ml.MOIRA_LIST_NAME, COUNT(CASE WHEN msd.DEPARTMENT = '6' THEN 1 ELSE NULL END) AS CS_STUDENT_COUNT FROM FilteredLists fl JOIN MOIRA_LIST ml ON fl.MOIRA_LIST_NAME = ml.MOIRA_LIST_NAME JOIN MOIRA_LIST_DETAIL mld ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY JOIN SE_PERSON se ON UPPER(mld.MOIRA_LIST_MEMBER) = UPPER(se.KRB_NAME) JOIN MIT_STUDENT_DIRECTORY msd ON se.FULL_NAME = msd.FULL_NAME GROUP BY ml.MOIRA_LIST_NAME) SELECT fl.MOIRA_LIST_NAME, fl.OWNER, fl.TOTAL_MEMBER_COUNT FROM FilteredLists fl JOIN CSStudentCounts cs ON fl.MOIRA_LIST_NAME = cs.MOIRA_LIST_NAME WHERE cs.CS_STUDENT_COUNT > 0.75 * fl.TOTAL_MEMBER_COUNT;",
    "gold_tables": [
      "dw#sep#MOIRA_LIST",
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#MOIRA_LIST_OWNER",
      "dw#sep#SE_PERSON",
      "dw#sep#MIT_STUDENT_DIRECTORY"
    ],
    "mapping": {
      "names": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "members": [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER"
      ],
      "computer science": [
        "MIT_STUDENT_DIRECTORY.DEPARTMENT"
      ],
      "owner": [
        "MOIRA_LIST_OWNER.OWNER"
      ]
    },
    "join_keys": [
      [
        "SE_PERSON.FULL_NAME",
        "MIT_STUDENT_DIRECTORY.FULL_NAME"
      ],
      [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER",
        "SE_PERSON.KRB_NAME"
      ],
      [
        "MOIRA_LIST.MOIRA_LIST_KEY",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY"
      ],
      [
        "MOIRA_LIST_OWNER.MOIRA_LIST_OWNER_KEY",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_OWNER_KEY"
      ]
    ],
    "original_sql": "WITH FilteredLists AS (\n  SELECT\n    ml.MOIRA_LIST_NAME,\n    mlo.OWNER,\n    COUNT(mld.MOIRA_LIST_MEMBER) AS TOTAL_MEMBER_COUNT\n  FROM MOIRA_LIST AS ml\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  JOIN MOIRA_LIST_OWNER AS mlo\n    ON mld.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY\n  WHERE\n    UPPER(ml.MOIRA_LIST_NAME) LIKE 'E%'\n  GROUP BY\n    ml.MOIRA_LIST_NAME,\n    mlo.OWNER\n  HAVING\n    COUNT(mld.MOIRA_LIST_MEMBER) BETWEEN 10 AND 20\n), CSStudentCounts AS (\n  SELECT\n    ml.MOIRA_LIST_NAME,\n    COUNT(CASE WHEN msd.DEPARTMENT = '6' THEN 1 ELSE NULL END) AS CS_STUDENT_COUNT\n  FROM FilteredLists AS fl\n  JOIN MOIRA_LIST AS ml\n    ON fl.MOIRA_LIST_NAME = ml.MOIRA_LIST_NAME\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  JOIN SE_PERSON AS se\n    ON UPPER(mld.MOIRA_LIST_MEMBER) = UPPER(se.KRB_NAME)\n  JOIN MIT_STUDENT_DIRECTORY AS msd\n    ON se.FULL_NAME = msd.FULL_NAME\n  GROUP BY\n    ml.MOIRA_LIST_NAME\n)\nSELECT\n  fl.MOIRA_LIST_NAME,\n  fl.OWNER,\n  fl.TOTAL_MEMBER_COUNT\nFROM FilteredLists AS fl\nJOIN CSStudentCounts AS cs\n  ON fl.MOIRA_LIST_NAME = cs.MOIRA_LIST_NAME\nWHERE\n  cs.CS_STUDENT_COUNT > 0.75 * fl.TOTAL_MEMBER_COUNT",
    "meta": {
      "features": {
        "query_table_count": 10,
        "query_column_count": 29,
        "query_nested_count": 2,
        "query_aggregate_count": 3,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 7
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "1a12dddc78cf",
    "question": "For students with last names starting with K, list their names, the phone numbers of departments they belong to, total number of mailing lists each student is in, and the average size of the mailing lists each student is in.",
    "db_id": "dw",
    "sql": [
      "WITH MailingListSizes AS (\n  SELECT\n    ml.MOIRA_LIST_KEY,\n    ml.MOIRA_LIST_NAME,\n    COUNT(mld.MOIRA_LIST_MEMBER) AS List_Size\n  FROM MOIRA_LIST AS ml\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  GROUP BY\n    ml.MOIRA_LIST_KEY,\n    ml.MOIRA_LIST_NAME\n)\nSELECT\n  msd.FULL_NAME AS Student_Name,\n  sad.DEPARTMENT_PHONE_NUMBER,\n  COUNT(ml.MOIRA_LIST_KEY) AS Total_Lists,\n  AVG(MLS.List_Size) AS Avg_List_Size\nFROM MIT_STUDENT_DIRECTORY AS msd\nJOIN SIS_DEPARTMENT AS sd\n  ON msd.DEPARTMENT = sd.DEPARTMENT_CODE\nJOIN SIS_ADMIN_DEPARTMENT AS sad\n  ON sd.DEPARTMENT_CODE = sad.SIS_ADMIN_DEPARTMENT_CODE\nJOIN SE_PERSON AS se\n  ON msd.FULL_NAME = se.FULL_NAME\nJOIN MOIRA_LIST_DETAIL AS mld\n  ON UPPER(se.KRB_NAME) = UPPER(mld.MOIRA_LIST_MEMBER)\nJOIN MOIRA_LIST AS ml\n  ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY\nJOIN MailingListSizes AS MLS\n  ON ml.MOIRA_LIST_KEY = MLS.MOIRA_LIST_KEY\nWHERE\n  msd.LAST_NAME LIKE 'K%'\nGROUP BY\n  msd.FULL_NAME,\n  sad.DEPARTMENT_PHONE_NUMBER"
    ],
    "oracle_sql": "WITH MailingListSizes AS (SELECT ml.MOIRA_LIST_KEY, ml.MOIRA_LIST_NAME, COUNT(mld.MOIRA_LIST_MEMBER) AS List_Size FROM MOIRA_LIST ml JOIN MOIRA_LIST_DETAIL mld ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY GROUP BY ml.MOIRA_LIST_KEY, ml.MOIRA_LIST_NAME) SELECT msd.FULL_NAME AS Student_Name, sad.DEPARTMENT_PHONE_NUMBER, COUNT(ml.MOIRA_LIST_KEY) AS Total_Lists, AVG(MLS.List_Size) AS Avg_List_Size FROM MIT_STUDENT_DIRECTORY msd JOIN SIS_DEPARTMENT sd ON msd.DEPARTMENT = sd.DEPARTMENT_CODE JOIN SIS_ADMIN_DEPARTMENT sad ON sd.DEPARTMENT_CODE = sad.SIS_ADMIN_DEPARTMENT_CODE JOIN SE_PERSON se ON msd.FULL_NAME = se.FULL_NAME JOIN MOIRA_LIST_DETAIL mld ON upper(se.KRB_NAME) = UPPER(mld.MOIRA_LIST_MEMBER) JOIN MOIRA_LIST ml ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY JOIN MailingListSizes MLS ON ml.MOIRA_LIST_KEY = MLS.MOIRA_LIST_KEY WHERE msd.LAST_NAME LIKE 'K%' GROUP BY msd.FULL_NAME, sad.DEPARTMENT_PHONE_NUMBER;",
    "gold_tables": [
      "dw#sep#MOIRA_LIST",
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#MIT_STUDENT_DIRECTORY",
      "dw#sep#SIS_DEPARTMENT",
      "dw#sep#SIS_ADMIN_DEPARTMENT",
      "dw#sep#SE_PERSON"
    ],
    "mapping": {
      "last names": [
        "MIT_STUDENT_DIRECTORY.LAST_NAME"
      ],
      "names": [
        "MIT_STUDENT_DIRECTORY.FULL_NAME"
      ],
      "phone numbers": [
        "SIS_ADMIN_DEPARTMENT.DEPARTMENT_PHONE_NUMBER"
      ],
      "mailing lists": [
        "MOIRA_LIST.MOIRA_LIST_KEY"
      ]
    },
    "join_keys": [
      [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY",
        "MOIRA_LIST.MOIRA_LIST_KEY"
      ],
      [
        "MIT_STUDENT_DIRECTORY.DEPARTMENT",
        "SIS_DEPARTMENT.DEPARTMENT_CODE"
      ],
      [
        "SIS_DEPARTMENT.DEPARTMENT_CODE",
        "SIS_ADMIN_DEPARTMENT.SIS_ADMIN_DEPARTMENT_CODE"
      ],
      [
        "MIT_STUDENT_DIRECTORY.FULL_NAME",
        "SE_PERSON.FULL_NAME"
      ],
      [
        "MOIRA_LIST.MOIRA_LIST_KEY",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY"
      ]
    ],
    "original_sql": "WITH MailingListSizes AS (\n  SELECT\n    ml.MOIRA_LIST_KEY,\n    ml.MOIRA_LIST_NAME,\n    COUNT(mld.MOIRA_LIST_MEMBER) AS List_Size\n  FROM MOIRA_LIST AS ml\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  GROUP BY\n    ml.MOIRA_LIST_KEY,\n    ml.MOIRA_LIST_NAME\n)\nSELECT\n  msd.FULL_NAME AS Student_Name,\n  sad.DEPARTMENT_PHONE_NUMBER,\n  COUNT(ml.MOIRA_LIST_KEY) AS Total_Lists,\n  AVG(MLS.List_Size) AS Avg_List_Size\nFROM MIT_STUDENT_DIRECTORY AS msd\nJOIN SIS_DEPARTMENT AS sd\n  ON msd.DEPARTMENT = sd.DEPARTMENT_CODE\nJOIN SIS_ADMIN_DEPARTMENT AS sad\n  ON sd.DEPARTMENT_CODE = sad.SIS_ADMIN_DEPARTMENT_CODE\nJOIN SE_PERSON AS se\n  ON msd.FULL_NAME = se.FULL_NAME\nJOIN MOIRA_LIST_DETAIL AS mld\n  ON UPPER(se.KRB_NAME) = UPPER(mld.MOIRA_LIST_MEMBER)\nJOIN MOIRA_LIST AS ml\n  ON mld.MOIRA_LIST_KEY = ml.MOIRA_LIST_KEY\nJOIN MailingListSizes AS MLS\n  ON ml.MOIRA_LIST_KEY = MLS.MOIRA_LIST_KEY\nWHERE\n  msd.LAST_NAME LIKE 'K%'\nGROUP BY\n  msd.FULL_NAME,\n  sad.DEPARTMENT_PHONE_NUMBER",
    "meta": {
      "features": {
        "query_table_count": 9,
        "query_column_count": 26,
        "query_nested_count": 1,
        "query_aggregate_count": 3,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 7
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "4783775845c3",
    "question": "From the 100 email lists with the most number of subscribers, list their names, their total number of subscribers, their public status, the name of the department with the most presence in the list, and the number of students from this department in the list.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  lmc.MOIRA_LIST_NAME,\n  lmc.Member_Count,\n  lmc.IS_PUBLIC,\n  dc.DEPARTMENT_NAME AS Most_Prominent_Department,\n  dc.Student_Count\nFROM (\n  SELECT\n    ml.MOIRA_LIST_NAME,\n    ml.IS_PUBLIC,\n    COUNT(mld.MOIRA_LIST_MEMBER) AS Member_Count\n  FROM MOIRA_LIST AS ml\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  GROUP BY\n    ml.MOIRA_LIST_NAME,\n    ml.IS_PUBLIC\n) AS lmc\nLEFT JOIN (\n  SELECT\n    lmc.MOIRA_LIST_NAME,\n    lmc.DEPARTMENT_NAME,\n    lmc.Student_Count,\n    @rank := CASE WHEN @current_list = lmc.MOIRA_LIST_NAME THEN @rank + 1 ELSE 1 END AS `Rank`,\n    @current_list := lmc.MOIRA_LIST_NAME\n  FROM (\n    SELECT\n      ml.MOIRA_LIST_NAME,\n      sd.DEPARTMENT_NAME,\n      COUNT(msd.FULL_NAME) AS Student_Count\n    FROM MOIRA_LIST AS ml\n    JOIN MOIRA_LIST_DETAIL AS mld\n      ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n    JOIN SE_PERSON AS se\n      ON UPPER(mld.MOIRA_LIST_MEMBER) = UPPER(se.KRB_NAME)\n    JOIN MIT_STUDENT_DIRECTORY AS msd\n      ON msd.FULL_NAME = se.FULL_NAME\n    JOIN SIS_DEPARTMENT AS sd\n      ON msd.DEPARTMENT = sd.DEPARTMENT_CODE\n    GROUP BY\n      ml.MOIRA_LIST_NAME,\n      sd.DEPARTMENT_NAME\n  ) AS lmc\n  CROSS JOIN (\n    SELECT\n      @rank := 0,\n      @current_list := ''\n  ) AS vars\n  ORDER BY\n    lmc.MOIRA_LIST_NAME,\n    Student_Count DESC\n) AS dc\n  ON lmc.MOIRA_LIST_NAME = dc.MOIRA_LIST_NAME AND dc.`Rank` = 1\nORDER BY\n  lmc.Member_Count DESC\nLIMIT 100"
    ],
    "oracle_sql": "SELECT* FROM (WITH ListMemberCount AS ( SELECT ml.MOIRA_LIST_NAME, ml.IS_PUBLIC, COUNT(mld.MOIRA_LIST_MEMBER) AS Member_Count FROM MOIRA_LIST ml JOIN MOIRA_LIST_DETAIL mld ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY GROUP BY ml.MOIRA_LIST_NAME, ml.IS_PUBLIC ), DepartmentCounts AS ( SELECT lmc.MOIRA_LIST_NAME, sd.DEPARTMENT_NAME, COUNT(msd.FULL_NAME) AS Student_Count, ROW_NUMBER() OVER ( PARTITION BY lmc.MOIRA_LIST_NAME ORDER BY COUNT(msd.FULL_NAME) DESC ) AS Rank FROM ListMemberCount lmc JOIN MOIRA_LIST ml ON lmc.MOIRA_LIST_NAME = ml.MOIRA_LIST_NAME JOIN MOIRA_LIST_DETAIL mld ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY JOIN SE_PERSON se ON UPPER(mld.MOIRA_LIST_MEMBER) = upper(se.KRB_NAME) JOIN MIT_STUDENT_DIRECTORY msd ON msd.FULL_NAME = se.FULL_NAME JOIN SIS_DEPARTMENT sd ON msd.DEPARTMENT = sd.DEPARTMENT_CODE GROUP BY lmc.MOIRA_LIST_NAME, sd.DEPARTMENT_NAME ) SELECT lmc.MOIRA_LIST_NAME, lmc.Member_Count, lmc.IS_PUBLIC, dc.DEPARTMENT_NAME AS Most_Prominent_Department, dc.Student_Count FROM ListMemberCount lmc LEFT JOIN DepartmentCounts dc ON lmc.MOIRA_LIST_NAME = dc.MOIRA_LIST_NAME AND dc.Rank = 1 ORDER BY lmc.Member_Count DESC ) WHERE ROWNUM <= 100;",
    "gold_tables": [
      "dw#sep#MOIRA_LIST",
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#SE_PERSON",
      "dw#sep#MIT_STUDENT_DIRECTORY",
      "dw#sep#SIS_DEPARTMENT"
    ],
    "mapping": {
      "names": [
        "MOIRA_LIST.MOIRA_LIST_NAME"
      ],
      "subscribers": [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER"
      ],
      "public status": [
        "MOIRA_LIST.IS_PUBLIC"
      ],
      "department": [
        "SIS_DEPARTMENT.DEPARTMENT_NAME"
      ],
      "students": [
        "MIT_STUDENT_DIRECTORY.FULL_NAME"
      ]
    },
    "join_keys": [
      [
        "MOIRA_LIST.MOIRA_LIST_KEY",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY"
      ],
      [
        "MOIRA_LIST.MOIRA_LIST_KEY",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY"
      ],
      [
        "SIS_DEPARTMENT.DEPARTMENT_CODE",
        "MIT_STUDENT_DIRECTORY.DEPARTMENT"
      ]
    ],
    "original_sql": "SELECT\n  lmc.MOIRA_LIST_NAME,\n  lmc.Member_Count,\n  lmc.IS_PUBLIC,\n  dc.DEPARTMENT_NAME AS Most_Prominent_Department,\n  dc.Student_Count\nFROM (\n  SELECT\n    ml.MOIRA_LIST_NAME,\n    ml.IS_PUBLIC,\n    COUNT(mld.MOIRA_LIST_MEMBER) AS Member_Count\n  FROM MOIRA_LIST AS ml\n  JOIN MOIRA_LIST_DETAIL AS mld\n    ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n  GROUP BY\n    ml.MOIRA_LIST_NAME,\n    ml.IS_PUBLIC\n) AS lmc\nLEFT JOIN (\n  SELECT\n    lmc.MOIRA_LIST_NAME,\n    lmc.DEPARTMENT_NAME,\n    lmc.Student_Count,\n    @rank := CASE WHEN @current_list = lmc.MOIRA_LIST_NAME THEN @rank + 1 ELSE 1 END AS `Rank`,\n    @current_list := lmc.MOIRA_LIST_NAME\n  FROM (\n    SELECT\n      ml.MOIRA_LIST_NAME,\n      sd.DEPARTMENT_NAME,\n      COUNT(msd.FULL_NAME) AS Student_Count\n    FROM MOIRA_LIST AS ml\n    JOIN MOIRA_LIST_DETAIL AS mld\n      ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\n    JOIN SE_PERSON AS se\n      ON UPPER(mld.MOIRA_LIST_MEMBER) = UPPER(se.KRB_NAME)\n    JOIN MIT_STUDENT_DIRECTORY AS msd\n      ON msd.FULL_NAME = se.FULL_NAME\n    JOIN SIS_DEPARTMENT AS sd\n      ON msd.DEPARTMENT = sd.DEPARTMENT_CODE\n    GROUP BY\n      ml.MOIRA_LIST_NAME,\n      sd.DEPARTMENT_NAME\n  ) AS lmc\n  CROSS JOIN (\n    SELECT\n      @rank := 0,\n      @current_list := ''\n  ) AS vars\n  ORDER BY\n    lmc.MOIRA_LIST_NAME,\n    Student_Count DESC\n) AS dc\n  ON lmc.MOIRA_LIST_NAME = dc.MOIRA_LIST_NAME AND dc.`Rank` = 1\nORDER BY\n  lmc.Member_Count DESC\nLIMIT 100",
    "meta": {
      "features": {
        "query_table_count": 7,
        "query_column_count": 36,
        "query_nested_count": 4,
        "query_aggregate_count": 2,
        "query_sort_count": 3,
        "query_window_func_count": 0,
        "query_join_count": 7
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "83657e1b6319",
    "question": "Calculate the total assignable and non-assignable area for each building by summing up the respective areas of all its floors. For each building, list the building name, building number, total assignable area, total non-assignable area, and total room count, sorted in descending order of the total assignable area.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  b.BUILDING_NAME,\n  b.BUILDING_NUMBER,\n  SUM(f.ASSIGNABLE_AREA) AS TOTAL_ASSIGNABLE_AREA,\n  SUM(f.NON_ASSIGNABLE_AREA) AS TOTAL_NON_ASSIGNABLE_AREA,\n  COUNT(r.FAC_ROOM_KEY) AS TOTAL_ROOMS\nFROM FAC_BUILDING AS b\nJOIN FAC_FLOOR AS f\n  ON b.FAC_BUILDING_KEY = f.BUILDING_KEY\nJOIN FAC_ROOMS AS r\n  ON f.BUILDING_KEY = r.BUILDING_KEY AND f.FLOOR = r.FLOOR\nGROUP BY\n  b.BUILDING_NAME,\n  b.BUILDING_NUMBER\nORDER BY\n  TOTAL_ASSIGNABLE_AREA DESC"
    ],
    "oracle_sql": "SELECT b.BUILDING_NAME, b.BUILDING_NUMBER, SUM(f.ASSIGNABLE_AREA) AS TOTAL_ASSIGNABLE_AREA, SUM(f.NON_ASSIGNABLE_AREA) AS TOTAL_NON_ASSIGNABLE_AREA, COUNT(r.FAC_ROOM_KEY) AS TOTAL_ROOMS FROM FAC_BUILDING b JOIN FAC_FLOOR f ON b.FAC_BUILDING_KEY = f.BUILDING_KEY JOIN FAC_ROOMS r ON f.BUILDING_KEY = r.BUILDING_KEY AND f.FLOOR = r.FLOOR GROUP BY b.BUILDING_NAME, b.BUILDING_NUMBER ORDER BY TOTAL_ASSIGNABLE_AREA DESC;",
    "gold_tables": [
      "dw#sep#FAC_BUILDING",
      "dw#sep#FAC_FLOOR",
      "dw#sep#FAC_ROOMS"
    ],
    "mapping": {
      "building name": [
        "FAC_BUILDING.BUILDING_NAME"
      ],
      "building number": [
        "FAC_BUILDING.BUILDING_NUMBER"
      ],
      "assignable area": [
        "FAC_FLOOR.ASSIGNABLE_AREA"
      ],
      "non-assignable area": [
        "FAC_FLOOR.NON_ASSIGNABLE_AREA"
      ],
      "room": [
        "FAC_ROOMS.FAC_ROOM_KEY"
      ]
    },
    "join_keys": [
      [
        "FAC_BUILDING.FAC_BUILDING_KEY",
        "FAC_FLOOR.BUILDING_KEY"
      ],
      [
        "FAC_FLOOR.BUILDING_KEY",
        "FAC_ROOMS.BUILDING_KEY"
      ],
      [
        "FAC_FLOOR.FLOOR",
        "FAC_ROOMS.FLOOR"
      ]
    ],
    "original_sql": "SELECT\n  b.BUILDING_NAME,\n  b.BUILDING_NUMBER,\n  SUM(f.ASSIGNABLE_AREA) AS TOTAL_ASSIGNABLE_AREA,\n  SUM(f.NON_ASSIGNABLE_AREA) AS TOTAL_NON_ASSIGNABLE_AREA,\n  COUNT(r.FAC_ROOM_KEY) AS TOTAL_ROOMS\nFROM FAC_BUILDING AS b\nJOIN FAC_FLOOR AS f\n  ON b.FAC_BUILDING_KEY = f.BUILDING_KEY\nJOIN FAC_ROOMS AS r\n  ON f.BUILDING_KEY = r.BUILDING_KEY AND f.FLOOR = r.FLOOR\nGROUP BY\n  b.BUILDING_NAME,\n  b.BUILDING_NUMBER\nORDER BY\n  TOTAL_ASSIGNABLE_AREA DESC",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 14,
        "query_nested_count": 0,
        "query_aggregate_count": 3,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_sorting",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "a302c8619c3b",
    "question": "List all rooms in building 45, including their full name, area, major use, the organization that occupies them, the count of rooms per major use, and the total area occupied by rooms for each organization.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  r.ROOM_FULL_NAME,\n  MAX(r.AREA),\n  mu.MAJOR_USE,\n  MAX(o.ORGANIZATION_NAME),\n  COUNT(r.FAC_ROOM_KEY) AS ROOM_COUNT,\n  SUM(r.AREA) AS TOTAL_ROOM_AREA\nFROM FAC_ROOMS AS r\nJOIN FAC_MAJOR_USE AS mu\n  ON r.MAJOR_USE_KEY = mu.MAJOR_USE_KEY\nJOIN FAC_ORGANIZATION AS o\n  ON r.ORGANIZATION_KEY = o.ORGANIZATION_KEY\nWHERE\n  r.BUILDING_KEY = 45\nGROUP BY\n  r.ROOM_FULL_NAME,\n  mu.MAJOR_USE\nORDER BY\n  r.ROOM_FULL_NAME"
    ],
    "oracle_sql": "SELECT r.ROOM_FULL_NAME, MAX(r.AREA), mu.MAJOR_USE, MAX(o.ORGANIZATION_NAME), COUNT(r.FAC_ROOM_KEY) AS ROOM_COUNT, SUM(r.AREA) AS TOTAL_ROOM_AREA FROM FAC_ROOMS r JOIN FAC_MAJOR_USE mu ON r.MAJOR_USE_KEY = mu.MAJOR_USE_KEY JOIN FAC_ORGANIZATION o ON r.ORGANIZATION_KEY = o.ORGANIZATION_KEY WHERE r.BUILDING_KEY = 45 GROUP BY r.ROOM_FULL_NAME, mu.MAJOR_USE ORDER BY r.ROOM_FULL_NAME;",
    "gold_tables": [
      "dw#sep#FAC_ROOMS",
      "dw#sep#FAC_MAJOR_USE",
      "dw#sep#FAC_ORGANIZATION"
    ],
    "mapping": {
      "building 45": [
        "FAC_ROOMS.BUILDING_KEY"
      ],
      "full name": [
        "FAC_ROOMS.ROOM_FULL_NAME"
      ],
      "area": [
        "FAC_ROOMS.AREA"
      ],
      "major use": [
        "FAC_MAJOR_USE.MAJOR_USE"
      ],
      "organization": [
        "FAC_ORGANIZATION.ORGANIZATION_NAME"
      ],
      "rooms": [
        "FAC_ROOMS.FAC_ROOM_KEY"
      ]
    },
    "join_keys": [
      [
        "FAC_ROOMS.MAJOR_USE_KEY",
        "FAC_MAJOR_USE.MAJOR_USE_KEY"
      ],
      [
        "FAC_ROOMS.ORGANIZATION_KEY",
        "FAC_ORGANIZATION.ORGANIZATION_KEY"
      ]
    ],
    "original_sql": "SELECT\n  r.ROOM_FULL_NAME,\n  MAX(r.AREA),\n  mu.MAJOR_USE,\n  MAX(o.ORGANIZATION_NAME),\n  COUNT(r.FAC_ROOM_KEY) AS ROOM_COUNT,\n  SUM(r.AREA) AS TOTAL_ROOM_AREA\nFROM FAC_ROOMS AS r\nJOIN FAC_MAJOR_USE AS mu\n  ON r.MAJOR_USE_KEY = mu.MAJOR_USE_KEY\nJOIN FAC_ORGANIZATION AS o\n  ON r.ORGANIZATION_KEY = o.ORGANIZATION_KEY\nWHERE\n  r.BUILDING_KEY = 45\nGROUP BY\n  r.ROOM_FULL_NAME,\n  mu.MAJOR_USE\nORDER BY\n  r.ROOM_FULL_NAME",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 14,
        "query_nested_count": 0,
        "query_aggregate_count": 4,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_sorting",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "da99147cd4c4",
    "question": "List the name, number, construction date, and type of all buildings, along with the count of addresses associated with each building, the average gross area of the buildings, and the total number of rooms in each building. Sort the results by building name.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  b.BUILDING_NAME,\n  b.BUILDING_NUMBER,\n  b.DATE_BUILT,\n  b.BUILDING_TYPE,\n  COUNT(a.BUILDING_ADDRESS_KEY) AS ADDRESS_COUNT,\n  AVG(b.EXT_GROSS_AREA) AS AVG_GROSS_AREA,\n  COUNT(r.FAC_ROOM_KEY) AS TOTAL_ROOMS\nFROM FAC_BUILDING AS b\nJOIN FAC_BUILDING_ADDRESS AS a\n  ON b.FAC_BUILDING_KEY = a.BUILDING_KEY\nJOIN FAC_ROOMS AS r\n  ON b.FAC_BUILDING_KEY = r.BUILDING_KEY\nGROUP BY\n  b.BUILDING_NAME,\n  b.BUILDING_NUMBER,\n  b.DATE_BUILT,\n  b.BUILDING_TYPE\nORDER BY\n  b.BUILDING_NAME"
    ],
    "oracle_sql": "SELECT b.BUILDING_NAME, b.BUILDING_NUMBER, b.DATE_BUILT, b.BUILDING_TYPE, COUNT(a.BUILDING_ADDRESS_KEY) AS ADDRESS_COUNT, AVG(b.EXT_GROSS_AREA) AS AVG_GROSS_AREA, COUNT(r.FAC_ROOM_KEY) AS TOTAL_ROOMS FROM FAC_BUILDING b JOIN FAC_BUILDING_ADDRESS a ON b.FAC_BUILDING_KEY = a.BUILDING_KEY JOIN FAC_ROOMS r ON b.FAC_BUILDING_KEY = r.BUILDING_KEY GROUP BY b.BUILDING_NAME, b.BUILDING_NUMBER, b.DATE_BUILT, b.BUILDING_TYPE ORDER BY b.BUILDING_NAME;",
    "gold_tables": [
      "dw#sep#FAC_BUILDING",
      "dw#sep#FAC_BUILDING_ADDRESS",
      "dw#sep#FAC_ROOMS"
    ],
    "mapping": {
      "name": [
        "FAC_BUILDING.BUILDING_NAME"
      ],
      "number": [
        "FAC_BUILDING.BUILDING_NUMBER"
      ],
      "construction date": [
        "FAC_BUILDING.DATE_BUILT"
      ],
      "type": [
        "FAC_BUILDING.BUILDING_TYPE"
      ],
      "addresses": [
        "FAC_BUILDING_ADDRESS.BUILDING_ADDRESS_KEY"
      ],
      "gross area": [
        "FAC_BUILDING.EXT_GROSS_AREA"
      ],
      "rooms": [
        "FAC_ROOMS.FAC_ROOM_KEY"
      ]
    },
    "join_keys": [
      [
        "FAC_BUILDING.FAC_BUILDING_KEY",
        "FAC_BUILDING_ADDRESS.BUILDING_KEY"
      ],
      [
        "FAC_ROOMS.BUILDING_KEY",
        "FAC_BUILDING.FAC_BUILDING_KEY"
      ]
    ],
    "original_sql": "SELECT\n  b.BUILDING_NAME,\n  b.BUILDING_NUMBER,\n  b.DATE_BUILT,\n  b.BUILDING_TYPE,\n  COUNT(a.BUILDING_ADDRESS_KEY) AS ADDRESS_COUNT,\n  AVG(b.EXT_GROSS_AREA) AS AVG_GROSS_AREA,\n  COUNT(r.FAC_ROOM_KEY) AS TOTAL_ROOMS\nFROM FAC_BUILDING AS b\nJOIN FAC_BUILDING_ADDRESS AS a\n  ON b.FAC_BUILDING_KEY = a.BUILDING_KEY\nJOIN FAC_ROOMS AS r\n  ON b.FAC_BUILDING_KEY = r.BUILDING_KEY\nGROUP BY\n  b.BUILDING_NAME,\n  b.BUILDING_NUMBER,\n  b.DATE_BUILT,\n  b.BUILDING_TYPE\nORDER BY\n  b.BUILDING_NAME",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 16,
        "query_nested_count": 0,
        "query_aggregate_count": 3,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_sorting",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "e747c2dc012b",
    "question": "For each department, list its name, number of unique courses offered, the number of unique reserved materials, and the number of unique instructors associated with those courses, sorted by the number of unique courses offered in descending order.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  lso.OFFER_DEPT_NAME AS DEPARTMENT,\n  COUNT(DISTINCT lso.MASTER_COURSE_NUMBER) AS COURSE_COUNT,\n  COUNT(DISTINCT lrc.CATALOG_TITLE) AS UNIQUE_MATERIALS,\n  COUNT(DISTINCT lci.INSTRUCTOR_NAME) AS UNIQUE_INSTRUCTORS\nFROM LIBRARY_SUBJECT_OFFERED AS lso\nJOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n  ON lso.LIBRARY_SUBJECT_OFFERED_KEY = lrmd.LIBRARY_SUBJECT_OFFERED_KEY\nJOIN LIBRARY_RESERVE_CATALOG AS lrc\n  ON lrmd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY\nJOIN LIBRARY_COURSE_INSTRUCTOR AS lci\n  ON lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY = lci.LIBRARY_COURSE_INSTRUCTOR_KEY\nGROUP BY\n  lso.OFFER_DEPT_NAME\nORDER BY\n  COURSE_COUNT DESC"
    ],
    "oracle_sql": "SELECT lso.OFFER_DEPT_NAME AS DEPARTMENT, COUNT(DISTINCT lso.MASTER_COURSE_NUMBER) AS COURSE_COUNT, COUNT(DISTINCT lrc.CATALOG_TITLE) AS UNIQUE_MATERIALS, COUNT(DISTINCT lci.INSTRUCTOR_NAME) AS UNIQUE_INSTRUCTORS FROM LIBRARY_SUBJECT_OFFERED lso JOIN LIBRARY_RESERVE_MATRL_DETAIL lrmd ON lso.LIBRARY_SUBJECT_OFFERED_KEY = lrmd.LIBRARY_SUBJECT_OFFERED_KEY JOIN LIBRARY_RESERVE_CATALOG lrc ON lrmd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY JOIN LIBRARY_COURSE_INSTRUCTOR lci ON lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY = lci.LIBRARY_COURSE_INSTRUCTOR_KEY GROUP BY lso.OFFER_DEPT_NAME ORDER BY COURSE_COUNT DESC;",
    "gold_tables": [
      "dw#sep#LIBRARY_SUBJECT_OFFERED",
      "dw#sep#LIBRARY_RESERVE_MATRL_DETAIL",
      "dw#sep#LIBRARY_RESERVE_CATALOG",
      "dw#sep#LIBRARY_COURSE_INSTRUCTOR"
    ],
    "mapping": {
      "name": [
        "LIBRARY_SUBJECT_OFFERED.OFFER_DEPT_NAME"
      ],
      "course": [
        "LIBRARY_SUBJECT_OFFERED.MASTER_COURSE_NUMBER"
      ],
      "reserved materials": [
        "LIBRARY_RESERVE_CATALOG.CATALOG_TITLE"
      ],
      "instructors": [
        "LIBRARY_COURSE_INSTRUCTOR.INSTRUCTOR_NAME"
      ]
    },
    "join_keys": [
      [
        "LIBRARY_SUBJECT_OFFERED.LIBRARY_SUBJECT_OFFERED_KEY",
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_SUBJECT_OFFERED_KEY"
      ],
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_RESERVE_CATALOG_KEY",
        "LIBRARY_RESERVE_CATALOG.LIBRARY_RESERVE_CATALOG_KEY"
      ],
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_COURSE_INSTRUCTOR_KEY",
        "LIBRARY_COURSE_INSTRUCTOR.LIBRARY_COURSE_INSTRUCTOR_KEY"
      ]
    ],
    "original_sql": "SELECT\n  lso.OFFER_DEPT_NAME AS DEPARTMENT,\n  COUNT(DISTINCT lso.MASTER_COURSE_NUMBER) AS COURSE_COUNT,\n  COUNT(DISTINCT lrc.CATALOG_TITLE) AS UNIQUE_MATERIALS,\n  COUNT(DISTINCT lci.INSTRUCTOR_NAME) AS UNIQUE_INSTRUCTORS\nFROM LIBRARY_SUBJECT_OFFERED AS lso\nJOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n  ON lso.LIBRARY_SUBJECT_OFFERED_KEY = lrmd.LIBRARY_SUBJECT_OFFERED_KEY\nJOIN LIBRARY_RESERVE_CATALOG AS lrc\n  ON lrmd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY\nJOIN LIBRARY_COURSE_INSTRUCTOR AS lci\n  ON lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY = lci.LIBRARY_COURSE_INSTRUCTOR_KEY\nGROUP BY\n  lso.OFFER_DEPT_NAME\nORDER BY\n  COURSE_COUNT DESC",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 12,
        "query_nested_count": 0,
        "query_aggregate_count": 3,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_sorting",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "a5a3e9a7853d",
    "question": "For each course title, list the title, the total number of reserved materials, and the count of distinct material status associated with those materials, sorted by the total number of reserved materials in descending order.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  lso.SUBJECT_TITLE AS COURSE_TITLE,\n  COUNT(lrmd.LIBRARY_RESERVE_CATALOG_KEY) AS TOTAL_MATERIALS,\n  COUNT(DISTINCT lms.LIBRARY_MATERIAL_STATUS) AS STATUS_COUNT\nFROM LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\nJOIN LIBRARY_SUBJECT_OFFERED AS lso\n  ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY\nJOIN LIBRARY_MATERIAL_STATUS AS lms\n  ON lrmd.LIBRARY_MATERIAL_STATUS_KEY = lms.LIBRARY_MATERIAL_STATUS_KEY\nGROUP BY\n  lso.SUBJECT_TITLE\nORDER BY\n  TOTAL_MATERIALS DESC"
    ],
    "oracle_sql": "SELECT lso.SUBJECT_TITLE AS COURSE_TITLE, COUNT(lrmd.LIBRARY_RESERVE_CATALOG_KEY) AS TOTAL_MATERIALS, COUNT(DISTINCT lms.LIBRARY_MATERIAL_STATUS) AS STATUS_COUNT FROM LIBRARY_RESERVE_MATRL_DETAIL lrmd JOIN LIBRARY_SUBJECT_OFFERED lso ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY JOIN LIBRARY_MATERIAL_STATUS lms ON lrmd.LIBRARY_MATERIAL_STATUS_KEY = lms.LIBRARY_MATERIAL_STATUS_KEY GROUP BY lso.SUBJECT_TITLE ORDER BY TOTAL_MATERIALS DESC;",
    "gold_tables": [
      "dw#sep#LIBRARY_RESERVE_MATRL_DETAIL",
      "dw#sep#LIBRARY_SUBJECT_OFFERED",
      "dw#sep#LIBRARY_MATERIAL_STATUS"
    ],
    "mapping": {
      "title": [
        "LIBRARY_SUBJECT_OFFERED.SUBJECT_TITLE"
      ],
      "reserved materials": [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_RESERVE_CATALOG_KEY"
      ],
      "material status": [
        "LIBRARY_MATERIAL_STATUS.LIBRARY_MATERIAL_STATUS"
      ]
    },
    "join_keys": [
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_SUBJECT_OFFERED_KEY",
        "LIBRARY_SUBJECT_OFFERED.LIBRARY_SUBJECT_OFFERED_KEY"
      ],
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_MATERIAL_STATUS_KEY",
        "LIBRARY_MATERIAL_STATUS.LIBRARY_MATERIAL_STATUS_KEY"
      ]
    ],
    "original_sql": "SELECT\n  lso.SUBJECT_TITLE AS COURSE_TITLE,\n  COUNT(lrmd.LIBRARY_RESERVE_CATALOG_KEY) AS TOTAL_MATERIALS,\n  COUNT(DISTINCT lms.LIBRARY_MATERIAL_STATUS) AS STATUS_COUNT\nFROM LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\nJOIN LIBRARY_SUBJECT_OFFERED AS lso\n  ON lrmd.LIBRARY_SUBJECT_OFFERED_KEY = lso.LIBRARY_SUBJECT_OFFERED_KEY\nJOIN LIBRARY_MATERIAL_STATUS AS lms\n  ON lrmd.LIBRARY_MATERIAL_STATUS_KEY = lms.LIBRARY_MATERIAL_STATUS_KEY\nGROUP BY\n  lso.SUBJECT_TITLE\nORDER BY\n  TOTAL_MATERIALS DESC",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 9,
        "query_nested_count": 0,
        "query_aggregate_count": 2,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_sorting",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "d46dce9bd020",
    "question": "For each instructor, list their name, the number of unique courses they teach, the total number of material assignments, average publication year, and number of distinct status, sorted by the number of unique courses in descending order.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  lci.INSTRUCTOR_NAME,\n  COUNT(DISTINCT lci.COURSE_NAME) AS COURSE_COUNT,\n  COUNT(lci.LIBRARY_COURSE_INSTRUCTOR_KEY) AS MATERIAL_ASSIGNMENTS,\n  AVG(lrc.CATALOG_YEAR) AS AVG_PUBLICATION_YEAR,\n  COUNT(DISTINCT lms.LIBRARY_MATERIAL_STATUS) AS STATUS_COUNT\nFROM LIBRARY_COURSE_INSTRUCTOR AS lci\nJOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n  ON lci.LIBRARY_COURSE_INSTRUCTOR_KEY = lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY\nJOIN LIBRARY_RESERVE_CATALOG AS lrc\n  ON lrmd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY\nJOIN LIBRARY_MATERIAL_STATUS AS lms\n  ON lrmd.LIBRARY_MATERIAL_STATUS_KEY = lms.LIBRARY_MATERIAL_STATUS_KEY\nGROUP BY\n  lci.INSTRUCTOR_NAME\nORDER BY\n  COURSE_COUNT DESC"
    ],
    "oracle_sql": "SELECT lci.INSTRUCTOR_NAME, COUNT(DISTINCT lci.COURSE_NAME) AS COURSE_COUNT, COUNT(lci.LIBRARY_COURSE_INSTRUCTOR_KEY) AS MATERIAL_ASSIGNMENTS, AVG(lrc.CATALOG_YEAR) AS AVG_PUBLICATION_YEAR, COUNT(DISTINCT lms.LIBRARY_MATERIAL_STATUS) AS STATUS_COUNT FROM LIBRARY_COURSE_INSTRUCTOR lci JOIN LIBRARY_RESERVE_MATRL_DETAIL lrmd ON lci.LIBRARY_COURSE_INSTRUCTOR_KEY = lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY JOIN LIBRARY_RESERVE_CATALOG lrc ON lrmd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY JOIN LIBRARY_MATERIAL_STATUS lms ON lrmd.LIBRARY_MATERIAL_STATUS_KEY = lms.LIBRARY_MATERIAL_STATUS_KEY GROUP BY lci.INSTRUCTOR_NAME ORDER BY COURSE_COUNT DESC;",
    "gold_tables": [
      "dw#sep#LIBRARY_COURSE_INSTRUCTOR",
      "dw#sep#LIBRARY_RESERVE_MATRL_DETAIL",
      "dw#sep#LIBRARY_RESERVE_CATALOG",
      "dw#sep#LIBRARY_MATERIAL_STATUS"
    ],
    "mapping": {
      "name": [
        "LIBRARY_COURSE_INSTRUCTOR.INSTRUCTOR_NAME"
      ],
      "course": [
        "LIBRARY_COURSE_INSTRUCTOR.COURSE_NAME"
      ],
      "material assignments": [
        "LIBRARY_COURSE_INSTRUCTOR.LIBRARY_COURSE_INSTRUCTOR_KEY"
      ],
      "publication year": [
        "LIBRARY_RESERVE_CATALOG.CATALOG_YEAR"
      ],
      "status": [
        "LIBRARY_MATERIAL_STATUS.LIBRARY_MATERIAL_STATUS"
      ]
    },
    "join_keys": [
      [
        "LIBRARY_COURSE_INSTRUCTOR.LIBRARY_COURSE_INSTRUCTOR_KEY",
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_COURSE_INSTRUCTOR_KEY"
      ],
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_RESERVE_CATALOG_KEY",
        "LIBRARY_RESERVE_CATALOG.LIBRARY_RESERVE_CATALOG_KEY"
      ],
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_MATERIAL_STATUS_KEY",
        "LIBRARY_MATERIAL_STATUS.LIBRARY_MATERIAL_STATUS_KEY"
      ]
    ],
    "original_sql": "SELECT\n  lci.INSTRUCTOR_NAME,\n  COUNT(DISTINCT lci.COURSE_NAME) AS COURSE_COUNT,\n  COUNT(lci.LIBRARY_COURSE_INSTRUCTOR_KEY) AS MATERIAL_ASSIGNMENTS,\n  AVG(lrc.CATALOG_YEAR) AS AVG_PUBLICATION_YEAR,\n  COUNT(DISTINCT lms.LIBRARY_MATERIAL_STATUS) AS STATUS_COUNT\nFROM LIBRARY_COURSE_INSTRUCTOR AS lci\nJOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n  ON lci.LIBRARY_COURSE_INSTRUCTOR_KEY = lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY\nJOIN LIBRARY_RESERVE_CATALOG AS lrc\n  ON lrmd.LIBRARY_RESERVE_CATALOG_KEY = lrc.LIBRARY_RESERVE_CATALOG_KEY\nJOIN LIBRARY_MATERIAL_STATUS AS lms\n  ON lrmd.LIBRARY_MATERIAL_STATUS_KEY = lms.LIBRARY_MATERIAL_STATUS_KEY\nGROUP BY\n  lci.INSTRUCTOR_NAME\nORDER BY\n  COURSE_COUNT DESC",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 13,
        "query_nested_count": 0,
        "query_aggregate_count": 4,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_sorting",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "135c007302dc",
    "question": "For each publication year, list the year, the total number of reserved materials, the average length of their titles, distinct number of status, and number of courses, sorted by publication year in descending order.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  lrc.CATALOG_YEAR AS PUBLICATION_YEAR,\n  COUNT(DISTINCT lrc.LIBRARY_RESERVE_CATALOG_KEY) AS TOTAL_MATERIALS,\n  AVG(LENGTH(lrc.CATALOG_TITLE)) AS AVG_TITLE_LENGTH,\n  COUNT(DISTINCT lms.LIBRARY_MATERIAL_STATUS) AS STATUS_COUNT,\n  COUNT(DISTINCT lci.COURSE_NAME) AS COURSE_COUNT\nFROM LIBRARY_RESERVE_CATALOG AS lrc\nJOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n  ON lrc.LIBRARY_RESERVE_CATALOG_KEY = lrmd.LIBRARY_RESERVE_CATALOG_KEY\nJOIN LIBRARY_MATERIAL_STATUS AS lms\n  ON lrmd.LIBRARY_MATERIAL_STATUS_KEY = lms.LIBRARY_MATERIAL_STATUS_KEY\nJOIN LIBRARY_COURSE_INSTRUCTOR AS lci\n  ON lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY = lci.LIBRARY_COURSE_INSTRUCTOR_KEY\nGROUP BY\n  lrc.CATALOG_YEAR\nORDER BY\n  PUBLICATION_YEAR DESC"
    ],
    "oracle_sql": "SELECT lrc.CATALOG_YEAR AS PUBLICATION_YEAR, COUNT(distinct lrc.LIBRARY_RESERVE_CATALOG_KEY) AS TOTAL_MATERIALS, AVG(LENGTH(lrc.CATALOG_TITLE)) AS AVG_TITLE_LENGTH, COUNT(DISTINCT lms.LIBRARY_MATERIAL_STATUS) AS STATUS_COUNT, COUNT(DISTINCT lci.COURSE_NAME) AS COURSE_COUNT FROM LIBRARY_RESERVE_CATALOG lrc JOIN LIBRARY_RESERVE_MATRL_DETAIL lrmd ON lrc.LIBRARY_RESERVE_CATALOG_KEY = lrmd.LIBRARY_RESERVE_CATALOG_KEY JOIN LIBRARY_MATERIAL_STATUS lms ON lrmd.LIBRARY_MATERIAL_STATUS_KEY = lms.LIBRARY_MATERIAL_STATUS_KEY JOIN LIBRARY_COURSE_INSTRUCTOR lci ON lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY = lci.LIBRARY_COURSE_INSTRUCTOR_KEY GROUP BY lrc.CATALOG_YEAR ORDER BY PUBLICATION_YEAR DESC;",
    "gold_tables": [
      "dw#sep#LIBRARY_RESERVE_CATALOG",
      "dw#sep#LIBRARY_RESERVE_MATRL_DETAIL",
      "dw#sep#LIBRARY_MATERIAL_STATUS",
      "dw#sep#LIBRARY_COURSE_INSTRUCTOR"
    ],
    "mapping": {
      "publication year": [
        "LIBRARY_RESERVE_CATALOG.CATALOG_YEAR"
      ],
      "reserved materials": [
        "LIBRARY_RESERVE_CATALOG.LIBRARY_RESERVE_CATALOG_KEY"
      ],
      "title": [
        "LIBRARY_RESERVE_CATALOG.CATALOG_TITLE"
      ],
      "status": [
        "LIBRARY_MATERIAL_STATUS.LIBRARY_MATERIAL_STATUS"
      ],
      "courses": [
        "LIBRARY_COURSE_INSTRUCTOR.COURSE_NAME"
      ]
    },
    "join_keys": [
      [
        "LIBRARY_RESERVE_CATALOG.LIBRARY_RESERVE_CATALOG_KEY",
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_RESERVE_CATALOG_KEY"
      ],
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_MATERIAL_STATUS_KEY",
        "LIBRARY_MATERIAL_STATUS.LIBRARY_MATERIAL_STATUS_KEY"
      ],
      [
        "LIBRARY_RESERVE_MATRL_DETAIL.LIBRARY_COURSE_INSTRUCTOR_KEY",
        "LIBRARY_COURSE_INSTRUCTOR.LIBRARY_COURSE_INSTRUCTOR_KEY"
      ]
    ],
    "original_sql": "SELECT\n  lrc.CATALOG_YEAR AS PUBLICATION_YEAR,\n  COUNT(DISTINCT lrc.LIBRARY_RESERVE_CATALOG_KEY) AS TOTAL_MATERIALS,\n  AVG(LENGTH(lrc.CATALOG_TITLE)) AS AVG_TITLE_LENGTH,\n  COUNT(DISTINCT lms.LIBRARY_MATERIAL_STATUS) AS STATUS_COUNT,\n  COUNT(DISTINCT lci.COURSE_NAME) AS COURSE_COUNT\nFROM LIBRARY_RESERVE_CATALOG AS lrc\nJOIN LIBRARY_RESERVE_MATRL_DETAIL AS lrmd\n  ON lrc.LIBRARY_RESERVE_CATALOG_KEY = lrmd.LIBRARY_RESERVE_CATALOG_KEY\nJOIN LIBRARY_MATERIAL_STATUS AS lms\n  ON lrmd.LIBRARY_MATERIAL_STATUS_KEY = lms.LIBRARY_MATERIAL_STATUS_KEY\nJOIN LIBRARY_COURSE_INSTRUCTOR AS lci\n  ON lrmd.LIBRARY_COURSE_INSTRUCTOR_KEY = lci.LIBRARY_COURSE_INSTRUCTOR_KEY\nGROUP BY\n  lrc.CATALOG_YEAR\nORDER BY\n  PUBLICATION_YEAR DESC",
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 13,
        "query_nested_count": 0,
        "query_aggregate_count": 4,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_sorting",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "54f9ad308442",
    "question": "For each IAP category, list the category name, the sponsor name, the number of activities offered, and the average fee per activity, sorted by the number of activities in descending order.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  isc.IAP_CATEGORY_NAME AS CATEGORY_NAME,\n  iss.SPONSOR_NAME,\n  COUNT(isd.IAP_SUBJECT_CATEGORY_KEY) AS ACTIVITY_COUNT,\n  AVG(isd.FEE) AS AVG_FEE_PER_ACTIVITY\nFROM IAP_SUBJECT_DETAIL AS isd\nJOIN IAP_SUBJECT_CATEGORY AS isc\n  ON isd.IAP_SUBJECT_CATEGORY_KEY = isc.IAP_SUBJECT_CATEGORY_KEY\nJOIN IAP_SUBJECT_SPONSOR AS iss\n  ON isd.IAP_SUBJECT_SPONSOR_KEY = iss.IAP_SUBJECT_SPONSOR_KEY\nGROUP BY\n  isc.IAP_CATEGORY_NAME,\n  iss.SPONSOR_NAME\nORDER BY\n  ACTIVITY_COUNT DESC"
    ],
    "oracle_sql": "SELECT isc.IAP_CATEGORY_NAME AS CATEGORY_NAME, iss.SPONSOR_NAME, COUNT(isd.IAP_SUBJECT_CATEGORY_KEY) AS ACTIVITY_COUNT, AVG(isd.FEE) AS AVG_FEE_PER_ACTIVITY FROM IAP_SUBJECT_DETAIL isd JOIN IAP_SUBJECT_CATEGORY isc ON isd.IAP_SUBJECT_CATEGORY_KEY = isc.IAP_SUBJECT_CATEGORY_KEY JOIN IAP_SUBJECT_SPONSOR iss ON isd.IAP_SUBJECT_SPONSOR_KEY = iss.IAP_SUBJECT_SPONSOR_KEY GROUP BY isc.IAP_CATEGORY_NAME, iss.SPONSOR_NAME ORDER BY ACTIVITY_COUNT DESC;",
    "gold_tables": [
      "dw#sep#IAP_SUBJECT_DETAIL",
      "dw#sep#IAP_SUBJECT_CATEGORY",
      "dw#sep#IAP_SUBJECT_SPONSOR"
    ],
    "mapping": {
      "category name": [
        "IAP_SUBJECT_CATEGORY.IAP_CATEGORY_NAME"
      ],
      "sponsor name": [
        "IAP_SUBJECT_SPONSOR.SPONSOR_NAME"
      ],
      "activities": [
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_CATEGORY_KEY"
      ],
      "fee": [
        "IAP_SUBJECT_DETAIL.FEE"
      ]
    },
    "join_keys": [
      [
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_CATEGORY_KEY",
        "IAP_SUBJECT_CATEGORY.IAP_SUBJECT_CATEGORY_KEY"
      ],
      [
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_SPONSOR_KEY",
        "IAP_SUBJECT_SPONSOR.IAP_SUBJECT_SPONSOR_KEY"
      ]
    ],
    "original_sql": "SELECT\n  isc.IAP_CATEGORY_NAME AS CATEGORY_NAME,\n  iss.SPONSOR_NAME,\n  COUNT(isd.IAP_SUBJECT_CATEGORY_KEY) AS ACTIVITY_COUNT,\n  AVG(isd.FEE) AS AVG_FEE_PER_ACTIVITY\nFROM IAP_SUBJECT_DETAIL AS isd\nJOIN IAP_SUBJECT_CATEGORY AS isc\n  ON isd.IAP_SUBJECT_CATEGORY_KEY = isc.IAP_SUBJECT_CATEGORY_KEY\nJOIN IAP_SUBJECT_SPONSOR AS iss\n  ON isd.IAP_SUBJECT_SPONSOR_KEY = iss.IAP_SUBJECT_SPONSOR_KEY\nGROUP BY\n  isc.IAP_CATEGORY_NAME,\n  iss.SPONSOR_NAME\nORDER BY\n  ACTIVITY_COUNT DESC",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 11,
        "query_nested_count": 0,
        "query_aggregate_count": 2,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_sorting",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "5f842c6fc8f1",
    "question": "For each sponsor, list the sponsor name, the number of IAP sessions hosted, and the number of unique subjects organized.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  iss.SPONSOR_NAME,\n  COUNT(issp.IAP_SUBJECT_SESSION_KEY) AS SESSION_COUNT,\n  COUNT(DISTINCT isd.IAP_SUBJECT_SESSION_KEY) AS UNIQUE_SUBJECTS\nFROM IAP_SUBJECT_SESSION AS issp\nJOIN IAP_SUBJECT_DETAIL AS isd\n  ON issp.IAP_SUBJECT_SESSION_KEY = isd.IAP_SUBJECT_SESSION_KEY\nJOIN IAP_SUBJECT_SPONSOR AS iss\n  ON isd.IAP_SUBJECT_SPONSOR_KEY = iss.IAP_SUBJECT_SPONSOR_KEY\nGROUP BY\n  iss.SPONSOR_NAME\nORDER BY\n  SESSION_COUNT DESC"
    ],
    "oracle_sql": "SELECT iss.SPONSOR_NAME, COUNT(issp.IAP_SUBJECT_SESSION_KEY) AS SESSION_COUNT, COUNT(DISTINCT isd.IAP_SUBJECT_SESSION_KEY) AS UNIQUE_SUBJECTS FROM IAP_SUBJECT_SESSION issp JOIN IAP_SUBJECT_DETAIL isd ON issp.IAP_SUBJECT_SESSION_KEY = isd.IAP_SUBJECT_SESSION_KEY JOIN IAP_SUBJECT_SPONSOR iss ON isd.IAP_SUBJECT_SPONSOR_KEY = iss.IAP_SUBJECT_SPONSOR_KEY GROUP BY iss.SPONSOR_NAME ORDER BY SESSION_COUNT DESC;",
    "gold_tables": [
      "dw#sep#IAP_SUBJECT_SESSION",
      "dw#sep#IAP_SUBJECT_DETAIL",
      "dw#sep#IAP_SUBJECT_SPONSOR"
    ],
    "mapping": {
      "sponsor name": [
        "IAP_SUBJECT_SPONSOR.SPONSOR_NAME"
      ],
      "IAP sessions": [
        "IAP_SUBJECT_SESSION.IAP_SUBJECT_SESSION_KEY"
      ],
      "subjects": [
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_SESSION_KEY"
      ]
    },
    "join_keys": [
      [
        "IAP_SUBJECT_SESSION.IAP_SUBJECT_SESSION_KEY",
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_SESSION_KEY"
      ],
      [
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_SPONSOR_KEY",
        "IAP_SUBJECT_SPONSOR.IAP_SUBJECT_SPONSOR_KEY"
      ]
    ],
    "original_sql": "SELECT\n  iss.SPONSOR_NAME,\n  COUNT(issp.IAP_SUBJECT_SESSION_KEY) AS SESSION_COUNT,\n  COUNT(DISTINCT isd.IAP_SUBJECT_SESSION_KEY) AS UNIQUE_SUBJECTS\nFROM IAP_SUBJECT_SESSION AS issp\nJOIN IAP_SUBJECT_DETAIL AS isd\n  ON issp.IAP_SUBJECT_SESSION_KEY = isd.IAP_SUBJECT_SESSION_KEY\nJOIN IAP_SUBJECT_SPONSOR AS iss\n  ON isd.IAP_SUBJECT_SPONSOR_KEY = iss.IAP_SUBJECT_SPONSOR_KEY\nGROUP BY\n  iss.SPONSOR_NAME\nORDER BY\n  SESSION_COUNT DESC",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 9,
        "query_nested_count": 0,
        "query_aggregate_count": 2,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_sorting",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "88ec13336cb6",
    "question": "For each person role and IAP category, list the role, the category name, the number of people in this role, and the average fee, sorted by the role count in descending order.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  isp.PERSON_ROLE,\n  isc.IAP_CATEGORY_NAME,\n  COUNT(DISTINCT isp.IAP_SUBJECT_PERSON_KEY) AS ROLE_COUNT,\n  AVG(isd.FEE) AS AVG_FEE\nFROM IAP_SUBJECT_PERSON AS isp\nJOIN IAP_SUBJECT_DETAIL AS isd\n  ON isp.IAP_SUBJECT_PERSON_KEY = isd.IAP_SUBJECT_PERSON_KEY\nJOIN IAP_SUBJECT_CATEGORY AS isc\n  ON isd.IAP_SUBJECT_CATEGORY_KEY = isc.IAP_SUBJECT_CATEGORY_KEY\nGROUP BY\n  isp.PERSON_ROLE,\n  isc.IAP_CATEGORY_NAME\nORDER BY\n  ROLE_COUNT DESC"
    ],
    "oracle_sql": "SELECT isp.PERSON_ROLE, isc.IAP_CATEGORY_NAME, COUNT(DISTINCT isp.IAP_SUBJECT_PERSON_KEY) AS ROLE_COUNT, AVG(isd.FEE) AS AVG_FEE FROM IAP_SUBJECT_PERSON isp JOIN IAP_SUBJECT_DETAIL isd ON isp.IAP_SUBJECT_PERSON_KEY = isd.IAP_SUBJECT_PERSON_KEY JOIN IAP_SUBJECT_CATEGORY isc ON isd.IAP_SUBJECT_CATEGORY_KEY = isc.IAP_SUBJECT_CATEGORY_KEY GROUP BY isp.PERSON_ROLE, isc.IAP_CATEGORY_NAME ORDER BY ROLE_COUNT DESC;",
    "gold_tables": [
      "dw#sep#IAP_SUBJECT_PERSON",
      "dw#sep#IAP_SUBJECT_DETAIL",
      "dw#sep#IAP_SUBJECT_CATEGORY"
    ],
    "mapping": {
      "role": [
        "IAP_SUBJECT_PERSON.PERSON_ROLE"
      ],
      "category name": [
        "IAP_SUBJECT_CATEGORY.IAP_CATEGORY_NAME"
      ],
      "people": [
        "IAP_SUBJECT_PERSON.IAP_SUBJECT_PERSON_KEY"
      ],
      "fee": [
        "IAP_SUBJECT_DETAIL.FEE"
      ]
    },
    "join_keys": [
      [
        "IAP_SUBJECT_PERSON.IAP_SUBJECT_PERSON_KEY",
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_PERSON_KEY"
      ],
      [
        "IAP_SUBJECT_DETAIL.IAP_SUBJECT_CATEGORY_KEY",
        "IAP_SUBJECT_CATEGORY.IAP_SUBJECT_CATEGORY_KEY"
      ]
    ],
    "original_sql": "SELECT\n  isp.PERSON_ROLE,\n  isc.IAP_CATEGORY_NAME,\n  COUNT(DISTINCT isp.IAP_SUBJECT_PERSON_KEY) AS ROLE_COUNT,\n  AVG(isd.FEE) AS AVG_FEE\nFROM IAP_SUBJECT_PERSON AS isp\nJOIN IAP_SUBJECT_DETAIL AS isd\n  ON isp.IAP_SUBJECT_PERSON_KEY = isd.IAP_SUBJECT_PERSON_KEY\nJOIN IAP_SUBJECT_CATEGORY AS isc\n  ON isd.IAP_SUBJECT_CATEGORY_KEY = isc.IAP_SUBJECT_CATEGORY_KEY\nGROUP BY\n  isp.PERSON_ROLE,\n  isc.IAP_CATEGORY_NAME\nORDER BY\n  ROLE_COUNT DESC",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 11,
        "query_nested_count": 0,
        "query_aggregate_count": 2,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_sorting",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "2294ba374d4d",
    "question": "List the names of the buildings with the most floors. If there are ties, list each one separately.",
    "db_id": "dw",
    "sql": [
      "WITH FloorsPerBuilding AS (\n  SELECT\n    fb.BUILDING_NAME,\n    MAX(ff.LEVEL_ID) - MIN(ff.LEVEL_ID) AS NUM_FLOORS\n  FROM FAC_BUILDING AS fb\n  JOIN FAC_ROOMS AS fr\n    ON fb.FAC_BUILDING_KEY = fr.BUILDING_KEY\n  JOIN FAC_FLOOR AS ff\n    ON fr.FLOOR_KEY = ff.FLOOR_KEY\n  GROUP BY\n    fb.BUILDING_NAME\n), MaxFloors AS (\n  SELECT\n    MAX(NUM_FLOORS) AS MAX_FLOORS\n  FROM FloorsPerBuilding\n)\nSELECT\n  a.BUILDING_NAME\nFROM FloorsPerBuilding AS a\nJOIN MaxFloors AS b\n  ON a.NUM_FLOORS = b.MAX_FLOORS"
    ],
    "oracle_sql": "WITH FloorsPerBuilding AS ( SELECT fb.BUILDING_NAME, MAX(ff.LEVEL_ID) - MIN(ff.LEVEL_ID) AS NUM_FLOORS FROM FAC_BUILDING fb JOIN FAC_ROOMS fr ON fb.FAC_BUILDING_KEY = fr.BUILDING_KEY JOIN FAC_FLOOR ff ON fr.FLOOR_KEY = ff.FLOOR_KEY GROUP BY fb.BUILDING_NAME ), MaxFloors AS ( SELECT MAX(NUM_FLOORS) AS MAX_FLOORS FROM FloorsPerBuilding ) SELECT a.BUILDING_NAME FROM FloorsPerBuilding a JOIN MaxFloors b ON a.NUM_FLOORS = b.MAX_FLOORS;",
    "gold_tables": [
      "dw#sep#FAC_BUILDING",
      "dw#sep#FAC_ROOMS",
      "dw#sep#FAC_FLOOR"
    ],
    "mapping": {
      "name of the buildings": [
        "FAC_BUILDING.BUILDING_NAME"
      ],
      "floors": [
        "FAC_FLOOR.LEVEL_ID"
      ]
    },
    "join_keys": [
      [
        "FAC_ROOMS.BUILDING_KEY",
        "FAC_BUILDING.FAC_BUILDING_KEY"
      ],
      [
        "FAC_FLOOR.FLOOR_KEY",
        "FAC_ROOMS.FLOOR_KEY"
      ]
    ],
    "original_sql": "WITH FloorsPerBuilding AS (\n  SELECT\n    fb.BUILDING_NAME,\n    MAX(ff.LEVEL_ID) - MIN(ff.LEVEL_ID) AS NUM_FLOORS\n  FROM FAC_BUILDING AS fb\n  JOIN FAC_ROOMS AS fr\n    ON fb.FAC_BUILDING_KEY = fr.BUILDING_KEY\n  JOIN FAC_FLOOR AS ff\n    ON fr.FLOOR_KEY = ff.FLOOR_KEY\n  GROUP BY\n    fb.BUILDING_NAME\n), MaxFloors AS (\n  SELECT\n    MAX(NUM_FLOORS) AS MAX_FLOORS\n  FROM FloorsPerBuilding\n)\nSELECT\n  a.BUILDING_NAME\nFROM FloorsPerBuilding AS a\nJOIN MaxFloors AS b\n  ON a.NUM_FLOORS = b.MAX_FLOORS",
    "meta": {
      "features": {
        "query_table_count": 6,
        "query_column_count": 12,
        "query_nested_count": 2,
        "query_aggregate_count": 3,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "9249f2df3dca",
    "question": "For subjects offered in the summer term, list the subject titles, number of instructors, and the length of the longest instructor name.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  ccso.SUBJECT_TITLE,\n  COUNT(DISTINCT e.FULL_NAME) AS Num_Instructors,\n  MAX(LENGTH(e.FULL_NAME)) AS Longest_Instructor_Name\nFROM EMPLOYEE_DIRECTORY AS e\nJOIN COURSE_CATALOG_SUBJECT_OFFERED AS ccso\n  ON ccso.RESPONSIBLE_FACULTY_MIT_ID = e.MIT_ID\nJOIN ACADEMIC_TERMS_ALL AS at\n  ON ccso.TERM_CODE = at.TERM_CODE\nWHERE\n  at.TERM_CODE LIKE '%SU'\nGROUP BY\n  ccso.SUBJECT_TITLE"
    ],
    "oracle_sql": "SELECT ccso.SUBJECT_TITLE, COUNT(DISTINCT e.FULL_NAME) AS Num_Instructors, MAX(LENGTH(e.FULL_NAME)) AS Longest_Instructor_Name FROM EMPLOYEE_DIRECTORY e JOIN COURSE_CATALOG_SUBJECT_OFFERED ccso ON ccso.RESPONSIBLE_FACULTY_MIT_ID = e.MIT_ID JOIN ACADEMIC_TERMS_ALL at ON ccso.TERM_CODE = at.TERM_CODE WHERE at.TERM_CODE LIKE '%SU' GROUP BY ccso.SUBJECT_TITLE;",
    "gold_tables": [
      "dw#sep#EMPLOYEE_DIRECTORY",
      "dw#sep#COURSE_CATALOG_SUBJECT_OFFERED",
      "dw#sep#ACADEMIC_TERMS_ALL"
    ],
    "mapping": {
      "summer term": [
        "ACADEMIC_TERMS_ALL.TERM_CODE"
      ],
      "subject titles": [
        "COURSE_CATALOG_SUBJECT_OFFERED.SUBJECT_TITLE"
      ],
      "instructors": [
        "EMPLOYEE_DIRECTORY.FULL_NAME"
      ],
      "instructor name": [
        "EMPLOYEE_DIRECTORY.FULL_NAME"
      ]
    },
    "join_keys": [
      [
        "COURSE_CATALOG_SUBJECT_OFFERED.RESPONSIBLE_FACULTY_MIT_ID",
        "EMPLOYEE_DIRECTORY.MIT_ID"
      ],
      [
        "COURSE_CATALOG_SUBJECT_OFFERED.TERM_CODE",
        "ACADEMIC_TERMS_ALL.TERM_CODE"
      ]
    ],
    "original_sql": "SELECT\n  ccso.SUBJECT_TITLE,\n  COUNT(DISTINCT e.FULL_NAME) AS Num_Instructors,\n  MAX(LENGTH(e.FULL_NAME)) AS Longest_Instructor_Name\nFROM EMPLOYEE_DIRECTORY AS e\nJOIN COURSE_CATALOG_SUBJECT_OFFERED AS ccso\n  ON ccso.RESPONSIBLE_FACULTY_MIT_ID = e.MIT_ID\nJOIN ACADEMIC_TERMS_ALL AS at\n  ON ccso.TERM_CODE = at.TERM_CODE\nWHERE\n  at.TERM_CODE LIKE '%SU'\nGROUP BY\n  ccso.SUBJECT_TITLE",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 9,
        "query_nested_count": 0,
        "query_aggregate_count": 2,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "d6ad382b2ff0",
    "question": "For the mailing list with owner key LIST69.377-keeper-xenon, list the owner, total number of mailing lists, and total number of members across all these mailing lists.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  mlo.OWNER,\n  COUNT(DISTINCT ml.MOIRA_LIST_KEY) AS Total_Lists,\n  COUNT(DISTINCT mld.MOIRA_LIST_MEMBER) AS Total_Members\nFROM MOIRA_LIST AS ml\nJOIN MOIRA_LIST_DETAIL AS mld\n  ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\nJOIN MOIRA_LIST_OWNER AS mlo\n  ON mld.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY\nWHERE\n  mlo.MOIRA_LIST_OWNER_KEY = 'LIST69.377-keeper-xenon'\nGROUP BY\n  mlo.OWNER"
    ],
    "oracle_sql": "SELECT mlo.OWNER, COUNT(DISTINCT ml.MOIRA_LIST_KEY) AS Total_Lists, COUNT(DISTINCT mld.MOIRA_LIST_MEMBER) AS Total_Members FROM MOIRA_LIST ml JOIN MOIRA_LIST_DETAIL mld ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY JOIN MOIRA_LIST_OWNER mlo ON mld.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY WHERE mlo.MOIRA_LIST_OWNER_KEY = 'LIST69.377-keeper-xenon' GROUP BY mlo.OWNER;",
    "gold_tables": [
      "dw#sep#MOIRA_LIST",
      "dw#sep#MOIRA_LIST_DETAIL",
      "dw#sep#MOIRA_LIST_OWNER"
    ],
    "mapping": {
      "owner key": [
        "MOIRA_LIST_OWNER.MOIRA_LIST_OWNER_KEY"
      ],
      "owner": [
        "MOIRA_LIST_OWNER.OWNER"
      ],
      "mailing lists": [
        "MOIRA_LIST.MOIRA_LIST_KEY"
      ],
      "members": [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_MEMBER"
      ]
    },
    "join_keys": [
      [
        "MOIRA_LIST.MOIRA_LIST_KEY",
        "MOIRA_LIST_DETAIL.MOIRA_LIST_KEY"
      ],
      [
        "MOIRA_LIST_DETAIL.MOIRA_LIST_OWNER_KEY",
        "MOIRA_LIST_OWNER.MOIRA_LIST_OWNER_KEY"
      ]
    ],
    "original_sql": "SELECT\n  mlo.OWNER,\n  COUNT(DISTINCT ml.MOIRA_LIST_KEY) AS Total_Lists,\n  COUNT(DISTINCT mld.MOIRA_LIST_MEMBER) AS Total_Members\nFROM MOIRA_LIST AS ml\nJOIN MOIRA_LIST_DETAIL AS mld\n  ON ml.MOIRA_LIST_KEY = mld.MOIRA_LIST_KEY\nJOIN MOIRA_LIST_OWNER AS mlo\n  ON mld.MOIRA_LIST_OWNER_KEY = mlo.MOIRA_LIST_OWNER_KEY\nWHERE\n  mlo.MOIRA_LIST_OWNER_KEY = 'LIST69.377-keeper-xenon'\nGROUP BY\n  mlo.OWNER",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 9,
        "query_nested_count": 0,
        "query_aggregate_count": 2,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "a2be3d3a7fd7",
    "question": "For each school, list the school name, total number of courses that appear in SIS subject code catalog, and the total number of degree-granting courses that appear in SIS subject code catalog.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  sd.SCHOOL_NAME,\n  COUNT(DISTINCT scd.COURSE) AS Total_Courses,\n  COUNT(CASE WHEN scd.IS_DEGREE_GRANTING = 'Y' THEN 1 END) AS Num_Degree_Granting_Y\nFROM SIS_COURSE_DESCRIPTION AS scd\nJOIN SIS_DEPARTMENT AS sd\n  ON scd.DEPARTMENT = sd.DEPARTMENT_CODE\nJOIN SIS_SUBJECT_CODE AS ssc\n  ON scd.COURSE = ssc.COURSE_NUMBER\nGROUP BY\n  sd.SCHOOL_NAME"
    ],
    "oracle_sql": "SELECT sd.SCHOOL_NAME, COUNT(DISTINCT scd.COURSE) AS Total_Courses, COUNT(CASE WHEN scd.IS_DEGREE_GRANTING = 'Y' THEN 1 END) AS Num_Degree_Granting_Y FROM SIS_COURSE_DESCRIPTION scd JOIN SIS_DEPARTMENT sd ON scd.DEPARTMENT = sd.DEPARTMENT_CODE JOIN SIS_SUBJECT_CODE ssc ON scd.COURSE = ssc.COURSE_NUMBER GROUP BY sd.SCHOOL_NAME;",
    "gold_tables": [
      "dw#sep#SIS_COURSE_DESCRIPTION",
      "dw#sep#SIS_DEPARTMENT",
      "dw#sep#SIS_SUBJECT_CODE"
    ],
    "mapping": {
      "school name": [
        "SIS_DEPARTMENT.SCHOOL_NAME"
      ],
      "courses": [
        "SIS_COURSE_DESCRIPTION.COURSE"
      ],
      "degree-granting courses": [
        "SIS_COURSE_DESCRIPTION.IS_DEGREE_GRANTING"
      ]
    },
    "join_keys": [
      [
        "SIS_COURSE_DESCRIPTION.DEPARTMENT",
        "SIS_DEPARTMENT.DEPARTMENT_CODE"
      ],
      [
        "SIS_COURSE_DESCRIPTION.COURSE",
        "SIS_SUBJECT_CODE.COURSE_NUMBER"
      ]
    ],
    "original_sql": "SELECT\n  sd.SCHOOL_NAME,\n  COUNT(DISTINCT scd.COURSE) AS Total_Courses,\n  COUNT(CASE WHEN scd.IS_DEGREE_GRANTING = 'Y' THEN 1 END) AS Num_Degree_Granting_Y\nFROM SIS_COURSE_DESCRIPTION AS scd\nJOIN SIS_DEPARTMENT AS sd\n  ON scd.DEPARTMENT = sd.DEPARTMENT_CODE\nJOIN SIS_SUBJECT_CODE AS ssc\n  ON scd.COURSE = ssc.COURSE_NUMBER\nGROUP BY\n  sd.SCHOOL_NAME",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 8,
        "query_nested_count": 0,
        "query_aggregate_count": 2,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "7be987b6e858",
    "question": "For each department, list the department name, department phone number, number of students, and the length of the longest student full name in that department.",
    "db_id": "dw",
    "sql": [
      "SELECT\n  sd.DEPARTMENT_NAME,\n  sad.DEPARTMENT_PHONE_NUMBER,\n  COUNT(DISTINCT msd.EMAIL_ADDRESS) AS Num_Students,\n  MAX(LENGTH(msd.FULL_NAME)) AS Longest_Student_Name_Length\nFROM MIT_STUDENT_DIRECTORY AS msd\nJOIN SIS_DEPARTMENT AS sd\n  ON msd.DEPARTMENT = sd.DEPARTMENT_CODE\nJOIN SIS_ADMIN_DEPARTMENT AS sad\n  ON sd.DEPARTMENT_CODE = sad.SIS_ADMIN_DEPARTMENT_CODE\nGROUP BY\n  sd.DEPARTMENT_NAME,\n  sad.DEPARTMENT_PHONE_NUMBER"
    ],
    "oracle_sql": "SELECT sd.DEPARTMENT_NAME, sad.DEPARTMENT_PHONE_NUMBER, COUNT(DISTINCT msd.EMAIL_ADDRESS) AS Num_Students, MAX(LENGTH(msd.FULL_NAME)) AS Longest_Student_Name_Length FROM MIT_STUDENT_DIRECTORY msd JOIN SIS_DEPARTMENT sd ON msd.DEPARTMENT = sd.DEPARTMENT_CODE JOIN SIS_ADMIN_DEPARTMENT sad ON sd.DEPARTMENT_CODE = sad.SIS_ADMIN_DEPARTMENT_CODE GROUP BY sd.DEPARTMENT_NAME, sad.DEPARTMENT_PHONE_NUMBER;",
    "gold_tables": [
      "dw#sep#MIT_STUDENT_DIRECTORY",
      "dw#sep#SIS_DEPARTMENT",
      "dw#sep#SIS_ADMIN_DEPARTMENT"
    ],
    "mapping": {
      "department name": [
        "SIS_DEPARTMENT.DEPARTMENT_NAME"
      ],
      "department phone number": [
        "SIS_ADMIN_DEPARTMENT.DEPARTMENT_PHONE_NUMBER"
      ],
      "students": [
        "MIT_STUDENT_DIRECTORY.EMAIL_ADDRESS"
      ],
      "student full name": [
        "MIT_STUDENT_DIRECTORY.FULL_NAME"
      ]
    },
    "join_keys": [
      [
        "MIT_STUDENT_DIRECTORY.DEPARTMENT",
        "SIS_DEPARTMENT.DEPARTMENT_CODE"
      ],
      [
        "SIS_ADMIN_DEPARTMENT.SIS_ADMIN_DEPARTMENT_CODE",
        "SIS_DEPARTMENT.DEPARTMENT_CODE"
      ]
    ],
    "original_sql": "SELECT\n  sd.DEPARTMENT_NAME,\n  sad.DEPARTMENT_PHONE_NUMBER,\n  COUNT(DISTINCT msd.EMAIL_ADDRESS) AS Num_Students,\n  MAX(LENGTH(msd.FULL_NAME)) AS Longest_Student_Name_Length\nFROM MIT_STUDENT_DIRECTORY AS msd\nJOIN SIS_DEPARTMENT AS sd\n  ON msd.DEPARTMENT = sd.DEPARTMENT_CODE\nJOIN SIS_ADMIN_DEPARTMENT AS sad\n  ON sd.DEPARTMENT_CODE = sad.SIS_ADMIN_DEPARTMENT_CODE\nGROUP BY\n  sd.DEPARTMENT_NAME,\n  sad.DEPARTMENT_PHONE_NUMBER",
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 10,
        "query_nested_count": 0,
        "query_aggregate_count": 2,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "e60ecad01af4",
    "question": "Provide information (including info caches, and security groups) about VMs running on physical host star-76.",
    "sql": [
      "SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id \nFROM instances LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = instances.uuid LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = instances.uuid AND instances.deleted = 0 \nWHERE instances.deleted = 0 AND instances.host = 'star-76'"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "INSTANCES.UUID",
        "INSTANCE_INFO_CACHES.INSTANCE_UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 79,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "e1b0690b3f8d",
    "question": "Provide information about groups that user with id ccbbd0bdf0104ea68a37483b13b14be2 belongs to.",
    "sql": [
      "SELECT `group`.id AS group_id, `group`.name AS group_name, `group`.domain_id AS group_domain_id, `group`.description AS group_description, `group`.extra AS group_extra \nFROM `group` INNER JOIN user_group_membership ON `group`.id = user_group_membership.group_id \nWHERE user_group_membership.user_id = 'ccbbd0bdf0104ea68a37483b13b14be2'"
    ],
    "db_id": "keystone",
    "join_keys": [
      [
        "USER_GROUP_MEMBERSHIP.GROUP_ID",
        "GROUP.ID"
      ]
    ],
    "gold_tables": [
      "keystone#sep#USER_GROUP_MEMBERSHIP",
      "keystone#sep#GROUP"
    ],
    "meta": {
      "features": {
        "query_table_count": 2,
        "query_column_count": 8,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 1
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "ed7f2c5a7de3",
    "question": "Provide information about floating IP associated with fixed address 10.77.55.40/8 on fixed port 6450a4fa-accf-43f6-a664-b0b5ad7637df.",
    "sql": [
      "SELECT floatingips.tenant_id AS floatingips_tenant_id, floatingips.id AS floatingips_id, floatingips.floating_ip_address AS floatingips_floating_ip_address, floatingips.floating_network_id AS floatingips_floating_network_id, floatingips.floating_port_id AS floatingips_floating_port_id, floatingips.fixed_port_id AS floatingips_fixed_port_id, floatingips.fixed_ip_address AS floatingips_fixed_ip_address, floatingips.router_id AS floatingips_router_id, floatingips.last_known_router_id AS floatingips_last_known_router_id, floatingips.status AS floatingips_status, floatingips.standard_attr_id AS floatingips_standard_attr_id, standardattributes_1.created_at AS standardattributes_1_created_at, standardattributes_1.updated_at AS standardattributes_1_updated_at, standardattributes_1.id AS standardattributes_1_id, standardattributes_1.resource_type AS standardattributes_1_resource_type, standardattributes_1.description AS standardattributes_1_description, tags_1.standard_attr_id AS tags_1_standard_attr_id, tags_1.tag AS tags_1_tag, floatingipdnses_1.floatingip_id AS floatingipdnses_1_floatingip_id, floatingipdnses_1.dns_name AS floatingipdnses_1_dns_name, floatingipdnses_1.dns_domain AS floatingipdnses_1_dns_domain, floatingipdnses_1.published_dns_name AS floatingipdnses_1_published_dns_name, floatingipdnses_1.published_dns_domain AS floatingipdnses_1_published_dns_domain \nFROM floatingips LEFT OUTER JOIN standardattributes AS standardattributes_1 ON standardattributes_1.id = floatingips.standard_attr_id LEFT OUTER JOIN tags AS tags_1 ON standardattributes_1.id = tags_1.standard_attr_id LEFT OUTER JOIN floatingipdnses AS floatingipdnses_1 ON floatingips.id = floatingipdnses_1.floatingip_id \nWHERE floatingips.fixed_ip_address IN ('10.77.55.40/8') AND floatingips.fixed_port_id IN ('6450a4fa-accf-43f6-a664-b0b5ad7637df')"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "STANDARDATTRIBUTES.ID",
        "FLOATINGIPS.STANDARD_ATTR_ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "TAGS.STANDARD_ATTR_ID"
      ],
      [
        "FLOATINGIPDNSES.FLOATINGIP_ID",
        "FLOATINGIPS.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#TAGS",
      "csail_stata_neutron#sep#STANDARDATTRIBUTES",
      "csail_stata_neutron#sep#FLOATINGIPS",
      "csail_stata_neutron#sep#FLOATINGIPDNSES"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 31,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "256b4bac41b3",
    "question": "Provide information (including extra data) about VMs assigned to the physical host cosmo3-23.",
    "sql": [
      "SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned, instance_extra_1.numa_topology AS instance_extra_1_numa_topology, instance_extra_1.flavor AS instance_extra_1_flavor, instance_extra_1.migration_context AS instance_extra_1_migration_context, instance_extra_1.created_at AS instance_extra_1_created_at, instance_extra_1.updated_at AS instance_extra_1_updated_at, instance_extra_1.deleted_at AS instance_extra_1_deleted_at, instance_extra_1.deleted AS instance_extra_1_deleted, instance_extra_1.id AS instance_extra_1_id, instance_extra_1.instance_uuid AS instance_extra_1_instance_uuid \nFROM instances LEFT OUTER JOIN instance_extra AS instance_extra_1 ON instance_extra_1.instance_uuid = instances.uuid \nWHERE instances.deleted = 0 AND instances.host = 'cosmo3-23' AND instances.node = 'cosmo3-23.yahoo.ca.com'"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "INSTANCES.UUID",
        "INSTANCE_EXTRA.INSTANCE_UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_EXTRA",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 2,
        "query_column_count": 66,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 1
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "60ee823ecec2",
    "question": "Provide information about migrations associated with VM that moves to or from the physical host cosmo3-23.",
    "sql": [
      "SELECT migrations.created_at AS migrations_created_at, migrations.updated_at AS migrations_updated_at, migrations.deleted_at AS migrations_deleted_at, migrations.deleted AS migrations_deleted, migrations.id AS migrations_id, migrations.source_compute AS migrations_source_compute, migrations.dest_compute AS migrations_dest_compute, migrations.source_node AS migrations_source_node, migrations.dest_node AS migrations_dest_node, migrations.dest_host AS migrations_dest_host, migrations.old_instance_type_id AS migrations_old_instance_type_id, migrations.new_instance_type_id AS migrations_new_instance_type_id, migrations.instance_uuid AS migrations_instance_uuid, migrations.status AS migrations_status, migrations.migration_type AS migrations_migration_type, migrations.hidden AS migrations_hidden, migrations.memory_total AS migrations_memory_total, migrations.memory_processed AS migrations_memory_processed, migrations.memory_remaining AS migrations_memory_remaining, migrations.disk_total AS migrations_disk_total, migrations.disk_processed AS migrations_disk_processed, migrations.disk_remaining AS migrations_disk_remaining, instances_1.created_at AS instances_1_created_at, instances_1.updated_at AS instances_1_updated_at, instances_1.deleted_at AS instances_1_deleted_at, instances_1.deleted AS instances_1_deleted, instances_1.id AS instances_1_id, instances_1.user_id AS instances_1_user_id, instances_1.project_id AS instances_1_project_id, instances_1.image_ref AS instances_1_image_ref, instances_1.kernel_id AS instances_1_kernel_id, instances_1.ramdisk_id AS instances_1_ramdisk_id, instances_1.hostname AS instances_1_hostname, instances_1.launch_index AS instances_1_launch_index, instances_1.key_name AS instances_1_key_name, instances_1.key_data AS instances_1_key_data, instances_1.power_state AS instances_1_power_state, instances_1.vm_state AS instances_1_vm_state, instances_1.task_state AS instances_1_task_state, instances_1.memory_mb AS instances_1_memory_mb, instances_1.vcpus AS instances_1_vcpus, instances_1.root_gb AS instances_1_root_gb, instances_1.ephemeral_gb AS instances_1_ephemeral_gb, instances_1.ephemeral_key_uuid AS instances_1_ephemeral_key_uuid, instances_1.host AS instances_1_host, instances_1.node AS instances_1_node, instances_1.instance_type_id AS instances_1_instance_type_id, instances_1.user_data AS instances_1_user_data, instances_1.reservation_id AS instances_1_reservation_id, instances_1.launched_at AS instances_1_launched_at, instances_1.terminated_at AS instances_1_terminated_at, instances_1.availability_zone AS instances_1_availability_zone, instances_1.display_name AS instances_1_display_name, instances_1.display_description AS instances_1_display_description, instances_1.launched_on AS instances_1_launched_on, instances_1.locked AS instances_1_locked, instances_1.locked_by AS instances_1_locked_by, instances_1.os_type AS instances_1_os_type, instances_1.architecture AS instances_1_architecture, instances_1.vm_mode AS instances_1_vm_mode, instances_1.uuid AS instances_1_uuid, instances_1.root_device_name AS instances_1_root_device_name, instances_1.default_ephemeral_device AS instances_1_default_ephemeral_device, instances_1.default_swap_device AS instances_1_default_swap_device, instances_1.config_drive AS instances_1_config_drive, instances_1.access_ip_v4 AS instances_1_access_ip_v4, instances_1.access_ip_v6 AS instances_1_access_ip_v6, instances_1.auto_disk_config AS instances_1_auto_disk_config, instances_1.progress AS instances_1_progress, instances_1.shutdown_terminate AS instances_1_shutdown_terminate, instances_1.disable_terminate AS instances_1_disable_terminate, instances_1.cell_name AS instances_1_cell_name, instances_1.internal_id AS instances_1_internal_id, instances_1.cleaned AS instances_1_cleaned, instance_system_metadata_1.created_at AS instance_system_metadata_1_created_at, instance_system_metadata_1.updated_at AS instance_system_metadata_1_updated_at, instance_system_metadata_1.deleted_at AS instance_system_metadata_1_deleted_at, instance_system_metadata_1.deleted AS instance_system_metadata_1_deleted, instance_system_metadata_1.id AS instance_system_metadata_1_id, instance_system_metadata_1.`key` AS instance_system_metadata_1_key, instance_system_metadata_1.value AS instance_system_metadata_1_value, instance_system_metadata_1.instance_uuid AS instance_system_metadata_1_instance_uuid \nFROM migrations LEFT OUTER JOIN instances AS instances_1 ON migrations.instance_uuid = instances_1.uuid AND instances_1.deleted = 0 LEFT OUTER JOIN instance_system_metadata AS instance_system_metadata_1 ON instances_1.uuid = instance_system_metadata_1.instance_uuid \nWHERE migrations.deleted = 0 AND (migrations.source_compute = 'cosmo3-23' AND migrations.source_node = 'cosmo3-23.yahoo.ca.com' OR migrations.dest_compute = 'cosmo3-23' AND migrations.dest_node = 'cosmo3-23.yahoo.ca.com') AND migrations.status NOT IN ('accepted', 'confirmed', 'reverted', 'error', 'failed', 'completed')"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "MIGRATIONS.INSTANCE_UUID",
        "INSTANCES.UUID"
      ],
      [
        "INSTANCE_SYSTEM_METADATA.INSTANCE_UUID",
        "INSTANCES.UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_SYSTEM_METADATA",
      "csail_stata_nova#sep#MIGRATIONS",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 93,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "ae5bb3ecd0c4",
    "question": "Provide information (including extra data) about VMs assigned to the physical host glyph1-33.",
    "sql": [
      "SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned, instance_extra_1.numa_topology AS instance_extra_1_numa_topology, instance_extra_1.flavor AS instance_extra_1_flavor, instance_extra_1.migration_context AS instance_extra_1_migration_context, instance_extra_1.created_at AS instance_extra_1_created_at, instance_extra_1.updated_at AS instance_extra_1_updated_at, instance_extra_1.deleted_at AS instance_extra_1_deleted_at, instance_extra_1.deleted AS instance_extra_1_deleted, instance_extra_1.id AS instance_extra_1_id, instance_extra_1.instance_uuid AS instance_extra_1_instance_uuid \nFROM instances LEFT OUTER JOIN instance_extra AS instance_extra_1 ON instance_extra_1.instance_uuid = instances.uuid \nWHERE instances.deleted = 0 AND instances.host = 'glyph1-33' AND instances.node = 'glyph1-33.yahoo.ca.com'"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "INSTANCE_EXTRA.INSTANCE_UUID",
        "INSTANCES.UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_EXTRA",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 2,
        "query_column_count": 66,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 1
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "f7494c2c7d4b",
    "question": "Provide information (including info caches, and security groups) about VMs on the physical host galax4-70 that have not yet been cleaned up.",
    "sql": [
      "SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id \nFROM instances LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = instances.uuid LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = instances.uuid AND instances.deleted = 0 \nWHERE instances.deleted = instances.id AND instances.cleaned = 0 AND instances.host = 'galax4-70' ORDER BY instances.created_at DESC, instances.id DESC"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "INSTANCE_INFO_CACHES.INSTANCE_UUID",
        "INSTANCES.UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 83,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 2,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "has_sorting",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "4e12c43c4da5",
    "question": "Provide information about resource reservation expiring before 2024-05-10 15:07:36.855290.",
    "sql": [
      "SELECT reservations.created_at AS reservations_created_at, reservations.updated_at AS reservations_updated_at, reservations.deleted_at AS reservations_deleted_at, reservations.deleted AS reservations_deleted, reservations.id AS reservations_id, reservations.uuid AS reservations_uuid, reservations.usage_id AS reservations_usage_id, reservations.project_id AS reservations_project_id, reservations.user_id AS reservations_user_id, reservations.resource AS reservations_resource, reservations.delta AS reservations_delta, reservations.expire AS reservations_expire \nFROM reservations INNER JOIN quota_usages ON quota_usages.id = reservations.usage_id \nWHERE reservations.deleted = 0 AND reservations.expire < '2024-05-10 15:07:36.855290'"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "QUOTA_USAGES.ID",
        "RESERVATIONS.USAGE_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#RESERVATIONS",
      "csail_stata_nova#sep#QUOTA_USAGES"
    ],
    "meta": {
      "features": {
        "query_table_count": 2,
        "query_column_count": 16,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 1
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "a83cf0d10a2c",
    "question": "Provide information about the port with ip address 10.115.70.43/8 under network 0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d.",
    "sql": [
      "SELECT ports.tenant_id AS ports_tenant_id, ports.id AS ports_id, ports.name AS ports_name, ports.network_id AS ports_network_id, ports.mac_address AS ports_mac_address, ports.admin_state_up AS ports_admin_state_up, ports.status AS ports_status, ports.device_id AS ports_device_id, ports.device_owner AS ports_device_owner, ports.dns_name AS ports_dns_name, ports.standard_attr_id AS ports_standard_attr_id, ipallocations_1.port_id AS ipallocations_1_port_id, ipallocations_1.ip_address AS ipallocations_1_ip_address, ipallocations_1.subnet_id AS ipallocations_1_subnet_id, ipallocations_1.network_id AS ipallocations_1_network_id, standardattributes_1.created_at AS standardattributes_1_created_at, standardattributes_1.updated_at AS standardattributes_1_updated_at, standardattributes_1.id AS standardattributes_1_id, standardattributes_1.resource_type AS standardattributes_1_resource_type, standardattributes_1.description AS standardattributes_1_description, tags_1.standard_attr_id AS tags_1_standard_attr_id, tags_1.tag AS tags_1_tag, portsecuritybindings_1.port_id AS portsecuritybindings_1_port_id, portsecuritybindings_1.port_security_enabled AS portsecuritybindings_1_port_security_enabled, ml2_dvr_port_bindings_1.port_id AS ml2_dvr_port_bindings_1_port_id, ml2_dvr_port_bindings_1.host AS ml2_dvr_port_bindings_1_host, ml2_dvr_port_bindings_1.router_id AS ml2_dvr_port_bindings_1_router_id, ml2_dvr_port_bindings_1.vif_type AS ml2_dvr_port_bindings_1_vif_type, ml2_dvr_port_bindings_1.vif_details AS ml2_dvr_port_bindings_1_vif_details, ml2_dvr_port_bindings_1.vnic_type AS ml2_dvr_port_bindings_1_vnic_type, ml2_dvr_port_bindings_1.profile AS ml2_dvr_port_bindings_1_profile, ml2_dvr_port_bindings_1.status AS ml2_dvr_port_bindings_1_status, allowedaddresspairs_1.port_id AS allowedaddresspairs_1_port_id, allowedaddresspairs_1.mac_address AS allowedaddresspairs_1_mac_address, allowedaddresspairs_1.ip_address AS allowedaddresspairs_1_ip_address, qos_port_policy_bindings_1.policy_id AS qos_port_policy_bindings_1_policy_id, qos_port_policy_bindings_1.port_id AS qos_port_policy_bindings_1_port_id, securitygroupportbindings_1.port_id AS securitygroupportbindings_1_port_id, securitygroupportbindings_1.security_group_id AS securitygroupportbindings_1_security_group_id, ml2_port_bindings_1.port_id AS ml2_port_bindings_1_port_id, ml2_port_bindings_1.host AS ml2_port_bindings_1_host, ml2_port_bindings_1.vnic_type AS ml2_port_bindings_1_vnic_type, ml2_port_bindings_1.profile AS ml2_port_bindings_1_profile, ml2_port_bindings_1.vif_type AS ml2_port_bindings_1_vif_type, ml2_port_bindings_1.vif_details AS ml2_port_bindings_1_vif_details, extradhcpopts_1.id AS extradhcpopts_1_id, extradhcpopts_1.port_id AS extradhcpopts_1_port_id, extradhcpopts_1.opt_name AS extradhcpopts_1_opt_name, extradhcpopts_1.opt_value AS extradhcpopts_1_opt_value, extradhcpopts_1.ip_version AS extradhcpopts_1_ip_version, portdnses_1.port_id AS portdnses_1_port_id, portdnses_1.current_dns_name AS portdnses_1_current_dns_name, portdnses_1.current_dns_domain AS portdnses_1_current_dns_domain, portdnses_1.previous_dns_name AS portdnses_1_previous_dns_name, portdnses_1.previous_dns_domain AS portdnses_1_previous_dns_domain \nFROM ports LEFT OUTER JOIN ml2_port_bindings ON ports.id = ml2_port_bindings.port_id INNER JOIN ipallocations ON ports.id = ipallocations.port_id LEFT OUTER JOIN ipallocations AS ipallocations_1 ON ports.id = ipallocations_1.port_id LEFT OUTER JOIN standardattributes AS standardattributes_1 ON standardattributes_1.id = ports.standard_attr_id LEFT OUTER JOIN tags AS tags_1 ON standardattributes_1.id = tags_1.standard_attr_id LEFT OUTER JOIN portsecuritybindings AS portsecuritybindings_1 ON ports.id = portsecuritybindings_1.port_id LEFT OUTER JOIN ml2_dvr_port_bindings AS ml2_dvr_port_bindings_1 ON ports.id = ml2_dvr_port_bindings_1.port_id LEFT OUTER JOIN allowedaddresspairs AS allowedaddresspairs_1 ON ports.id = allowedaddresspairs_1.port_id LEFT OUTER JOIN qos_port_policy_bindings AS qos_port_policy_bindings_1 ON ports.id = qos_port_policy_bindings_1.port_id LEFT OUTER JOIN securitygroupportbindings AS securitygroupportbindings_1 ON ports.id = securitygroupportbindings_1.port_id LEFT OUTER JOIN ml2_port_bindings AS ml2_port_bindings_1 ON ports.id = ml2_port_bindings_1.port_id LEFT OUTER JOIN extradhcpopts AS extradhcpopts_1 ON ports.id = extradhcpopts_1.port_id LEFT OUTER JOIN portdnses AS portdnses_1 ON ports.id = portdnses_1.port_id \nWHERE ipallocations.ip_address IN ('10.115.70.43/8') AND ports.network_id IN ('0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d')"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "PORTS.ID",
        "ML2_PORT_BINDINGS.PORT_ID"
      ],
      [
        "IPALLOCATIONS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "IPALLOCATIONS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "PORTS.STANDARD_ATTR_ID",
        "STANDARDATTRIBUTES.ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "TAGS.STANDARD_ATTR_ID"
      ],
      [
        "PORTS.ID",
        "PORTSECURITYBINDINGS.PORT_ID"
      ],
      [
        "PORTS.ID",
        "ML2_DVR_PORT_BINDINGS.PORT_ID"
      ],
      [
        "PORTS.ID",
        "ALLOWEDADDRESSPAIRS.PORT_ID"
      ],
      [
        "QOS_PORT_POLICY_BINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "SECURITYGROUPPORTBINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "ML2_PORT_BINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "EXTRADHCPOPTS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "PORTS.ID",
        "PORTDNSES.PORT_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#IPALLOCATIONS",
      "csail_stata_neutron#sep#PORTS",
      "csail_stata_neutron#sep#PORTDNSES",
      "csail_stata_neutron#sep#ML2_DVR_PORT_BINDINGS",
      "csail_stata_neutron#sep#STANDARDATTRIBUTES",
      "csail_stata_neutron#sep#ALLOWEDADDRESSPAIRS",
      "csail_stata_neutron#sep#EXTRADHCPOPTS",
      "csail_stata_neutron#sep#SECURITYGROUPPORTBINDINGS",
      "csail_stata_neutron#sep#QOS_PORT_POLICY_BINDINGS",
      "csail_stata_neutron#sep#ML2_PORT_BINDINGS",
      "csail_stata_neutron#sep#TAGS",
      "csail_stata_neutron#sep#PORTSECURITYBINDINGS"
    ],
    "meta": {
      "features": {
        "query_table_count": 14,
        "query_column_count": 83,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 13
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "7370355394f9",
    "question": "Provide information about the port with ip address 10.145.219.202/8 under network 0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d.",
    "sql": [
      "SELECT ports.tenant_id AS ports_tenant_id, ports.id AS ports_id, ports.name AS ports_name, ports.network_id AS ports_network_id, ports.mac_address AS ports_mac_address, ports.admin_state_up AS ports_admin_state_up, ports.status AS ports_status, ports.device_id AS ports_device_id, ports.device_owner AS ports_device_owner, ports.dns_name AS ports_dns_name, ports.standard_attr_id AS ports_standard_attr_id, ipallocations_1.port_id AS ipallocations_1_port_id, ipallocations_1.ip_address AS ipallocations_1_ip_address, ipallocations_1.subnet_id AS ipallocations_1_subnet_id, ipallocations_1.network_id AS ipallocations_1_network_id, standardattributes_1.created_at AS standardattributes_1_created_at, standardattributes_1.updated_at AS standardattributes_1_updated_at, standardattributes_1.id AS standardattributes_1_id, standardattributes_1.resource_type AS standardattributes_1_resource_type, standardattributes_1.description AS standardattributes_1_description, tags_1.standard_attr_id AS tags_1_standard_attr_id, tags_1.tag AS tags_1_tag, portsecuritybindings_1.port_id AS portsecuritybindings_1_port_id, portsecuritybindings_1.port_security_enabled AS portsecuritybindings_1_port_security_enabled, ml2_dvr_port_bindings_1.port_id AS ml2_dvr_port_bindings_1_port_id, ml2_dvr_port_bindings_1.host AS ml2_dvr_port_bindings_1_host, ml2_dvr_port_bindings_1.router_id AS ml2_dvr_port_bindings_1_router_id, ml2_dvr_port_bindings_1.vif_type AS ml2_dvr_port_bindings_1_vif_type, ml2_dvr_port_bindings_1.vif_details AS ml2_dvr_port_bindings_1_vif_details, ml2_dvr_port_bindings_1.vnic_type AS ml2_dvr_port_bindings_1_vnic_type, ml2_dvr_port_bindings_1.profile AS ml2_dvr_port_bindings_1_profile, ml2_dvr_port_bindings_1.status AS ml2_dvr_port_bindings_1_status, allowedaddresspairs_1.port_id AS allowedaddresspairs_1_port_id, allowedaddresspairs_1.mac_address AS allowedaddresspairs_1_mac_address, allowedaddresspairs_1.ip_address AS allowedaddresspairs_1_ip_address, qos_port_policy_bindings_1.policy_id AS qos_port_policy_bindings_1_policy_id, qos_port_policy_bindings_1.port_id AS qos_port_policy_bindings_1_port_id, securitygroupportbindings_1.port_id AS securitygroupportbindings_1_port_id, securitygroupportbindings_1.security_group_id AS securitygroupportbindings_1_security_group_id, ml2_port_bindings_1.port_id AS ml2_port_bindings_1_port_id, ml2_port_bindings_1.host AS ml2_port_bindings_1_host, ml2_port_bindings_1.vnic_type AS ml2_port_bindings_1_vnic_type, ml2_port_bindings_1.profile AS ml2_port_bindings_1_profile, ml2_port_bindings_1.vif_type AS ml2_port_bindings_1_vif_type, ml2_port_bindings_1.vif_details AS ml2_port_bindings_1_vif_details, extradhcpopts_1.id AS extradhcpopts_1_id, extradhcpopts_1.port_id AS extradhcpopts_1_port_id, extradhcpopts_1.opt_name AS extradhcpopts_1_opt_name, extradhcpopts_1.opt_value AS extradhcpopts_1_opt_value, extradhcpopts_1.ip_version AS extradhcpopts_1_ip_version, portdnses_1.port_id AS portdnses_1_port_id, portdnses_1.current_dns_name AS portdnses_1_current_dns_name, portdnses_1.current_dns_domain AS portdnses_1_current_dns_domain, portdnses_1.previous_dns_name AS portdnses_1_previous_dns_name, portdnses_1.previous_dns_domain AS portdnses_1_previous_dns_domain \nFROM ports LEFT OUTER JOIN ml2_port_bindings ON ports.id = ml2_port_bindings.port_id INNER JOIN ipallocations ON ports.id = ipallocations.port_id LEFT OUTER JOIN ipallocations AS ipallocations_1 ON ports.id = ipallocations_1.port_id LEFT OUTER JOIN standardattributes AS standardattributes_1 ON standardattributes_1.id = ports.standard_attr_id LEFT OUTER JOIN tags AS tags_1 ON standardattributes_1.id = tags_1.standard_attr_id LEFT OUTER JOIN portsecuritybindings AS portsecuritybindings_1 ON ports.id = portsecuritybindings_1.port_id LEFT OUTER JOIN ml2_dvr_port_bindings AS ml2_dvr_port_bindings_1 ON ports.id = ml2_dvr_port_bindings_1.port_id LEFT OUTER JOIN allowedaddresspairs AS allowedaddresspairs_1 ON ports.id = allowedaddresspairs_1.port_id LEFT OUTER JOIN qos_port_policy_bindings AS qos_port_policy_bindings_1 ON ports.id = qos_port_policy_bindings_1.port_id LEFT OUTER JOIN securitygroupportbindings AS securitygroupportbindings_1 ON ports.id = securitygroupportbindings_1.port_id LEFT OUTER JOIN ml2_port_bindings AS ml2_port_bindings_1 ON ports.id = ml2_port_bindings_1.port_id LEFT OUTER JOIN extradhcpopts AS extradhcpopts_1 ON ports.id = extradhcpopts_1.port_id LEFT OUTER JOIN portdnses AS portdnses_1 ON ports.id = portdnses_1.port_id \nWHERE ipallocations.ip_address IN ('10.145.219.202/8') AND ports.network_id IN ('0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d')"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "PORTS.ID",
        "ML2_PORT_BINDINGS.PORT_ID"
      ],
      [
        "IPALLOCATIONS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "PORTS.ID",
        "IPALLOCATIONS.PORT_ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "PORTS.STANDARD_ATTR_ID"
      ],
      [
        "TAGS.STANDARD_ATTR_ID",
        "STANDARDATTRIBUTES.ID"
      ],
      [
        "PORTS.ID",
        "PORTSECURITYBINDINGS.PORT_ID"
      ],
      [
        "ML2_DVR_PORT_BINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "PORTS.ID",
        "ALLOWEDADDRESSPAIRS.PORT_ID"
      ],
      [
        "PORTS.ID",
        "QOS_PORT_POLICY_BINDINGS.PORT_ID"
      ],
      [
        "SECURITYGROUPPORTBINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "PORTS.ID",
        "ML2_PORT_BINDINGS.PORT_ID"
      ],
      [
        "PORTS.ID",
        "EXTRADHCPOPTS.PORT_ID"
      ],
      [
        "PORTS.ID",
        "PORTDNSES.PORT_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#IPALLOCATIONS",
      "csail_stata_neutron#sep#PORTS",
      "csail_stata_neutron#sep#PORTDNSES",
      "csail_stata_neutron#sep#ML2_DVR_PORT_BINDINGS",
      "csail_stata_neutron#sep#STANDARDATTRIBUTES",
      "csail_stata_neutron#sep#ALLOWEDADDRESSPAIRS",
      "csail_stata_neutron#sep#EXTRADHCPOPTS",
      "csail_stata_neutron#sep#SECURITYGROUPPORTBINDINGS",
      "csail_stata_neutron#sep#QOS_PORT_POLICY_BINDINGS",
      "csail_stata_neutron#sep#ML2_PORT_BINDINGS",
      "csail_stata_neutron#sep#TAGS",
      "csail_stata_neutron#sep#PORTSECURITYBINDINGS"
    ],
    "meta": {
      "features": {
        "query_table_count": 14,
        "query_column_count": 83,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 13
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "0ba1dc9ef447",
    "question": "Provide password information about the local user with id ccbbd0bdf0104ea68a37483b13b14be2.",
    "sql": [
      "SELECT password.id AS password_id, password.local_user_id AS password_local_user_id, password.password AS password_password, local_user_1.id AS local_user_1_id \nFROM (SELECT user.id AS user_id \nFROM user \nWHERE user.id = 'ccbbd0bdf0104ea68a37483b13b14be2') AS anon_1 INNER JOIN local_user AS local_user_1 ON anon_1.user_id = local_user_1.user_id INNER JOIN password ON local_user_1.id = password.local_user_id ORDER BY local_user_1.id"
    ],
    "db_id": "keystone",
    "join_keys": [
      [
        "LOCAL_USER.ID",
        "PASSWORD.LOCAL_USER_ID"
      ]
    ],
    "gold_tables": [
      "keystone#sep#USER",
      "keystone#sep#PASSWORD",
      "keystone#sep#LOCAL_USER"
    ],
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 11,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "111ed48f7527",
    "question": "Provide information (including extra data) about VMs assigned to the physical host blaze8-12.",
    "sql": [
      "SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned, instance_extra_1.numa_topology AS instance_extra_1_numa_topology, instance_extra_1.flavor AS instance_extra_1_flavor, instance_extra_1.migration_context AS instance_extra_1_migration_context, instance_extra_1.created_at AS instance_extra_1_created_at, instance_extra_1.updated_at AS instance_extra_1_updated_at, instance_extra_1.deleted_at AS instance_extra_1_deleted_at, instance_extra_1.deleted AS instance_extra_1_deleted, instance_extra_1.id AS instance_extra_1_id, instance_extra_1.instance_uuid AS instance_extra_1_instance_uuid \nFROM instances LEFT OUTER JOIN instance_extra AS instance_extra_1 ON instance_extra_1.instance_uuid = instances.uuid \nWHERE instances.deleted = 0 AND instances.host = 'blaze8-12' AND instances.node = 'blaze8-12.yahoo.ca.com'"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "INSTANCES.UUID",
        "INSTANCE_EXTRA.INSTANCE_UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_EXTRA",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 2,
        "query_column_count": 66,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 1
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "8d09ec9828aa",
    "question": "Provide information about port with device id 35620978-cabd-48bd-b7f2-58fb700ffbfd owned by project 3a3dd8971d2e4f6abf826e5dd0362895.",
    "sql": [
      "SELECT ports.tenant_id AS ports_tenant_id, ports.id AS ports_id, ports.name AS ports_name, ports.network_id AS ports_network_id, ports.mac_address AS ports_mac_address, ports.admin_state_up AS ports_admin_state_up, ports.status AS ports_status, ports.device_id AS ports_device_id, ports.device_owner AS ports_device_owner, ports.dns_name AS ports_dns_name, ports.standard_attr_id AS ports_standard_attr_id, ipallocations_1.port_id AS ipallocations_1_port_id, ipallocations_1.ip_address AS ipallocations_1_ip_address, ipallocations_1.subnet_id AS ipallocations_1_subnet_id, ipallocations_1.network_id AS ipallocations_1_network_id, standardattributes_1.created_at AS standardattributes_1_created_at, standardattributes_1.updated_at AS standardattributes_1_updated_at, standardattributes_1.id AS standardattributes_1_id, standardattributes_1.resource_type AS standardattributes_1_resource_type, standardattributes_1.description AS standardattributes_1_description, tags_1.standard_attr_id AS tags_1_standard_attr_id, tags_1.tag AS tags_1_tag, portsecuritybindings_1.port_id AS portsecuritybindings_1_port_id, portsecuritybindings_1.port_security_enabled AS portsecuritybindings_1_port_security_enabled, ml2_dvr_port_bindings_1.port_id AS ml2_dvr_port_bindings_1_port_id, ml2_dvr_port_bindings_1.host AS ml2_dvr_port_bindings_1_host, ml2_dvr_port_bindings_1.router_id AS ml2_dvr_port_bindings_1_router_id, ml2_dvr_port_bindings_1.vif_type AS ml2_dvr_port_bindings_1_vif_type, ml2_dvr_port_bindings_1.vif_details AS ml2_dvr_port_bindings_1_vif_details, ml2_dvr_port_bindings_1.vnic_type AS ml2_dvr_port_bindings_1_vnic_type, ml2_dvr_port_bindings_1.profile AS ml2_dvr_port_bindings_1_profile, ml2_dvr_port_bindings_1.status AS ml2_dvr_port_bindings_1_status, allowedaddresspairs_1.port_id AS allowedaddresspairs_1_port_id, allowedaddresspairs_1.mac_address AS allowedaddresspairs_1_mac_address, allowedaddresspairs_1.ip_address AS allowedaddresspairs_1_ip_address, qos_port_policy_bindings_1.policy_id AS qos_port_policy_bindings_1_policy_id, qos_port_policy_bindings_1.port_id AS qos_port_policy_bindings_1_port_id, securitygroupportbindings_1.port_id AS securitygroupportbindings_1_port_id, securitygroupportbindings_1.security_group_id AS securitygroupportbindings_1_security_group_id, ml2_port_bindings_1.port_id AS ml2_port_bindings_1_port_id, ml2_port_bindings_1.host AS ml2_port_bindings_1_host, ml2_port_bindings_1.vnic_type AS ml2_port_bindings_1_vnic_type, ml2_port_bindings_1.profile AS ml2_port_bindings_1_profile, ml2_port_bindings_1.vif_type AS ml2_port_bindings_1_vif_type, ml2_port_bindings_1.vif_details AS ml2_port_bindings_1_vif_details, extradhcpopts_1.id AS extradhcpopts_1_id, extradhcpopts_1.port_id AS extradhcpopts_1_port_id, extradhcpopts_1.opt_name AS extradhcpopts_1_opt_name, extradhcpopts_1.opt_value AS extradhcpopts_1_opt_value, extradhcpopts_1.ip_version AS extradhcpopts_1_ip_version, portdnses_1.port_id AS portdnses_1_port_id, portdnses_1.current_dns_name AS portdnses_1_current_dns_name, portdnses_1.current_dns_domain AS portdnses_1_current_dns_domain, portdnses_1.previous_dns_name AS portdnses_1_previous_dns_name, portdnses_1.previous_dns_domain AS portdnses_1_previous_dns_domain \nFROM ports LEFT OUTER JOIN ml2_port_bindings ON ports.id = ml2_port_bindings.port_id LEFT OUTER JOIN ipallocations AS ipallocations_1 ON ports.id = ipallocations_1.port_id LEFT OUTER JOIN standardattributes AS standardattributes_1 ON standardattributes_1.id = ports.standard_attr_id LEFT OUTER JOIN tags AS tags_1 ON standardattributes_1.id = tags_1.standard_attr_id LEFT OUTER JOIN portsecuritybindings AS portsecuritybindings_1 ON ports.id = portsecuritybindings_1.port_id LEFT OUTER JOIN ml2_dvr_port_bindings AS ml2_dvr_port_bindings_1 ON ports.id = ml2_dvr_port_bindings_1.port_id LEFT OUTER JOIN allowedaddresspairs AS allowedaddresspairs_1 ON ports.id = allowedaddresspairs_1.port_id LEFT OUTER JOIN qos_port_policy_bindings AS qos_port_policy_bindings_1 ON ports.id = qos_port_policy_bindings_1.port_id LEFT OUTER JOIN securitygroupportbindings AS securitygroupportbindings_1 ON ports.id = securitygroupportbindings_1.port_id LEFT OUTER JOIN ml2_port_bindings AS ml2_port_bindings_1 ON ports.id = ml2_port_bindings_1.port_id LEFT OUTER JOIN extradhcpopts AS extradhcpopts_1 ON ports.id = extradhcpopts_1.port_id LEFT OUTER JOIN portdnses AS portdnses_1 ON ports.id = portdnses_1.port_id \nWHERE ports.tenant_id IN ('3a3dd8971d2e4f6abf826e5dd0362895') AND ports.device_id IN ('35620978-cabd-48bd-b7f2-58fb700ffbfd')"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "ML2_PORT_BINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "IPALLOCATIONS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "PORTS.STANDARD_ATTR_ID",
        "STANDARDATTRIBUTES.ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "TAGS.STANDARD_ATTR_ID"
      ],
      [
        "PORTS.ID",
        "PORTSECURITYBINDINGS.PORT_ID"
      ],
      [
        "ML2_DVR_PORT_BINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "PORTS.ID",
        "ALLOWEDADDRESSPAIRS.PORT_ID"
      ],
      [
        "PORTS.ID",
        "QOS_PORT_POLICY_BINDINGS.PORT_ID"
      ],
      [
        "PORTS.ID",
        "SECURITYGROUPPORTBINDINGS.PORT_ID"
      ],
      [
        "ML2_PORT_BINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "PORTS.ID",
        "EXTRADHCPOPTS.PORT_ID"
      ],
      [
        "PORTDNSES.PORT_ID",
        "PORTS.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#IPALLOCATIONS",
      "csail_stata_neutron#sep#PORTS",
      "csail_stata_neutron#sep#PORTDNSES",
      "csail_stata_neutron#sep#ML2_DVR_PORT_BINDINGS",
      "csail_stata_neutron#sep#STANDARDATTRIBUTES",
      "csail_stata_neutron#sep#ALLOWEDADDRESSPAIRS",
      "csail_stata_neutron#sep#EXTRADHCPOPTS",
      "csail_stata_neutron#sep#SECURITYGROUPPORTBINDINGS",
      "csail_stata_neutron#sep#QOS_PORT_POLICY_BINDINGS",
      "csail_stata_neutron#sep#ML2_PORT_BINDINGS",
      "csail_stata_neutron#sep#TAGS",
      "csail_stata_neutron#sep#PORTSECURITYBINDINGS"
    ],
    "meta": {
      "features": {
        "query_table_count": 13,
        "query_column_count": 81,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 12
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "3e67d85b0860",
    "question": "Provide information about user with id ccbbd0bdf0104ea68a37483b13b14be2.",
    "sql": [
      "SELECT user.id AS user_id, user.enabled AS user_enabled, user.extra AS user_extra, user.default_project_id AS user_default_project_id \nFROM user \nWHERE user.id = 'ccbbd0bdf0104ea68a37483b13b14be2'"
    ],
    "db_id": "keystone",
    "join_keys": [],
    "gold_tables": [
      "keystone#sep#USER"
    ],
    "meta": {
      "features": {
        "query_table_count": 1,
        "query_column_count": 5,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 0
      },
      "categories": [
        "single_source_basic"
      ]
    }
  },
  {
    "id": "7618a66aa7c2",
    "question": "Provide information (including info caches, and security groups) about VMs on the physical host astro-92 that have not yet been cleaned up.",
    "sql": [
      "SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id \nFROM instances LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = instances.uuid LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = instances.uuid AND instances.deleted = 0 \nWHERE instances.deleted = instances.id AND instances.cleaned = 0 AND instances.host = 'astro-92' ORDER BY instances.created_at DESC, instances.id DESC"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "INSTANCES.UUID",
        "INSTANCE_INFO_CACHES.INSTANCE_UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 83,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 2,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "has_sorting",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "180ce19613d9",
    "question": "Provide information about port with device id 61389439-cf52-4a9c-9185-08f0f24f644e owned by project 347e25c219354db38c6662e4ab9a9c84.",
    "sql": [
      "SELECT ports.tenant_id AS ports_tenant_id, ports.id AS ports_id, ports.name AS ports_name, ports.network_id AS ports_network_id, ports.mac_address AS ports_mac_address, ports.admin_state_up AS ports_admin_state_up, ports.status AS ports_status, ports.device_id AS ports_device_id, ports.device_owner AS ports_device_owner, ports.dns_name AS ports_dns_name, ports.standard_attr_id AS ports_standard_attr_id, ipallocations_1.port_id AS ipallocations_1_port_id, ipallocations_1.ip_address AS ipallocations_1_ip_address, ipallocations_1.subnet_id AS ipallocations_1_subnet_id, ipallocations_1.network_id AS ipallocations_1_network_id, standardattributes_1.created_at AS standardattributes_1_created_at, standardattributes_1.updated_at AS standardattributes_1_updated_at, standardattributes_1.id AS standardattributes_1_id, standardattributes_1.resource_type AS standardattributes_1_resource_type, standardattributes_1.description AS standardattributes_1_description, tags_1.standard_attr_id AS tags_1_standard_attr_id, tags_1.tag AS tags_1_tag, portsecuritybindings_1.port_id AS portsecuritybindings_1_port_id, portsecuritybindings_1.port_security_enabled AS portsecuritybindings_1_port_security_enabled, ml2_dvr_port_bindings_1.port_id AS ml2_dvr_port_bindings_1_port_id, ml2_dvr_port_bindings_1.host AS ml2_dvr_port_bindings_1_host, ml2_dvr_port_bindings_1.router_id AS ml2_dvr_port_bindings_1_router_id, ml2_dvr_port_bindings_1.vif_type AS ml2_dvr_port_bindings_1_vif_type, ml2_dvr_port_bindings_1.vif_details AS ml2_dvr_port_bindings_1_vif_details, ml2_dvr_port_bindings_1.vnic_type AS ml2_dvr_port_bindings_1_vnic_type, ml2_dvr_port_bindings_1.profile AS ml2_dvr_port_bindings_1_profile, ml2_dvr_port_bindings_1.status AS ml2_dvr_port_bindings_1_status, allowedaddresspairs_1.port_id AS allowedaddresspairs_1_port_id, allowedaddresspairs_1.mac_address AS allowedaddresspairs_1_mac_address, allowedaddresspairs_1.ip_address AS allowedaddresspairs_1_ip_address, qos_port_policy_bindings_1.policy_id AS qos_port_policy_bindings_1_policy_id, qos_port_policy_bindings_1.port_id AS qos_port_policy_bindings_1_port_id, securitygroupportbindings_1.port_id AS securitygroupportbindings_1_port_id, securitygroupportbindings_1.security_group_id AS securitygroupportbindings_1_security_group_id, ml2_port_bindings_1.port_id AS ml2_port_bindings_1_port_id, ml2_port_bindings_1.host AS ml2_port_bindings_1_host, ml2_port_bindings_1.vnic_type AS ml2_port_bindings_1_vnic_type, ml2_port_bindings_1.profile AS ml2_port_bindings_1_profile, ml2_port_bindings_1.vif_type AS ml2_port_bindings_1_vif_type, ml2_port_bindings_1.vif_details AS ml2_port_bindings_1_vif_details, extradhcpopts_1.id AS extradhcpopts_1_id, extradhcpopts_1.port_id AS extradhcpopts_1_port_id, extradhcpopts_1.opt_name AS extradhcpopts_1_opt_name, extradhcpopts_1.opt_value AS extradhcpopts_1_opt_value, extradhcpopts_1.ip_version AS extradhcpopts_1_ip_version, portdnses_1.port_id AS portdnses_1_port_id, portdnses_1.current_dns_name AS portdnses_1_current_dns_name, portdnses_1.current_dns_domain AS portdnses_1_current_dns_domain, portdnses_1.previous_dns_name AS portdnses_1_previous_dns_name, portdnses_1.previous_dns_domain AS portdnses_1_previous_dns_domain \nFROM ports LEFT OUTER JOIN ml2_port_bindings ON ports.id = ml2_port_bindings.port_id LEFT OUTER JOIN ipallocations AS ipallocations_1 ON ports.id = ipallocations_1.port_id LEFT OUTER JOIN standardattributes AS standardattributes_1 ON standardattributes_1.id = ports.standard_attr_id LEFT OUTER JOIN tags AS tags_1 ON standardattributes_1.id = tags_1.standard_attr_id LEFT OUTER JOIN portsecuritybindings AS portsecuritybindings_1 ON ports.id = portsecuritybindings_1.port_id LEFT OUTER JOIN ml2_dvr_port_bindings AS ml2_dvr_port_bindings_1 ON ports.id = ml2_dvr_port_bindings_1.port_id LEFT OUTER JOIN allowedaddresspairs AS allowedaddresspairs_1 ON ports.id = allowedaddresspairs_1.port_id LEFT OUTER JOIN qos_port_policy_bindings AS qos_port_policy_bindings_1 ON ports.id = qos_port_policy_bindings_1.port_id LEFT OUTER JOIN securitygroupportbindings AS securitygroupportbindings_1 ON ports.id = securitygroupportbindings_1.port_id LEFT OUTER JOIN ml2_port_bindings AS ml2_port_bindings_1 ON ports.id = ml2_port_bindings_1.port_id LEFT OUTER JOIN extradhcpopts AS extradhcpopts_1 ON ports.id = extradhcpopts_1.port_id LEFT OUTER JOIN portdnses AS portdnses_1 ON ports.id = portdnses_1.port_id \nWHERE ports.tenant_id IN ('347e25c219354db38c6662e4ab9a9c84') AND ports.device_id IN ('61389439-cf52-4a9c-9185-08f0f24f644e')"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "ML2_PORT_BINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "IPALLOCATIONS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "PORTS.STANDARD_ATTR_ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "TAGS.STANDARD_ATTR_ID"
      ],
      [
        "PORTSECURITYBINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "ML2_DVR_PORT_BINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "ALLOWEDADDRESSPAIRS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "QOS_PORT_POLICY_BINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "SECURITYGROUPPORTBINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "ML2_PORT_BINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "EXTRADHCPOPTS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "PORTS.ID",
        "PORTDNSES.PORT_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#IPALLOCATIONS",
      "csail_stata_neutron#sep#PORTS",
      "csail_stata_neutron#sep#PORTDNSES",
      "csail_stata_neutron#sep#ML2_DVR_PORT_BINDINGS",
      "csail_stata_neutron#sep#STANDARDATTRIBUTES",
      "csail_stata_neutron#sep#ALLOWEDADDRESSPAIRS",
      "csail_stata_neutron#sep#EXTRADHCPOPTS",
      "csail_stata_neutron#sep#SECURITYGROUPPORTBINDINGS",
      "csail_stata_neutron#sep#QOS_PORT_POLICY_BINDINGS",
      "csail_stata_neutron#sep#ML2_PORT_BINDINGS",
      "csail_stata_neutron#sep#TAGS",
      "csail_stata_neutron#sep#PORTSECURITYBINDINGS"
    ],
    "meta": {
      "features": {
        "query_table_count": 13,
        "query_column_count": 81,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 12
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "b7bc764583fe",
    "question": "Provide information about subnet access control for subnet e8da8ec5-364b-4a31-afaf-f68a206b7846.",
    "sql": [
      "SELECT networkrbacs.tenant_id AS networkrbacs_tenant_id, networkrbacs.id AS networkrbacs_id, networkrbacs.target_tenant AS networkrbacs_target_tenant, networkrbacs.action AS networkrbacs_action, networkrbacs.object_id AS networkrbacs_object_id, anon_1.subnets_network_id AS anon_1_subnets_network_id \nFROM (SELECT DISTINCT subnets.network_id AS subnets_network_id \nFROM subnets \nWHERE subnets.id IN ('e8da8ec5-364b-4a31-afaf-f68a206b7846')) AS anon_1 INNER JOIN networkrbacs ON anon_1.subnets_network_id = networkrbacs.object_id ORDER BY anon_1.subnets_network_id"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [],
    "gold_tables": [
      "csail_stata_neutron#sep#NETWORKRBACS",
      "csail_stata_neutron#sep#SUBNETS"
    ],
    "meta": {
      "features": {
        "query_table_count": 2,
        "query_column_count": 11,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 1
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "3d6a13e73028",
    "question": "Provide information about migrations associated with VM that moves to or from the physical host streak-26.",
    "sql": [
      "SELECT migrations.created_at AS migrations_created_at, migrations.updated_at AS migrations_updated_at, migrations.deleted_at AS migrations_deleted_at, migrations.deleted AS migrations_deleted, migrations.id AS migrations_id, migrations.source_compute AS migrations_source_compute, migrations.dest_compute AS migrations_dest_compute, migrations.source_node AS migrations_source_node, migrations.dest_node AS migrations_dest_node, migrations.dest_host AS migrations_dest_host, migrations.old_instance_type_id AS migrations_old_instance_type_id, migrations.new_instance_type_id AS migrations_new_instance_type_id, migrations.instance_uuid AS migrations_instance_uuid, migrations.status AS migrations_status, migrations.migration_type AS migrations_migration_type, migrations.hidden AS migrations_hidden, migrations.memory_total AS migrations_memory_total, migrations.memory_processed AS migrations_memory_processed, migrations.memory_remaining AS migrations_memory_remaining, migrations.disk_total AS migrations_disk_total, migrations.disk_processed AS migrations_disk_processed, migrations.disk_remaining AS migrations_disk_remaining, instances_1.created_at AS instances_1_created_at, instances_1.updated_at AS instances_1_updated_at, instances_1.deleted_at AS instances_1_deleted_at, instances_1.deleted AS instances_1_deleted, instances_1.id AS instances_1_id, instances_1.user_id AS instances_1_user_id, instances_1.project_id AS instances_1_project_id, instances_1.image_ref AS instances_1_image_ref, instances_1.kernel_id AS instances_1_kernel_id, instances_1.ramdisk_id AS instances_1_ramdisk_id, instances_1.hostname AS instances_1_hostname, instances_1.launch_index AS instances_1_launch_index, instances_1.key_name AS instances_1_key_name, instances_1.key_data AS instances_1_key_data, instances_1.power_state AS instances_1_power_state, instances_1.vm_state AS instances_1_vm_state, instances_1.task_state AS instances_1_task_state, instances_1.memory_mb AS instances_1_memory_mb, instances_1.vcpus AS instances_1_vcpus, instances_1.root_gb AS instances_1_root_gb, instances_1.ephemeral_gb AS instances_1_ephemeral_gb, instances_1.ephemeral_key_uuid AS instances_1_ephemeral_key_uuid, instances_1.host AS instances_1_host, instances_1.node AS instances_1_node, instances_1.instance_type_id AS instances_1_instance_type_id, instances_1.user_data AS instances_1_user_data, instances_1.reservation_id AS instances_1_reservation_id, instances_1.launched_at AS instances_1_launched_at, instances_1.terminated_at AS instances_1_terminated_at, instances_1.availability_zone AS instances_1_availability_zone, instances_1.display_name AS instances_1_display_name, instances_1.display_description AS instances_1_display_description, instances_1.launched_on AS instances_1_launched_on, instances_1.locked AS instances_1_locked, instances_1.locked_by AS instances_1_locked_by, instances_1.os_type AS instances_1_os_type, instances_1.architecture AS instances_1_architecture, instances_1.vm_mode AS instances_1_vm_mode, instances_1.uuid AS instances_1_uuid, instances_1.root_device_name AS instances_1_root_device_name, instances_1.default_ephemeral_device AS instances_1_default_ephemeral_device, instances_1.default_swap_device AS instances_1_default_swap_device, instances_1.config_drive AS instances_1_config_drive, instances_1.access_ip_v4 AS instances_1_access_ip_v4, instances_1.access_ip_v6 AS instances_1_access_ip_v6, instances_1.auto_disk_config AS instances_1_auto_disk_config, instances_1.progress AS instances_1_progress, instances_1.shutdown_terminate AS instances_1_shutdown_terminate, instances_1.disable_terminate AS instances_1_disable_terminate, instances_1.cell_name AS instances_1_cell_name, instances_1.internal_id AS instances_1_internal_id, instances_1.cleaned AS instances_1_cleaned, instance_system_metadata_1.created_at AS instance_system_metadata_1_created_at, instance_system_metadata_1.updated_at AS instance_system_metadata_1_updated_at, instance_system_metadata_1.deleted_at AS instance_system_metadata_1_deleted_at, instance_system_metadata_1.deleted AS instance_system_metadata_1_deleted, instance_system_metadata_1.id AS instance_system_metadata_1_id, instance_system_metadata_1.`key` AS instance_system_metadata_1_key, instance_system_metadata_1.value AS instance_system_metadata_1_value, instance_system_metadata_1.instance_uuid AS instance_system_metadata_1_instance_uuid \nFROM migrations LEFT OUTER JOIN instances AS instances_1 ON migrations.instance_uuid = instances_1.uuid AND instances_1.deleted = 0 LEFT OUTER JOIN instance_system_metadata AS instance_system_metadata_1 ON instances_1.uuid = instance_system_metadata_1.instance_uuid \nWHERE migrations.deleted = 0 AND (migrations.source_compute = 'streak-26' AND migrations.source_node = 'streak-26.yahoo.ca.com' OR migrations.dest_compute = 'streak-26' AND migrations.dest_node = 'streak-26.yahoo.ca.com') AND migrations.status NOT IN ('accepted', 'confirmed', 'reverted', 'error', 'failed', 'completed')"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "INSTANCES.UUID",
        "MIGRATIONS.INSTANCE_UUID"
      ],
      [
        "INSTANCE_SYSTEM_METADATA.INSTANCE_UUID",
        "INSTANCES.UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_SYSTEM_METADATA",
      "csail_stata_nova#sep#MIGRATIONS",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 93,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "4e02cb8d95f3",
    "question": "Provide information about publicly available networks owned by project 9f13bf11e06e4d81b44c8c3e62d4362b.",
    "sql": [
      "SELECT networks.tenant_id AS networks_tenant_id, networks.id AS networks_id, networks.name AS networks_name, networks.status AS networks_status, networks.admin_state_up AS networks_admin_state_up, networks.mtu AS networks_mtu, networks.vlan_transparent AS networks_vlan_transparent, networks.availability_zone_hints AS networks_availability_zone_hints, networks.standard_attr_id AS networks_standard_attr_id, agents_1.id AS agents_1_id, agents_1.agent_type AS agents_1_agent_type, agents_1.`binary` AS agents_1_binary, agents_1.topic AS agents_1_topic, agents_1.host AS agents_1_host, agents_1.availability_zone AS agents_1_availability_zone, agents_1.admin_state_up AS agents_1_admin_state_up, agents_1.created_at AS agents_1_created_at, agents_1.started_at AS agents_1_started_at, agents_1.heartbeat_timestamp AS agents_1_heartbeat_timestamp, agents_1.description AS agents_1_description, agents_1.configurations AS agents_1_configurations, agents_1.resource_versions AS agents_1_resource_versions, agents_1.`load` AS agents_1_load, standardattributes_1.created_at AS standardattributes_1_created_at, standardattributes_1.updated_at AS standardattributes_1_updated_at, standardattributes_1.id AS standardattributes_1_id, standardattributes_1.resource_type AS standardattributes_1_resource_type, standardattributes_1.description AS standardattributes_1_description, tags_1.standard_attr_id AS tags_1_standard_attr_id, tags_1.tag AS tags_1_tag, externalnetworks_1.network_id AS externalnetworks_1_network_id, externalnetworks_1.is_default AS externalnetworks_1_is_default, qos_network_policy_bindings_1.policy_id AS qos_network_policy_bindings_1_policy_id, qos_network_policy_bindings_1.network_id AS qos_network_policy_bindings_1_network_id, networksecuritybindings_1.network_id AS networksecuritybindings_1_network_id, networksecuritybindings_1.port_security_enabled AS networksecuritybindings_1_port_security_enabled, networkdnsdomains_1.network_id AS networkdnsdomains_1_network_id, networkdnsdomains_1.dns_domain AS networkdnsdomains_1_dns_domain \nFROM networks LEFT OUTER JOIN externalnetworks ON networks.id = externalnetworks.network_id LEFT OUTER JOIN networkrbacs ON networks.id = networkrbacs.object_id LEFT OUTER JOIN (networkdhcpagentbindings AS networkdhcpagentbindings_1 INNER JOIN agents AS agents_1 ON agents_1.id = networkdhcpagentbindings_1.dhcp_agent_id) ON networks.id = networkdhcpagentbindings_1.network_id LEFT OUTER JOIN standardattributes AS standardattributes_1 ON standardattributes_1.id = networks.standard_attr_id LEFT OUTER JOIN tags AS tags_1 ON standardattributes_1.id = tags_1.standard_attr_id LEFT OUTER JOIN externalnetworks AS externalnetworks_1 ON networks.id = externalnetworks_1.network_id LEFT OUTER JOIN qos_network_policy_bindings AS qos_network_policy_bindings_1 ON networks.id = qos_network_policy_bindings_1.network_id LEFT OUTER JOIN networksecuritybindings AS networksecuritybindings_1 ON networks.id = networksecuritybindings_1.network_id LEFT OUTER JOIN networkdnsdomains AS networkdnsdomains_1 ON networks.id = networkdnsdomains_1.network_id \nWHERE networkrbacs.action = 'access_as_shared' AND (networkrbacs.target_tenant = '*' OR networkrbacs.target_tenant = '9f13bf11e06e4d81b44c8c3e62d4362b')"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "EXTERNALNETWORKS.NETWORK_ID",
        "NETWORKS.ID"
      ],
      [
        "NETWORKRBACS.OBJECT_ID",
        "NETWORKS.ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "NETWORKS.STANDARD_ATTR_ID"
      ],
      [
        "TAGS.STANDARD_ATTR_ID",
        "STANDARDATTRIBUTES.ID"
      ],
      [
        "EXTERNALNETWORKS.NETWORK_ID",
        "NETWORKS.ID"
      ],
      [
        "NETWORKS.ID",
        "QOS_NETWORK_POLICY_BINDINGS.NETWORK_ID"
      ],
      [
        "NETWORKS.ID",
        "NETWORKSECURITYBINDINGS.NETWORK_ID"
      ],
      [
        "NETWORKS.ID",
        "NETWORKDNSDOMAINS.NETWORK_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#NETWORKRBACS",
      "csail_stata_neutron#sep#NETWORKDHCPAGENTBINDINGS",
      "csail_stata_neutron#sep#AGENTS",
      "csail_stata_neutron#sep#NETWORKS",
      "csail_stata_neutron#sep#EXTERNALNETWORKS",
      "csail_stata_neutron#sep#STANDARDATTRIBUTES",
      "csail_stata_neutron#sep#QOS_NETWORK_POLICY_BINDINGS",
      "csail_stata_neutron#sep#NETWORKDNSDOMAINS",
      "csail_stata_neutron#sep#TAGS",
      "csail_stata_neutron#sep#NETWORKSECURITYBINDINGS"
    ],
    "meta": {
      "features": {
        "query_table_count": 11,
        "query_column_count": 61,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 10
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "c769b7e7f0f1",
    "question": "Provide information about subnet access control for subnet 9ce2600b-6566-4c81-9370-9b758d5f7ccc.",
    "sql": [
      "SELECT networkrbacs.tenant_id AS networkrbacs_tenant_id, networkrbacs.id AS networkrbacs_id, networkrbacs.target_tenant AS networkrbacs_target_tenant, networkrbacs.action AS networkrbacs_action, networkrbacs.object_id AS networkrbacs_object_id, anon_1.subnets_network_id AS anon_1_subnets_network_id \nFROM (SELECT DISTINCT subnets.network_id AS subnets_network_id \nFROM subnets \nWHERE subnets.id IN ('9ce2600b-6566-4c81-9370-9b758d5f7ccc')) AS anon_1 INNER JOIN networkrbacs ON anon_1.subnets_network_id = networkrbacs.object_id ORDER BY anon_1.subnets_network_id"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [],
    "gold_tables": [
      "csail_stata_neutron#sep#NETWORKRBACS",
      "csail_stata_neutron#sep#SUBNETS"
    ],
    "meta": {
      "features": {
        "query_table_count": 2,
        "query_column_count": 11,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 1
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "ba63d07f34d3",
    "question": "Provide information (including info caches, and security groups) for these VMs d6e79a50-82c0-49be-9967-2d5da9c87001, 003c6f3d-6c4c-40dc-840b-81feb6360e31, 7fbac52f-3ee5-4c38-a25a-c52ac39c8bb7, ade24b16-e170-4c2f-a8bd-e0b3ef60a87d, 6fed903f-e4e5-415c-a41c-fc50bdde11de, e1820f1d-ef1b-4155-83fc-b5c9d782a67a, eb216147-8e56-4b6b-99cf-bd6436fd65bb, 5395b5fb-4d3e-4606-9ac4-145431f1fe93, 62e96b06-461a-4cf0-b9d5-80b981760c26.",
    "sql": [
      "SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id \nFROM instances LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = instances.uuid LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = instances.uuid AND instances.deleted = 0 \nWHERE instances.uuid IN ('d6e79a50-82c0-49be-9967-2d5da9c87001', '003c6f3d-6c4c-40dc-840b-81feb6360e31', '7fbac52f-3ee5-4c38-a25a-c52ac39c8bb7', 'ade24b16-e170-4c2f-a8bd-e0b3ef60a87d', '6fed903f-e4e5-415c-a41c-fc50bdde11de', 'e1820f1d-ef1b-4155-83fc-b5c9d782a67a', 'eb216147-8e56-4b6b-99cf-bd6436fd65bb', '5395b5fb-4d3e-4606-9ac4-145431f1fe93', '62e96b06-461a-4cf0-b9d5-80b981760c26') ORDER BY instances.created_at DESC, instances.id DESC"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "INSTANCES.UUID",
        "INSTANCE_INFO_CACHES.INSTANCE_UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 80,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 2,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "has_sorting",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "1085265c5056",
    "question": "Provide information about migrations associated with VM that moves to or from the physical host drive-59.",
    "sql": [
      "SELECT migrations.created_at AS migrations_created_at, migrations.updated_at AS migrations_updated_at, migrations.deleted_at AS migrations_deleted_at, migrations.deleted AS migrations_deleted, migrations.id AS migrations_id, migrations.source_compute AS migrations_source_compute, migrations.dest_compute AS migrations_dest_compute, migrations.source_node AS migrations_source_node, migrations.dest_node AS migrations_dest_node, migrations.dest_host AS migrations_dest_host, migrations.old_instance_type_id AS migrations_old_instance_type_id, migrations.new_instance_type_id AS migrations_new_instance_type_id, migrations.instance_uuid AS migrations_instance_uuid, migrations.status AS migrations_status, migrations.migration_type AS migrations_migration_type, migrations.hidden AS migrations_hidden, migrations.memory_total AS migrations_memory_total, migrations.memory_processed AS migrations_memory_processed, migrations.memory_remaining AS migrations_memory_remaining, migrations.disk_total AS migrations_disk_total, migrations.disk_processed AS migrations_disk_processed, migrations.disk_remaining AS migrations_disk_remaining, instances_1.created_at AS instances_1_created_at, instances_1.updated_at AS instances_1_updated_at, instances_1.deleted_at AS instances_1_deleted_at, instances_1.deleted AS instances_1_deleted, instances_1.id AS instances_1_id, instances_1.user_id AS instances_1_user_id, instances_1.project_id AS instances_1_project_id, instances_1.image_ref AS instances_1_image_ref, instances_1.kernel_id AS instances_1_kernel_id, instances_1.ramdisk_id AS instances_1_ramdisk_id, instances_1.hostname AS instances_1_hostname, instances_1.launch_index AS instances_1_launch_index, instances_1.key_name AS instances_1_key_name, instances_1.key_data AS instances_1_key_data, instances_1.power_state AS instances_1_power_state, instances_1.vm_state AS instances_1_vm_state, instances_1.task_state AS instances_1_task_state, instances_1.memory_mb AS instances_1_memory_mb, instances_1.vcpus AS instances_1_vcpus, instances_1.root_gb AS instances_1_root_gb, instances_1.ephemeral_gb AS instances_1_ephemeral_gb, instances_1.ephemeral_key_uuid AS instances_1_ephemeral_key_uuid, instances_1.host AS instances_1_host, instances_1.node AS instances_1_node, instances_1.instance_type_id AS instances_1_instance_type_id, instances_1.user_data AS instances_1_user_data, instances_1.reservation_id AS instances_1_reservation_id, instances_1.launched_at AS instances_1_launched_at, instances_1.terminated_at AS instances_1_terminated_at, instances_1.availability_zone AS instances_1_availability_zone, instances_1.display_name AS instances_1_display_name, instances_1.display_description AS instances_1_display_description, instances_1.launched_on AS instances_1_launched_on, instances_1.locked AS instances_1_locked, instances_1.locked_by AS instances_1_locked_by, instances_1.os_type AS instances_1_os_type, instances_1.architecture AS instances_1_architecture, instances_1.vm_mode AS instances_1_vm_mode, instances_1.uuid AS instances_1_uuid, instances_1.root_device_name AS instances_1_root_device_name, instances_1.default_ephemeral_device AS instances_1_default_ephemeral_device, instances_1.default_swap_device AS instances_1_default_swap_device, instances_1.config_drive AS instances_1_config_drive, instances_1.access_ip_v4 AS instances_1_access_ip_v4, instances_1.access_ip_v6 AS instances_1_access_ip_v6, instances_1.auto_disk_config AS instances_1_auto_disk_config, instances_1.progress AS instances_1_progress, instances_1.shutdown_terminate AS instances_1_shutdown_terminate, instances_1.disable_terminate AS instances_1_disable_terminate, instances_1.cell_name AS instances_1_cell_name, instances_1.internal_id AS instances_1_internal_id, instances_1.cleaned AS instances_1_cleaned, instance_system_metadata_1.created_at AS instance_system_metadata_1_created_at, instance_system_metadata_1.updated_at AS instance_system_metadata_1_updated_at, instance_system_metadata_1.deleted_at AS instance_system_metadata_1_deleted_at, instance_system_metadata_1.deleted AS instance_system_metadata_1_deleted, instance_system_metadata_1.id AS instance_system_metadata_1_id, instance_system_metadata_1.`key` AS instance_system_metadata_1_key, instance_system_metadata_1.value AS instance_system_metadata_1_value, instance_system_metadata_1.instance_uuid AS instance_system_metadata_1_instance_uuid \nFROM migrations LEFT OUTER JOIN instances AS instances_1 ON migrations.instance_uuid = instances_1.uuid AND instances_1.deleted = 0 LEFT OUTER JOIN instance_system_metadata AS instance_system_metadata_1 ON instances_1.uuid = instance_system_metadata_1.instance_uuid \nWHERE migrations.deleted = 0 AND (migrations.source_compute = 'drive-59' AND migrations.source_node = 'drive-59.yahoo.ca.com' OR migrations.dest_compute = 'drive-59' AND migrations.dest_node = 'drive-59.yahoo.ca.com') AND migrations.status NOT IN ('accepted', 'confirmed', 'reverted', 'error', 'failed', 'completed')"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "MIGRATIONS.INSTANCE_UUID",
        "INSTANCES.UUID"
      ],
      [
        "INSTANCES.UUID",
        "INSTANCE_SYSTEM_METADATA.INSTANCE_UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_SYSTEM_METADATA",
      "csail_stata_nova#sep#MIGRATIONS",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 93,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "a0e63c421998",
    "question": "Provide information (including info caches, and security groups) for these VMs 1453d6b3-d1a0-4649-8ac8-38f60beabb2b, 0c97d219-2dfc-4689-ad7f-fe3758d91a9e, 325b4e2d-ba54-4728-b2ed-af638cecb8cc, c2873331-af43-4ac9-82d6-d5547ecd15fa, e8202c21-082f-4182-a255-ad8e5de7932e, 26ad4e9b-215e-4b27-8718-1033f7a54c8e, 1f863dd8-76d3-4671-9b18-af456d1b2e1d, 5e028bfa-d3bd-4acd-8e7b-b293bc780814, 9480f48c-36a1-4885-9429-2d65d35f0031, 3307d967-b1cf-4c6f-b438-5fc0a8029488, 6341e0f8-9418-49e1-9f30-a7aa139f2c7b, 06758786-89b1-405e-ba26-00392864c06d, 1ab25e55-cdb4-44ae-84b9-e74b961cd463, 75ee7199-c9b6-45c9-9500-70566ec64969, 6036acdf-8118-4e8d-a98c-4cf6d4fc64c2, 4f3171be-cf1c-4a59-a3c0-8694461379f5, 514e9993-7b63-4984-a1af-8c6e33171b62, 07094c45-97cc-45a2-aef2-738a7d96a9ef, f050072f-dfba-40d6-8506-aece1c265508, c23b80b0-4d2f-4b29-8b67-9302b59bff29, 4bfb5507-31f3-4a5c-811c-996eef9b742a, 259f6b6c-8661-49a4-b171-e836f7bfd9de, 5e50080b-00a5-4df1-add3-065e69e647d6.",
    "sql": [
      "SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id \nFROM instances LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = instances.uuid LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = instances.uuid AND instances.deleted = 0 \nWHERE instances.uuid IN ('1453d6b3-d1a0-4649-8ac8-38f60beabb2b', '0c97d219-2dfc-4689-ad7f-fe3758d91a9e', '325b4e2d-ba54-4728-b2ed-af638cecb8cc', 'c2873331-af43-4ac9-82d6-d5547ecd15fa', 'e8202c21-082f-4182-a255-ad8e5de7932e', '26ad4e9b-215e-4b27-8718-1033f7a54c8e', '1f863dd8-76d3-4671-9b18-af456d1b2e1d', '5e028bfa-d3bd-4acd-8e7b-b293bc780814', '9480f48c-36a1-4885-9429-2d65d35f0031', '3307d967-b1cf-4c6f-b438-5fc0a8029488', '6341e0f8-9418-49e1-9f30-a7aa139f2c7b', '06758786-89b1-405e-ba26-00392864c06d', '1ab25e55-cdb4-44ae-84b9-e74b961cd463', '75ee7199-c9b6-45c9-9500-70566ec64969', '6036acdf-8118-4e8d-a98c-4cf6d4fc64c2', '4f3171be-cf1c-4a59-a3c0-8694461379f5', '514e9993-7b63-4984-a1af-8c6e33171b62', '07094c45-97cc-45a2-aef2-738a7d96a9ef', 'f050072f-dfba-40d6-8506-aece1c265508', 'c23b80b0-4d2f-4b29-8b67-9302b59bff29', '4bfb5507-31f3-4a5c-811c-996eef9b742a', '259f6b6c-8661-49a4-b171-e836f7bfd9de', '5e50080b-00a5-4df1-add3-065e69e647d6') ORDER BY instances.created_at DESC, instances.id DESC"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "INSTANCE_INFO_CACHES.INSTANCE_UUID",
        "INSTANCES.UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 80,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 2,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "has_sorting",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "712d7bfb2abe",
    "question": "Provide information about the port with ip address 10.174.127.149/8 under network 0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d.",
    "sql": [
      "SELECT ports.tenant_id AS ports_tenant_id, ports.id AS ports_id, ports.name AS ports_name, ports.network_id AS ports_network_id, ports.mac_address AS ports_mac_address, ports.admin_state_up AS ports_admin_state_up, ports.status AS ports_status, ports.device_id AS ports_device_id, ports.device_owner AS ports_device_owner, ports.dns_name AS ports_dns_name, ports.standard_attr_id AS ports_standard_attr_id, ipallocations_1.port_id AS ipallocations_1_port_id, ipallocations_1.ip_address AS ipallocations_1_ip_address, ipallocations_1.subnet_id AS ipallocations_1_subnet_id, ipallocations_1.network_id AS ipallocations_1_network_id, standardattributes_1.created_at AS standardattributes_1_created_at, standardattributes_1.updated_at AS standardattributes_1_updated_at, standardattributes_1.id AS standardattributes_1_id, standardattributes_1.resource_type AS standardattributes_1_resource_type, standardattributes_1.description AS standardattributes_1_description, tags_1.standard_attr_id AS tags_1_standard_attr_id, tags_1.tag AS tags_1_tag, portsecuritybindings_1.port_id AS portsecuritybindings_1_port_id, portsecuritybindings_1.port_security_enabled AS portsecuritybindings_1_port_security_enabled, ml2_dvr_port_bindings_1.port_id AS ml2_dvr_port_bindings_1_port_id, ml2_dvr_port_bindings_1.host AS ml2_dvr_port_bindings_1_host, ml2_dvr_port_bindings_1.router_id AS ml2_dvr_port_bindings_1_router_id, ml2_dvr_port_bindings_1.vif_type AS ml2_dvr_port_bindings_1_vif_type, ml2_dvr_port_bindings_1.vif_details AS ml2_dvr_port_bindings_1_vif_details, ml2_dvr_port_bindings_1.vnic_type AS ml2_dvr_port_bindings_1_vnic_type, ml2_dvr_port_bindings_1.profile AS ml2_dvr_port_bindings_1_profile, ml2_dvr_port_bindings_1.status AS ml2_dvr_port_bindings_1_status, allowedaddresspairs_1.port_id AS allowedaddresspairs_1_port_id, allowedaddresspairs_1.mac_address AS allowedaddresspairs_1_mac_address, allowedaddresspairs_1.ip_address AS allowedaddresspairs_1_ip_address, qos_port_policy_bindings_1.policy_id AS qos_port_policy_bindings_1_policy_id, qos_port_policy_bindings_1.port_id AS qos_port_policy_bindings_1_port_id, securitygroupportbindings_1.port_id AS securitygroupportbindings_1_port_id, securitygroupportbindings_1.security_group_id AS securitygroupportbindings_1_security_group_id, ml2_port_bindings_1.port_id AS ml2_port_bindings_1_port_id, ml2_port_bindings_1.host AS ml2_port_bindings_1_host, ml2_port_bindings_1.vnic_type AS ml2_port_bindings_1_vnic_type, ml2_port_bindings_1.profile AS ml2_port_bindings_1_profile, ml2_port_bindings_1.vif_type AS ml2_port_bindings_1_vif_type, ml2_port_bindings_1.vif_details AS ml2_port_bindings_1_vif_details, extradhcpopts_1.id AS extradhcpopts_1_id, extradhcpopts_1.port_id AS extradhcpopts_1_port_id, extradhcpopts_1.opt_name AS extradhcpopts_1_opt_name, extradhcpopts_1.opt_value AS extradhcpopts_1_opt_value, extradhcpopts_1.ip_version AS extradhcpopts_1_ip_version, portdnses_1.port_id AS portdnses_1_port_id, portdnses_1.current_dns_name AS portdnses_1_current_dns_name, portdnses_1.current_dns_domain AS portdnses_1_current_dns_domain, portdnses_1.previous_dns_name AS portdnses_1_previous_dns_name, portdnses_1.previous_dns_domain AS portdnses_1_previous_dns_domain \nFROM ports LEFT OUTER JOIN ml2_port_bindings ON ports.id = ml2_port_bindings.port_id INNER JOIN ipallocations ON ports.id = ipallocations.port_id LEFT OUTER JOIN ipallocations AS ipallocations_1 ON ports.id = ipallocations_1.port_id LEFT OUTER JOIN standardattributes AS standardattributes_1 ON standardattributes_1.id = ports.standard_attr_id LEFT OUTER JOIN tags AS tags_1 ON standardattributes_1.id = tags_1.standard_attr_id LEFT OUTER JOIN portsecuritybindings AS portsecuritybindings_1 ON ports.id = portsecuritybindings_1.port_id LEFT OUTER JOIN ml2_dvr_port_bindings AS ml2_dvr_port_bindings_1 ON ports.id = ml2_dvr_port_bindings_1.port_id LEFT OUTER JOIN allowedaddresspairs AS allowedaddresspairs_1 ON ports.id = allowedaddresspairs_1.port_id LEFT OUTER JOIN qos_port_policy_bindings AS qos_port_policy_bindings_1 ON ports.id = qos_port_policy_bindings_1.port_id LEFT OUTER JOIN securitygroupportbindings AS securitygroupportbindings_1 ON ports.id = securitygroupportbindings_1.port_id LEFT OUTER JOIN ml2_port_bindings AS ml2_port_bindings_1 ON ports.id = ml2_port_bindings_1.port_id LEFT OUTER JOIN extradhcpopts AS extradhcpopts_1 ON ports.id = extradhcpopts_1.port_id LEFT OUTER JOIN portdnses AS portdnses_1 ON ports.id = portdnses_1.port_id \nWHERE ipallocations.ip_address IN ('10.174.127.149/8') AND ports.network_id IN ('0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d')"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "PORTS.ID",
        "ML2_PORT_BINDINGS.PORT_ID"
      ],
      [
        "IPALLOCATIONS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "IPALLOCATIONS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "PORTS.STANDARD_ATTR_ID"
      ],
      [
        "TAGS.STANDARD_ATTR_ID",
        "STANDARDATTRIBUTES.ID"
      ],
      [
        "PORTS.ID",
        "PORTSECURITYBINDINGS.PORT_ID"
      ],
      [
        "PORTS.ID",
        "ML2_DVR_PORT_BINDINGS.PORT_ID"
      ],
      [
        "ALLOWEDADDRESSPAIRS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "PORTS.ID",
        "QOS_PORT_POLICY_BINDINGS.PORT_ID"
      ],
      [
        "PORTS.ID",
        "SECURITYGROUPPORTBINDINGS.PORT_ID"
      ],
      [
        "PORTS.ID",
        "ML2_PORT_BINDINGS.PORT_ID"
      ],
      [
        "EXTRADHCPOPTS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "PORTDNSES.PORT_ID",
        "PORTS.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#IPALLOCATIONS",
      "csail_stata_neutron#sep#PORTS",
      "csail_stata_neutron#sep#PORTDNSES",
      "csail_stata_neutron#sep#ML2_DVR_PORT_BINDINGS",
      "csail_stata_neutron#sep#STANDARDATTRIBUTES",
      "csail_stata_neutron#sep#ALLOWEDADDRESSPAIRS",
      "csail_stata_neutron#sep#EXTRADHCPOPTS",
      "csail_stata_neutron#sep#SECURITYGROUPPORTBINDINGS",
      "csail_stata_neutron#sep#QOS_PORT_POLICY_BINDINGS",
      "csail_stata_neutron#sep#ML2_PORT_BINDINGS",
      "csail_stata_neutron#sep#TAGS",
      "csail_stata_neutron#sep#PORTSECURITYBINDINGS"
    ],
    "meta": {
      "features": {
        "query_table_count": 14,
        "query_column_count": 83,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 13
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "6a3baff726ef",
    "question": "Provide information about network access control for network b3d6c27a-a9bb-4521-b5de-4d65eb7490dc.",
    "sql": [
      "SELECT networkrbacs.tenant_id AS networkrbacs_tenant_id, networkrbacs.id AS networkrbacs_id, networkrbacs.target_tenant AS networkrbacs_target_tenant, networkrbacs.action AS networkrbacs_action, networkrbacs.object_id AS networkrbacs_object_id, anon_1.networks_id AS anon_1_networks_id \nFROM (SELECT networks.id AS networks_id \nFROM networks LEFT OUTER JOIN externalnetworks ON networks.id = externalnetworks.network_id \nWHERE networks.id IN ('b3d6c27a-a9bb-4521-b5de-4d65eb7490dc')) AS anon_1 INNER JOIN networkrbacs ON anon_1.networks_id = networkrbacs.object_id ORDER BY anon_1.networks_id"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "EXTERNALNETWORKS.NETWORK_ID",
        "NETWORKS.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#NETWORKRBACS",
      "csail_stata_neutron#sep#EXTERNALNETWORKS",
      "csail_stata_neutron#sep#NETWORKS"
    ],
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 13,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "e922089ed0bb",
    "question": "Provide information about physical host blitz1-32.",
    "sql": [
      "SELECT cn.created_at, cn.updated_at, cn.deleted_at, cn.deleted, cn.id, cn.service_id, cn.host, cn.uuid, cn.vcpus, cn.memory_mb, cn.local_gb, cn.vcpus_used, cn.memory_mb_used, cn.local_gb_used, cn.hypervisor_type, cn.hypervisor_version, cn.hypervisor_hostname, cn.free_ram_mb, cn.free_disk_gb, cn.current_workload, cn.running_vms, cn.cpu_info, cn.disk_available_least, cn.host_ip, cn.supported_instances, cn.metrics, cn.pci_stats, cn.extra_resources, cn.stats, cn.numa_topology, cn.ram_allocation_ratio, cn.cpu_allocation_ratio, cn.disk_allocation_ratio, ram_inv.total AS inv_memory_mb, ram_inv.reserved AS inv_memory_mb_reserved, ram_inv.allocation_ratio AS inv_ram_allocation_ratio, ram_usage.used AS inv_memory_mb_used, cpu_inv.total AS inv_vcpus, cpu_inv.allocation_ratio AS inv_cpu_allocation_ratio, cpu_usage.used AS inv_vcpus_used, disk_inv.total AS inv_local_gb, disk_inv.reserved AS inv_local_gb_reserved, disk_inv.allocation_ratio AS inv_disk_allocation_ratio, disk_usage.used AS inv_local_gb_used \nFROM compute_nodes AS cn LEFT OUTER JOIN resource_providers AS rp ON cn.uuid = rp.uuid LEFT OUTER JOIN inventories AS ram_inv ON rp.id = ram_inv.resource_provider_id AND ram_inv.resource_class_id = 1 LEFT OUTER JOIN (SELECT allocations.resource_provider_id AS resource_provider_id, sum(allocations.used) AS used \nFROM allocations \nWHERE allocations.resource_class_id = 1 GROUP BY allocations.resource_provider_id) AS ram_usage ON ram_inv.resource_provider_id = ram_usage.resource_provider_id LEFT OUTER JOIN inventories AS cpu_inv ON rp.id = cpu_inv.resource_provider_id AND cpu_inv.resource_class_id = 0 LEFT OUTER JOIN (SELECT allocations.resource_provider_id AS resource_provider_id, sum(allocations.used) AS used \nFROM allocations \nWHERE allocations.resource_class_id = 0 GROUP BY allocations.resource_provider_id) AS cpu_usage ON cpu_inv.resource_provider_id = cpu_usage.resource_provider_id LEFT OUTER JOIN inventories AS disk_inv ON rp.id = disk_inv.resource_provider_id AND disk_inv.resource_class_id = 2 LEFT OUTER JOIN (SELECT allocations.resource_provider_id AS resource_provider_id, sum(allocations.used) AS used \nFROM allocations \nWHERE allocations.resource_class_id = 2 GROUP BY allocations.resource_provider_id) AS disk_usage ON disk_inv.resource_provider_id = disk_usage.resource_provider_id \nWHERE cn.deleted = 0 AND cn.host = 'blitz1-32'"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "RESOURCE_PROVIDERS.UUID",
        "COMPUTE_NODES.UUID"
      ],
      [
        "RESOURCE_PROVIDERS.ID",
        "INVENTORIES.RESOURCE_PROVIDER_ID"
      ],
      [
        "RESOURCE_PROVIDERS.ID",
        "INVENTORIES.RESOURCE_PROVIDER_ID"
      ],
      [
        "INVENTORIES.RESOURCE_PROVIDER_ID",
        "RESOURCE_PROVIDERS.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#RESOURCE_PROVIDERS",
      "csail_stata_nova#sep#ALLOCATIONS",
      "csail_stata_nova#sep#INVENTORIES",
      "csail_stata_nova#sep#COMPUTE_NODES"
    ],
    "meta": {
      "features": {
        "query_table_count": 8,
        "query_column_count": 75,
        "query_nested_count": 3,
        "query_aggregate_count": 3,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 7
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "68feb432233c",
    "question": "Provide information (including info caches, and security groups) about VMs running on physical host flash-9.",
    "sql": [
      "SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id \nFROM instances LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = instances.uuid LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = instances.uuid AND instances.deleted = 0 \nWHERE instances.deleted = 0 AND instances.host = 'flash-9'"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "INSTANCES.UUID",
        "INSTANCE_INFO_CACHES.INSTANCE_UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 79,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "c68028f4441d",
    "question": "Provide information about publicly available subnets owned by tenant 9f13bf11e06e4d81b44c8c3e62d4362b.",
    "sql": [
      "SELECT subnets.tenant_id AS subnets_tenant_id, subnets.id AS subnets_id, subnets.name AS subnets_name, subnets.network_id AS subnets_network_id, subnets.subnetpool_id AS subnets_subnetpool_id, subnets.ip_version AS subnets_ip_version, subnets.cidr AS subnets_cidr, subnets.gateway_ip AS subnets_gateway_ip, subnets.enable_dhcp AS subnets_enable_dhcp, subnets.ipv6_ra_mode AS subnets_ipv6_ra_mode, subnets.ipv6_address_mode AS subnets_ipv6_address_mode, subnets.standard_attr_id AS subnets_standard_attr_id, anon_1.networks_id AS anon_1_networks_id, subnetpoolprefixes_1.cidr AS subnetpoolprefixes_1_cidr, subnetpoolprefixes_1.subnetpool_id AS subnetpoolprefixes_1_subnetpool_id, standardattributes_1.created_at AS standardattributes_1_created_at, standardattributes_1.updated_at AS standardattributes_1_updated_at, standardattributes_1.id AS standardattributes_1_id, standardattributes_1.resource_type AS standardattributes_1_resource_type, standardattributes_1.description AS standardattributes_1_description, tags_1.standard_attr_id AS tags_1_standard_attr_id, tags_1.tag AS tags_1_tag, subnetpools_1.tenant_id AS subnetpools_1_tenant_id, subnetpools_1.id AS subnetpools_1_id, subnetpools_1.name AS subnetpools_1_name, subnetpools_1.ip_version AS subnetpools_1_ip_version, subnetpools_1.default_prefixlen AS subnetpools_1_default_prefixlen, subnetpools_1.min_prefixlen AS subnetpools_1_min_prefixlen, subnetpools_1.max_prefixlen AS subnetpools_1_max_prefixlen, subnetpools_1.shared AS subnetpools_1_shared, subnetpools_1.is_default AS subnetpools_1_is_default, subnetpools_1.default_quota AS subnetpools_1_default_quota, subnetpools_1.hash AS subnetpools_1_hash, subnetpools_1.address_scope_id AS subnetpools_1_address_scope_id, subnetpools_1.standard_attr_id AS subnetpools_1_standard_attr_id, ipallocationpools_1.id AS ipallocationpools_1_id, ipallocationpools_1.subnet_id AS ipallocationpools_1_subnet_id, ipallocationpools_1.first_ip AS ipallocationpools_1_first_ip, ipallocationpools_1.last_ip AS ipallocationpools_1_last_ip, dnsnameservers_1.address AS dnsnameservers_1_address, dnsnameservers_1.subnet_id AS dnsnameservers_1_subnet_id, dnsnameservers_1.`order` AS dnsnameservers_1_order, subnetroutes_1.destination AS subnetroutes_1_destination, subnetroutes_1.nexthop AS subnetroutes_1_nexthop, subnetroutes_1.subnet_id AS subnetroutes_1_subnet_id, standardattributes_2.created_at AS standardattributes_2_created_at, standardattributes_2.updated_at AS standardattributes_2_updated_at, standardattributes_2.id AS standardattributes_2_id, standardattributes_2.resource_type AS standardattributes_2_resource_type, standardattributes_2.description AS standardattributes_2_description, tags_2.standard_attr_id AS tags_2_standard_attr_id, tags_2.tag AS tags_2_tag \nFROM (SELECT networks.id AS networks_id \nFROM networks LEFT OUTER JOIN externalnetworks ON networks.id = externalnetworks.network_id LEFT OUTER JOIN networkrbacs ON networks.id = networkrbacs.object_id \nWHERE networkrbacs.action = 'access_as_shared' AND (networkrbacs.target_tenant = '*' OR networkrbacs.target_tenant = '9f13bf11e06e4d81b44c8c3e62d4362b')) AS anon_1 INNER JOIN subnets ON anon_1.networks_id = subnets.network_id LEFT OUTER JOIN subnetpools AS subnetpools_1 ON subnets.subnetpool_id = subnetpools_1.id LEFT OUTER JOIN subnetpoolprefixes AS subnetpoolprefixes_1 ON subnetpools_1.id = subnetpoolprefixes_1.subnetpool_id LEFT OUTER JOIN standardattributes AS standardattributes_1 ON standardattributes_1.id = subnetpools_1.standard_attr_id LEFT OUTER JOIN tags AS tags_1 ON standardattributes_1.id = tags_1.standard_attr_id LEFT OUTER JOIN ipallocationpools AS ipallocationpools_1 ON subnets.id = ipallocationpools_1.subnet_id LEFT OUTER JOIN dnsnameservers AS dnsnameservers_1 ON subnets.id = dnsnameservers_1.subnet_id LEFT OUTER JOIN subnetroutes AS subnetroutes_1 ON subnets.id = subnetroutes_1.subnet_id LEFT OUTER JOIN standardattributes AS standardattributes_2 ON standardattributes_2.id = subnets.standard_attr_id LEFT OUTER JOIN tags AS tags_2 ON standardattributes_2.id = tags_2.standard_attr_id ORDER BY anon_1.networks_id, dnsnameservers_1.`order`"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "NETWORKS.ID",
        "EXTERNALNETWORKS.NETWORK_ID"
      ],
      [
        "NETWORKRBACS.OBJECT_ID",
        "NETWORKS.ID"
      ],
      [
        "SUBNETPOOLS.ID",
        "SUBNETS.SUBNETPOOL_ID"
      ],
      [
        "SUBNETPOOLS.ID",
        "SUBNETPOOLPREFIXES.SUBNETPOOL_ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "SUBNETPOOLS.STANDARD_ATTR_ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "TAGS.STANDARD_ATTR_ID"
      ],
      [
        "SUBNETS.ID",
        "IPALLOCATIONPOOLS.SUBNET_ID"
      ],
      [
        "SUBNETS.ID",
        "DNSNAMESERVERS.SUBNET_ID"
      ],
      [
        "SUBNETS.ID",
        "SUBNETROUTES.SUBNET_ID"
      ],
      [
        "SUBNETS.STANDARD_ATTR_ID",
        "STANDARDATTRIBUTES.ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "TAGS.STANDARD_ATTR_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#IPALLOCATIONPOOLS",
      "csail_stata_neutron#sep#SUBNETPOOLS",
      "csail_stata_neutron#sep#NETWORKRBACS",
      "csail_stata_neutron#sep#SUBNETPOOLPREFIXES",
      "csail_stata_neutron#sep#SUBNETS",
      "csail_stata_neutron#sep#DNSNAMESERVERS",
      "csail_stata_neutron#sep#NETWORKS",
      "csail_stata_neutron#sep#STANDARDATTRIBUTES",
      "csail_stata_neutron#sep#EXTERNALNETWORKS",
      "csail_stata_neutron#sep#SUBNETROUTES",
      "csail_stata_neutron#sep#TAGS"
    ],
    "meta": {
      "features": {
        "query_table_count": 13,
        "query_column_count": 82,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 2,
        "query_window_func_count": 0,
        "query_join_count": 12
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "c40cd21d5805",
    "question": "Provide information about the loadbalancer with id 0367b35b-023b-41d5-816b-359b3bcbdd8e.",
    "sql": [
      "SELECT lbaas_loadbalancers.tenant_id AS lbaas_loadbalancers_tenant_id, lbaas_loadbalancers.id AS lbaas_loadbalancers_id, lbaas_loadbalancers.name AS lbaas_loadbalancers_name, lbaas_loadbalancers.description AS lbaas_loadbalancers_description, lbaas_loadbalancers.vip_subnet_id AS lbaas_loadbalancers_vip_subnet_id, lbaas_loadbalancers.vip_port_id AS lbaas_loadbalancers_vip_port_id, lbaas_loadbalancers.vip_address AS lbaas_loadbalancers_vip_address, lbaas_loadbalancers.provisioning_status AS lbaas_loadbalancers_provisioning_status, lbaas_loadbalancers.operating_status AS lbaas_loadbalancers_operating_status, lbaas_loadbalancers.admin_state_up AS lbaas_loadbalancers_admin_state_up, lbaas_loadbalancers.flavor_id AS lbaas_loadbalancers_flavor_id, lbaas_loadbalancer_statistics_1.loadbalancer_id AS lbaas_loadbalancer_statistics_1_loadbalancer_id, lbaas_loadbalancer_statistics_1.bytes_in AS lbaas_loadbalancer_statistics_1_bytes_in, lbaas_loadbalancer_statistics_1.bytes_out AS lbaas_loadbalancer_statistics_1_bytes_out, lbaas_loadbalancer_statistics_1.active_connections AS lbaas_loadbalancer_statistics_1_active_connections, lbaas_loadbalancer_statistics_1.total_connections AS lbaas_loadbalancer_statistics_1_total_connections, providerresourceassociations_1.provider_name AS providerresourceassociations_1_provider_name, providerresourceassociations_1.resource_id AS providerresourceassociations_1_resource_id \nFROM lbaas_loadbalancers LEFT OUTER JOIN lbaas_loadbalancer_statistics AS lbaas_loadbalancer_statistics_1 ON lbaas_loadbalancers.id = lbaas_loadbalancer_statistics_1.loadbalancer_id LEFT OUTER JOIN providerresourceassociations AS providerresourceassociations_1 ON lbaas_loadbalancers.id = providerresourceassociations_1.resource_id \nWHERE lbaas_loadbalancers.id = '0367b35b-023b-41d5-816b-359b3bcbdd8e'"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "LBAAS_LOADBALANCERS.ID",
        "LBAAS_LOADBALANCER_STATISTICS.LOADBALANCER_ID"
      ],
      [
        "LBAAS_LOADBALANCERS.ID",
        "PROVIDERRESOURCEASSOCIATIONS.RESOURCE_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#PROVIDERRESOURCEASSOCIATIONS",
      "csail_stata_neutron#sep#LBAAS_LOADBALANCER_STATISTICS",
      "csail_stata_neutron#sep#LBAAS_LOADBALANCERS"
    ],
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 23,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "ae71a61f004e",
    "question": "Provide information (including info caches, and security groups) for these VMs dae33792-fddf-4ef1-b06f-aca2d8cf90e2, 69d29554-8111-49e9-9033-4790700fac35, 85bdf307-26d3-490d-83c4-b3c803bbe12e, 6e2ca95e-a9bc-4426-a7ea-6de5c75d1fe6, d29c6a18-68a1-4f80-8962-e6be76be155b, 5634b187-fac9-47e3-8452-00d4c180a135, 6a4653b2-60cc-4085-b5d6-d3a90d8a099d, bd6a9e8f-8652-498f-b7aa-027f2f40c60d, 234b3669-30a2-432e-a906-b4c747cea3e7, b67262b4-644c-48b5-9c33-ed968f60cd77, 2eaa5fee-b472-46b0-a79a-9df601646581, a878223b-7b58-4fcb-a027-a00063d40e32, 7393f4d3-e6e5-4cb7-9380-eda551372018, 991b0946-6377-41c3-b4ad-16880d24416f, 96c76788-8d28-42d0-8765-44d9990d3152, 5c1881f2-face-4e2a-aa92-17d9848f2a96, f1af17d9-bdb7-4fea-9772-182301b87c1d, 7760956b-c1e4-440b-8ba3-676896f4441a, f3e6a1db-6733-45fb-9ff5-53b760b020ff, 9fbdb8d9-e3b3-40ae-9e97-915981107caf, f78b9615-5abe-4249-9da0-e0b58821cc61, 50d909da-5a4b-4c20-af67-fe2d6362b7a3.",
    "sql": [
      "SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id \nFROM instances LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = instances.uuid LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = instances.uuid AND instances.deleted = 0 \nWHERE instances.uuid IN ('dae33792-fddf-4ef1-b06f-aca2d8cf90e2', '69d29554-8111-49e9-9033-4790700fac35', '85bdf307-26d3-490d-83c4-b3c803bbe12e', '6e2ca95e-a9bc-4426-a7ea-6de5c75d1fe6', 'd29c6a18-68a1-4f80-8962-e6be76be155b', '5634b187-fac9-47e3-8452-00d4c180a135', '6a4653b2-60cc-4085-b5d6-d3a90d8a099d', 'bd6a9e8f-8652-498f-b7aa-027f2f40c60d', '234b3669-30a2-432e-a906-b4c747cea3e7', 'b67262b4-644c-48b5-9c33-ed968f60cd77', '2eaa5fee-b472-46b0-a79a-9df601646581', 'a878223b-7b58-4fcb-a027-a00063d40e32', '7393f4d3-e6e5-4cb7-9380-eda551372018', '991b0946-6377-41c3-b4ad-16880d24416f', '96c76788-8d28-42d0-8765-44d9990d3152', '5c1881f2-face-4e2a-aa92-17d9848f2a96', 'f1af17d9-bdb7-4fea-9772-182301b87c1d', '7760956b-c1e4-440b-8ba3-676896f4441a', 'f3e6a1db-6733-45fb-9ff5-53b760b020ff', '9fbdb8d9-e3b3-40ae-9e97-915981107caf', 'f78b9615-5abe-4249-9da0-e0b58821cc61', '50d909da-5a4b-4c20-af67-fe2d6362b7a3') ORDER BY instances.created_at DESC, instances.id DESC"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "INSTANCE_INFO_CACHES.INSTANCE_UUID",
        "INSTANCES.UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 80,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 2,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "has_sorting",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "b3f10f4c0cb4",
    "question": "Provide information (including info caches, and security groups) for these VMs caeefb11-d678-46c5-b240-639688fff42e, 20fe7a2a-f2c0-4d9a-af3f-2d836fd35f3c, d68d2937-511a-4f89-8a4d-a3f114781e1a, 337d64cd-2daf-488a-b74b-5eddf97462db, 2e078448-351f-419b-adca-12b644fa6d2c, 2e35f274-5b4a-4cba-9cfe-0786c0a90906, 234fd9ec-1375-46bd-969a-237fc46eadc4, f14b5d3f-1c42-40b1-a48b-6baeba62c889, 6f2b0902-4667-4daa-b8dc-42cac14ab9e5, 29c9a596-a557-4ff7-abd6-a985bdc39be0, 8c691810-dfd5-44d8-ae8e-0ffba13bde47, b9eb36ee-3afc-40c0-a6b4-5f9ed2e41e8e, cd27ab83-30a2-4be8-942f-a3ee124dc4e4.",
    "sql": [
      "SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id \nFROM instances LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = instances.uuid LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = instances.uuid AND instances.deleted = 0 \nWHERE instances.uuid IN ('caeefb11-d678-46c5-b240-639688fff42e', '20fe7a2a-f2c0-4d9a-af3f-2d836fd35f3c', 'd68d2937-511a-4f89-8a4d-a3f114781e1a', '337d64cd-2daf-488a-b74b-5eddf97462db', '2e078448-351f-419b-adca-12b644fa6d2c', '2e35f274-5b4a-4cba-9cfe-0786c0a90906', '234fd9ec-1375-46bd-969a-237fc46eadc4', 'f14b5d3f-1c42-40b1-a48b-6baeba62c889', '6f2b0902-4667-4daa-b8dc-42cac14ab9e5', '29c9a596-a557-4ff7-abd6-a985bdc39be0', '8c691810-dfd5-44d8-ae8e-0ffba13bde47', 'b9eb36ee-3afc-40c0-a6b4-5f9ed2e41e8e', 'cd27ab83-30a2-4be8-942f-a3ee124dc4e4') ORDER BY instances.created_at DESC, instances.id DESC"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "INSTANCE_INFO_CACHES.INSTANCE_UUID",
        "INSTANCES.UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 80,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 2,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "has_sorting",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "c806728763d2",
    "question": "Provide information (including info caches, security groups, system metadata, and extra data) about the instance with id 36cc0a85-c3ef-4ed4-8883-369c87aa96e9.",
    "sql": [
      "SELECT anon_1.instances_created_at AS anon_1_instances_created_at, anon_1.instances_updated_at AS anon_1_instances_updated_at, anon_1.instances_deleted_at AS anon_1_instances_deleted_at, anon_1.instances_deleted AS anon_1_instances_deleted, anon_1.instances_id AS anon_1_instances_id, anon_1.instances_user_id AS anon_1_instances_user_id, anon_1.instances_project_id AS anon_1_instances_project_id, anon_1.instances_image_ref AS anon_1_instances_image_ref, anon_1.instances_kernel_id AS anon_1_instances_kernel_id, anon_1.instances_ramdisk_id AS anon_1_instances_ramdisk_id, anon_1.instances_hostname AS anon_1_instances_hostname, anon_1.instances_launch_index AS anon_1_instances_launch_index, anon_1.instances_key_name AS anon_1_instances_key_name, anon_1.instances_key_data AS anon_1_instances_key_data, anon_1.instances_power_state AS anon_1_instances_power_state, anon_1.instances_vm_state AS anon_1_instances_vm_state, anon_1.instances_task_state AS anon_1_instances_task_state, anon_1.instances_memory_mb AS anon_1_instances_memory_mb, anon_1.instances_vcpus AS anon_1_instances_vcpus, anon_1.instances_root_gb AS anon_1_instances_root_gb, anon_1.instances_ephemeral_gb AS anon_1_instances_ephemeral_gb, anon_1.instances_ephemeral_key_uuid AS anon_1_instances_ephemeral_key_uuid, anon_1.instances_host AS anon_1_instances_host, anon_1.instances_node AS anon_1_instances_node, anon_1.instances_instance_type_id AS anon_1_instances_instance_type_id, anon_1.instances_user_data AS anon_1_instances_user_data, anon_1.instances_reservation_id AS anon_1_instances_reservation_id, anon_1.instances_launched_at AS anon_1_instances_launched_at, anon_1.instances_terminated_at AS anon_1_instances_terminated_at, anon_1.instances_availability_zone AS anon_1_instances_availability_zone, anon_1.instances_display_name AS anon_1_instances_display_name, anon_1.instances_display_description AS anon_1_instances_display_description, anon_1.instances_launched_on AS anon_1_instances_launched_on, anon_1.instances_locked AS anon_1_instances_locked, anon_1.instances_locked_by AS anon_1_instances_locked_by, anon_1.instances_os_type AS anon_1_instances_os_type, anon_1.instances_architecture AS anon_1_instances_architecture, anon_1.instances_vm_mode AS anon_1_instances_vm_mode, anon_1.instances_uuid AS anon_1_instances_uuid, anon_1.instances_root_device_name AS anon_1_instances_root_device_name, anon_1.instances_default_ephemeral_device AS anon_1_instances_default_ephemeral_device, anon_1.instances_default_swap_device AS anon_1_instances_default_swap_device, anon_1.instances_config_drive AS anon_1_instances_config_drive, anon_1.instances_access_ip_v4 AS anon_1_instances_access_ip_v4, anon_1.instances_access_ip_v6 AS anon_1_instances_access_ip_v6, anon_1.instances_auto_disk_config AS anon_1_instances_auto_disk_config, anon_1.instances_progress AS anon_1_instances_progress, anon_1.instances_shutdown_terminate AS anon_1_instances_shutdown_terminate, anon_1.instances_disable_terminate AS anon_1_instances_disable_terminate, anon_1.instances_cell_name AS anon_1_instances_cell_name, anon_1.instances_internal_id AS anon_1_instances_internal_id, anon_1.instances_cleaned AS anon_1_instances_cleaned, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id, security_group_rules_1.created_at AS security_group_rules_1_created_at, security_group_rules_1.updated_at AS security_group_rules_1_updated_at, security_group_rules_1.deleted_at AS security_group_rules_1_deleted_at, security_group_rules_1.deleted AS security_group_rules_1_deleted, security_group_rules_1.id AS security_group_rules_1_id, security_group_rules_1.parent_group_id AS security_group_rules_1_parent_group_id, security_group_rules_1.protocol AS security_group_rules_1_protocol, security_group_rules_1.from_port AS security_group_rules_1_from_port, security_group_rules_1.to_port AS security_group_rules_1_to_port, security_group_rules_1.cidr AS security_group_rules_1_cidr, security_group_rules_1.group_id AS security_group_rules_1_group_id, instance_system_metadata_1.created_at AS instance_system_metadata_1_created_at, instance_system_metadata_1.updated_at AS instance_system_metadata_1_updated_at, instance_system_metadata_1.deleted_at AS instance_system_metadata_1_deleted_at, instance_system_metadata_1.deleted AS instance_system_metadata_1_deleted, instance_system_metadata_1.id AS instance_system_metadata_1_id, instance_system_metadata_1.`key` AS instance_system_metadata_1_key, instance_system_metadata_1.value AS instance_system_metadata_1_value, instance_system_metadata_1.instance_uuid AS instance_system_metadata_1_instance_uuid, instance_extra_1.flavor AS instance_extra_1_flavor, instance_extra_1.created_at AS instance_extra_1_created_at, instance_extra_1.updated_at AS instance_extra_1_updated_at, instance_extra_1.deleted_at AS instance_extra_1_deleted_at, instance_extra_1.deleted AS instance_extra_1_deleted, instance_extra_1.id AS instance_extra_1_id, instance_extra_1.instance_uuid AS instance_extra_1_instance_uuid \nFROM (SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned \nFROM instances \nWHERE instances.deleted = 0 AND instances.uuid = '36cc0a85-c3ef-4ed4-8883-369c87aa96e9' \n LIMIT 1) AS anon_1 LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = anon_1.instances_uuid LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = anon_1.instances_uuid AND anon_1.instances_deleted = 0 LEFT OUTER JOIN security_group_rules AS security_group_rules_1 ON security_group_rules_1.parent_group_id = security_groups_1.id AND security_group_rules_1.deleted = 0 LEFT OUTER JOIN instance_system_metadata AS instance_system_metadata_1 ON anon_1.instances_uuid = instance_system_metadata_1.instance_uuid LEFT OUTER JOIN instance_extra AS instance_extra_1 ON instance_extra_1.instance_uuid = anon_1.instances_uuid"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "SECURITY_GROUPS.ID",
        "SECURITY_GROUP_RULES.PARENT_GROUP_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_SYSTEM_METADATA",
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#INSTANCE_EXTRA",
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#SECURITY_GROUP_RULES",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 7,
        "query_column_count": 164,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 6
      },
      "categories": [
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "054319d5fcfb",
    "question": "Provide information (including info caches, and security groups) for these VMs 9aebab6b-08f0-4000-8573-a7b71b45d582, 1262ae40-d640-412d-8e61-842b5ed13b1e, 11e66ab0-5bfe-4863-85f6-b95596d8e649, 4ddffb34-bf5a-45e9-970e-a0d34272bea5, 9314873f-2e06-4f8e-a65c-d47198625763, a60f0841-84ba-4345-aa3a-cbea12a8ae11, e8e97077-88c0-4d4d-b55d-ae46f89353bb, d32a5f25-b746-4ff7-8709-087d0505d952, 2d1cfb18-913f-4754-b077-f96de1742b62, dc6a6cc8-c40e-4d5d-8bcf-5dfc7a0bf7b9, fbfcb130-e760-42f5-93d1-f9e93f9a51e4, 455124fd-f958-448b-b325-d3bda5887196, 87fe155b-466c-4237-8a53-c239721a6466, 804e87ae-6539-4151-9360-f77f99a89622.",
    "sql": [
      "SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id \nFROM instances LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = instances.uuid LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = instances.uuid AND instances.deleted = 0 \nWHERE instances.uuid IN ('9aebab6b-08f0-4000-8573-a7b71b45d582', '1262ae40-d640-412d-8e61-842b5ed13b1e', '11e66ab0-5bfe-4863-85f6-b95596d8e649', '4ddffb34-bf5a-45e9-970e-a0d34272bea5', '9314873f-2e06-4f8e-a65c-d47198625763', 'a60f0841-84ba-4345-aa3a-cbea12a8ae11', 'e8e97077-88c0-4d4d-b55d-ae46f89353bb', 'd32a5f25-b746-4ff7-8709-087d0505d952', '2d1cfb18-913f-4754-b077-f96de1742b62', 'dc6a6cc8-c40e-4d5d-8bcf-5dfc7a0bf7b9', 'fbfcb130-e760-42f5-93d1-f9e93f9a51e4', '455124fd-f958-448b-b325-d3bda5887196', '87fe155b-466c-4237-8a53-c239721a6466', '804e87ae-6539-4151-9360-f77f99a89622') ORDER BY instances.created_at DESC, instances.id DESC"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "INSTANCES.UUID",
        "INSTANCE_INFO_CACHES.INSTANCE_UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 80,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 2,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "has_sorting",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "72e994d824aa",
    "question": "Provide information about migrations associated with VM that moves to or from the physical host astro-92.",
    "sql": [
      "SELECT migrations.created_at AS migrations_created_at, migrations.updated_at AS migrations_updated_at, migrations.deleted_at AS migrations_deleted_at, migrations.deleted AS migrations_deleted, migrations.id AS migrations_id, migrations.source_compute AS migrations_source_compute, migrations.dest_compute AS migrations_dest_compute, migrations.source_node AS migrations_source_node, migrations.dest_node AS migrations_dest_node, migrations.dest_host AS migrations_dest_host, migrations.old_instance_type_id AS migrations_old_instance_type_id, migrations.new_instance_type_id AS migrations_new_instance_type_id, migrations.instance_uuid AS migrations_instance_uuid, migrations.status AS migrations_status, migrations.migration_type AS migrations_migration_type, migrations.hidden AS migrations_hidden, migrations.memory_total AS migrations_memory_total, migrations.memory_processed AS migrations_memory_processed, migrations.memory_remaining AS migrations_memory_remaining, migrations.disk_total AS migrations_disk_total, migrations.disk_processed AS migrations_disk_processed, migrations.disk_remaining AS migrations_disk_remaining, instances_1.created_at AS instances_1_created_at, instances_1.updated_at AS instances_1_updated_at, instances_1.deleted_at AS instances_1_deleted_at, instances_1.deleted AS instances_1_deleted, instances_1.id AS instances_1_id, instances_1.user_id AS instances_1_user_id, instances_1.project_id AS instances_1_project_id, instances_1.image_ref AS instances_1_image_ref, instances_1.kernel_id AS instances_1_kernel_id, instances_1.ramdisk_id AS instances_1_ramdisk_id, instances_1.hostname AS instances_1_hostname, instances_1.launch_index AS instances_1_launch_index, instances_1.key_name AS instances_1_key_name, instances_1.key_data AS instances_1_key_data, instances_1.power_state AS instances_1_power_state, instances_1.vm_state AS instances_1_vm_state, instances_1.task_state AS instances_1_task_state, instances_1.memory_mb AS instances_1_memory_mb, instances_1.vcpus AS instances_1_vcpus, instances_1.root_gb AS instances_1_root_gb, instances_1.ephemeral_gb AS instances_1_ephemeral_gb, instances_1.ephemeral_key_uuid AS instances_1_ephemeral_key_uuid, instances_1.host AS instances_1_host, instances_1.node AS instances_1_node, instances_1.instance_type_id AS instances_1_instance_type_id, instances_1.user_data AS instances_1_user_data, instances_1.reservation_id AS instances_1_reservation_id, instances_1.launched_at AS instances_1_launched_at, instances_1.terminated_at AS instances_1_terminated_at, instances_1.availability_zone AS instances_1_availability_zone, instances_1.display_name AS instances_1_display_name, instances_1.display_description AS instances_1_display_description, instances_1.launched_on AS instances_1_launched_on, instances_1.locked AS instances_1_locked, instances_1.locked_by AS instances_1_locked_by, instances_1.os_type AS instances_1_os_type, instances_1.architecture AS instances_1_architecture, instances_1.vm_mode AS instances_1_vm_mode, instances_1.uuid AS instances_1_uuid, instances_1.root_device_name AS instances_1_root_device_name, instances_1.default_ephemeral_device AS instances_1_default_ephemeral_device, instances_1.default_swap_device AS instances_1_default_swap_device, instances_1.config_drive AS instances_1_config_drive, instances_1.access_ip_v4 AS instances_1_access_ip_v4, instances_1.access_ip_v6 AS instances_1_access_ip_v6, instances_1.auto_disk_config AS instances_1_auto_disk_config, instances_1.progress AS instances_1_progress, instances_1.shutdown_terminate AS instances_1_shutdown_terminate, instances_1.disable_terminate AS instances_1_disable_terminate, instances_1.cell_name AS instances_1_cell_name, instances_1.internal_id AS instances_1_internal_id, instances_1.cleaned AS instances_1_cleaned, instance_system_metadata_1.created_at AS instance_system_metadata_1_created_at, instance_system_metadata_1.updated_at AS instance_system_metadata_1_updated_at, instance_system_metadata_1.deleted_at AS instance_system_metadata_1_deleted_at, instance_system_metadata_1.deleted AS instance_system_metadata_1_deleted, instance_system_metadata_1.id AS instance_system_metadata_1_id, instance_system_metadata_1.`key` AS instance_system_metadata_1_key, instance_system_metadata_1.value AS instance_system_metadata_1_value, instance_system_metadata_1.instance_uuid AS instance_system_metadata_1_instance_uuid \nFROM migrations LEFT OUTER JOIN instances AS instances_1 ON migrations.instance_uuid = instances_1.uuid AND instances_1.deleted = 0 LEFT OUTER JOIN instance_system_metadata AS instance_system_metadata_1 ON instances_1.uuid = instance_system_metadata_1.instance_uuid \nWHERE migrations.deleted = 0 AND (migrations.source_compute = 'astro-92' AND migrations.source_node = 'astro-92.yahoo.ca.com' OR migrations.dest_compute = 'astro-92' AND migrations.dest_node = 'astro-92.yahoo.ca.com') AND migrations.status NOT IN ('accepted', 'confirmed', 'reverted', 'error', 'failed', 'completed')"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "INSTANCES.UUID",
        "MIGRATIONS.INSTANCE_UUID"
      ],
      [
        "INSTANCES.UUID",
        "INSTANCE_SYSTEM_METADATA.INSTANCE_UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_SYSTEM_METADATA",
      "csail_stata_nova#sep#MIGRATIONS",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 93,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "623bca9a66e0",
    "question": "Provide information (including info caches, and security groups) about VMs running on physical host drive-59.",
    "sql": [
      "SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id \nFROM instances LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = instances.uuid LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = instances.uuid AND instances.deleted = 0 \nWHERE instances.deleted = 0 AND instances.host = 'drive-59'"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "INSTANCES.UUID",
        "INSTANCE_INFO_CACHES.INSTANCE_UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 79,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "59d902b357e7",
    "question": "Provide information about physical host astro-92.",
    "sql": [
      "SELECT cn.created_at, cn.updated_at, cn.deleted_at, cn.deleted, cn.id, cn.service_id, cn.host, cn.uuid, cn.vcpus, cn.memory_mb, cn.local_gb, cn.vcpus_used, cn.memory_mb_used, cn.local_gb_used, cn.hypervisor_type, cn.hypervisor_version, cn.hypervisor_hostname, cn.free_ram_mb, cn.free_disk_gb, cn.current_workload, cn.running_vms, cn.cpu_info, cn.disk_available_least, cn.host_ip, cn.supported_instances, cn.metrics, cn.pci_stats, cn.extra_resources, cn.stats, cn.numa_topology, cn.ram_allocation_ratio, cn.cpu_allocation_ratio, cn.disk_allocation_ratio, ram_inv.total AS inv_memory_mb, ram_inv.reserved AS inv_memory_mb_reserved, ram_inv.allocation_ratio AS inv_ram_allocation_ratio, ram_usage.used AS inv_memory_mb_used, cpu_inv.total AS inv_vcpus, cpu_inv.allocation_ratio AS inv_cpu_allocation_ratio, cpu_usage.used AS inv_vcpus_used, disk_inv.total AS inv_local_gb, disk_inv.reserved AS inv_local_gb_reserved, disk_inv.allocation_ratio AS inv_disk_allocation_ratio, disk_usage.used AS inv_local_gb_used \nFROM compute_nodes AS cn LEFT OUTER JOIN resource_providers AS rp ON cn.uuid = rp.uuid LEFT OUTER JOIN inventories AS ram_inv ON rp.id = ram_inv.resource_provider_id AND ram_inv.resource_class_id = 1 LEFT OUTER JOIN (SELECT allocations.resource_provider_id AS resource_provider_id, sum(allocations.used) AS used \nFROM allocations \nWHERE allocations.resource_class_id = 1 GROUP BY allocations.resource_provider_id) AS ram_usage ON ram_inv.resource_provider_id = ram_usage.resource_provider_id LEFT OUTER JOIN inventories AS cpu_inv ON rp.id = cpu_inv.resource_provider_id AND cpu_inv.resource_class_id = 0 LEFT OUTER JOIN (SELECT allocations.resource_provider_id AS resource_provider_id, sum(allocations.used) AS used \nFROM allocations \nWHERE allocations.resource_class_id = 0 GROUP BY allocations.resource_provider_id) AS cpu_usage ON cpu_inv.resource_provider_id = cpu_usage.resource_provider_id LEFT OUTER JOIN inventories AS disk_inv ON rp.id = disk_inv.resource_provider_id AND disk_inv.resource_class_id = 2 LEFT OUTER JOIN (SELECT allocations.resource_provider_id AS resource_provider_id, sum(allocations.used) AS used \nFROM allocations \nWHERE allocations.resource_class_id = 2 GROUP BY allocations.resource_provider_id) AS disk_usage ON disk_inv.resource_provider_id = disk_usage.resource_provider_id \nWHERE cn.deleted = 0 AND cn.host = 'astro-92'"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "COMPUTE_NODES.UUID",
        "RESOURCE_PROVIDERS.UUID"
      ],
      [
        "INVENTORIES.RESOURCE_PROVIDER_ID",
        "RESOURCE_PROVIDERS.ID"
      ],
      [
        "INVENTORIES.RESOURCE_PROVIDER_ID",
        "RESOURCE_PROVIDERS.ID"
      ],
      [
        "RESOURCE_PROVIDERS.ID",
        "INVENTORIES.RESOURCE_PROVIDER_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#RESOURCE_PROVIDERS",
      "csail_stata_nova#sep#ALLOCATIONS",
      "csail_stata_nova#sep#INVENTORIES",
      "csail_stata_nova#sep#COMPUTE_NODES"
    ],
    "meta": {
      "features": {
        "query_table_count": 8,
        "query_column_count": 75,
        "query_nested_count": 3,
        "query_aggregate_count": 3,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 7
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "164db655b0e5",
    "question": "Provide information about migrations associated with VM that moves to or from the physical host axis-11.",
    "sql": [
      "SELECT migrations.created_at AS migrations_created_at, migrations.updated_at AS migrations_updated_at, migrations.deleted_at AS migrations_deleted_at, migrations.deleted AS migrations_deleted, migrations.id AS migrations_id, migrations.source_compute AS migrations_source_compute, migrations.dest_compute AS migrations_dest_compute, migrations.source_node AS migrations_source_node, migrations.dest_node AS migrations_dest_node, migrations.dest_host AS migrations_dest_host, migrations.old_instance_type_id AS migrations_old_instance_type_id, migrations.new_instance_type_id AS migrations_new_instance_type_id, migrations.instance_uuid AS migrations_instance_uuid, migrations.status AS migrations_status, migrations.migration_type AS migrations_migration_type, migrations.hidden AS migrations_hidden, migrations.memory_total AS migrations_memory_total, migrations.memory_processed AS migrations_memory_processed, migrations.memory_remaining AS migrations_memory_remaining, migrations.disk_total AS migrations_disk_total, migrations.disk_processed AS migrations_disk_processed, migrations.disk_remaining AS migrations_disk_remaining, instances_1.created_at AS instances_1_created_at, instances_1.updated_at AS instances_1_updated_at, instances_1.deleted_at AS instances_1_deleted_at, instances_1.deleted AS instances_1_deleted, instances_1.id AS instances_1_id, instances_1.user_id AS instances_1_user_id, instances_1.project_id AS instances_1_project_id, instances_1.image_ref AS instances_1_image_ref, instances_1.kernel_id AS instances_1_kernel_id, instances_1.ramdisk_id AS instances_1_ramdisk_id, instances_1.hostname AS instances_1_hostname, instances_1.launch_index AS instances_1_launch_index, instances_1.key_name AS instances_1_key_name, instances_1.key_data AS instances_1_key_data, instances_1.power_state AS instances_1_power_state, instances_1.vm_state AS instances_1_vm_state, instances_1.task_state AS instances_1_task_state, instances_1.memory_mb AS instances_1_memory_mb, instances_1.vcpus AS instances_1_vcpus, instances_1.root_gb AS instances_1_root_gb, instances_1.ephemeral_gb AS instances_1_ephemeral_gb, instances_1.ephemeral_key_uuid AS instances_1_ephemeral_key_uuid, instances_1.host AS instances_1_host, instances_1.node AS instances_1_node, instances_1.instance_type_id AS instances_1_instance_type_id, instances_1.user_data AS instances_1_user_data, instances_1.reservation_id AS instances_1_reservation_id, instances_1.launched_at AS instances_1_launched_at, instances_1.terminated_at AS instances_1_terminated_at, instances_1.availability_zone AS instances_1_availability_zone, instances_1.display_name AS instances_1_display_name, instances_1.display_description AS instances_1_display_description, instances_1.launched_on AS instances_1_launched_on, instances_1.locked AS instances_1_locked, instances_1.locked_by AS instances_1_locked_by, instances_1.os_type AS instances_1_os_type, instances_1.architecture AS instances_1_architecture, instances_1.vm_mode AS instances_1_vm_mode, instances_1.uuid AS instances_1_uuid, instances_1.root_device_name AS instances_1_root_device_name, instances_1.default_ephemeral_device AS instances_1_default_ephemeral_device, instances_1.default_swap_device AS instances_1_default_swap_device, instances_1.config_drive AS instances_1_config_drive, instances_1.access_ip_v4 AS instances_1_access_ip_v4, instances_1.access_ip_v6 AS instances_1_access_ip_v6, instances_1.auto_disk_config AS instances_1_auto_disk_config, instances_1.progress AS instances_1_progress, instances_1.shutdown_terminate AS instances_1_shutdown_terminate, instances_1.disable_terminate AS instances_1_disable_terminate, instances_1.cell_name AS instances_1_cell_name, instances_1.internal_id AS instances_1_internal_id, instances_1.cleaned AS instances_1_cleaned, instance_system_metadata_1.created_at AS instance_system_metadata_1_created_at, instance_system_metadata_1.updated_at AS instance_system_metadata_1_updated_at, instance_system_metadata_1.deleted_at AS instance_system_metadata_1_deleted_at, instance_system_metadata_1.deleted AS instance_system_metadata_1_deleted, instance_system_metadata_1.id AS instance_system_metadata_1_id, instance_system_metadata_1.`key` AS instance_system_metadata_1_key, instance_system_metadata_1.value AS instance_system_metadata_1_value, instance_system_metadata_1.instance_uuid AS instance_system_metadata_1_instance_uuid \nFROM migrations LEFT OUTER JOIN instances AS instances_1 ON migrations.instance_uuid = instances_1.uuid AND instances_1.deleted = 0 LEFT OUTER JOIN instance_system_metadata AS instance_system_metadata_1 ON instances_1.uuid = instance_system_metadata_1.instance_uuid \nWHERE migrations.deleted = 0 AND (migrations.source_compute = 'axis-11' AND migrations.source_node = 'axis-11.yahoo.ca.com' OR migrations.dest_compute = 'axis-11' AND migrations.dest_node = 'axis-11.yahoo.ca.com') AND migrations.status NOT IN ('accepted', 'confirmed', 'reverted', 'error', 'failed', 'completed')"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "MIGRATIONS.INSTANCE_UUID",
        "INSTANCES.UUID"
      ],
      [
        "INSTANCES.UUID",
        "INSTANCE_SYSTEM_METADATA.INSTANCE_UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_SYSTEM_METADATA",
      "csail_stata_nova#sep#MIGRATIONS",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 93,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "03c952000801",
    "question": "Provide information (including info caches, and security groups) for these VMs f5a08397-5aac-44b4-b359-f03ff6ce228a, e7c1acd1-6a47-4a08-8601-5022d4d50aa7, e8579caf-bb8c-4fa2-ba55-6d9a7cbc4d9e, 80822713-5422-43ec-8127-0513708ad73b, acdf87ab-5ddc-4dba-bca0-71dccef3200d, 3d471303-557b-4a65-a5bd-1ca14dc2e445, 02601559-9715-4538-9c93-11ba1134a8d5, 0b79659e-7fbf-45e8-b0d0-65fa8e7eba3f, fd598c1c-3015-4a21-a2a4-141b89929548, f4d4c3c7-b173-45c9-bd8c-5558fe16a2f9, 5e918753-4136-4621-8c64-a5060d4176c5, bb5deaeb-64ff-4422-8fc2-5c9a03fb22a2, befacc64-1165-4e69-aa4b-031e6fc27401, 2b4585b6-a893-4f04-9ba3-e3573f6b0cab, 9594fe52-ebf8-4a89-ab09-4010e77693f5, 829fa62e-31d6-477a-8d66-bb633f02399e, faade932-bb08-4e2c-830b-349238cf2c47, 40cf2ad8-959b-4ec6-afe5-3827206b4a5d, 7a138353-212e-4cb2-a0c8-61f300430395, 4306ca1c-b980-4fb6-a91b-47869b6338c7, 9e1ceb5e-527b-4d08-b44b-bfdc7b63cfa1.",
    "sql": [
      "SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id \nFROM instances LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = instances.uuid LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = instances.uuid AND instances.deleted = 0 \nWHERE instances.uuid IN ('f5a08397-5aac-44b4-b359-f03ff6ce228a', 'e7c1acd1-6a47-4a08-8601-5022d4d50aa7', 'e8579caf-bb8c-4fa2-ba55-6d9a7cbc4d9e', '80822713-5422-43ec-8127-0513708ad73b', 'acdf87ab-5ddc-4dba-bca0-71dccef3200d', '3d471303-557b-4a65-a5bd-1ca14dc2e445', '02601559-9715-4538-9c93-11ba1134a8d5', '0b79659e-7fbf-45e8-b0d0-65fa8e7eba3f', 'fd598c1c-3015-4a21-a2a4-141b89929548', 'f4d4c3c7-b173-45c9-bd8c-5558fe16a2f9', '5e918753-4136-4621-8c64-a5060d4176c5', 'bb5deaeb-64ff-4422-8fc2-5c9a03fb22a2', 'befacc64-1165-4e69-aa4b-031e6fc27401', '2b4585b6-a893-4f04-9ba3-e3573f6b0cab', '9594fe52-ebf8-4a89-ab09-4010e77693f5', '829fa62e-31d6-477a-8d66-bb633f02399e', 'faade932-bb08-4e2c-830b-349238cf2c47', '40cf2ad8-959b-4ec6-afe5-3827206b4a5d', '7a138353-212e-4cb2-a0c8-61f300430395', '4306ca1c-b980-4fb6-a91b-47869b6338c7', '9e1ceb5e-527b-4d08-b44b-bfdc7b63cfa1') ORDER BY instances.created_at DESC, instances.id DESC"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "INSTANCE_INFO_CACHES.INSTANCE_UUID",
        "INSTANCES.UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 80,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 2,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "has_sorting",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "4d86a3b0ff32",
    "question": "Provide information about the port with ip address 10.165.172.69/8 under network 0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d.",
    "sql": [
      "SELECT ports.tenant_id AS ports_tenant_id, ports.id AS ports_id, ports.name AS ports_name, ports.network_id AS ports_network_id, ports.mac_address AS ports_mac_address, ports.admin_state_up AS ports_admin_state_up, ports.status AS ports_status, ports.device_id AS ports_device_id, ports.device_owner AS ports_device_owner, ports.dns_name AS ports_dns_name, ports.standard_attr_id AS ports_standard_attr_id, ipallocations_1.port_id AS ipallocations_1_port_id, ipallocations_1.ip_address AS ipallocations_1_ip_address, ipallocations_1.subnet_id AS ipallocations_1_subnet_id, ipallocations_1.network_id AS ipallocations_1_network_id, standardattributes_1.created_at AS standardattributes_1_created_at, standardattributes_1.updated_at AS standardattributes_1_updated_at, standardattributes_1.id AS standardattributes_1_id, standardattributes_1.resource_type AS standardattributes_1_resource_type, standardattributes_1.description AS standardattributes_1_description, tags_1.standard_attr_id AS tags_1_standard_attr_id, tags_1.tag AS tags_1_tag, portsecuritybindings_1.port_id AS portsecuritybindings_1_port_id, portsecuritybindings_1.port_security_enabled AS portsecuritybindings_1_port_security_enabled, ml2_dvr_port_bindings_1.port_id AS ml2_dvr_port_bindings_1_port_id, ml2_dvr_port_bindings_1.host AS ml2_dvr_port_bindings_1_host, ml2_dvr_port_bindings_1.router_id AS ml2_dvr_port_bindings_1_router_id, ml2_dvr_port_bindings_1.vif_type AS ml2_dvr_port_bindings_1_vif_type, ml2_dvr_port_bindings_1.vif_details AS ml2_dvr_port_bindings_1_vif_details, ml2_dvr_port_bindings_1.vnic_type AS ml2_dvr_port_bindings_1_vnic_type, ml2_dvr_port_bindings_1.profile AS ml2_dvr_port_bindings_1_profile, ml2_dvr_port_bindings_1.status AS ml2_dvr_port_bindings_1_status, allowedaddresspairs_1.port_id AS allowedaddresspairs_1_port_id, allowedaddresspairs_1.mac_address AS allowedaddresspairs_1_mac_address, allowedaddresspairs_1.ip_address AS allowedaddresspairs_1_ip_address, qos_port_policy_bindings_1.policy_id AS qos_port_policy_bindings_1_policy_id, qos_port_policy_bindings_1.port_id AS qos_port_policy_bindings_1_port_id, securitygroupportbindings_1.port_id AS securitygroupportbindings_1_port_id, securitygroupportbindings_1.security_group_id AS securitygroupportbindings_1_security_group_id, ml2_port_bindings_1.port_id AS ml2_port_bindings_1_port_id, ml2_port_bindings_1.host AS ml2_port_bindings_1_host, ml2_port_bindings_1.vnic_type AS ml2_port_bindings_1_vnic_type, ml2_port_bindings_1.profile AS ml2_port_bindings_1_profile, ml2_port_bindings_1.vif_type AS ml2_port_bindings_1_vif_type, ml2_port_bindings_1.vif_details AS ml2_port_bindings_1_vif_details, extradhcpopts_1.id AS extradhcpopts_1_id, extradhcpopts_1.port_id AS extradhcpopts_1_port_id, extradhcpopts_1.opt_name AS extradhcpopts_1_opt_name, extradhcpopts_1.opt_value AS extradhcpopts_1_opt_value, extradhcpopts_1.ip_version AS extradhcpopts_1_ip_version, portdnses_1.port_id AS portdnses_1_port_id, portdnses_1.current_dns_name AS portdnses_1_current_dns_name, portdnses_1.current_dns_domain AS portdnses_1_current_dns_domain, portdnses_1.previous_dns_name AS portdnses_1_previous_dns_name, portdnses_1.previous_dns_domain AS portdnses_1_previous_dns_domain \nFROM ports LEFT OUTER JOIN ml2_port_bindings ON ports.id = ml2_port_bindings.port_id INNER JOIN ipallocations ON ports.id = ipallocations.port_id LEFT OUTER JOIN ipallocations AS ipallocations_1 ON ports.id = ipallocations_1.port_id LEFT OUTER JOIN standardattributes AS standardattributes_1 ON standardattributes_1.id = ports.standard_attr_id LEFT OUTER JOIN tags AS tags_1 ON standardattributes_1.id = tags_1.standard_attr_id LEFT OUTER JOIN portsecuritybindings AS portsecuritybindings_1 ON ports.id = portsecuritybindings_1.port_id LEFT OUTER JOIN ml2_dvr_port_bindings AS ml2_dvr_port_bindings_1 ON ports.id = ml2_dvr_port_bindings_1.port_id LEFT OUTER JOIN allowedaddresspairs AS allowedaddresspairs_1 ON ports.id = allowedaddresspairs_1.port_id LEFT OUTER JOIN qos_port_policy_bindings AS qos_port_policy_bindings_1 ON ports.id = qos_port_policy_bindings_1.port_id LEFT OUTER JOIN securitygroupportbindings AS securitygroupportbindings_1 ON ports.id = securitygroupportbindings_1.port_id LEFT OUTER JOIN ml2_port_bindings AS ml2_port_bindings_1 ON ports.id = ml2_port_bindings_1.port_id LEFT OUTER JOIN extradhcpopts AS extradhcpopts_1 ON ports.id = extradhcpopts_1.port_id LEFT OUTER JOIN portdnses AS portdnses_1 ON ports.id = portdnses_1.port_id \nWHERE ipallocations.ip_address IN ('10.165.172.69/8') AND ports.network_id IN ('0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d')"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "ML2_PORT_BINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "IPALLOCATIONS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "PORTS.ID",
        "IPALLOCATIONS.PORT_ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "PORTS.STANDARD_ATTR_ID"
      ],
      [
        "TAGS.STANDARD_ATTR_ID",
        "STANDARDATTRIBUTES.ID"
      ],
      [
        "PORTS.ID",
        "PORTSECURITYBINDINGS.PORT_ID"
      ],
      [
        "PORTS.ID",
        "ML2_DVR_PORT_BINDINGS.PORT_ID"
      ],
      [
        "ALLOWEDADDRESSPAIRS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "PORTS.ID",
        "QOS_PORT_POLICY_BINDINGS.PORT_ID"
      ],
      [
        "PORTS.ID",
        "SECURITYGROUPPORTBINDINGS.PORT_ID"
      ],
      [
        "PORTS.ID",
        "ML2_PORT_BINDINGS.PORT_ID"
      ],
      [
        "EXTRADHCPOPTS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "PORTS.ID",
        "PORTDNSES.PORT_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#IPALLOCATIONS",
      "csail_stata_neutron#sep#PORTS",
      "csail_stata_neutron#sep#PORTDNSES",
      "csail_stata_neutron#sep#ML2_DVR_PORT_BINDINGS",
      "csail_stata_neutron#sep#STANDARDATTRIBUTES",
      "csail_stata_neutron#sep#ALLOWEDADDRESSPAIRS",
      "csail_stata_neutron#sep#EXTRADHCPOPTS",
      "csail_stata_neutron#sep#SECURITYGROUPPORTBINDINGS",
      "csail_stata_neutron#sep#QOS_PORT_POLICY_BINDINGS",
      "csail_stata_neutron#sep#ML2_PORT_BINDINGS",
      "csail_stata_neutron#sep#TAGS",
      "csail_stata_neutron#sep#PORTSECURITYBINDINGS"
    ],
    "meta": {
      "features": {
        "query_table_count": 14,
        "query_column_count": 83,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 13
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "931cb6c67ced",
    "question": "Provide information about migrations associated with VM that moves to or from the physical host ether-18.",
    "sql": [
      "SELECT migrations.created_at AS migrations_created_at, migrations.updated_at AS migrations_updated_at, migrations.deleted_at AS migrations_deleted_at, migrations.deleted AS migrations_deleted, migrations.id AS migrations_id, migrations.source_compute AS migrations_source_compute, migrations.dest_compute AS migrations_dest_compute, migrations.source_node AS migrations_source_node, migrations.dest_node AS migrations_dest_node, migrations.dest_host AS migrations_dest_host, migrations.old_instance_type_id AS migrations_old_instance_type_id, migrations.new_instance_type_id AS migrations_new_instance_type_id, migrations.instance_uuid AS migrations_instance_uuid, migrations.status AS migrations_status, migrations.migration_type AS migrations_migration_type, migrations.hidden AS migrations_hidden, migrations.memory_total AS migrations_memory_total, migrations.memory_processed AS migrations_memory_processed, migrations.memory_remaining AS migrations_memory_remaining, migrations.disk_total AS migrations_disk_total, migrations.disk_processed AS migrations_disk_processed, migrations.disk_remaining AS migrations_disk_remaining, instances_1.created_at AS instances_1_created_at, instances_1.updated_at AS instances_1_updated_at, instances_1.deleted_at AS instances_1_deleted_at, instances_1.deleted AS instances_1_deleted, instances_1.id AS instances_1_id, instances_1.user_id AS instances_1_user_id, instances_1.project_id AS instances_1_project_id, instances_1.image_ref AS instances_1_image_ref, instances_1.kernel_id AS instances_1_kernel_id, instances_1.ramdisk_id AS instances_1_ramdisk_id, instances_1.hostname AS instances_1_hostname, instances_1.launch_index AS instances_1_launch_index, instances_1.key_name AS instances_1_key_name, instances_1.key_data AS instances_1_key_data, instances_1.power_state AS instances_1_power_state, instances_1.vm_state AS instances_1_vm_state, instances_1.task_state AS instances_1_task_state, instances_1.memory_mb AS instances_1_memory_mb, instances_1.vcpus AS instances_1_vcpus, instances_1.root_gb AS instances_1_root_gb, instances_1.ephemeral_gb AS instances_1_ephemeral_gb, instances_1.ephemeral_key_uuid AS instances_1_ephemeral_key_uuid, instances_1.host AS instances_1_host, instances_1.node AS instances_1_node, instances_1.instance_type_id AS instances_1_instance_type_id, instances_1.user_data AS instances_1_user_data, instances_1.reservation_id AS instances_1_reservation_id, instances_1.launched_at AS instances_1_launched_at, instances_1.terminated_at AS instances_1_terminated_at, instances_1.availability_zone AS instances_1_availability_zone, instances_1.display_name AS instances_1_display_name, instances_1.display_description AS instances_1_display_description, instances_1.launched_on AS instances_1_launched_on, instances_1.locked AS instances_1_locked, instances_1.locked_by AS instances_1_locked_by, instances_1.os_type AS instances_1_os_type, instances_1.architecture AS instances_1_architecture, instances_1.vm_mode AS instances_1_vm_mode, instances_1.uuid AS instances_1_uuid, instances_1.root_device_name AS instances_1_root_device_name, instances_1.default_ephemeral_device AS instances_1_default_ephemeral_device, instances_1.default_swap_device AS instances_1_default_swap_device, instances_1.config_drive AS instances_1_config_drive, instances_1.access_ip_v4 AS instances_1_access_ip_v4, instances_1.access_ip_v6 AS instances_1_access_ip_v6, instances_1.auto_disk_config AS instances_1_auto_disk_config, instances_1.progress AS instances_1_progress, instances_1.shutdown_terminate AS instances_1_shutdown_terminate, instances_1.disable_terminate AS instances_1_disable_terminate, instances_1.cell_name AS instances_1_cell_name, instances_1.internal_id AS instances_1_internal_id, instances_1.cleaned AS instances_1_cleaned, instance_system_metadata_1.created_at AS instance_system_metadata_1_created_at, instance_system_metadata_1.updated_at AS instance_system_metadata_1_updated_at, instance_system_metadata_1.deleted_at AS instance_system_metadata_1_deleted_at, instance_system_metadata_1.deleted AS instance_system_metadata_1_deleted, instance_system_metadata_1.id AS instance_system_metadata_1_id, instance_system_metadata_1.`key` AS instance_system_metadata_1_key, instance_system_metadata_1.value AS instance_system_metadata_1_value, instance_system_metadata_1.instance_uuid AS instance_system_metadata_1_instance_uuid \nFROM migrations LEFT OUTER JOIN instances AS instances_1 ON migrations.instance_uuid = instances_1.uuid AND instances_1.deleted = 0 LEFT OUTER JOIN instance_system_metadata AS instance_system_metadata_1 ON instances_1.uuid = instance_system_metadata_1.instance_uuid \nWHERE migrations.deleted = 0 AND (migrations.source_compute = 'ether-18' AND migrations.source_node = 'ether-18.yahoo.ca.com' OR migrations.dest_compute = 'ether-18' AND migrations.dest_node = 'ether-18.yahoo.ca.com') AND migrations.status NOT IN ('accepted', 'confirmed', 'reverted', 'error', 'failed', 'completed')"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "INSTANCES.UUID",
        "MIGRATIONS.INSTANCE_UUID"
      ],
      [
        "INSTANCE_SYSTEM_METADATA.INSTANCE_UUID",
        "INSTANCES.UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_SYSTEM_METADATA",
      "csail_stata_nova#sep#MIGRATIONS",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 93,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "b3ac8b7797b7",
    "question": "Provide information about port with device id bb5deaeb-64ff-4422-8fc2-5c9a03fb22a2 owned by project 3be6c8b9f95842198466a9c673404768.",
    "sql": [
      "SELECT ports.tenant_id AS ports_tenant_id, ports.id AS ports_id, ports.name AS ports_name, ports.network_id AS ports_network_id, ports.mac_address AS ports_mac_address, ports.admin_state_up AS ports_admin_state_up, ports.status AS ports_status, ports.device_id AS ports_device_id, ports.device_owner AS ports_device_owner, ports.dns_name AS ports_dns_name, ports.standard_attr_id AS ports_standard_attr_id, ipallocations_1.port_id AS ipallocations_1_port_id, ipallocations_1.ip_address AS ipallocations_1_ip_address, ipallocations_1.subnet_id AS ipallocations_1_subnet_id, ipallocations_1.network_id AS ipallocations_1_network_id, standardattributes_1.created_at AS standardattributes_1_created_at, standardattributes_1.updated_at AS standardattributes_1_updated_at, standardattributes_1.id AS standardattributes_1_id, standardattributes_1.resource_type AS standardattributes_1_resource_type, standardattributes_1.description AS standardattributes_1_description, tags_1.standard_attr_id AS tags_1_standard_attr_id, tags_1.tag AS tags_1_tag, portsecuritybindings_1.port_id AS portsecuritybindings_1_port_id, portsecuritybindings_1.port_security_enabled AS portsecuritybindings_1_port_security_enabled, ml2_dvr_port_bindings_1.port_id AS ml2_dvr_port_bindings_1_port_id, ml2_dvr_port_bindings_1.host AS ml2_dvr_port_bindings_1_host, ml2_dvr_port_bindings_1.router_id AS ml2_dvr_port_bindings_1_router_id, ml2_dvr_port_bindings_1.vif_type AS ml2_dvr_port_bindings_1_vif_type, ml2_dvr_port_bindings_1.vif_details AS ml2_dvr_port_bindings_1_vif_details, ml2_dvr_port_bindings_1.vnic_type AS ml2_dvr_port_bindings_1_vnic_type, ml2_dvr_port_bindings_1.profile AS ml2_dvr_port_bindings_1_profile, ml2_dvr_port_bindings_1.status AS ml2_dvr_port_bindings_1_status, allowedaddresspairs_1.port_id AS allowedaddresspairs_1_port_id, allowedaddresspairs_1.mac_address AS allowedaddresspairs_1_mac_address, allowedaddresspairs_1.ip_address AS allowedaddresspairs_1_ip_address, qos_port_policy_bindings_1.policy_id AS qos_port_policy_bindings_1_policy_id, qos_port_policy_bindings_1.port_id AS qos_port_policy_bindings_1_port_id, securitygroupportbindings_1.port_id AS securitygroupportbindings_1_port_id, securitygroupportbindings_1.security_group_id AS securitygroupportbindings_1_security_group_id, ml2_port_bindings_1.port_id AS ml2_port_bindings_1_port_id, ml2_port_bindings_1.host AS ml2_port_bindings_1_host, ml2_port_bindings_1.vnic_type AS ml2_port_bindings_1_vnic_type, ml2_port_bindings_1.profile AS ml2_port_bindings_1_profile, ml2_port_bindings_1.vif_type AS ml2_port_bindings_1_vif_type, ml2_port_bindings_1.vif_details AS ml2_port_bindings_1_vif_details, extradhcpopts_1.id AS extradhcpopts_1_id, extradhcpopts_1.port_id AS extradhcpopts_1_port_id, extradhcpopts_1.opt_name AS extradhcpopts_1_opt_name, extradhcpopts_1.opt_value AS extradhcpopts_1_opt_value, extradhcpopts_1.ip_version AS extradhcpopts_1_ip_version, portdnses_1.port_id AS portdnses_1_port_id, portdnses_1.current_dns_name AS portdnses_1_current_dns_name, portdnses_1.current_dns_domain AS portdnses_1_current_dns_domain, portdnses_1.previous_dns_name AS portdnses_1_previous_dns_name, portdnses_1.previous_dns_domain AS portdnses_1_previous_dns_domain \nFROM ports LEFT OUTER JOIN ml2_port_bindings ON ports.id = ml2_port_bindings.port_id LEFT OUTER JOIN ipallocations AS ipallocations_1 ON ports.id = ipallocations_1.port_id LEFT OUTER JOIN standardattributes AS standardattributes_1 ON standardattributes_1.id = ports.standard_attr_id LEFT OUTER JOIN tags AS tags_1 ON standardattributes_1.id = tags_1.standard_attr_id LEFT OUTER JOIN portsecuritybindings AS portsecuritybindings_1 ON ports.id = portsecuritybindings_1.port_id LEFT OUTER JOIN ml2_dvr_port_bindings AS ml2_dvr_port_bindings_1 ON ports.id = ml2_dvr_port_bindings_1.port_id LEFT OUTER JOIN allowedaddresspairs AS allowedaddresspairs_1 ON ports.id = allowedaddresspairs_1.port_id LEFT OUTER JOIN qos_port_policy_bindings AS qos_port_policy_bindings_1 ON ports.id = qos_port_policy_bindings_1.port_id LEFT OUTER JOIN securitygroupportbindings AS securitygroupportbindings_1 ON ports.id = securitygroupportbindings_1.port_id LEFT OUTER JOIN ml2_port_bindings AS ml2_port_bindings_1 ON ports.id = ml2_port_bindings_1.port_id LEFT OUTER JOIN extradhcpopts AS extradhcpopts_1 ON ports.id = extradhcpopts_1.port_id LEFT OUTER JOIN portdnses AS portdnses_1 ON ports.id = portdnses_1.port_id \nWHERE ports.tenant_id IN ('3be6c8b9f95842198466a9c673404768') AND ports.device_id IN ('bb5deaeb-64ff-4422-8fc2-5c9a03fb22a2')"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "ML2_PORT_BINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "PORTS.ID",
        "IPALLOCATIONS.PORT_ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "PORTS.STANDARD_ATTR_ID"
      ],
      [
        "TAGS.STANDARD_ATTR_ID",
        "STANDARDATTRIBUTES.ID"
      ],
      [
        "PORTS.ID",
        "PORTSECURITYBINDINGS.PORT_ID"
      ],
      [
        "ML2_DVR_PORT_BINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "PORTS.ID",
        "ALLOWEDADDRESSPAIRS.PORT_ID"
      ],
      [
        "PORTS.ID",
        "QOS_PORT_POLICY_BINDINGS.PORT_ID"
      ],
      [
        "PORTS.ID",
        "SECURITYGROUPPORTBINDINGS.PORT_ID"
      ],
      [
        "ML2_PORT_BINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "PORTS.ID",
        "EXTRADHCPOPTS.PORT_ID"
      ],
      [
        "PORTS.ID",
        "PORTDNSES.PORT_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#IPALLOCATIONS",
      "csail_stata_neutron#sep#PORTS",
      "csail_stata_neutron#sep#PORTDNSES",
      "csail_stata_neutron#sep#ML2_DVR_PORT_BINDINGS",
      "csail_stata_neutron#sep#STANDARDATTRIBUTES",
      "csail_stata_neutron#sep#ALLOWEDADDRESSPAIRS",
      "csail_stata_neutron#sep#EXTRADHCPOPTS",
      "csail_stata_neutron#sep#SECURITYGROUPPORTBINDINGS",
      "csail_stata_neutron#sep#QOS_PORT_POLICY_BINDINGS",
      "csail_stata_neutron#sep#ML2_PORT_BINDINGS",
      "csail_stata_neutron#sep#TAGS",
      "csail_stata_neutron#sep#PORTSECURITYBINDINGS"
    ],
    "meta": {
      "features": {
        "query_table_count": 13,
        "query_column_count": 81,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 12
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "25032a87c864",
    "question": "Provide information (including info caches, and security groups) for these VMs 81222ae9-547f-44e8-b988-353a28148392, 0c7dc298-e42a-4b4f-90a7-1980491e7911, 44b77ecc-e279-4ff9-9d8a-c03707037e97, 0f89310d-02ce-48c8-8eac-0a9ff8b9c9e6, aba5e5fe-efa5-4528-b79c-3e3f90848469, 836607c9-9d01-476a-9e4e-80d9e0d9c9aa, 0f3dc79c-c99f-4eea-8c82-492cfa1a6b0b, 5fe5a18c-53d7-4a13-a694-4df57fc3fa17, 01b82e1b-e8a4-47c0-b970-9bf3b9766d78, 4237e158-6f7c-4db2-9962-3efdfbc7b744, c7f1c00c-0dc2-4514-84a6-f5df3425e339, 6869e646-0794-4207-8c16-cd196b535713, 8661f517-cd5c-4562-875c-50c726560027, 428ddc01-e731-4648-9fe1-9fb6f0ba998a, a9970164-959b-485a-ba05-5c184e808af9, a37e21a5-ade5-4eb9-b557-c68d106b1fec, 0513b715-a66d-461b-adf6-15504608f3b6, 208125fc-e3de-4331-a1c2-67bde6cd3167, 23fec744-dd61-491b-8baa-4f2bea4d757e.",
    "sql": [
      "SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id \nFROM instances LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = instances.uuid LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = instances.uuid AND instances.deleted = 0 \nWHERE instances.uuid IN ('81222ae9-547f-44e8-b988-353a28148392', '0c7dc298-e42a-4b4f-90a7-1980491e7911', '44b77ecc-e279-4ff9-9d8a-c03707037e97', '0f89310d-02ce-48c8-8eac-0a9ff8b9c9e6', 'aba5e5fe-efa5-4528-b79c-3e3f90848469', '836607c9-9d01-476a-9e4e-80d9e0d9c9aa', '0f3dc79c-c99f-4eea-8c82-492cfa1a6b0b', '5fe5a18c-53d7-4a13-a694-4df57fc3fa17', '01b82e1b-e8a4-47c0-b970-9bf3b9766d78', '4237e158-6f7c-4db2-9962-3efdfbc7b744', 'c7f1c00c-0dc2-4514-84a6-f5df3425e339', '6869e646-0794-4207-8c16-cd196b535713', '8661f517-cd5c-4562-875c-50c726560027', '428ddc01-e731-4648-9fe1-9fb6f0ba998a', 'a9970164-959b-485a-ba05-5c184e808af9', 'a37e21a5-ade5-4eb9-b557-c68d106b1fec', '0513b715-a66d-461b-adf6-15504608f3b6', '208125fc-e3de-4331-a1c2-67bde6cd3167', '23fec744-dd61-491b-8baa-4f2bea4d757e') ORDER BY instances.created_at DESC, instances.id DESC"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "INSTANCES.UUID",
        "INSTANCE_INFO_CACHES.INSTANCE_UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 80,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 2,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "has_sorting",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "df0848465a88",
    "question": "Provide information (including info caches, security groups, system metadata, and extra data) about the instance with id 6c4faba5-2bba-4286-ad1e-33896559dfc5.",
    "sql": [
      "SELECT anon_1.instances_created_at AS anon_1_instances_created_at, anon_1.instances_updated_at AS anon_1_instances_updated_at, anon_1.instances_deleted_at AS anon_1_instances_deleted_at, anon_1.instances_deleted AS anon_1_instances_deleted, anon_1.instances_id AS anon_1_instances_id, anon_1.instances_user_id AS anon_1_instances_user_id, anon_1.instances_project_id AS anon_1_instances_project_id, anon_1.instances_image_ref AS anon_1_instances_image_ref, anon_1.instances_kernel_id AS anon_1_instances_kernel_id, anon_1.instances_ramdisk_id AS anon_1_instances_ramdisk_id, anon_1.instances_hostname AS anon_1_instances_hostname, anon_1.instances_launch_index AS anon_1_instances_launch_index, anon_1.instances_key_name AS anon_1_instances_key_name, anon_1.instances_key_data AS anon_1_instances_key_data, anon_1.instances_power_state AS anon_1_instances_power_state, anon_1.instances_vm_state AS anon_1_instances_vm_state, anon_1.instances_task_state AS anon_1_instances_task_state, anon_1.instances_memory_mb AS anon_1_instances_memory_mb, anon_1.instances_vcpus AS anon_1_instances_vcpus, anon_1.instances_root_gb AS anon_1_instances_root_gb, anon_1.instances_ephemeral_gb AS anon_1_instances_ephemeral_gb, anon_1.instances_ephemeral_key_uuid AS anon_1_instances_ephemeral_key_uuid, anon_1.instances_host AS anon_1_instances_host, anon_1.instances_node AS anon_1_instances_node, anon_1.instances_instance_type_id AS anon_1_instances_instance_type_id, anon_1.instances_user_data AS anon_1_instances_user_data, anon_1.instances_reservation_id AS anon_1_instances_reservation_id, anon_1.instances_launched_at AS anon_1_instances_launched_at, anon_1.instances_terminated_at AS anon_1_instances_terminated_at, anon_1.instances_availability_zone AS anon_1_instances_availability_zone, anon_1.instances_display_name AS anon_1_instances_display_name, anon_1.instances_display_description AS anon_1_instances_display_description, anon_1.instances_launched_on AS anon_1_instances_launched_on, anon_1.instances_locked AS anon_1_instances_locked, anon_1.instances_locked_by AS anon_1_instances_locked_by, anon_1.instances_os_type AS anon_1_instances_os_type, anon_1.instances_architecture AS anon_1_instances_architecture, anon_1.instances_vm_mode AS anon_1_instances_vm_mode, anon_1.instances_uuid AS anon_1_instances_uuid, anon_1.instances_root_device_name AS anon_1_instances_root_device_name, anon_1.instances_default_ephemeral_device AS anon_1_instances_default_ephemeral_device, anon_1.instances_default_swap_device AS anon_1_instances_default_swap_device, anon_1.instances_config_drive AS anon_1_instances_config_drive, anon_1.instances_access_ip_v4 AS anon_1_instances_access_ip_v4, anon_1.instances_access_ip_v6 AS anon_1_instances_access_ip_v6, anon_1.instances_auto_disk_config AS anon_1_instances_auto_disk_config, anon_1.instances_progress AS anon_1_instances_progress, anon_1.instances_shutdown_terminate AS anon_1_instances_shutdown_terminate, anon_1.instances_disable_terminate AS anon_1_instances_disable_terminate, anon_1.instances_cell_name AS anon_1_instances_cell_name, anon_1.instances_internal_id AS anon_1_instances_internal_id, anon_1.instances_cleaned AS anon_1_instances_cleaned, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id, security_group_rules_1.created_at AS security_group_rules_1_created_at, security_group_rules_1.updated_at AS security_group_rules_1_updated_at, security_group_rules_1.deleted_at AS security_group_rules_1_deleted_at, security_group_rules_1.deleted AS security_group_rules_1_deleted, security_group_rules_1.id AS security_group_rules_1_id, security_group_rules_1.parent_group_id AS security_group_rules_1_parent_group_id, security_group_rules_1.protocol AS security_group_rules_1_protocol, security_group_rules_1.from_port AS security_group_rules_1_from_port, security_group_rules_1.to_port AS security_group_rules_1_to_port, security_group_rules_1.cidr AS security_group_rules_1_cidr, security_group_rules_1.group_id AS security_group_rules_1_group_id, instance_system_metadata_1.created_at AS instance_system_metadata_1_created_at, instance_system_metadata_1.updated_at AS instance_system_metadata_1_updated_at, instance_system_metadata_1.deleted_at AS instance_system_metadata_1_deleted_at, instance_system_metadata_1.deleted AS instance_system_metadata_1_deleted, instance_system_metadata_1.id AS instance_system_metadata_1_id, instance_system_metadata_1.`key` AS instance_system_metadata_1_key, instance_system_metadata_1.value AS instance_system_metadata_1_value, instance_system_metadata_1.instance_uuid AS instance_system_metadata_1_instance_uuid, instance_extra_1.flavor AS instance_extra_1_flavor, instance_extra_1.created_at AS instance_extra_1_created_at, instance_extra_1.updated_at AS instance_extra_1_updated_at, instance_extra_1.deleted_at AS instance_extra_1_deleted_at, instance_extra_1.deleted AS instance_extra_1_deleted, instance_extra_1.id AS instance_extra_1_id, instance_extra_1.instance_uuid AS instance_extra_1_instance_uuid \nFROM (SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned \nFROM instances \nWHERE instances.deleted = 0 AND instances.uuid = '6c4faba5-2bba-4286-ad1e-33896559dfc5' \n LIMIT 1) AS anon_1 LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = anon_1.instances_uuid LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = anon_1.instances_uuid AND anon_1.instances_deleted = 0 LEFT OUTER JOIN security_group_rules AS security_group_rules_1 ON security_group_rules_1.parent_group_id = security_groups_1.id AND security_group_rules_1.deleted = 0 LEFT OUTER JOIN instance_system_metadata AS instance_system_metadata_1 ON anon_1.instances_uuid = instance_system_metadata_1.instance_uuid LEFT OUTER JOIN instance_extra AS instance_extra_1 ON instance_extra_1.instance_uuid = anon_1.instances_uuid"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "SECURITY_GROUP_RULES.PARENT_GROUP_ID",
        "SECURITY_GROUPS.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_SYSTEM_METADATA",
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#INSTANCE_EXTRA",
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#SECURITY_GROUP_RULES",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 7,
        "query_column_count": 164,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 6
      },
      "categories": [
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "423e0a0407d4",
    "question": "Provide information about network with id 0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d.",
    "sql": [
      "SELECT networks.tenant_id AS networks_tenant_id, networks.id AS networks_id, networks.name AS networks_name, networks.status AS networks_status, networks.admin_state_up AS networks_admin_state_up, networks.mtu AS networks_mtu, networks.vlan_transparent AS networks_vlan_transparent, networks.availability_zone_hints AS networks_availability_zone_hints, networks.standard_attr_id AS networks_standard_attr_id, agents_1.id AS agents_1_id, agents_1.agent_type AS agents_1_agent_type, agents_1.`binary` AS agents_1_binary, agents_1.topic AS agents_1_topic, agents_1.host AS agents_1_host, agents_1.availability_zone AS agents_1_availability_zone, agents_1.admin_state_up AS agents_1_admin_state_up, agents_1.created_at AS agents_1_created_at, agents_1.started_at AS agents_1_started_at, agents_1.heartbeat_timestamp AS agents_1_heartbeat_timestamp, agents_1.description AS agents_1_description, agents_1.configurations AS agents_1_configurations, agents_1.resource_versions AS agents_1_resource_versions, agents_1.`load` AS agents_1_load, standardattributes_1.created_at AS standardattributes_1_created_at, standardattributes_1.updated_at AS standardattributes_1_updated_at, standardattributes_1.id AS standardattributes_1_id, standardattributes_1.resource_type AS standardattributes_1_resource_type, standardattributes_1.description AS standardattributes_1_description, tags_1.standard_attr_id AS tags_1_standard_attr_id, tags_1.tag AS tags_1_tag, externalnetworks_1.network_id AS externalnetworks_1_network_id, externalnetworks_1.is_default AS externalnetworks_1_is_default, qos_network_policy_bindings_1.policy_id AS qos_network_policy_bindings_1_policy_id, qos_network_policy_bindings_1.network_id AS qos_network_policy_bindings_1_network_id, networksecuritybindings_1.network_id AS networksecuritybindings_1_network_id, networksecuritybindings_1.port_security_enabled AS networksecuritybindings_1_port_security_enabled, networkdnsdomains_1.network_id AS networkdnsdomains_1_network_id, networkdnsdomains_1.dns_domain AS networkdnsdomains_1_dns_domain \nFROM networks LEFT OUTER JOIN externalnetworks ON networks.id = externalnetworks.network_id LEFT OUTER JOIN (networkdhcpagentbindings AS networkdhcpagentbindings_1 INNER JOIN agents AS agents_1 ON agents_1.id = networkdhcpagentbindings_1.dhcp_agent_id) ON networks.id = networkdhcpagentbindings_1.network_id LEFT OUTER JOIN standardattributes AS standardattributes_1 ON standardattributes_1.id = networks.standard_attr_id LEFT OUTER JOIN tags AS tags_1 ON standardattributes_1.id = tags_1.standard_attr_id LEFT OUTER JOIN externalnetworks AS externalnetworks_1 ON networks.id = externalnetworks_1.network_id LEFT OUTER JOIN qos_network_policy_bindings AS qos_network_policy_bindings_1 ON networks.id = qos_network_policy_bindings_1.network_id LEFT OUTER JOIN networksecuritybindings AS networksecuritybindings_1 ON networks.id = networksecuritybindings_1.network_id LEFT OUTER JOIN networkdnsdomains AS networkdnsdomains_1 ON networks.id = networkdnsdomains_1.network_id \nWHERE networks.id IN ('0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d')"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "NETWORKS.ID",
        "EXTERNALNETWORKS.NETWORK_ID"
      ],
      [
        "NETWORKS.STANDARD_ATTR_ID",
        "STANDARDATTRIBUTES.ID"
      ],
      [
        "TAGS.STANDARD_ATTR_ID",
        "STANDARDATTRIBUTES.ID"
      ],
      [
        "EXTERNALNETWORKS.NETWORK_ID",
        "NETWORKS.ID"
      ],
      [
        "QOS_NETWORK_POLICY_BINDINGS.NETWORK_ID",
        "NETWORKS.ID"
      ],
      [
        "NETWORKSECURITYBINDINGS.NETWORK_ID",
        "NETWORKS.ID"
      ],
      [
        "NETWORKDNSDOMAINS.NETWORK_ID",
        "NETWORKS.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#NETWORKDHCPAGENTBINDINGS",
      "csail_stata_neutron#sep#AGENTS",
      "csail_stata_neutron#sep#NETWORKS",
      "csail_stata_neutron#sep#EXTERNALNETWORKS",
      "csail_stata_neutron#sep#STANDARDATTRIBUTES",
      "csail_stata_neutron#sep#QOS_NETWORK_POLICY_BINDINGS",
      "csail_stata_neutron#sep#NETWORKDNSDOMAINS",
      "csail_stata_neutron#sep#TAGS",
      "csail_stata_neutron#sep#NETWORKSECURITYBINDINGS"
    ],
    "meta": {
      "features": {
        "query_table_count": 10,
        "query_column_count": 57,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 9
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "84cd6c76cdf3",
    "question": "Provide information about migrations associated with VM that moves to or from the physical host flux2-19.",
    "sql": [
      "SELECT migrations.created_at AS migrations_created_at, migrations.updated_at AS migrations_updated_at, migrations.deleted_at AS migrations_deleted_at, migrations.deleted AS migrations_deleted, migrations.id AS migrations_id, migrations.source_compute AS migrations_source_compute, migrations.dest_compute AS migrations_dest_compute, migrations.source_node AS migrations_source_node, migrations.dest_node AS migrations_dest_node, migrations.dest_host AS migrations_dest_host, migrations.old_instance_type_id AS migrations_old_instance_type_id, migrations.new_instance_type_id AS migrations_new_instance_type_id, migrations.instance_uuid AS migrations_instance_uuid, migrations.status AS migrations_status, migrations.migration_type AS migrations_migration_type, migrations.hidden AS migrations_hidden, migrations.memory_total AS migrations_memory_total, migrations.memory_processed AS migrations_memory_processed, migrations.memory_remaining AS migrations_memory_remaining, migrations.disk_total AS migrations_disk_total, migrations.disk_processed AS migrations_disk_processed, migrations.disk_remaining AS migrations_disk_remaining, instances_1.created_at AS instances_1_created_at, instances_1.updated_at AS instances_1_updated_at, instances_1.deleted_at AS instances_1_deleted_at, instances_1.deleted AS instances_1_deleted, instances_1.id AS instances_1_id, instances_1.user_id AS instances_1_user_id, instances_1.project_id AS instances_1_project_id, instances_1.image_ref AS instances_1_image_ref, instances_1.kernel_id AS instances_1_kernel_id, instances_1.ramdisk_id AS instances_1_ramdisk_id, instances_1.hostname AS instances_1_hostname, instances_1.launch_index AS instances_1_launch_index, instances_1.key_name AS instances_1_key_name, instances_1.key_data AS instances_1_key_data, instances_1.power_state AS instances_1_power_state, instances_1.vm_state AS instances_1_vm_state, instances_1.task_state AS instances_1_task_state, instances_1.memory_mb AS instances_1_memory_mb, instances_1.vcpus AS instances_1_vcpus, instances_1.root_gb AS instances_1_root_gb, instances_1.ephemeral_gb AS instances_1_ephemeral_gb, instances_1.ephemeral_key_uuid AS instances_1_ephemeral_key_uuid, instances_1.host AS instances_1_host, instances_1.node AS instances_1_node, instances_1.instance_type_id AS instances_1_instance_type_id, instances_1.user_data AS instances_1_user_data, instances_1.reservation_id AS instances_1_reservation_id, instances_1.launched_at AS instances_1_launched_at, instances_1.terminated_at AS instances_1_terminated_at, instances_1.availability_zone AS instances_1_availability_zone, instances_1.display_name AS instances_1_display_name, instances_1.display_description AS instances_1_display_description, instances_1.launched_on AS instances_1_launched_on, instances_1.locked AS instances_1_locked, instances_1.locked_by AS instances_1_locked_by, instances_1.os_type AS instances_1_os_type, instances_1.architecture AS instances_1_architecture, instances_1.vm_mode AS instances_1_vm_mode, instances_1.uuid AS instances_1_uuid, instances_1.root_device_name AS instances_1_root_device_name, instances_1.default_ephemeral_device AS instances_1_default_ephemeral_device, instances_1.default_swap_device AS instances_1_default_swap_device, instances_1.config_drive AS instances_1_config_drive, instances_1.access_ip_v4 AS instances_1_access_ip_v4, instances_1.access_ip_v6 AS instances_1_access_ip_v6, instances_1.auto_disk_config AS instances_1_auto_disk_config, instances_1.progress AS instances_1_progress, instances_1.shutdown_terminate AS instances_1_shutdown_terminate, instances_1.disable_terminate AS instances_1_disable_terminate, instances_1.cell_name AS instances_1_cell_name, instances_1.internal_id AS instances_1_internal_id, instances_1.cleaned AS instances_1_cleaned, instance_system_metadata_1.created_at AS instance_system_metadata_1_created_at, instance_system_metadata_1.updated_at AS instance_system_metadata_1_updated_at, instance_system_metadata_1.deleted_at AS instance_system_metadata_1_deleted_at, instance_system_metadata_1.deleted AS instance_system_metadata_1_deleted, instance_system_metadata_1.id AS instance_system_metadata_1_id, instance_system_metadata_1.`key` AS instance_system_metadata_1_key, instance_system_metadata_1.value AS instance_system_metadata_1_value, instance_system_metadata_1.instance_uuid AS instance_system_metadata_1_instance_uuid \nFROM migrations LEFT OUTER JOIN instances AS instances_1 ON migrations.instance_uuid = instances_1.uuid AND instances_1.deleted = 0 LEFT OUTER JOIN instance_system_metadata AS instance_system_metadata_1 ON instances_1.uuid = instance_system_metadata_1.instance_uuid \nWHERE migrations.deleted = 0 AND (migrations.source_compute = 'flux2-19' AND migrations.source_node = 'flux2-19.yahoo.ca.com' OR migrations.dest_compute = 'flux2-19' AND migrations.dest_node = 'flux2-19.yahoo.ca.com') AND migrations.status NOT IN ('accepted', 'confirmed', 'reverted', 'error', 'failed', 'completed')"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "INSTANCES.UUID",
        "MIGRATIONS.INSTANCE_UUID"
      ],
      [
        "INSTANCES.UUID",
        "INSTANCE_SYSTEM_METADATA.INSTANCE_UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_SYSTEM_METADATA",
      "csail_stata_nova#sep#MIGRATIONS",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 93,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "1d3b8e1ebed8",
    "question": "Provide information about subnet access control for publicly available subnets owned by tenant 9f13bf11e06e4d81b44c8c3e62d4362b.",
    "sql": [
      "SELECT networkrbacs.tenant_id AS networkrbacs_tenant_id, networkrbacs.id AS networkrbacs_id, networkrbacs.target_tenant AS networkrbacs_target_tenant, networkrbacs.action AS networkrbacs_action, networkrbacs.object_id AS networkrbacs_object_id, subnets_1.network_id AS subnets_1_network_id \nFROM (SELECT networks.id AS networks_id \nFROM networks LEFT OUTER JOIN externalnetworks ON networks.id = externalnetworks.network_id LEFT OUTER JOIN networkrbacs ON networks.id = networkrbacs.object_id \nWHERE networkrbacs.action = 'access_as_shared' AND (networkrbacs.target_tenant = '*' OR networkrbacs.target_tenant = '9f13bf11e06e4d81b44c8c3e62d4362b')) AS anon_1 INNER JOIN subnets AS subnets_1 ON anon_1.networks_id = subnets_1.network_id INNER JOIN networkrbacs ON subnets_1.network_id = networkrbacs.object_id ORDER BY subnets_1.network_id"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "EXTERNALNETWORKS.NETWORK_ID",
        "NETWORKS.ID"
      ],
      [
        "NETWORKRBACS.OBJECT_ID",
        "NETWORKS.ID"
      ],
      [
        "NETWORKRBACS.OBJECT_ID",
        "SUBNETS.NETWORK_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#NETWORKRBACS",
      "csail_stata_neutron#sep#EXTERNALNETWORKS",
      "csail_stata_neutron#sep#SUBNETS",
      "csail_stata_neutron#sep#NETWORKS"
    ],
    "meta": {
      "features": {
        "query_table_count": 5,
        "query_column_count": 19,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "1dc840df3410",
    "question": "Provide information (including info caches, and security groups) about the instance with id 85aafec6-1b2e-423a-b834-d4a526068dec.",
    "sql": [
      "SELECT anon_1.instances_created_at AS anon_1_instances_created_at, anon_1.instances_updated_at AS anon_1_instances_updated_at, anon_1.instances_deleted_at AS anon_1_instances_deleted_at, anon_1.instances_deleted AS anon_1_instances_deleted, anon_1.instances_id AS anon_1_instances_id, anon_1.instances_user_id AS anon_1_instances_user_id, anon_1.instances_project_id AS anon_1_instances_project_id, anon_1.instances_image_ref AS anon_1_instances_image_ref, anon_1.instances_kernel_id AS anon_1_instances_kernel_id, anon_1.instances_ramdisk_id AS anon_1_instances_ramdisk_id, anon_1.instances_hostname AS anon_1_instances_hostname, anon_1.instances_launch_index AS anon_1_instances_launch_index, anon_1.instances_key_name AS anon_1_instances_key_name, anon_1.instances_key_data AS anon_1_instances_key_data, anon_1.instances_power_state AS anon_1_instances_power_state, anon_1.instances_vm_state AS anon_1_instances_vm_state, anon_1.instances_task_state AS anon_1_instances_task_state, anon_1.instances_memory_mb AS anon_1_instances_memory_mb, anon_1.instances_vcpus AS anon_1_instances_vcpus, anon_1.instances_root_gb AS anon_1_instances_root_gb, anon_1.instances_ephemeral_gb AS anon_1_instances_ephemeral_gb, anon_1.instances_ephemeral_key_uuid AS anon_1_instances_ephemeral_key_uuid, anon_1.instances_host AS anon_1_instances_host, anon_1.instances_node AS anon_1_instances_node, anon_1.instances_instance_type_id AS anon_1_instances_instance_type_id, anon_1.instances_user_data AS anon_1_instances_user_data, anon_1.instances_reservation_id AS anon_1_instances_reservation_id, anon_1.instances_launched_at AS anon_1_instances_launched_at, anon_1.instances_terminated_at AS anon_1_instances_terminated_at, anon_1.instances_availability_zone AS anon_1_instances_availability_zone, anon_1.instances_display_name AS anon_1_instances_display_name, anon_1.instances_display_description AS anon_1_instances_display_description, anon_1.instances_launched_on AS anon_1_instances_launched_on, anon_1.instances_locked AS anon_1_instances_locked, anon_1.instances_locked_by AS anon_1_instances_locked_by, anon_1.instances_os_type AS anon_1_instances_os_type, anon_1.instances_architecture AS anon_1_instances_architecture, anon_1.instances_vm_mode AS anon_1_instances_vm_mode, anon_1.instances_uuid AS anon_1_instances_uuid, anon_1.instances_root_device_name AS anon_1_instances_root_device_name, anon_1.instances_default_ephemeral_device AS anon_1_instances_default_ephemeral_device, anon_1.instances_default_swap_device AS anon_1_instances_default_swap_device, anon_1.instances_config_drive AS anon_1_instances_config_drive, anon_1.instances_access_ip_v4 AS anon_1_instances_access_ip_v4, anon_1.instances_access_ip_v6 AS anon_1_instances_access_ip_v6, anon_1.instances_auto_disk_config AS anon_1_instances_auto_disk_config, anon_1.instances_progress AS anon_1_instances_progress, anon_1.instances_shutdown_terminate AS anon_1_instances_shutdown_terminate, anon_1.instances_disable_terminate AS anon_1_instances_disable_terminate, anon_1.instances_cell_name AS anon_1_instances_cell_name, anon_1.instances_internal_id AS anon_1_instances_internal_id, anon_1.instances_cleaned AS anon_1_instances_cleaned, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id, security_group_rules_1.created_at AS security_group_rules_1_created_at, security_group_rules_1.updated_at AS security_group_rules_1_updated_at, security_group_rules_1.deleted_at AS security_group_rules_1_deleted_at, security_group_rules_1.deleted AS security_group_rules_1_deleted, security_group_rules_1.id AS security_group_rules_1_id, security_group_rules_1.parent_group_id AS security_group_rules_1_parent_group_id, security_group_rules_1.protocol AS security_group_rules_1_protocol, security_group_rules_1.from_port AS security_group_rules_1_from_port, security_group_rules_1.to_port AS security_group_rules_1_to_port, security_group_rules_1.cidr AS security_group_rules_1_cidr, security_group_rules_1.group_id AS security_group_rules_1_group_id \nFROM (SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned \nFROM instances \nWHERE instances.deleted = 0 AND instances.uuid = '85aafec6-1b2e-423a-b834-d4a526068dec' \n LIMIT 1) AS anon_1 LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = anon_1.instances_uuid LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = anon_1.instances_uuid AND anon_1.instances_deleted = 0 LEFT OUTER JOIN security_group_rules AS security_group_rules_1 ON security_group_rules_1.parent_group_id = security_groups_1.id AND security_group_rules_1.deleted = 0"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "SECURITY_GROUP_RULES.PARENT_GROUP_ID",
        "SECURITY_GROUPS.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#SECURITY_GROUP_RULES",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 5,
        "query_column_count": 145,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "954812d1d6e3",
    "question": "Provide information about port with device id 889a69b3-b9bc-4c0e-8e07-b9a19251b507 owned by project e3fb2659584e436a832461dac02835f0.",
    "sql": [
      "SELECT ports.tenant_id AS ports_tenant_id, ports.id AS ports_id, ports.name AS ports_name, ports.network_id AS ports_network_id, ports.mac_address AS ports_mac_address, ports.admin_state_up AS ports_admin_state_up, ports.status AS ports_status, ports.device_id AS ports_device_id, ports.device_owner AS ports_device_owner, ports.dns_name AS ports_dns_name, ports.standard_attr_id AS ports_standard_attr_id, ipallocations_1.port_id AS ipallocations_1_port_id, ipallocations_1.ip_address AS ipallocations_1_ip_address, ipallocations_1.subnet_id AS ipallocations_1_subnet_id, ipallocations_1.network_id AS ipallocations_1_network_id, standardattributes_1.created_at AS standardattributes_1_created_at, standardattributes_1.updated_at AS standardattributes_1_updated_at, standardattributes_1.id AS standardattributes_1_id, standardattributes_1.resource_type AS standardattributes_1_resource_type, standardattributes_1.description AS standardattributes_1_description, tags_1.standard_attr_id AS tags_1_standard_attr_id, tags_1.tag AS tags_1_tag, portsecuritybindings_1.port_id AS portsecuritybindings_1_port_id, portsecuritybindings_1.port_security_enabled AS portsecuritybindings_1_port_security_enabled, ml2_dvr_port_bindings_1.port_id AS ml2_dvr_port_bindings_1_port_id, ml2_dvr_port_bindings_1.host AS ml2_dvr_port_bindings_1_host, ml2_dvr_port_bindings_1.router_id AS ml2_dvr_port_bindings_1_router_id, ml2_dvr_port_bindings_1.vif_type AS ml2_dvr_port_bindings_1_vif_type, ml2_dvr_port_bindings_1.vif_details AS ml2_dvr_port_bindings_1_vif_details, ml2_dvr_port_bindings_1.vnic_type AS ml2_dvr_port_bindings_1_vnic_type, ml2_dvr_port_bindings_1.profile AS ml2_dvr_port_bindings_1_profile, ml2_dvr_port_bindings_1.status AS ml2_dvr_port_bindings_1_status, allowedaddresspairs_1.port_id AS allowedaddresspairs_1_port_id, allowedaddresspairs_1.mac_address AS allowedaddresspairs_1_mac_address, allowedaddresspairs_1.ip_address AS allowedaddresspairs_1_ip_address, qos_port_policy_bindings_1.policy_id AS qos_port_policy_bindings_1_policy_id, qos_port_policy_bindings_1.port_id AS qos_port_policy_bindings_1_port_id, securitygroupportbindings_1.port_id AS securitygroupportbindings_1_port_id, securitygroupportbindings_1.security_group_id AS securitygroupportbindings_1_security_group_id, ml2_port_bindings_1.port_id AS ml2_port_bindings_1_port_id, ml2_port_bindings_1.host AS ml2_port_bindings_1_host, ml2_port_bindings_1.vnic_type AS ml2_port_bindings_1_vnic_type, ml2_port_bindings_1.profile AS ml2_port_bindings_1_profile, ml2_port_bindings_1.vif_type AS ml2_port_bindings_1_vif_type, ml2_port_bindings_1.vif_details AS ml2_port_bindings_1_vif_details, extradhcpopts_1.id AS extradhcpopts_1_id, extradhcpopts_1.port_id AS extradhcpopts_1_port_id, extradhcpopts_1.opt_name AS extradhcpopts_1_opt_name, extradhcpopts_1.opt_value AS extradhcpopts_1_opt_value, extradhcpopts_1.ip_version AS extradhcpopts_1_ip_version, portdnses_1.port_id AS portdnses_1_port_id, portdnses_1.current_dns_name AS portdnses_1_current_dns_name, portdnses_1.current_dns_domain AS portdnses_1_current_dns_domain, portdnses_1.previous_dns_name AS portdnses_1_previous_dns_name, portdnses_1.previous_dns_domain AS portdnses_1_previous_dns_domain \nFROM ports LEFT OUTER JOIN ml2_port_bindings ON ports.id = ml2_port_bindings.port_id LEFT OUTER JOIN ipallocations AS ipallocations_1 ON ports.id = ipallocations_1.port_id LEFT OUTER JOIN standardattributes AS standardattributes_1 ON standardattributes_1.id = ports.standard_attr_id LEFT OUTER JOIN tags AS tags_1 ON standardattributes_1.id = tags_1.standard_attr_id LEFT OUTER JOIN portsecuritybindings AS portsecuritybindings_1 ON ports.id = portsecuritybindings_1.port_id LEFT OUTER JOIN ml2_dvr_port_bindings AS ml2_dvr_port_bindings_1 ON ports.id = ml2_dvr_port_bindings_1.port_id LEFT OUTER JOIN allowedaddresspairs AS allowedaddresspairs_1 ON ports.id = allowedaddresspairs_1.port_id LEFT OUTER JOIN qos_port_policy_bindings AS qos_port_policy_bindings_1 ON ports.id = qos_port_policy_bindings_1.port_id LEFT OUTER JOIN securitygroupportbindings AS securitygroupportbindings_1 ON ports.id = securitygroupportbindings_1.port_id LEFT OUTER JOIN ml2_port_bindings AS ml2_port_bindings_1 ON ports.id = ml2_port_bindings_1.port_id LEFT OUTER JOIN extradhcpopts AS extradhcpopts_1 ON ports.id = extradhcpopts_1.port_id LEFT OUTER JOIN portdnses AS portdnses_1 ON ports.id = portdnses_1.port_id \nWHERE ports.tenant_id IN ('e3fb2659584e436a832461dac02835f0') AND ports.device_id IN ('889a69b3-b9bc-4c0e-8e07-b9a19251b507')"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "ML2_PORT_BINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "IPALLOCATIONS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "PORTS.STANDARD_ATTR_ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "TAGS.STANDARD_ATTR_ID"
      ],
      [
        "PORTS.ID",
        "PORTSECURITYBINDINGS.PORT_ID"
      ],
      [
        "ML2_DVR_PORT_BINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "PORTS.ID",
        "ALLOWEDADDRESSPAIRS.PORT_ID"
      ],
      [
        "PORTS.ID",
        "QOS_PORT_POLICY_BINDINGS.PORT_ID"
      ],
      [
        "PORTS.ID",
        "SECURITYGROUPPORTBINDINGS.PORT_ID"
      ],
      [
        "ML2_PORT_BINDINGS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "EXTRADHCPOPTS.PORT_ID",
        "PORTS.ID"
      ],
      [
        "PORTDNSES.PORT_ID",
        "PORTS.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#IPALLOCATIONS",
      "csail_stata_neutron#sep#PORTS",
      "csail_stata_neutron#sep#PORTDNSES",
      "csail_stata_neutron#sep#ML2_DVR_PORT_BINDINGS",
      "csail_stata_neutron#sep#STANDARDATTRIBUTES",
      "csail_stata_neutron#sep#ALLOWEDADDRESSPAIRS",
      "csail_stata_neutron#sep#EXTRADHCPOPTS",
      "csail_stata_neutron#sep#SECURITYGROUPPORTBINDINGS",
      "csail_stata_neutron#sep#QOS_PORT_POLICY_BINDINGS",
      "csail_stata_neutron#sep#ML2_PORT_BINDINGS",
      "csail_stata_neutron#sep#TAGS",
      "csail_stata_neutron#sep#PORTSECURITYBINDINGS"
    ],
    "meta": {
      "features": {
        "query_table_count": 13,
        "query_column_count": 81,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 12
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "dda0fcee5e02",
    "question": "Provide information (including extra data) about VMs assigned to the physical host flux2-19.",
    "sql": [
      "SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned, instance_extra_1.numa_topology AS instance_extra_1_numa_topology, instance_extra_1.flavor AS instance_extra_1_flavor, instance_extra_1.migration_context AS instance_extra_1_migration_context, instance_extra_1.created_at AS instance_extra_1_created_at, instance_extra_1.updated_at AS instance_extra_1_updated_at, instance_extra_1.deleted_at AS instance_extra_1_deleted_at, instance_extra_1.deleted AS instance_extra_1_deleted, instance_extra_1.id AS instance_extra_1_id, instance_extra_1.instance_uuid AS instance_extra_1_instance_uuid \nFROM instances LEFT OUTER JOIN instance_extra AS instance_extra_1 ON instance_extra_1.instance_uuid = instances.uuid \nWHERE instances.deleted = 0 AND instances.host = 'flux2-19' AND instances.node = 'flux2-19.yahoo.ca.com'"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "INSTANCE_EXTRA.INSTANCE_UUID",
        "INSTANCES.UUID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_EXTRA",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 2,
        "query_column_count": 66,
        "query_nested_count": 0,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 1
      },
      "categories": [
        "has_join",
        "multi_table_simple"
      ]
    }
  },
  {
    "id": "73d515bf4f86",
    "question": "Provide information about federated user with name prime_helix.306sonic.",
    "sql": [
      "SELECT federated_user.id AS federated_user_id, federated_user.user_id AS federated_user_user_id, federated_user.idp_id AS federated_user_idp_id, federated_user.protocol_id AS federated_user_protocol_id, federated_user.unique_id AS federated_user_unique_id, federated_user.display_name AS federated_user_display_name, anon_1.user_id AS anon_1_user_id\nFROM (SELECT user.id AS user_id\nFROM user INNER JOIN local_user ON user.id = local_user.user_id\nWHERE local_user.name = 'prime_helix.306sonic' AND local_user.domain_id = 'default') AS anon_1 INNER JOIN federated_user ON anon_1.user_id = federated_user.user_id ORDER BY anon_1.user_id"
    ],
    "db_id": "keystone",
    "join_keys": [
      [
        "USER.ID",
        "LOCAL_USER.USER_ID"
      ]
    ],
    "gold_tables": [
      "keystone#sep#FEDERATED_USER",
      "keystone#sep#USER",
      "keystone#sep#LOCAL_USER"
    ],
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 15,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "5160444ef2fe",
    "question": "Provide id information about the local user with ID ccbbd0bdf0104ea68a37483b13b14be2.",
    "sql": [
      "SELECT local_user.id AS local_user_id, local_user.user_id AS local_user_user_id, local_user.domain_id AS local_user_domain_id, local_user.name AS local_user_name, anon_1.user_id AS anon_1_user_id\nFROM (SELECT user.id AS user_id\nFROM user\nWHERE user.id = 'ccbbd0bdf0104ea68a37483b13b14be2') AS anon_1 INNER JOIN local_user ON anon_1.user_id = local_user.user_id ORDER BY anon_1.user_id"
    ],
    "db_id": "keystone",
    "join_keys": [],
    "gold_tables": [
      "keystone#sep#USER",
      "keystone#sep#LOCAL_USER"
    ],
    "meta": {
      "features": {
        "query_table_count": 2,
        "query_column_count": 10,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 1
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "1fba8be069ee",
    "question": "Provide information (including security groups, system metadata, extra data, metadata, and info caches) about instance with id 8d3a0be4-dd7b-4f5b-b19f-308e92597462.",
    "sql": [
      "SELECT anon_1.instances_created_at AS anon_1_instances_created_at, anon_1.instances_updated_at AS anon_1_instances_updated_at, anon_1.instances_deleted_at AS anon_1_instances_deleted_at, anon_1.instances_deleted AS anon_1_instances_deleted, anon_1.instances_id AS anon_1_instances_id, anon_1.instances_user_id AS anon_1_instances_user_id, anon_1.instances_project_id AS anon_1_instances_project_id, anon_1.instances_image_ref AS anon_1_instances_image_ref, anon_1.instances_kernel_id AS anon_1_instances_kernel_id, anon_1.instances_ramdisk_id AS anon_1_instances_ramdisk_id, anon_1.instances_hostname AS anon_1_instances_hostname, anon_1.instances_launch_index AS anon_1_instances_launch_index, anon_1.instances_key_name AS anon_1_instances_key_name, anon_1.instances_key_data AS anon_1_instances_key_data, anon_1.instances_power_state AS anon_1_instances_power_state, anon_1.instances_vm_state AS anon_1_instances_vm_state, anon_1.instances_task_state AS anon_1_instances_task_state, anon_1.instances_memory_mb AS anon_1_instances_memory_mb, anon_1.instances_vcpus AS anon_1_instances_vcpus, anon_1.instances_root_gb AS anon_1_instances_root_gb, anon_1.instances_ephemeral_gb AS anon_1_instances_ephemeral_gb, anon_1.instances_ephemeral_key_uuid AS anon_1_instances_ephemeral_key_uuid, anon_1.instances_host AS anon_1_instances_host, anon_1.instances_node AS anon_1_instances_node, anon_1.instances_instance_type_id AS anon_1_instances_instance_type_id, anon_1.instances_user_data AS anon_1_instances_user_data, anon_1.instances_reservation_id AS anon_1_instances_reservation_id, anon_1.instances_launched_at AS anon_1_instances_launched_at, anon_1.instances_terminated_at AS anon_1_instances_terminated_at, anon_1.instances_availability_zone AS anon_1_instances_availability_zone, anon_1.instances_display_name AS anon_1_instances_display_name, anon_1.instances_display_description AS anon_1_instances_display_description, anon_1.instances_launched_on AS anon_1_instances_launched_on, anon_1.instances_locked AS anon_1_instances_locked, anon_1.instances_locked_by AS anon_1_instances_locked_by, anon_1.instances_os_type AS anon_1_instances_os_type, anon_1.instances_architecture AS anon_1_instances_architecture, anon_1.instances_vm_mode AS anon_1_instances_vm_mode, anon_1.instances_uuid AS anon_1_instances_uuid, anon_1.instances_root_device_name AS anon_1_instances_root_device_name, anon_1.instances_default_ephemeral_device AS anon_1_instances_default_ephemeral_device, anon_1.instances_default_swap_device AS anon_1_instances_default_swap_device, anon_1.instances_config_drive AS anon_1_instances_config_drive, anon_1.instances_access_ip_v4 AS anon_1_instances_access_ip_v4, anon_1.instances_access_ip_v6 AS anon_1_instances_access_ip_v6, anon_1.instances_auto_disk_config AS anon_1_instances_auto_disk_config, anon_1.instances_progress AS anon_1_instances_progress, anon_1.instances_shutdown_terminate AS anon_1_instances_shutdown_terminate, anon_1.instances_disable_terminate AS anon_1_instances_disable_terminate, anon_1.instances_cell_name AS anon_1_instances_cell_name, anon_1.instances_internal_id AS anon_1_instances_internal_id, anon_1.instances_cleaned AS anon_1_instances_cleaned, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id, security_group_rules_1.created_at AS security_group_rules_1_created_at, security_group_rules_1.updated_at AS security_group_rules_1_updated_at, security_group_rules_1.deleted_at AS security_group_rules_1_deleted_at, security_group_rules_1.deleted AS security_group_rules_1_deleted, security_group_rules_1.id AS security_group_rules_1_id, security_group_rules_1.parent_group_id AS security_group_rules_1_parent_group_id, security_group_rules_1.protocol AS security_group_rules_1_protocol, security_group_rules_1.from_port AS security_group_rules_1_from_port, security_group_rules_1.to_port AS security_group_rules_1_to_port, security_group_rules_1.cidr AS security_group_rules_1_cidr, security_group_rules_1.group_id AS security_group_rules_1_group_id, instance_system_metadata_1.created_at AS instance_system_metadata_1_created_at, instance_system_metadata_1.updated_at AS instance_system_metadata_1_updated_at, instance_system_metadata_1.deleted_at AS instance_system_metadata_1_deleted_at, instance_system_metadata_1.deleted AS instance_system_metadata_1_deleted, instance_system_metadata_1.id AS instance_system_metadata_1_id, instance_system_metadata_1.`key` AS instance_system_metadata_1_key, instance_system_metadata_1.value AS instance_system_metadata_1_value, instance_system_metadata_1.instance_uuid AS instance_system_metadata_1_instance_uuid, instance_extra_1.flavor AS instance_extra_1_flavor, instance_extra_1.created_at AS instance_extra_1_created_at, instance_extra_1.updated_at AS instance_extra_1_updated_at, instance_extra_1.deleted_at AS instance_extra_1_deleted_at, instance_extra_1.deleted AS instance_extra_1_deleted, instance_extra_1.id AS instance_extra_1_id, instance_extra_1.instance_uuid AS instance_extra_1_instance_uuid, instance_metadata_1.created_at AS instance_metadata_1_created_at, instance_metadata_1.updated_at AS instance_metadata_1_updated_at, instance_metadata_1.deleted_at AS instance_metadata_1_deleted_at, instance_metadata_1.deleted AS instance_metadata_1_deleted, instance_metadata_1.id AS instance_metadata_1_id, instance_metadata_1.`key` AS instance_metadata_1_key, instance_metadata_1.value AS instance_metadata_1_value, instance_metadata_1.instance_uuid AS instance_metadata_1_instance_uuid, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid FROM (SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned FROM instances WHERE instances.deleted = 0 AND instances.uuid = '8d3a0be4-dd7b-4f5b-b19f-308e92597462' LIMIT 1) AS anon_1 LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = anon_1.instances_uuid AND anon_1.instances_deleted = 0 LEFT OUTER JOIN security_group_rules AS security_group_rules_1 ON security_group_rules_1.parent_group_id = security_groups_1.id AND security_group_rules_1.deleted = 0 LEFT OUTER JOIN instance_system_metadata AS instance_system_metadata_1 ON anon_1.instances_uuid = instance_system_metadata_1.instance_uuid LEFT OUTER JOIN instance_extra AS instance_extra_1 ON instance_extra_1.instance_uuid = anon_1.instances_uuid LEFT OUTER JOIN instance_metadata AS instance_metadata_1 ON instance_metadata_1.instance_uuid = anon_1.instances_uuid AND instance_metadata_1.deleted = 0 LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = anon_1.instances_uuid"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "SECURITY_GROUPS.ID",
        "SECURITY_GROUP_RULES.PARENT_GROUP_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_SYSTEM_METADATA",
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#INSTANCE_EXTRA",
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#INSTANCE_METADATA",
      "csail_stata_nova#sep#SECURITY_GROUP_RULES",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 8,
        "query_column_count": 175,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 7
      },
      "categories": [
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "c037d56cef7a",
    "question": "Provide information about network access control for networks under tenants 9f13bf11e06e4d81b44c8c3e62d4362b.",
    "sql": [
      "SELECT networkrbacs.tenant_id AS networkrbacs_tenant_id, networkrbacs.id AS networkrbacs_id, networkrbacs.target_tenant AS networkrbacs_target_tenant, networkrbacs.action AS networkrbacs_action, networkrbacs.object_id AS networkrbacs_object_id, anon_1.networks_id AS anon_1_networks_id FROM (SELECT networks.id AS networks_id FROM networks LEFT OUTER JOIN externalnetworks ON networks.id = externalnetworks.network_id LEFT OUTER JOIN networkrbacs ON networks.id = networkrbacs.object_id WHERE networkrbacs.action = 'access_as_shared' AND (networkrbacs.target_tenant = '*' OR networkrbacs.target_tenant = '9f13bf11e06e4d81b44c8c3e62d4362b')) AS anon_1 INNER JOIN networkrbacs ON anon_1.networks_id = networkrbacs.object_id ORDER BY anon_1.networks_id"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "NETWORKS.ID",
        "EXTERNALNETWORKS.NETWORK_ID"
      ],
      [
        "NETWORKRBACS.OBJECT_ID",
        "NETWORKS.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#NETWORKRBACS",
      "csail_stata_neutron#sep#EXTERNALNETWORKS",
      "csail_stata_neutron#sep#NETWORKS"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 17,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "a5eaa03e0d79",
    "question": "Provide information about subnet access control for subnets in network 0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d.",
    "sql": [
      "SELECT networkrbacs.tenant_id AS networkrbacs_tenant_id, networkrbacs.id AS networkrbacs_id, networkrbacs.target_tenant AS networkrbacs_target_tenant, networkrbacs.action AS networkrbacs_action, networkrbacs.object_id AS networkrbacs_object_id, subnets_1.network_id AS subnets_1_network_id FROM (SELECT networks.id AS networks_id FROM networks LEFT OUTER JOIN externalnetworks ON networks.id = externalnetworks.network_id WHERE networks.id IN ('0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d', '0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d', '0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d')) AS anon_1 INNER JOIN subnets AS subnets_1 ON anon_1.networks_id = subnets_1.network_id INNER JOIN networkrbacs ON subnets_1.network_id = networkrbacs.object_id ORDER BY subnets_1.network_id"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "EXTERNALNETWORKS.NETWORK_ID",
        "NETWORKS.ID"
      ],
      [
        "NETWORKRBACS.OBJECT_ID",
        "SUBNETS.NETWORK_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#NETWORKRBACS",
      "csail_stata_neutron#sep#EXTERNALNETWORKS",
      "csail_stata_neutron#sep#SUBNETS",
      "csail_stata_neutron#sep#NETWORKS"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 15,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "57496642592e",
    "question": "What is the oldest version of the nova-consoleauth service in the cloud?",
    "sql": [
      "SELECT min(services.version) AS min_1 FROM services WHERE services.`binary` = 'nova-consoleauth' AND services.deleted = 0 AND services.forced_down = false"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [],
    "gold_tables": [
      "csail_stata_nova#sep#SERVICES"
    ],
    "meta": {
      "features": {
        "query_table_count": 1,
        "query_column_count": 4,
        "query_nested_count": 0,
        "query_aggregate_count": 1,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 0
      },
      "categories": [
        "has_aggregation",
        "single_source_basic"
      ]
    }
  },
  {
    "id": "debfc2a9d418",
    "question": "Provide information (including info caches, and security groups) about the VM with uuid baa9bc44-cfd3-40e6-800b-80ffcb15ce97.",
    "sql": [
      "SELECT anon_1.instances_created_at AS anon_1_instances_created_at, anon_1.instances_updated_at AS anon_1_instances_updated_at, anon_1.instances_deleted_at AS anon_1_instances_deleted_at, anon_1.instances_deleted AS anon_1_instances_deleted, anon_1.instances_id AS anon_1_instances_id, anon_1.instances_user_id AS anon_1_instances_user_id, anon_1.instances_project_id AS anon_1_instances_project_id, anon_1.instances_image_ref AS anon_1_instances_image_ref, anon_1.instances_kernel_id AS anon_1_instances_kernel_id, anon_1.instances_ramdisk_id AS anon_1_instances_ramdisk_id, anon_1.instances_hostname AS anon_1_instances_hostname, anon_1.instances_launch_index AS anon_1_instances_launch_index, anon_1.instances_key_name AS anon_1_instances_key_name, anon_1.instances_key_data AS anon_1_instances_key_data, anon_1.instances_power_state AS anon_1_instances_power_state, anon_1.instances_vm_state AS anon_1_instances_vm_state, anon_1.instances_task_state AS anon_1_instances_task_state, anon_1.instances_memory_mb AS anon_1_instances_memory_mb, anon_1.instances_vcpus AS anon_1_instances_vcpus, anon_1.instances_root_gb AS anon_1_instances_root_gb, anon_1.instances_ephemeral_gb AS anon_1_instances_ephemeral_gb, anon_1.instances_ephemeral_key_uuid AS anon_1_instances_ephemeral_key_uuid, anon_1.instances_host AS anon_1_instances_host, anon_1.instances_node AS anon_1_instances_node, anon_1.instances_instance_type_id AS anon_1_instances_instance_type_id, anon_1.instances_user_data AS anon_1_instances_user_data, anon_1.instances_reservation_id AS anon_1_instances_reservation_id, anon_1.instances_launched_at AS anon_1_instances_launched_at, anon_1.instances_terminated_at AS anon_1_instances_terminated_at, anon_1.instances_availability_zone AS anon_1_instances_availability_zone, anon_1.instances_display_name AS anon_1_instances_display_name, anon_1.instances_display_description AS anon_1_instances_display_description, anon_1.instances_launched_on AS anon_1_instances_launched_on, anon_1.instances_locked AS anon_1_instances_locked, anon_1.instances_locked_by AS anon_1_instances_locked_by, anon_1.instances_os_type AS anon_1_instances_os_type, anon_1.instances_architecture AS anon_1_instances_architecture, anon_1.instances_vm_mode AS anon_1_instances_vm_mode, anon_1.instances_uuid AS anon_1_instances_uuid, anon_1.instances_root_device_name AS anon_1_instances_root_device_name, anon_1.instances_default_ephemeral_device AS anon_1_instances_default_ephemeral_device, anon_1.instances_default_swap_device AS anon_1_instances_default_swap_device, anon_1.instances_config_drive AS anon_1_instances_config_drive, anon_1.instances_access_ip_v4 AS anon_1_instances_access_ip_v4, anon_1.instances_access_ip_v6 AS anon_1_instances_access_ip_v6, anon_1.instances_auto_disk_config AS anon_1_instances_auto_disk_config, anon_1.instances_progress AS anon_1_instances_progress, anon_1.instances_shutdown_terminate AS anon_1_instances_shutdown_terminate, anon_1.instances_disable_terminate AS anon_1_instances_disable_terminate, anon_1.instances_cell_name AS anon_1_instances_cell_name, anon_1.instances_internal_id AS anon_1_instances_internal_id, anon_1.instances_cleaned AS anon_1_instances_cleaned, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id, security_group_rules_1.created_at AS security_group_rules_1_created_at, security_group_rules_1.updated_at AS security_group_rules_1_updated_at, security_group_rules_1.deleted_at AS security_group_rules_1_deleted_at, security_group_rules_1.deleted AS security_group_rules_1_deleted, security_group_rules_1.id AS security_group_rules_1_id, security_group_rules_1.parent_group_id AS security_group_rules_1_parent_group_id, security_group_rules_1.protocol AS security_group_rules_1_protocol, security_group_rules_1.from_port AS security_group_rules_1_from_port, security_group_rules_1.to_port AS security_group_rules_1_to_port, security_group_rules_1.cidr AS security_group_rules_1_cidr, security_group_rules_1.group_id AS security_group_rules_1_group_id FROM (SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned FROM instances WHERE instances.uuid = 'baa9bc44-cfd3-40e6-800b-80ffcb15ce97' LIMIT 1) AS anon_1 LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = anon_1.instances_uuid LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = anon_1.instances_uuid AND anon_1.instances_deleted = 0 LEFT OUTER JOIN security_group_rules AS security_group_rules_1 ON security_group_rules_1.parent_group_id = security_groups_1.id AND security_group_rules_1.deleted = 0"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "SECURITY_GROUPS.ID",
        "SECURITY_GROUP_RULES.PARENT_GROUP_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#SECURITY_GROUP_RULES",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 5,
        "query_column_count": 144,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "f3afb97b3d0b",
    "question": "Provide information (including security groups, info caches, extra data, and system metadata) about the instance with UUID 3d471303-557b-4a65-a5bd-1ca14dc2e445.",
    "sql": [
      "SELECT anon_1.instances_created_at AS anon_1_instances_created_at, anon_1.instances_updated_at AS anon_1_instances_updated_at, anon_1.instances_deleted_at AS anon_1_instances_deleted_at, anon_1.instances_deleted AS anon_1_instances_deleted, anon_1.instances_id AS anon_1_instances_id, anon_1.instances_user_id AS anon_1_instances_user_id, anon_1.instances_project_id AS anon_1_instances_project_id, anon_1.instances_image_ref AS anon_1_instances_image_ref, anon_1.instances_kernel_id AS anon_1_instances_kernel_id, anon_1.instances_ramdisk_id AS anon_1_instances_ramdisk_id, anon_1.instances_hostname AS anon_1_instances_hostname, anon_1.instances_launch_index AS anon_1_instances_launch_index, anon_1.instances_key_name AS anon_1_instances_key_name, anon_1.instances_key_data AS anon_1_instances_key_data, anon_1.instances_power_state AS anon_1_instances_power_state, anon_1.instances_vm_state AS anon_1_instances_vm_state, anon_1.instances_task_state AS anon_1_instances_task_state, anon_1.instances_memory_mb AS anon_1_instances_memory_mb, anon_1.instances_vcpus AS anon_1_instances_vcpus, anon_1.instances_root_gb AS anon_1_instances_root_gb, anon_1.instances_ephemeral_gb AS anon_1_instances_ephemeral_gb, anon_1.instances_ephemeral_key_uuid AS anon_1_instances_ephemeral_key_uuid, anon_1.instances_host AS anon_1_instances_host, anon_1.instances_node AS anon_1_instances_node, anon_1.instances_instance_type_id AS anon_1_instances_instance_type_id, anon_1.instances_user_data AS anon_1_instances_user_data, anon_1.instances_reservation_id AS anon_1_instances_reservation_id, anon_1.instances_launched_at AS anon_1_instances_launched_at, anon_1.instances_terminated_at AS anon_1_instances_terminated_at, anon_1.instances_availability_zone AS anon_1_instances_availability_zone, anon_1.instances_display_name AS anon_1_instances_display_name, anon_1.instances_display_description AS anon_1_instances_display_description, anon_1.instances_launched_on AS anon_1_instances_launched_on, anon_1.instances_locked AS anon_1_instances_locked, anon_1.instances_locked_by AS anon_1_instances_locked_by, anon_1.instances_os_type AS anon_1_instances_os_type, anon_1.instances_architecture AS anon_1_instances_architecture, anon_1.instances_vm_mode AS anon_1_instances_vm_mode, anon_1.instances_uuid AS anon_1_instances_uuid, anon_1.instances_root_device_name AS anon_1_instances_root_device_name, anon_1.instances_default_ephemeral_device AS anon_1_instances_default_ephemeral_device, anon_1.instances_default_swap_device AS anon_1_instances_default_swap_device, anon_1.instances_config_drive AS anon_1_instances_config_drive, anon_1.instances_access_ip_v4 AS anon_1_instances_access_ip_v4, anon_1.instances_access_ip_v6 AS anon_1_instances_access_ip_v6, anon_1.instances_auto_disk_config AS anon_1_instances_auto_disk_config, anon_1.instances_progress AS anon_1_instances_progress, anon_1.instances_shutdown_terminate AS anon_1_instances_shutdown_terminate, anon_1.instances_disable_terminate AS anon_1_instances_disable_terminate, anon_1.instances_cell_name AS anon_1_instances_cell_name, anon_1.instances_internal_id AS anon_1_instances_internal_id, anon_1.instances_cleaned AS anon_1_instances_cleaned, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id, security_group_rules_1.created_at AS security_group_rules_1_created_at, security_group_rules_1.updated_at AS security_group_rules_1_updated_at, security_group_rules_1.deleted_at AS security_group_rules_1_deleted_at, security_group_rules_1.deleted AS security_group_rules_1_deleted, security_group_rules_1.id AS security_group_rules_1_id, security_group_rules_1.parent_group_id AS security_group_rules_1_parent_group_id, security_group_rules_1.protocol AS security_group_rules_1_protocol, security_group_rules_1.from_port AS security_group_rules_1_from_port, security_group_rules_1.to_port AS security_group_rules_1_to_port, security_group_rules_1.cidr AS security_group_rules_1_cidr, security_group_rules_1.group_id AS security_group_rules_1_group_id, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, instance_extra_1.flavor AS instance_extra_1_flavor, instance_extra_1.created_at AS instance_extra_1_created_at, instance_extra_1.updated_at AS instance_extra_1_updated_at, instance_extra_1.deleted_at AS instance_extra_1_deleted_at, instance_extra_1.deleted AS instance_extra_1_deleted, instance_extra_1.id AS instance_extra_1_id, instance_extra_1.instance_uuid AS instance_extra_1_instance_uuid, instance_system_metadata_1.created_at AS instance_system_metadata_1_created_at, instance_system_metadata_1.updated_at AS instance_system_metadata_1_updated_at, instance_system_metadata_1.deleted_at AS instance_system_metadata_1_deleted_at, instance_system_metadata_1.deleted AS instance_system_metadata_1_deleted, instance_system_metadata_1.id AS instance_system_metadata_1_id, instance_system_metadata_1.`key` AS instance_system_metadata_1_key, instance_system_metadata_1.value AS instance_system_metadata_1_value, instance_system_metadata_1.instance_uuid AS instance_system_metadata_1_instance_uuid\nFROM (SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned\nFROM instances\nWHERE instances.deleted = 0 AND instances.uuid = '3d471303-557b-4a65-a5bd-1ca14dc2e445'\nLIMIT 1) AS anon_1 LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = anon_1.instances_uuid AND anon_1.instances_deleted = 0 LEFT OUTER JOIN security_group_rules AS security_group_rules_1 ON security_group_rules_1.parent_group_id = security_groups_1.id AND security_group_rules_1.deleted = 0 LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = anon_1.instances_uuid LEFT OUTER JOIN instance_extra AS instance_extra_1 ON instance_extra_1.instance_uuid = anon_1.instances_uuid LEFT OUTER JOIN instance_system_metadata AS instance_system_metadata_1 ON anon_1.instances_uuid = instance_system_metadata_1.instance_uuid"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "SECURITY_GROUP_RULES.PARENT_GROUP_ID",
        "SECURITY_GROUPS.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_SYSTEM_METADATA",
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#INSTANCE_EXTRA",
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#SECURITY_GROUP_RULES",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 7,
        "query_column_count": 164,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 6
      },
      "categories": [
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "cec8f4dcabf7",
    "question": "Provide information (including security groups, and info caches) about the instance with UUID 4ed92951-28b6-45bf-8baa-ed939796746e.",
    "sql": [
      "SELECT anon_1.instances_created_at AS anon_1_instances_created_at, anon_1.instances_updated_at AS anon_1_instances_updated_at, anon_1.instances_deleted_at AS anon_1_instances_deleted_at, anon_1.instances_deleted AS anon_1_instances_deleted, anon_1.instances_id AS anon_1_instances_id, anon_1.instances_user_id AS anon_1_instances_user_id, anon_1.instances_project_id AS anon_1_instances_project_id, anon_1.instances_image_ref AS anon_1_instances_image_ref, anon_1.instances_kernel_id AS anon_1_instances_kernel_id, anon_1.instances_ramdisk_id AS anon_1_instances_ramdisk_id, anon_1.instances_hostname AS anon_1_instances_hostname, anon_1.instances_launch_index AS anon_1_instances_launch_index, anon_1.instances_key_name AS anon_1_instances_key_name, anon_1.instances_key_data AS anon_1_instances_key_data, anon_1.instances_power_state AS anon_1_instances_power_state, anon_1.instances_vm_state AS anon_1_instances_vm_state, anon_1.instances_task_state AS anon_1_instances_task_state, anon_1.instances_memory_mb AS anon_1_instances_memory_mb, anon_1.instances_vcpus AS anon_1_instances_vcpus, anon_1.instances_root_gb AS anon_1_instances_root_gb, anon_1.instances_ephemeral_gb AS anon_1_instances_ephemeral_gb, anon_1.instances_ephemeral_key_uuid AS anon_1_instances_ephemeral_key_uuid, anon_1.instances_host AS anon_1_instances_host, anon_1.instances_node AS anon_1_instances_node, anon_1.instances_instance_type_id AS anon_1_instances_instance_type_id, anon_1.instances_user_data AS anon_1_instances_user_data, anon_1.instances_reservation_id AS anon_1_instances_reservation_id, anon_1.instances_launched_at AS anon_1_instances_launched_at, anon_1.instances_terminated_at AS anon_1_instances_terminated_at, anon_1.instances_availability_zone AS anon_1_instances_availability_zone, anon_1.instances_display_name AS anon_1_instances_display_name, anon_1.instances_display_description AS anon_1_instances_display_description, anon_1.instances_launched_on AS anon_1_instances_launched_on, anon_1.instances_locked AS anon_1_instances_locked, anon_1.instances_locked_by AS anon_1_instances_locked_by, anon_1.instances_os_type AS anon_1_instances_os_type, anon_1.instances_architecture AS anon_1_instances_architecture, anon_1.instances_vm_mode AS anon_1_instances_vm_mode, anon_1.instances_uuid AS anon_1_instances_uuid, anon_1.instances_root_device_name AS anon_1_instances_root_device_name, anon_1.instances_default_ephemeral_device AS anon_1_instances_default_ephemeral_device, anon_1.instances_default_swap_device AS anon_1_instances_default_swap_device, anon_1.instances_config_drive AS anon_1_instances_config_drive, anon_1.instances_access_ip_v4 AS anon_1_instances_access_ip_v4, anon_1.instances_access_ip_v6 AS anon_1_instances_access_ip_v6, anon_1.instances_auto_disk_config AS anon_1_instances_auto_disk_config, anon_1.instances_progress AS anon_1_instances_progress, anon_1.instances_shutdown_terminate AS anon_1_instances_shutdown_terminate, anon_1.instances_disable_terminate AS anon_1_instances_disable_terminate, anon_1.instances_cell_name AS anon_1_instances_cell_name, anon_1.instances_internal_id AS anon_1_instances_internal_id, anon_1.instances_cleaned AS anon_1_instances_cleaned, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id, security_group_rules_1.created_at AS security_group_rules_1_created_at, security_group_rules_1.updated_at AS security_group_rules_1_updated_at, security_group_rules_1.deleted_at AS security_group_rules_1_deleted_at, security_group_rules_1.deleted AS security_group_rules_1_deleted, security_group_rules_1.id AS security_group_rules_1_id, security_group_rules_1.parent_group_id AS security_group_rules_1_parent_group_id, security_group_rules_1.protocol AS security_group_rules_1_protocol, security_group_rules_1.from_port AS security_group_rules_1_from_port, security_group_rules_1.to_port AS security_group_rules_1_to_port, security_group_rules_1.cidr AS security_group_rules_1_cidr, security_group_rules_1.group_id AS security_group_rules_1_group_id, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid\nFROM (SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned\nFROM instances\nWHERE instances.deleted = 0 AND instances.uuid = '4ed92951-28b6-45bf-8baa-ed939796746e'\nLIMIT 1) AS anon_1 LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = anon_1.instances_uuid AND anon_1.instances_deleted = 0 LEFT OUTER JOIN security_group_rules AS security_group_rules_1 ON security_group_rules_1.parent_group_id = security_groups_1.id AND security_group_rules_1.deleted = 0 LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = anon_1.instances_uuid"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "SECURITY_GROUPS.ID",
        "SECURITY_GROUP_RULES.PARENT_GROUP_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#SECURITY_GROUP_RULES",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 5,
        "query_column_count": 145,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "ae868c19029a",
    "question": "Provide information about the 200 latest images that were created at or before 2016-11-28 17:25:32 and have an ID less than cee91088-04a9-4fdf-b2af-a5f2f0889056.",
    "sql": [
      "SELECT anon_1.images_created_at AS anon_1_images_created_at, anon_1.images_updated_at AS anon_1_images_updated_at, anon_1.images_deleted_at AS anon_1_images_deleted_at, anon_1.images_deleted AS anon_1_images_deleted, anon_1.images_id AS anon_1_images_id, anon_1.images_name AS anon_1_images_name, anon_1.images_disk_format AS anon_1_images_disk_format, anon_1.images_container_format AS anon_1_images_container_format, anon_1.images_size AS anon_1_images_size, anon_1.images_virtual_size AS anon_1_images_virtual_size, anon_1.images_status AS anon_1_images_status, anon_1.images_is_public AS anon_1_images_is_public, anon_1.images_checksum AS anon_1_images_checksum, anon_1.images_min_disk AS anon_1_images_min_disk, anon_1.images_min_ram AS anon_1_images_min_ram, anon_1.images_owner AS anon_1_images_owner, anon_1.images_protected AS anon_1_images_protected, image_tags_1.created_at AS image_tags_1_created_at, image_tags_1.updated_at AS image_tags_1_updated_at, image_tags_1.deleted_at AS image_tags_1_deleted_at, image_tags_1.deleted AS image_tags_1_deleted, image_tags_1.id AS image_tags_1_id, image_tags_1.image_id AS image_tags_1_image_id, image_tags_1.value AS image_tags_1_value, image_locations_1.created_at AS image_locations_1_created_at, image_locations_1.updated_at AS image_locations_1_updated_at, image_locations_1.deleted_at AS image_locations_1_deleted_at, image_locations_1.deleted AS image_locations_1_deleted, image_locations_1.id AS image_locations_1_id, image_locations_1.image_id AS image_locations_1_image_id, image_locations_1.value AS image_locations_1_value, image_locations_1.meta_data AS image_locations_1_meta_data, image_locations_1.status AS image_locations_1_status, image_properties_1.created_at AS image_properties_1_created_at, image_properties_1.updated_at AS image_properties_1_updated_at, image_properties_1.deleted_at AS image_properties_1_deleted_at, image_properties_1.deleted AS image_properties_1_deleted, image_properties_1.id AS image_properties_1_id, image_properties_1.image_id AS image_properties_1_image_id, image_properties_1.name AS image_properties_1_name, image_properties_1.value AS image_properties_1_value\nFROM (SELECT images.created_at AS images_created_at, images.updated_at AS images_updated_at, images.deleted_at AS images_deleted_at, images.deleted AS images_deleted, images.id AS images_id, images.name AS images_name, images.disk_format AS images_disk_format, images.container_format AS images_container_format, images.size AS images_size, images.virtual_size AS images_virtual_size, images.status AS images_status, images.is_public AS images_is_public, images.checksum AS images_checksum, images.min_disk AS images_min_disk, images.min_ram AS images_min_ram, images.owner AS images_owner, images.protected AS images_protected\nFROM images\nWHERE images.deleted = false AND images.status IN ('active', 'saving', 'queued', 'pending_delete', 'deleted', 'deactivated') AND (CASE WHEN (images.created_at IS NOT NULL) THEN images.created_at END < '2016-11-28 17:25:32' OR CASE WHEN (images.created_at IS NOT NULL) THEN images.created_at END = '2016-11-28 17:25:32' AND CASE WHEN (images.id IS NOT NULL) THEN images.id ELSE '' END < 'cee91088-04a9-4fdf-b2af-a5f2f0889056') ORDER BY images.created_at DESC, images.id DESC\nLIMIT 200) AS anon_1 LEFT OUTER JOIN image_tags AS image_tags_1 ON anon_1.images_id = image_tags_1.image_id LEFT OUTER JOIN image_locations AS image_locations_1 ON anon_1.images_id = image_locations_1.image_id LEFT OUTER JOIN image_properties AS image_properties_1 ON anon_1.images_id = image_properties_1.image_id ORDER BY anon_1.images_created_at DESC, anon_1.images_id DESC"
    ],
    "db_id": "csail_stata_glance",
    "join_keys": [],
    "gold_tables": [
      "csail_stata_glance#sep#IMAGE_PROPERTIES",
      "csail_stata_glance#sep#IMAGE_TAGS",
      "csail_stata_glance#sep#IMAGES",
      "csail_stata_glance#sep#IMAGE_LOCATIONS"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 76,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 4,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "8fbbb09305d0",
    "question": "Provide information about the 200 latest images.",
    "sql": [
      "SELECT anon_1.images_created_at AS anon_1_images_created_at, anon_1.images_updated_at AS anon_1_images_updated_at, anon_1.images_deleted_at AS anon_1_images_deleted_at, anon_1.images_deleted AS anon_1_images_deleted, anon_1.images_id AS anon_1_images_id, anon_1.images_name AS anon_1_images_name, anon_1.images_disk_format AS anon_1_images_disk_format, anon_1.images_container_format AS anon_1_images_container_format, anon_1.images_size AS anon_1_images_size, anon_1.images_virtual_size AS anon_1_images_virtual_size, anon_1.images_status AS anon_1_images_status, anon_1.images_is_public AS anon_1_images_is_public, anon_1.images_checksum AS anon_1_images_checksum, anon_1.images_min_disk AS anon_1_images_min_disk, anon_1.images_min_ram AS anon_1_images_min_ram, anon_1.images_owner AS anon_1_images_owner, anon_1.images_protected AS anon_1_images_protected, image_tags_1.created_at AS image_tags_1_created_at, image_tags_1.updated_at AS image_tags_1_updated_at, image_tags_1.deleted_at AS image_tags_1_deleted_at, image_tags_1.deleted AS image_tags_1_deleted, image_tags_1.id AS image_tags_1_id, image_tags_1.image_id AS image_tags_1_image_id, image_tags_1.value AS image_tags_1_value, image_locations_1.created_at AS image_locations_1_created_at, image_locations_1.updated_at AS image_locations_1_updated_at, image_locations_1.deleted_at AS image_locations_1_deleted_at, image_locations_1.deleted AS image_locations_1_deleted, image_locations_1.id AS image_locations_1_id, image_locations_1.image_id AS image_locations_1_image_id, image_locations_1.value AS image_locations_1_value, image_locations_1.meta_data AS image_locations_1_meta_data, image_locations_1.status AS image_locations_1_status, image_properties_1.created_at AS image_properties_1_created_at, image_properties_1.updated_at AS image_properties_1_updated_at, image_properties_1.deleted_at AS image_properties_1_deleted_at, image_properties_1.deleted AS image_properties_1_deleted, image_properties_1.id AS image_properties_1_id, image_properties_1.image_id AS image_properties_1_image_id, image_properties_1.name AS image_properties_1_name, image_properties_1.value AS image_properties_1_value\nFROM (SELECT images.created_at AS images_created_at, images.updated_at AS images_updated_at, images.deleted_at AS images_deleted_at, images.deleted AS images_deleted, images.id AS images_id, images.name AS images_name, images.disk_format AS images_disk_format, images.container_format AS images_container_format, images.size AS images_size, images.virtual_size AS images_virtual_size, images.status AS images_status, images.is_public AS images_is_public, images.checksum AS images_checksum, images.min_disk AS images_min_disk, images.min_ram AS images_min_ram, images.owner AS images_owner, images.protected AS images_protected\nFROM images\nWHERE images.deleted = false AND images.status IN ('active', 'saving', 'queued', 'pending_delete', 'deleted', 'deactivated') ORDER BY images.created_at DESC, images.id DESC\nLIMIT 200) AS anon_1 LEFT OUTER JOIN image_tags AS image_tags_1 ON anon_1.images_id = image_tags_1.image_id LEFT OUTER JOIN image_locations AS image_locations_1 ON anon_1.images_id = image_locations_1.image_id LEFT OUTER JOIN image_properties AS image_properties_1 ON anon_1.images_id = image_properties_1.image_id ORDER BY anon_1.images_created_at DESC, anon_1.images_id DESC"
    ],
    "db_id": "csail_stata_glance",
    "join_keys": [],
    "gold_tables": [
      "csail_stata_glance#sep#IMAGE_PROPERTIES",
      "csail_stata_glance#sep#IMAGE_TAGS",
      "csail_stata_glance#sep#IMAGES",
      "csail_stata_glance#sep#IMAGE_LOCATIONS"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 70,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 4,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "f83e77d916a1",
    "question": "Provide information about the 25 latest images that were created at or before 2022-06-06 17:12:44 and have an ID less than f964c0ae-58d1-49e5-8f2a-67902b86a99c.",
    "sql": [
      "SELECT anon_1.images_created_at AS anon_1_images_created_at, anon_1.images_updated_at AS anon_1_images_updated_at, anon_1.images_deleted_at AS anon_1_images_deleted_at, anon_1.images_deleted AS anon_1_images_deleted, anon_1.images_id AS anon_1_images_id, anon_1.images_name AS anon_1_images_name, anon_1.images_disk_format AS anon_1_images_disk_format, anon_1.images_container_format AS anon_1_images_container_format, anon_1.images_size AS anon_1_images_size, anon_1.images_virtual_size AS anon_1_images_virtual_size, anon_1.images_status AS anon_1_images_status, anon_1.images_is_public AS anon_1_images_is_public, anon_1.images_checksum AS anon_1_images_checksum, anon_1.images_min_disk AS anon_1_images_min_disk, anon_1.images_min_ram AS anon_1_images_min_ram, anon_1.images_owner AS anon_1_images_owner, anon_1.images_protected AS anon_1_images_protected, image_tags_1.created_at AS image_tags_1_created_at, image_tags_1.updated_at AS image_tags_1_updated_at, image_tags_1.deleted_at AS image_tags_1_deleted_at, image_tags_1.deleted AS image_tags_1_deleted, image_tags_1.id AS image_tags_1_id, image_tags_1.image_id AS image_tags_1_image_id, image_tags_1.value AS image_tags_1_value, image_locations_1.created_at AS image_locations_1_created_at, image_locations_1.updated_at AS image_locations_1_updated_at, image_locations_1.deleted_at AS image_locations_1_deleted_at, image_locations_1.deleted AS image_locations_1_deleted, image_locations_1.id AS image_locations_1_id, image_locations_1.image_id AS image_locations_1_image_id, image_locations_1.value AS image_locations_1_value, image_locations_1.meta_data AS image_locations_1_meta_data, image_locations_1.status AS image_locations_1_status, image_properties_1.created_at AS image_properties_1_created_at, image_properties_1.updated_at AS image_properties_1_updated_at, image_properties_1.deleted_at AS image_properties_1_deleted_at, image_properties_1.deleted AS image_properties_1_deleted, image_properties_1.id AS image_properties_1_id, image_properties_1.image_id AS image_properties_1_image_id, image_properties_1.name AS image_properties_1_name, image_properties_1.value AS image_properties_1_value\nFROM (SELECT images.created_at AS images_created_at, images.updated_at AS images_updated_at, images.deleted_at AS images_deleted_at, images.deleted AS images_deleted, images.id AS images_id, images.name AS images_name, images.disk_format AS images_disk_format, images.container_format AS images_container_format, images.size AS images_size, images.virtual_size AS images_virtual_size, images.status AS images_status, images.is_public AS images_is_public, images.checksum AS images_checksum, images.min_disk AS images_min_disk, images.min_ram AS images_min_ram, images.owner AS images_owner, images.protected AS images_protected\nFROM images\nWHERE images.deleted = false AND images.status IN ('active', 'saving', 'queued', 'pending_delete', 'deleted', 'deactivated') AND images.is_public = true AND (CASE WHEN (images.created_at IS NOT NULL) THEN images.created_at END < '2022-06-06 17:12:44' OR CASE WHEN (images.created_at IS NOT NULL) THEN images.created_at END = '2022-06-06 17:12:44' AND CASE WHEN (images.id IS NOT NULL) THEN images.id ELSE '' END < 'f964c0ae-58d1-49e5-8f2a-67902b86a99c') ORDER BY images.created_at DESC, images.id DESC\nLIMIT 25) AS anon_1 LEFT OUTER JOIN image_tags AS image_tags_1 ON anon_1.images_id = image_tags_1.image_id LEFT OUTER JOIN image_locations AS image_locations_1 ON anon_1.images_id = image_locations_1.image_id LEFT OUTER JOIN image_properties AS image_properties_1 ON anon_1.images_id = image_properties_1.image_id ORDER BY anon_1.images_created_at DESC, anon_1.images_id DESC"
    ],
    "db_id": "csail_stata_glance",
    "join_keys": [],
    "gold_tables": [
      "csail_stata_glance#sep#IMAGE_PROPERTIES",
      "csail_stata_glance#sep#IMAGE_TAGS",
      "csail_stata_glance#sep#IMAGES",
      "csail_stata_glance#sep#IMAGE_LOCATIONS"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 77,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 4,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "dd414e16522f",
    "question": "Provide information (including security groups, info caches, extra data, and metadata) about the 3000 latest instances in the project with id bfd50153a2e9476f93e33e30e922cd06.",
    "sql": [
      "SELECT anon_1.instances_created_at AS anon_1_instances_created_at, anon_1.instances_updated_at AS anon_1_instances_updated_at, anon_1.instances_deleted_at AS anon_1_instances_deleted_at, anon_1.instances_deleted AS anon_1_instances_deleted, anon_1.instances_id AS anon_1_instances_id, anon_1.instances_user_id AS anon_1_instances_user_id, anon_1.instances_project_id AS anon_1_instances_project_id, anon_1.instances_image_ref AS anon_1_instances_image_ref, anon_1.instances_kernel_id AS anon_1_instances_kernel_id, anon_1.instances_ramdisk_id AS anon_1_instances_ramdisk_id, anon_1.instances_hostname AS anon_1_instances_hostname, anon_1.instances_launch_index AS anon_1_instances_launch_index, anon_1.instances_key_name AS anon_1_instances_key_name, anon_1.instances_key_data AS anon_1_instances_key_data, anon_1.instances_power_state AS anon_1_instances_power_state, anon_1.instances_vm_state AS anon_1_instances_vm_state, anon_1.instances_task_state AS anon_1_instances_task_state, anon_1.instances_memory_mb AS anon_1_instances_memory_mb, anon_1.instances_vcpus AS anon_1_instances_vcpus, anon_1.instances_root_gb AS anon_1_instances_root_gb, anon_1.instances_ephemeral_gb AS anon_1_instances_ephemeral_gb, anon_1.instances_ephemeral_key_uuid AS anon_1_instances_ephemeral_key_uuid, anon_1.instances_host AS anon_1_instances_host, anon_1.instances_node AS anon_1_instances_node, anon_1.instances_instance_type_id AS anon_1_instances_instance_type_id, anon_1.instances_user_data AS anon_1_instances_user_data, anon_1.instances_reservation_id AS anon_1_instances_reservation_id, anon_1.instances_launched_at AS anon_1_instances_launched_at, anon_1.instances_terminated_at AS anon_1_instances_terminated_at, anon_1.instances_availability_zone AS anon_1_instances_availability_zone, anon_1.instances_display_name AS anon_1_instances_display_name, anon_1.instances_display_description AS anon_1_instances_display_description, anon_1.instances_launched_on AS anon_1_instances_launched_on, anon_1.instances_locked AS anon_1_instances_locked, anon_1.instances_locked_by AS anon_1_instances_locked_by, anon_1.instances_os_type AS anon_1_instances_os_type, anon_1.instances_architecture AS anon_1_instances_architecture, anon_1.instances_vm_mode AS anon_1_instances_vm_mode, anon_1.instances_uuid AS anon_1_instances_uuid, anon_1.instances_root_device_name AS anon_1_instances_root_device_name, anon_1.instances_default_ephemeral_device AS anon_1_instances_default_ephemeral_device, anon_1.instances_default_swap_device AS anon_1_instances_default_swap_device, anon_1.instances_config_drive AS anon_1_instances_config_drive, anon_1.instances_access_ip_v4 AS anon_1_instances_access_ip_v4, anon_1.instances_access_ip_v6 AS anon_1_instances_access_ip_v6, anon_1.instances_auto_disk_config AS anon_1_instances_auto_disk_config, anon_1.instances_progress AS anon_1_instances_progress, anon_1.instances_shutdown_terminate AS anon_1_instances_shutdown_terminate, anon_1.instances_disable_terminate AS anon_1_instances_disable_terminate, anon_1.instances_cell_name AS anon_1_instances_cell_name, anon_1.instances_internal_id AS anon_1_instances_internal_id, anon_1.instances_cleaned AS anon_1_instances_cleaned, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, instance_extra_1.flavor AS instance_extra_1_flavor, instance_extra_1.created_at AS instance_extra_1_created_at, instance_extra_1.updated_at AS instance_extra_1_updated_at, instance_extra_1.deleted_at AS instance_extra_1_deleted_at, instance_extra_1.deleted AS instance_extra_1_deleted, instance_extra_1.id AS instance_extra_1_id, instance_extra_1.instance_uuid AS instance_extra_1_instance_uuid, instance_metadata_1.created_at AS instance_metadata_1_created_at, instance_metadata_1.updated_at AS instance_metadata_1_updated_at, instance_metadata_1.deleted_at AS instance_metadata_1_deleted_at, instance_metadata_1.deleted AS instance_metadata_1_deleted, instance_metadata_1.id AS instance_metadata_1_id, instance_metadata_1.`key` AS instance_metadata_1_key, instance_metadata_1.value AS instance_metadata_1_value, instance_metadata_1.instance_uuid AS instance_metadata_1_instance_uuid\nFROM (SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned\nFROM instances\nWHERE instances.deleted = 0 AND (instances.vm_state != 'soft-delete' OR instances.vm_state IS NULL) AND instances.project_id = 'bfd50153a2e9476f93e33e30e922cd06' ORDER BY instances.created_at DESC, instances.id DESC\nLIMIT 3000) AS anon_1 LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = anon_1.instances_uuid AND anon_1.instances_deleted = 0 LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = anon_1.instances_uuid LEFT OUTER JOIN instance_extra AS instance_extra_1 ON instance_extra_1.instance_uuid = anon_1.instances_uuid LEFT OUTER JOIN instance_metadata AS instance_metadata_1 ON instance_metadata_1.instance_uuid = anon_1.instances_uuid AND instance_metadata_1.deleted = 0 ORDER BY anon_1.instances_created_at DESC, anon_1.instances_id DESC"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "SECURITY_GROUP_INSTANCE_ASSOCIATION.SECURITY_GROUP_ID",
        "SECURITY_GROUPS.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#INSTANCE_EXTRA",
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#INSTANCE_METADATA",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 6,
        "query_column_count": 157,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 4,
        "query_window_func_count": 0,
        "query_join_count": 5
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "3e43680925b9",
    "question": "Provide information (including security groups, system metadata, info caches, extra data, and associated PCI devices) about the instance d052d786-9b26-4439-ae6b-32a0505fdc12 under project bfd50153a2e9476f93e33e30e922cd06.",
    "sql": [
      "SELECT anon_1.instances_created_at AS anon_1_instances_created_at, anon_1.instances_updated_at AS anon_1_instances_updated_at, anon_1.instances_deleted_at AS anon_1_instances_deleted_at, anon_1.instances_deleted AS anon_1_instances_deleted, anon_1.instances_id AS anon_1_instances_id, anon_1.instances_user_id AS anon_1_instances_user_id, anon_1.instances_project_id AS anon_1_instances_project_id, anon_1.instances_image_ref AS anon_1_instances_image_ref, anon_1.instances_kernel_id AS anon_1_instances_kernel_id, anon_1.instances_ramdisk_id AS anon_1_instances_ramdisk_id, anon_1.instances_hostname AS anon_1_instances_hostname, anon_1.instances_launch_index AS anon_1_instances_launch_index, anon_1.instances_key_name AS anon_1_instances_key_name, anon_1.instances_key_data AS anon_1_instances_key_data, anon_1.instances_power_state AS anon_1_instances_power_state, anon_1.instances_vm_state AS anon_1_instances_vm_state, anon_1.instances_task_state AS anon_1_instances_task_state, anon_1.instances_memory_mb AS anon_1_instances_memory_mb, anon_1.instances_vcpus AS anon_1_instances_vcpus, anon_1.instances_root_gb AS anon_1_instances_root_gb, anon_1.instances_ephemeral_gb AS anon_1_instances_ephemeral_gb, anon_1.instances_ephemeral_key_uuid AS anon_1_instances_ephemeral_key_uuid, anon_1.instances_host AS anon_1_instances_host, anon_1.instances_node AS anon_1_instances_node, anon_1.instances_instance_type_id AS anon_1_instances_instance_type_id, anon_1.instances_user_data AS anon_1_instances_user_data, anon_1.instances_reservation_id AS anon_1_instances_reservation_id, anon_1.instances_launched_at AS anon_1_instances_launched_at, anon_1.instances_terminated_at AS anon_1_instances_terminated_at, anon_1.instances_availability_zone AS anon_1_instances_availability_zone, anon_1.instances_display_name AS anon_1_instances_display_name, anon_1.instances_display_description AS anon_1_instances_display_description, anon_1.instances_launched_on AS anon_1_instances_launched_on, anon_1.instances_locked AS anon_1_instances_locked, anon_1.instances_locked_by AS anon_1_instances_locked_by, anon_1.instances_os_type AS anon_1_instances_os_type, anon_1.instances_architecture AS anon_1_instances_architecture, anon_1.instances_vm_mode AS anon_1_instances_vm_mode, anon_1.instances_uuid AS anon_1_instances_uuid, anon_1.instances_root_device_name AS anon_1_instances_root_device_name, anon_1.instances_default_ephemeral_device AS anon_1_instances_default_ephemeral_device, anon_1.instances_default_swap_device AS anon_1_instances_default_swap_device, anon_1.instances_config_drive AS anon_1_instances_config_drive, anon_1.instances_access_ip_v4 AS anon_1_instances_access_ip_v4, anon_1.instances_access_ip_v6 AS anon_1_instances_access_ip_v6, anon_1.instances_auto_disk_config AS anon_1_instances_auto_disk_config, anon_1.instances_progress AS anon_1_instances_progress, anon_1.instances_shutdown_terminate AS anon_1_instances_shutdown_terminate, anon_1.instances_disable_terminate AS anon_1_instances_disable_terminate, anon_1.instances_cell_name AS anon_1_instances_cell_name, anon_1.instances_internal_id AS anon_1_instances_internal_id, anon_1.instances_cleaned AS anon_1_instances_cleaned, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id, security_group_rules_1.created_at AS security_group_rules_1_created_at, security_group_rules_1.updated_at AS security_group_rules_1_updated_at, security_group_rules_1.deleted_at AS security_group_rules_1_deleted_at, security_group_rules_1.deleted AS security_group_rules_1_deleted, security_group_rules_1.id AS security_group_rules_1_id, security_group_rules_1.parent_group_id AS security_group_rules_1_parent_group_id, security_group_rules_1.protocol AS security_group_rules_1_protocol, security_group_rules_1.from_port AS security_group_rules_1_from_port, security_group_rules_1.to_port AS security_group_rules_1_to_port, security_group_rules_1.cidr AS security_group_rules_1_cidr, security_group_rules_1.group_id AS security_group_rules_1_group_id, instance_system_metadata_1.created_at AS instance_system_metadata_1_created_at, instance_system_metadata_1.updated_at AS instance_system_metadata_1_updated_at, instance_system_metadata_1.deleted_at AS instance_system_metadata_1_deleted_at, instance_system_metadata_1.deleted AS instance_system_metadata_1_deleted, instance_system_metadata_1.id AS instance_system_metadata_1_id, instance_system_metadata_1.`key` AS instance_system_metadata_1_key, instance_system_metadata_1.value AS instance_system_metadata_1_value, instance_system_metadata_1.instance_uuid AS instance_system_metadata_1_instance_uuid, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, instance_extra_1.numa_topology AS instance_extra_1_numa_topology, instance_extra_1.flavor AS instance_extra_1_flavor, instance_extra_1.created_at AS instance_extra_1_created_at, instance_extra_1.updated_at AS instance_extra_1_updated_at, instance_extra_1.deleted_at AS instance_extra_1_deleted_at, instance_extra_1.deleted AS instance_extra_1_deleted, instance_extra_1.id AS instance_extra_1_id, instance_extra_1.instance_uuid AS instance_extra_1_instance_uuid, instance_metadata_1.created_at AS instance_metadata_1_created_at, instance_metadata_1.updated_at AS instance_metadata_1_updated_at, instance_metadata_1.deleted_at AS instance_metadata_1_deleted_at, instance_metadata_1.deleted AS instance_metadata_1_deleted, instance_metadata_1.id AS instance_metadata_1_id, instance_metadata_1.`key` AS instance_metadata_1_key, instance_metadata_1.value AS instance_metadata_1_value, instance_metadata_1.instance_uuid AS instance_metadata_1_instance_uuid, pci_devices_1.created_at AS pci_devices_1_created_at, pci_devices_1.updated_at AS pci_devices_1_updated_at, pci_devices_1.deleted_at AS pci_devices_1_deleted_at, pci_devices_1.deleted AS pci_devices_1_deleted, pci_devices_1.id AS pci_devices_1_id, pci_devices_1.compute_node_id AS pci_devices_1_compute_node_id, pci_devices_1.address AS pci_devices_1_address, pci_devices_1.vendor_id AS pci_devices_1_vendor_id, pci_devices_1.product_id AS pci_devices_1_product_id, pci_devices_1.dev_type AS pci_devices_1_dev_type, pci_devices_1.dev_id AS pci_devices_1_dev_id, pci_devices_1.label AS pci_devices_1_label, pci_devices_1.status AS pci_devices_1_status, pci_devices_1.request_id AS pci_devices_1_request_id, pci_devices_1.extra_info AS pci_devices_1_extra_info, pci_devices_1.instance_uuid AS pci_devices_1_instance_uuid, pci_devices_1.numa_node AS pci_devices_1_numa_node, pci_devices_1.parent_addr AS pci_devices_1_parent_addr\nFROM (SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned\nFROM instances\nWHERE instances.deleted = 0 AND instances.project_id = 'bfd50153a2e9476f93e33e30e922cd06' AND instances.uuid = 'd052d786-9b26-4439-ae6b-32a0505fdc12'\nLIMIT 1) AS anon_1 LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = anon_1.instances_uuid AND anon_1.instances_deleted = 0 LEFT OUTER JOIN security_group_rules AS security_group_rules_1 ON security_group_rules_1.parent_group_id = security_groups_1.id AND security_group_rules_1.deleted = 0 LEFT OUTER JOIN instance_system_metadata AS instance_system_metadata_1 ON anon_1.instances_uuid = instance_system_metadata_1.instance_uuid LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = anon_1.instances_uuid LEFT OUTER JOIN instance_extra AS instance_extra_1 ON instance_extra_1.instance_uuid = anon_1.instances_uuid LEFT OUTER JOIN instance_metadata AS instance_metadata_1 ON instance_metadata_1.instance_uuid = anon_1.instances_uuid AND instance_metadata_1.deleted = 0 LEFT OUTER JOIN pci_devices AS pci_devices_1 ON pci_devices_1.instance_uuid = anon_1.instances_uuid AND pci_devices_1.deleted = 0"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "SECURITY_GROUPS.ID",
        "SECURITY_GROUP_RULES.PARENT_GROUP_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_SYSTEM_METADATA",
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#INSTANCE_EXTRA",
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#INSTANCE_METADATA",
      "csail_stata_nova#sep#PCI_DEVICES",
      "csail_stata_nova#sep#SECURITY_GROUP_RULES",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 9,
        "query_column_count": 198,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 8
      },
      "categories": [
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "0b927b8163b4",
    "question": "Provide information about the 3000 instance types available to project bfd50153a2e9476f93e33e30e922cd06, sorted in the ascending order flavor id and id.",
    "sql": [
      "SELECT anon_1.instance_types_created_at AS anon_1_instance_types_created_at, anon_1.instance_types_updated_at AS anon_1_instance_types_updated_at, anon_1.instance_types_deleted_at AS anon_1_instance_types_deleted_at, anon_1.instance_types_deleted AS anon_1_instance_types_deleted, anon_1.instance_types_id AS anon_1_instance_types_id, anon_1.instance_types_name AS anon_1_instance_types_name, anon_1.instance_types_memory_mb AS anon_1_instance_types_memory_mb, anon_1.instance_types_vcpus AS anon_1_instance_types_vcpus, anon_1.instance_types_root_gb AS anon_1_instance_types_root_gb, anon_1.instance_types_ephemeral_gb AS anon_1_instance_types_ephemeral_gb, anon_1.instance_types_flavorid AS anon_1_instance_types_flavorid, anon_1.instance_types_swap AS anon_1_instance_types_swap, anon_1.instance_types_rxtx_factor AS anon_1_instance_types_rxtx_factor, anon_1.instance_types_vcpu_weight AS anon_1_instance_types_vcpu_weight, anon_1.instance_types_disabled AS anon_1_instance_types_disabled, anon_1.instance_types_is_public AS anon_1_instance_types_is_public, instance_type_extra_specs_1.created_at AS instance_type_extra_specs_1_created_at, instance_type_extra_specs_1.updated_at AS instance_type_extra_specs_1_updated_at, instance_type_extra_specs_1.deleted_at AS instance_type_extra_specs_1_deleted_at, instance_type_extra_specs_1.deleted AS instance_type_extra_specs_1_deleted, instance_type_extra_specs_1.id AS instance_type_extra_specs_1_id, instance_type_extra_specs_1.`key` AS instance_type_extra_specs_1_key, instance_type_extra_specs_1.value AS instance_type_extra_specs_1_value, instance_type_extra_specs_1.instance_type_id AS instance_type_extra_specs_1_instance_type_id\nFROM (SELECT instance_types.created_at AS instance_types_created_at, instance_types.updated_at AS instance_types_updated_at, instance_types.deleted_at AS instance_types_deleted_at, instance_types.deleted AS instance_types_deleted, instance_types.id AS instance_types_id, instance_types.name AS instance_types_name, instance_types.memory_mb AS instance_types_memory_mb, instance_types.vcpus AS instance_types_vcpus, instance_types.root_gb AS instance_types_root_gb, instance_types.ephemeral_gb AS instance_types_ephemeral_gb, instance_types.flavorid AS instance_types_flavorid, instance_types.swap AS instance_types_swap, instance_types.rxtx_factor AS instance_types_rxtx_factor, instance_types.vcpu_weight AS instance_types_vcpu_weight, instance_types.disabled AS instance_types_disabled, instance_types.is_public AS instance_types_is_public\nFROM instance_types\nWHERE instance_types.deleted = 0 AND (instance_types.is_public = true OR (EXISTS (SELECT 1\nFROM instance_type_projects\nWHERE instance_type_projects.instance_type_id = instance_types.id AND instance_type_projects.deleted = 0 AND instance_type_projects.project_id = 'bfd50153a2e9476f93e33e30e922cd06'))) AND instance_types.disabled = false AND (instance_types.is_public = true OR (EXISTS (SELECT 1\nFROM instance_type_projects\nWHERE instance_type_projects.instance_type_id = instance_types.id AND instance_type_projects.deleted = 0 AND instance_type_projects.deleted = 0 AND instance_type_projects.project_id = 'bfd50153a2e9476f93e33e30e922cd06'))) ORDER BY instance_types.flavorid ASC, instance_types.id ASC\nLIMIT 3000) AS anon_1 LEFT OUTER JOIN instance_type_extra_specs AS instance_type_extra_specs_1 ON instance_type_extra_specs_1.instance_type_id = anon_1.instance_types_id AND instance_type_extra_specs_1.deleted = 0 ORDER BY anon_1.instance_types_flavorid ASC, anon_1.instance_types_id ASC"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_TYPE_EXTRA_SPECS",
      "csail_stata_nova#sep#INSTANCE_TYPES",
      "csail_stata_nova#sep#INSTANCE_TYPE_PROJECTS"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 60,
        "query_nested_count": 3,
        "query_aggregate_count": 0,
        "query_sort_count": 4,
        "query_window_func_count": 0,
        "query_join_count": 1
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "7b9da141db77",
    "question": "Provide information about the host aggregate with id default.",
    "sql": [
      "SELECT anon_1.aggregates_created_at AS anon_1_aggregates_created_at, anon_1.aggregates_updated_at AS anon_1_aggregates_updated_at, anon_1.aggregates_deleted_at AS anon_1_aggregates_deleted_at, anon_1.aggregates_deleted AS anon_1_aggregates_deleted, anon_1.aggregates_id AS anon_1_aggregates_id, anon_1.aggregates_uuid AS anon_1_aggregates_uuid, anon_1.aggregates_name AS anon_1_aggregates_name, aggregate_hosts_1.created_at AS aggregate_hosts_1_created_at, aggregate_hosts_1.updated_at AS aggregate_hosts_1_updated_at, aggregate_hosts_1.deleted_at AS aggregate_hosts_1_deleted_at, aggregate_hosts_1.deleted AS aggregate_hosts_1_deleted, aggregate_hosts_1.id AS aggregate_hosts_1_id, aggregate_hosts_1.host AS aggregate_hosts_1_host, aggregate_hosts_1.aggregate_id AS aggregate_hosts_1_aggregate_id, aggregate_metadata_1.created_at AS aggregate_metadata_1_created_at, aggregate_metadata_1.updated_at AS aggregate_metadata_1_updated_at, aggregate_metadata_1.deleted_at AS aggregate_metadata_1_deleted_at, aggregate_metadata_1.deleted AS aggregate_metadata_1_deleted, aggregate_metadata_1.id AS aggregate_metadata_1_id, aggregate_metadata_1.`key` AS aggregate_metadata_1_key, aggregate_metadata_1.value AS aggregate_metadata_1_value, aggregate_metadata_1.aggregate_id AS aggregate_metadata_1_aggregate_id\nFROM (SELECT aggregates.created_at AS aggregates_created_at, aggregates.updated_at AS aggregates_updated_at, aggregates.deleted_at AS aggregates_deleted_at, aggregates.deleted AS aggregates_deleted, aggregates.id AS aggregates_id, aggregates.uuid AS aggregates_uuid, aggregates.name AS aggregates_name\nFROM aggregates\nWHERE aggregates.deleted = 0 AND aggregates.id = 'default'\nLIMIT 1) AS anon_1 LEFT OUTER JOIN aggregate_hosts AS aggregate_hosts_1 ON anon_1.aggregates_id = aggregate_hosts_1.aggregate_id AND aggregate_hosts_1.deleted = 0 AND anon_1.aggregates_deleted = 0 LEFT OUTER JOIN aggregate_metadata AS aggregate_metadata_1 ON anon_1.aggregates_id = aggregate_metadata_1.aggregate_id AND aggregate_metadata_1.deleted = 0 AND anon_1.aggregates_deleted = 0"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [],
    "gold_tables": [
      "csail_stata_nova#sep#AGGREGATE_HOSTS",
      "csail_stata_nova#sep#AGGREGATE_METADATA",
      "csail_stata_nova#sep#AGGREGATES"
    ],
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 39,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "d62d568826b3",
    "question": "Provide information about the 3000 instance types, sorted in the ascending order flavor id and id.",
    "sql": [
      "SELECT anon_1.instance_types_created_at AS anon_1_instance_types_created_at, anon_1.instance_types_updated_at AS anon_1_instance_types_updated_at, anon_1.instance_types_deleted_at AS anon_1_instance_types_deleted_at, anon_1.instance_types_deleted AS anon_1_instance_types_deleted, anon_1.instance_types_id AS anon_1_instance_types_id, anon_1.instance_types_name AS anon_1_instance_types_name, anon_1.instance_types_memory_mb AS anon_1_instance_types_memory_mb, anon_1.instance_types_vcpus AS anon_1_instance_types_vcpus, anon_1.instance_types_root_gb AS anon_1_instance_types_root_gb, anon_1.instance_types_ephemeral_gb AS anon_1_instance_types_ephemeral_gb, anon_1.instance_types_flavorid AS anon_1_instance_types_flavorid, anon_1.instance_types_swap AS anon_1_instance_types_swap, anon_1.instance_types_rxtx_factor AS anon_1_instance_types_rxtx_factor, anon_1.instance_types_vcpu_weight AS anon_1_instance_types_vcpu_weight, anon_1.instance_types_disabled AS anon_1_instance_types_disabled, anon_1.instance_types_is_public AS anon_1_instance_types_is_public, instance_type_extra_specs_1.created_at AS instance_type_extra_specs_1_created_at, instance_type_extra_specs_1.updated_at AS instance_type_extra_specs_1_updated_at, instance_type_extra_specs_1.deleted_at AS instance_type_extra_specs_1_deleted_at, instance_type_extra_specs_1.deleted AS instance_type_extra_specs_1_deleted, instance_type_extra_specs_1.id AS instance_type_extra_specs_1_id, instance_type_extra_specs_1.`key` AS instance_type_extra_specs_1_key, instance_type_extra_specs_1.value AS instance_type_extra_specs_1_value, instance_type_extra_specs_1.instance_type_id AS instance_type_extra_specs_1_instance_type_id\nFROM (SELECT instance_types.created_at AS instance_types_created_at, instance_types.updated_at AS instance_types_updated_at, instance_types.deleted_at AS instance_types_deleted_at, instance_types.deleted AS instance_types_deleted, instance_types.id AS instance_types_id, instance_types.name AS instance_types_name, instance_types.memory_mb AS instance_types_memory_mb, instance_types.vcpus AS instance_types_vcpus, instance_types.root_gb AS instance_types_root_gb, instance_types.ephemeral_gb AS instance_types_ephemeral_gb, instance_types.flavorid AS instance_types_flavorid, instance_types.swap AS instance_types_swap, instance_types.rxtx_factor AS instance_types_rxtx_factor, instance_types.vcpu_weight AS instance_types_vcpu_weight, instance_types.disabled AS instance_types_disabled, instance_types.is_public AS instance_types_is_public\nFROM instance_types\nWHERE instance_types.deleted = 0 ORDER BY instance_types.flavorid ASC, instance_types.id ASC\nLIMIT 3000) AS anon_1 LEFT OUTER JOIN instance_type_extra_specs AS instance_type_extra_specs_1 ON instance_type_extra_specs_1.instance_type_id = anon_1.instance_types_id AND instance_type_extra_specs_1.deleted = 0 ORDER BY anon_1.instance_types_flavorid ASC, anon_1.instance_types_id ASC"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_TYPE_EXTRA_SPECS",
      "csail_stata_nova#sep#INSTANCE_TYPES"
    ],
    "meta": {
      "features": {
        "query_table_count": 2,
        "query_column_count": 48,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 4,
        "query_window_func_count": 0,
        "query_join_count": 1
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "b86e81a4d7dd",
    "question": "Provide information (including security groups, and info caches) about the 3000 latest VMs under the project bfd50153a2e9476f93e33e30e922cd06 with void in the name.",
    "sql": [
      "SELECT anon_1.instances_created_at AS anon_1_instances_created_at, anon_1.instances_updated_at AS anon_1_instances_updated_at, anon_1.instances_deleted_at AS anon_1_instances_deleted_at, anon_1.instances_deleted AS anon_1_instances_deleted, anon_1.instances_id AS anon_1_instances_id, anon_1.instances_user_id AS anon_1_instances_user_id, anon_1.instances_project_id AS anon_1_instances_project_id, anon_1.instances_image_ref AS anon_1_instances_image_ref, anon_1.instances_kernel_id AS anon_1_instances_kernel_id, anon_1.instances_ramdisk_id AS anon_1_instances_ramdisk_id, anon_1.instances_hostname AS anon_1_instances_hostname, anon_1.instances_launch_index AS anon_1_instances_launch_index, anon_1.instances_key_name AS anon_1_instances_key_name, anon_1.instances_key_data AS anon_1_instances_key_data, anon_1.instances_power_state AS anon_1_instances_power_state, anon_1.instances_vm_state AS anon_1_instances_vm_state, anon_1.instances_task_state AS anon_1_instances_task_state, anon_1.instances_memory_mb AS anon_1_instances_memory_mb, anon_1.instances_vcpus AS anon_1_instances_vcpus, anon_1.instances_root_gb AS anon_1_instances_root_gb, anon_1.instances_ephemeral_gb AS anon_1_instances_ephemeral_gb, anon_1.instances_ephemeral_key_uuid AS anon_1_instances_ephemeral_key_uuid, anon_1.instances_host AS anon_1_instances_host, anon_1.instances_node AS anon_1_instances_node, anon_1.instances_instance_type_id AS anon_1_instances_instance_type_id, anon_1.instances_user_data AS anon_1_instances_user_data, anon_1.instances_reservation_id AS anon_1_instances_reservation_id, anon_1.instances_launched_at AS anon_1_instances_launched_at, anon_1.instances_terminated_at AS anon_1_instances_terminated_at, anon_1.instances_availability_zone AS anon_1_instances_availability_zone, anon_1.instances_display_name AS anon_1_instances_display_name, anon_1.instances_display_description AS anon_1_instances_display_description, anon_1.instances_launched_on AS anon_1_instances_launched_on, anon_1.instances_locked AS anon_1_instances_locked, anon_1.instances_locked_by AS anon_1_instances_locked_by, anon_1.instances_os_type AS anon_1_instances_os_type, anon_1.instances_architecture AS anon_1_instances_architecture, anon_1.instances_vm_mode AS anon_1_instances_vm_mode, anon_1.instances_uuid AS anon_1_instances_uuid, anon_1.instances_root_device_name AS anon_1_instances_root_device_name, anon_1.instances_default_ephemeral_device AS anon_1_instances_default_ephemeral_device, anon_1.instances_default_swap_device AS anon_1_instances_default_swap_device, anon_1.instances_config_drive AS anon_1_instances_config_drive, anon_1.instances_access_ip_v4 AS anon_1_instances_access_ip_v4, anon_1.instances_access_ip_v6 AS anon_1_instances_access_ip_v6, anon_1.instances_auto_disk_config AS anon_1_instances_auto_disk_config, anon_1.instances_progress AS anon_1_instances_progress, anon_1.instances_shutdown_terminate AS anon_1_instances_shutdown_terminate, anon_1.instances_disable_terminate AS anon_1_instances_disable_terminate, anon_1.instances_cell_name AS anon_1_instances_cell_name, anon_1.instances_internal_id AS anon_1_instances_internal_id, anon_1.instances_cleaned AS anon_1_instances_cleaned, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid\nFROM (SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned\nFROM instances\nWHERE instances.deleted = 0 AND (instances.vm_state != 'soft-delete' OR instances.vm_state IS NULL) AND instances.project_id = 'bfd50153a2e9476f93e33e30e922cd06' AND (instances.display_name REGEXP 'void') ORDER BY instances.created_at DESC, instances.id DESC\nLIMIT 3000) AS anon_1 LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = anon_1.instances_uuid AND anon_1.instances_deleted = 0 LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = anon_1.instances_uuid ORDER BY anon_1.instances_created_at DESC, anon_1.instances_id DESC"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "SECURITY_GROUP_INSTANCE_ASSOCIATION.SECURITY_GROUP_ID",
        "SECURITY_GROUPS.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCES",
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 138,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 4,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "e8dfa63c11bf",
    "question": "Provide information about the 25 latest public images.",
    "sql": [
      "SELECT anon_1.images_created_at AS anon_1_images_created_at, anon_1.images_updated_at AS anon_1_images_updated_at, anon_1.images_deleted_at AS anon_1_images_deleted_at, anon_1.images_deleted AS anon_1_images_deleted, anon_1.images_id AS anon_1_images_id, anon_1.images_name AS anon_1_images_name, anon_1.images_disk_format AS anon_1_images_disk_format, anon_1.images_container_format AS anon_1_images_container_format, anon_1.images_size AS anon_1_images_size, anon_1.images_virtual_size AS anon_1_images_virtual_size, anon_1.images_status AS anon_1_images_status, anon_1.images_is_public AS anon_1_images_is_public, anon_1.images_checksum AS anon_1_images_checksum, anon_1.images_min_disk AS anon_1_images_min_disk, anon_1.images_min_ram AS anon_1_images_min_ram, anon_1.images_owner AS anon_1_images_owner, anon_1.images_protected AS anon_1_images_protected, image_tags_1.created_at AS image_tags_1_created_at, image_tags_1.updated_at AS image_tags_1_updated_at, image_tags_1.deleted_at AS image_tags_1_deleted_at, image_tags_1.deleted AS image_tags_1_deleted, image_tags_1.id AS image_tags_1_id, image_tags_1.image_id AS image_tags_1_image_id, image_tags_1.value AS image_tags_1_value, image_locations_1.created_at AS image_locations_1_created_at, image_locations_1.updated_at AS image_locations_1_updated_at, image_locations_1.deleted_at AS image_locations_1_deleted_at, image_locations_1.deleted AS image_locations_1_deleted, image_locations_1.id AS image_locations_1_id, image_locations_1.image_id AS image_locations_1_image_id, image_locations_1.value AS image_locations_1_value, image_locations_1.meta_data AS image_locations_1_meta_data, image_locations_1.status AS image_locations_1_status, image_properties_1.created_at AS image_properties_1_created_at, image_properties_1.updated_at AS image_properties_1_updated_at, image_properties_1.deleted_at AS image_properties_1_deleted_at, image_properties_1.deleted AS image_properties_1_deleted, image_properties_1.id AS image_properties_1_id, image_properties_1.image_id AS image_properties_1_image_id, image_properties_1.name AS image_properties_1_name, image_properties_1.value AS image_properties_1_value\nFROM (SELECT images.created_at AS images_created_at, images.updated_at AS images_updated_at, images.deleted_at AS images_deleted_at, images.deleted AS images_deleted, images.id AS images_id, images.name AS images_name, images.disk_format AS images_disk_format, images.container_format AS images_container_format, images.size AS images_size, images.virtual_size AS images_virtual_size, images.status AS images_status, images.is_public AS images_is_public, images.checksum AS images_checksum, images.min_disk AS images_min_disk, images.min_ram AS images_min_ram, images.owner AS images_owner, images.protected AS images_protected\nFROM images\nWHERE images.deleted = false AND images.status IN ('active', 'saving', 'queued', 'pending_delete', 'deleted', 'deactivated') AND images.is_public = true ORDER BY images.created_at DESC, images.id DESC\nLIMIT 25) AS anon_1 LEFT OUTER JOIN image_tags AS image_tags_1 ON anon_1.images_id = image_tags_1.image_id LEFT OUTER JOIN image_locations AS image_locations_1 ON anon_1.images_id = image_locations_1.image_id LEFT OUTER JOIN image_properties AS image_properties_1 ON anon_1.images_id = image_properties_1.image_id ORDER BY anon_1.images_created_at DESC, anon_1.images_id DESC"
    ],
    "db_id": "csail_stata_glance",
    "join_keys": [],
    "gold_tables": [
      "csail_stata_glance#sep#IMAGE_PROPERTIES",
      "csail_stata_glance#sep#IMAGE_TAGS",
      "csail_stata_glance#sep#IMAGES",
      "csail_stata_glance#sep#IMAGE_LOCATIONS"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 71,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 4,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "636bd3b5b116",
    "question": "Provide information about the 200 latest images associated with the owner bfd50153a2e9476f93e33e30e922cd06.",
    "sql": [
      "SELECT anon_1.anon_2_images_created_at AS anon_1_anon_2_images_created_at, anon_1.anon_2_images_updated_at AS anon_1_anon_2_images_updated_at, anon_1.anon_2_images_deleted_at AS anon_1_anon_2_images_deleted_at, anon_1.anon_2_images_deleted AS anon_1_anon_2_images_deleted, anon_1.anon_2_images_id AS anon_1_anon_2_images_id, anon_1.anon_2_images_name AS anon_1_anon_2_images_name, anon_1.anon_2_images_disk_format AS anon_1_anon_2_images_disk_format, anon_1.anon_2_images_container_format AS anon_1_anon_2_images_container_format, anon_1.anon_2_images_size AS anon_1_anon_2_images_size, anon_1.anon_2_images_virtual_size AS anon_1_anon_2_images_virtual_size, anon_1.anon_2_images_status AS anon_1_anon_2_images_status, anon_1.anon_2_images_is_public AS anon_1_anon_2_images_is_public, anon_1.anon_2_images_checksum AS anon_1_anon_2_images_checksum, anon_1.anon_2_images_min_disk AS anon_1_anon_2_images_min_disk, anon_1.anon_2_images_min_ram AS anon_1_anon_2_images_min_ram, anon_1.anon_2_images_owner AS anon_1_anon_2_images_owner, anon_1.anon_2_images_protected AS anon_1_anon_2_images_protected, image_tags_1.created_at AS image_tags_1_created_at, image_tags_1.updated_at AS image_tags_1_updated_at, image_tags_1.deleted_at AS image_tags_1_deleted_at, image_tags_1.deleted AS image_tags_1_deleted, image_tags_1.id AS image_tags_1_id, image_tags_1.image_id AS image_tags_1_image_id, image_tags_1.value AS image_tags_1_value, image_locations_1.created_at AS image_locations_1_created_at, image_locations_1.updated_at AS image_locations_1_updated_at, image_locations_1.deleted_at AS image_locations_1_deleted_at, image_locations_1.deleted AS image_locations_1_deleted, image_locations_1.id AS image_locations_1_id, image_locations_1.image_id AS image_locations_1_image_id, image_locations_1.value AS image_locations_1_value, image_locations_1.meta_data AS image_locations_1_meta_data, image_locations_1.status AS image_locations_1_status, image_properties_1.created_at AS image_properties_1_created_at, image_properties_1.updated_at AS image_properties_1_updated_at, image_properties_1.deleted_at AS image_properties_1_deleted_at, image_properties_1.deleted AS image_properties_1_deleted, image_properties_1.id AS image_properties_1_id, image_properties_1.image_id AS image_properties_1_image_id, image_properties_1.name AS image_properties_1_name, image_properties_1.value AS image_properties_1_value\nFROM (SELECT anon_2.images_created_at AS anon_2_images_created_at, anon_2.images_updated_at AS anon_2_images_updated_at, anon_2.images_deleted_at AS anon_2_images_deleted_at, anon_2.images_deleted AS anon_2_images_deleted, anon_2.images_id AS anon_2_images_id, anon_2.images_name AS anon_2_images_name, anon_2.images_disk_format AS anon_2_images_disk_format, anon_2.images_container_format AS anon_2_images_container_format, anon_2.images_size AS anon_2_images_size, anon_2.images_virtual_size AS anon_2_images_virtual_size, anon_2.images_status AS anon_2_images_status, anon_2.images_is_public AS anon_2_images_is_public, anon_2.images_checksum AS anon_2_images_checksum, anon_2.images_min_disk AS anon_2_images_min_disk, anon_2.images_min_ram AS anon_2_images_min_ram, anon_2.images_owner AS anon_2_images_owner, anon_2.images_protected AS anon_2_images_protected\nFROM (SELECT images.created_at AS images_created_at, images.updated_at AS images_updated_at, images.deleted_at AS images_deleted_at, images.deleted AS images_deleted, images.id AS images_id, images.name AS images_name, images.disk_format AS images_disk_format, images.container_format AS images_container_format, images.size AS images_size, images.virtual_size AS images_virtual_size, images.status AS images_status, images.is_public AS images_is_public, images.checksum AS images_checksum, images.min_disk AS images_min_disk, images.min_ram AS images_min_ram, images.owner AS images_owner, images.protected AS images_protected\nFROM images\nWHERE images.deleted = false AND images.status IN ('active', 'saving', 'queued', 'pending_delete', 'deleted', 'deactivated') AND images.is_public = true UNION SELECT images.created_at AS images_created_at, images.updated_at AS images_updated_at, images.deleted_at AS images_deleted_at, images.deleted AS images_deleted, images.id AS images_id, images.name AS images_name, images.disk_format AS images_disk_format, images.container_format AS images_container_format, images.size AS images_size, images.virtual_size AS images_virtual_size, images.status AS images_status, images.is_public AS images_is_public, images.checksum AS images_checksum, images.min_disk AS images_min_disk, images.min_ram AS images_min_ram, images.owner AS images_owner, images.protected AS images_protected\nFROM images\nWHERE images.owner = 'bfd50153a2e9476f93e33e30e922cd06' AND images.deleted = false AND images.status IN ('active', 'saving', 'queued', 'pending_delete', 'deleted', 'deactivated') UNION SELECT images.created_at AS images_created_at, images.updated_at AS images_updated_at, images.deleted_at AS images_deleted_at, images.deleted AS images_deleted, images.id AS images_id, images.name AS images_name, images.disk_format AS images_disk_format, images.container_format AS images_container_format, images.size AS images_size, images.virtual_size AS images_virtual_size, images.status AS images_status, images.is_public AS images_is_public, images.checksum AS images_checksum, images.min_disk AS images_min_disk, images.min_ram AS images_min_ram, images.owner AS images_owner, images.protected AS images_protected\nFROM images INNER JOIN image_members ON images.id = image_members.image_id\nWHERE images.deleted = false AND images.status IN ('active', 'saving', 'queued', 'pending_delete', 'deleted', 'deactivated') AND image_members.deleted = false AND image_members.member = 'bfd50153a2e9476f93e33e30e922cd06' AND image_members.status = 'accepted') AS anon_2 ORDER BY anon_2.images_created_at DESC, anon_2.images_id DESC\nLIMIT 200) AS anon_1 LEFT OUTER JOIN image_tags AS image_tags_1 ON anon_1.anon_2_images_id = image_tags_1.image_id LEFT OUTER JOIN image_locations AS image_locations_1 ON anon_1.anon_2_images_id = image_locations_1.image_id LEFT OUTER JOIN image_properties AS image_properties_1 ON anon_1.anon_2_images_id = image_properties_1.image_id ORDER BY anon_1.anon_2_images_created_at DESC, anon_1.anon_2_images_id DESC"
    ],
    "db_id": "csail_stata_glance",
    "join_keys": [
      [
        "IMAGES.ID",
        "IMAGE_MEMBERS.IMAGE_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_glance#sep#IMAGE_TAGS",
      "csail_stata_glance#sep#IMAGE_MEMBERS",
      "csail_stata_glance#sep#IMAGE_PROPERTIES",
      "csail_stata_glance#sep#IMAGES",
      "csail_stata_glance#sep#IMAGE_LOCATIONS"
    ],
    "meta": {
      "features": {
        "query_table_count": 7,
        "query_column_count": 132,
        "query_nested_count": 4,
        "query_aggregate_count": 0,
        "query_sort_count": 4,
        "query_window_func_count": 0,
        "query_join_count": 4
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "107e7549c826",
    "question": "Provide information (including security groups, system medata, info caches, and metadata) about the instance d052d786-9b26-4439-ae6b-32a0505fdc12 under the project bfd50153a2e9476f93e33e30e922cd06.",
    "sql": [
      "SELECT anon_1.instances_created_at AS anon_1_instances_created_at, anon_1.instances_updated_at AS anon_1_instances_updated_at, anon_1.instances_deleted_at AS anon_1_instances_deleted_at, anon_1.instances_deleted AS anon_1_instances_deleted, anon_1.instances_id AS anon_1_instances_id, anon_1.instances_user_id AS anon_1_instances_user_id, anon_1.instances_project_id AS anon_1_instances_project_id, anon_1.instances_image_ref AS anon_1_instances_image_ref, anon_1.instances_kernel_id AS anon_1_instances_kernel_id, anon_1.instances_ramdisk_id AS anon_1_instances_ramdisk_id, anon_1.instances_hostname AS anon_1_instances_hostname, anon_1.instances_launch_index AS anon_1_instances_launch_index, anon_1.instances_key_name AS anon_1_instances_key_name, anon_1.instances_key_data AS anon_1_instances_key_data, anon_1.instances_power_state AS anon_1_instances_power_state, anon_1.instances_vm_state AS anon_1_instances_vm_state, anon_1.instances_task_state AS anon_1_instances_task_state, anon_1.instances_memory_mb AS anon_1_instances_memory_mb, anon_1.instances_vcpus AS anon_1_instances_vcpus, anon_1.instances_root_gb AS anon_1_instances_root_gb, anon_1.instances_ephemeral_gb AS anon_1_instances_ephemeral_gb, anon_1.instances_ephemeral_key_uuid AS anon_1_instances_ephemeral_key_uuid, anon_1.instances_host AS anon_1_instances_host, anon_1.instances_node AS anon_1_instances_node, anon_1.instances_instance_type_id AS anon_1_instances_instance_type_id, anon_1.instances_user_data AS anon_1_instances_user_data, anon_1.instances_reservation_id AS anon_1_instances_reservation_id, anon_1.instances_launched_at AS anon_1_instances_launched_at, anon_1.instances_terminated_at AS anon_1_instances_terminated_at, anon_1.instances_availability_zone AS anon_1_instances_availability_zone, anon_1.instances_display_name AS anon_1_instances_display_name, anon_1.instances_display_description AS anon_1_instances_display_description, anon_1.instances_launched_on AS anon_1_instances_launched_on, anon_1.instances_locked AS anon_1_instances_locked, anon_1.instances_locked_by AS anon_1_instances_locked_by, anon_1.instances_os_type AS anon_1_instances_os_type, anon_1.instances_architecture AS anon_1_instances_architecture, anon_1.instances_vm_mode AS anon_1_instances_vm_mode, anon_1.instances_uuid AS anon_1_instances_uuid, anon_1.instances_root_device_name AS anon_1_instances_root_device_name, anon_1.instances_default_ephemeral_device AS anon_1_instances_default_ephemeral_device, anon_1.instances_default_swap_device AS anon_1_instances_default_swap_device, anon_1.instances_config_drive AS anon_1_instances_config_drive, anon_1.instances_access_ip_v4 AS anon_1_instances_access_ip_v4, anon_1.instances_access_ip_v6 AS anon_1_instances_access_ip_v6, anon_1.instances_auto_disk_config AS anon_1_instances_auto_disk_config, anon_1.instances_progress AS anon_1_instances_progress, anon_1.instances_shutdown_terminate AS anon_1_instances_shutdown_terminate, anon_1.instances_disable_terminate AS anon_1_instances_disable_terminate, anon_1.instances_cell_name AS anon_1_instances_cell_name, anon_1.instances_internal_id AS anon_1_instances_internal_id, anon_1.instances_cleaned AS anon_1_instances_cleaned, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id, security_group_rules_1.created_at AS security_group_rules_1_created_at, security_group_rules_1.updated_at AS security_group_rules_1_updated_at, security_group_rules_1.deleted_at AS security_group_rules_1_deleted_at, security_group_rules_1.deleted AS security_group_rules_1_deleted, security_group_rules_1.id AS security_group_rules_1_id, security_group_rules_1.parent_group_id AS security_group_rules_1_parent_group_id, security_group_rules_1.protocol AS security_group_rules_1_protocol, security_group_rules_1.from_port AS security_group_rules_1_from_port, security_group_rules_1.to_port AS security_group_rules_1_to_port, security_group_rules_1.cidr AS security_group_rules_1_cidr, security_group_rules_1.group_id AS security_group_rules_1_group_id, instance_system_metadata_1.created_at AS instance_system_metadata_1_created_at, instance_system_metadata_1.updated_at AS instance_system_metadata_1_updated_at, instance_system_metadata_1.deleted_at AS instance_system_metadata_1_deleted_at, instance_system_metadata_1.deleted AS instance_system_metadata_1_deleted, instance_system_metadata_1.id AS instance_system_metadata_1_id, instance_system_metadata_1.`key` AS instance_system_metadata_1_key, instance_system_metadata_1.value AS instance_system_metadata_1_value, instance_system_metadata_1.instance_uuid AS instance_system_metadata_1_instance_uuid, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, instance_metadata_1.created_at AS instance_metadata_1_created_at, instance_metadata_1.updated_at AS instance_metadata_1_updated_at, instance_metadata_1.deleted_at AS instance_metadata_1_deleted_at, instance_metadata_1.deleted AS instance_metadata_1_deleted, instance_metadata_1.id AS instance_metadata_1_id, instance_metadata_1.`key` AS instance_metadata_1_key, instance_metadata_1.value AS instance_metadata_1_value, instance_metadata_1.instance_uuid AS instance_metadata_1_instance_uuid\nFROM (SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned\nFROM instances\nWHERE instances.deleted = 0 AND instances.project_id = 'bfd50153a2e9476f93e33e30e922cd06' AND instances.uuid = 'd052d786-9b26-4439-ae6b-32a0505fdc12'\nLIMIT 1) AS anon_1 LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = anon_1.instances_uuid AND anon_1.instances_deleted = 0 LEFT OUTER JOIN security_group_rules AS security_group_rules_1 ON security_group_rules_1.parent_group_id = security_groups_1.id AND security_group_rules_1.deleted = 0 LEFT OUTER JOIN instance_system_metadata AS instance_system_metadata_1 ON anon_1.instances_uuid = instance_system_metadata_1.instance_uuid LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = anon_1.instances_uuid LEFT OUTER JOIN instance_metadata AS instance_metadata_1 ON instance_metadata_1.instance_uuid = anon_1.instances_uuid AND instance_metadata_1.deleted = 0"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "SECURITY_GROUP_RULES.PARENT_GROUP_ID",
        "SECURITY_GROUPS.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_SYSTEM_METADATA",
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#INSTANCE_METADATA",
      "csail_stata_nova#sep#SECURITY_GROUP_RULES",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 7,
        "query_column_count": 167,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 6
      },
      "categories": [
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "82573a65b0c4",
    "question": "Provide information about all physical hosts.",
    "sql": [
      "SELECT cn.created_at, cn.updated_at, cn.deleted_at, cn.deleted, cn.id, cn.service_id, cn.host, cn.uuid, cn.vcpus, cn.memory_mb, cn.local_gb, cn.vcpus_used, cn.memory_mb_used, cn.local_gb_used, cn.hypervisor_type, cn.hypervisor_version, cn.hypervisor_hostname, cn.free_ram_mb, cn.free_disk_gb, cn.current_workload, cn.running_vms, cn.cpu_info, cn.disk_available_least, cn.host_ip, cn.supported_instances, cn.metrics, cn.pci_stats, cn.extra_resources, cn.stats, cn.numa_topology, cn.ram_allocation_ratio, cn.cpu_allocation_ratio, cn.disk_allocation_ratio, ram_inv.total AS inv_memory_mb, ram_inv.reserved AS inv_memory_mb_reserved, ram_inv.allocation_ratio AS inv_ram_allocation_ratio, ram_usage.used AS inv_memory_mb_used, cpu_inv.total AS inv_vcpus, cpu_inv.allocation_ratio AS inv_cpu_allocation_ratio, cpu_usage.used AS inv_vcpus_used, disk_inv.total AS inv_local_gb, disk_inv.reserved AS inv_local_gb_reserved, disk_inv.allocation_ratio AS inv_disk_allocation_ratio, disk_usage.used AS inv_local_gb_used\nFROM compute_nodes AS cn LEFT OUTER JOIN resource_providers AS rp ON cn.uuid = rp.uuid LEFT OUTER JOIN inventories AS ram_inv ON rp.id = ram_inv.resource_provider_id AND ram_inv.resource_class_id = 1 LEFT OUTER JOIN (SELECT allocations.resource_provider_id AS resource_provider_id, sum(allocations.used) AS used\nFROM allocations\nWHERE allocations.resource_class_id = 1 GROUP BY allocations.resource_provider_id) AS ram_usage ON ram_inv.resource_provider_id = ram_usage.resource_provider_id LEFT OUTER JOIN inventories AS cpu_inv ON rp.id = cpu_inv.resource_provider_id AND cpu_inv.resource_class_id = 0 LEFT OUTER JOIN (SELECT allocations.resource_provider_id AS resource_provider_id, sum(allocations.used) AS used\nFROM allocations\nWHERE allocations.resource_class_id = 0 GROUP BY allocations.resource_provider_id) AS cpu_usage ON cpu_inv.resource_provider_id = cpu_usage.resource_provider_id LEFT OUTER JOIN inventories AS disk_inv ON rp.id = disk_inv.resource_provider_id AND disk_inv.resource_class_id = 2 LEFT OUTER JOIN (SELECT allocations.resource_provider_id AS resource_provider_id, sum(allocations.used) AS used\nFROM allocations\nWHERE allocations.resource_class_id = 2 GROUP BY allocations.resource_provider_id) AS disk_usage ON disk_inv.resource_provider_id = disk_usage.resource_provider_id\nWHERE cn.deleted = 0"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "RESOURCE_PROVIDERS.UUID",
        "COMPUTE_NODES.UUID"
      ],
      [
        "RESOURCE_PROVIDERS.ID",
        "INVENTORIES.RESOURCE_PROVIDER_ID"
      ],
      [
        "RESOURCE_PROVIDERS.ID",
        "INVENTORIES.RESOURCE_PROVIDER_ID"
      ],
      [
        "INVENTORIES.RESOURCE_PROVIDER_ID",
        "RESOURCE_PROVIDERS.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#RESOURCE_PROVIDERS",
      "csail_stata_nova#sep#ALLOCATIONS",
      "csail_stata_nova#sep#INVENTORIES",
      "csail_stata_nova#sep#COMPUTE_NODES"
    ],
    "meta": {
      "features": {
        "query_table_count": 8,
        "query_column_count": 74,
        "query_nested_count": 3,
        "query_aggregate_count": 3,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 7
      },
      "categories": [
        "has_aggregation",
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "11ef03ab9117",
    "question": "Provide information about the 1000 latest volumes under the project bfd50153a2e9476f93e33e30e922cd06.",
    "sql": [
      "SELECT anon_1.volumes_created_at AS anon_1_volumes_created_at, anon_1.volumes_updated_at AS anon_1_volumes_updated_at, anon_1.volumes_deleted_at AS anon_1_volumes_deleted_at, anon_1.volumes_deleted AS anon_1_volumes_deleted, anon_1.volumes_id AS anon_1_volumes_id, anon_1.volumes__name_id AS anon_1_volumes__name_id, anon_1.volumes_ec2_id AS anon_1_volumes_ec2_id, anon_1.volumes_user_id AS anon_1_volumes_user_id, anon_1.volumes_project_id AS anon_1_volumes_project_id, anon_1.volumes_snapshot_id AS anon_1_volumes_snapshot_id, anon_1.volumes_host AS anon_1_volumes_host, anon_1.volumes_size AS anon_1_volumes_size, anon_1.volumes_availability_zone AS anon_1_volumes_availability_zone, anon_1.volumes_status AS anon_1_volumes_status, anon_1.volumes_attach_status AS anon_1_volumes_attach_status, anon_1.volumes_migration_status AS anon_1_volumes_migration_status, anon_1.volumes_scheduled_at AS anon_1_volumes_scheduled_at, anon_1.volumes_launched_at AS anon_1_volumes_launched_at, anon_1.volumes_terminated_at AS anon_1_volumes_terminated_at, anon_1.volumes_display_name AS anon_1_volumes_display_name, anon_1.volumes_display_description AS anon_1_volumes_display_description, anon_1.volumes_provider_location AS anon_1_volumes_provider_location, anon_1.volumes_provider_auth AS anon_1_volumes_provider_auth, anon_1.volumes_provider_geometry AS anon_1_volumes_provider_geometry, anon_1.volumes_provider_id AS anon_1_volumes_provider_id, anon_1.volumes_volume_type_id AS anon_1_volumes_volume_type_id, anon_1.volumes_source_volid AS anon_1_volumes_source_volid, anon_1.volumes_encryption_key_id AS anon_1_volumes_encryption_key_id, anon_1.volumes_consistencygroup_id AS anon_1_volumes_consistencygroup_id, anon_1.volumes_bootable AS anon_1_volumes_bootable, anon_1.volumes_multiattach AS anon_1_volumes_multiattach, anon_1.volumes_replication_status AS anon_1_volumes_replication_status, anon_1.volumes_replication_extended_status AS anon_1_volumes_replication_extended_status, anon_1.volumes_replication_driver_data AS anon_1_volumes_replication_driver_data, anon_1.volumes_previous_status AS anon_1_volumes_previous_status, consistencygroups_1.created_at AS consistencygroups_1_created_at, consistencygroups_1.updated_at AS consistencygroups_1_updated_at, consistencygroups_1.deleted_at AS consistencygroups_1_deleted_at, consistencygroups_1.deleted AS consistencygroups_1_deleted, consistencygroups_1.id AS consistencygroups_1_id, consistencygroups_1.user_id AS consistencygroups_1_user_id, consistencygroups_1.project_id AS consistencygroups_1_project_id, consistencygroups_1.host AS consistencygroups_1_host, consistencygroups_1.availability_zone AS consistencygroups_1_availability_zone, consistencygroups_1.name AS consistencygroups_1_name, consistencygroups_1.description AS consistencygroups_1_description, consistencygroups_1.volume_type_id AS consistencygroups_1_volume_type_id, consistencygroups_1.status AS consistencygroups_1_status, consistencygroups_1.cgsnapshot_id AS consistencygroups_1_cgsnapshot_id, consistencygroups_1.source_cgid AS consistencygroups_1_source_cgid, volume_metadata_1.created_at AS volume_metadata_1_created_at, volume_metadata_1.updated_at AS volume_metadata_1_updated_at, volume_metadata_1.deleted_at AS volume_metadata_1_deleted_at, volume_metadata_1.deleted AS volume_metadata_1_deleted, volume_metadata_1.id AS volume_metadata_1_id, volume_metadata_1.`key` AS volume_metadata_1_key, volume_metadata_1.value AS volume_metadata_1_value, volume_metadata_1.volume_id AS volume_metadata_1_volume_id, volume_admin_metadata_1.created_at AS volume_admin_metadata_1_created_at, volume_admin_metadata_1.updated_at AS volume_admin_metadata_1_updated_at, volume_admin_metadata_1.deleted_at AS volume_admin_metadata_1_deleted_at, volume_admin_metadata_1.deleted AS volume_admin_metadata_1_deleted, volume_admin_metadata_1.id AS volume_admin_metadata_1_id, volume_admin_metadata_1.`key` AS volume_admin_metadata_1_key, volume_admin_metadata_1.value AS volume_admin_metadata_1_value, volume_admin_metadata_1.volume_id AS volume_admin_metadata_1_volume_id, volume_attachment_1.created_at AS volume_attachment_1_created_at, volume_attachment_1.updated_at AS volume_attachment_1_updated_at, volume_attachment_1.deleted_at AS volume_attachment_1_deleted_at, volume_attachment_1.deleted AS volume_attachment_1_deleted, volume_attachment_1.id AS volume_attachment_1_id, volume_attachment_1.volume_id AS volume_attachment_1_volume_id, volume_attachment_1.instance_uuid AS volume_attachment_1_instance_uuid, volume_attachment_1.attached_host AS volume_attachment_1_attached_host, volume_attachment_1.mountpoint AS volume_attachment_1_mountpoint, volume_attachment_1.attach_time AS volume_attachment_1_attach_time, volume_attachment_1.detach_time AS volume_attachment_1_detach_time, volume_attachment_1.attach_status AS volume_attachment_1_attach_status, volume_attachment_1.attach_mode AS volume_attachment_1_attach_mode, volume_types_1.created_at AS volume_types_1_created_at, volume_types_1.updated_at AS volume_types_1_updated_at, volume_types_1.deleted_at AS volume_types_1_deleted_at, volume_types_1.deleted AS volume_types_1_deleted, volume_types_1.id AS volume_types_1_id, volume_types_1.name AS volume_types_1_name, volume_types_1.description AS volume_types_1_description, volume_types_1.qos_specs_id AS volume_types_1_qos_specs_id, volume_types_1.is_public AS volume_types_1_is_public\nFROM (SELECT volumes.created_at AS volumes_created_at, volumes.updated_at AS volumes_updated_at, volumes.deleted_at AS volumes_deleted_at, volumes.deleted AS volumes_deleted, volumes.id AS volumes_id, volumes._name_id AS volumes__name_id, volumes.ec2_id AS volumes_ec2_id, volumes.user_id AS volumes_user_id, volumes.project_id AS volumes_project_id, volumes.snapshot_id AS volumes_snapshot_id, volumes.host AS volumes_host, volumes.size AS volumes_size, volumes.availability_zone AS volumes_availability_zone, volumes.status AS volumes_status, volumes.attach_status AS volumes_attach_status, volumes.migration_status AS volumes_migration_status, volumes.scheduled_at AS volumes_scheduled_at, volumes.launched_at AS volumes_launched_at, volumes.terminated_at AS volumes_terminated_at, volumes.display_name AS volumes_display_name, volumes.display_description AS volumes_display_description, volumes.provider_location AS volumes_provider_location, volumes.provider_auth AS volumes_provider_auth, volumes.provider_geometry AS volumes_provider_geometry, volumes.provider_id AS volumes_provider_id, volumes.volume_type_id AS volumes_volume_type_id, volumes.source_volid AS volumes_source_volid, volumes.encryption_key_id AS volumes_encryption_key_id, volumes.consistencygroup_id AS volumes_consistencygroup_id, volumes.bootable AS volumes_bootable, volumes.multiattach AS volumes_multiattach, volumes.replication_status AS volumes_replication_status, volumes.replication_extended_status AS volumes_replication_extended_status, volumes.replication_driver_data AS volumes_replication_driver_data, volumes.previous_status AS volumes_previous_status\nFROM volumes\nWHERE volumes.deleted = false AND (volumes.migration_status IS NULL OR (volumes.migration_status NOT LIKE 'target:%')) AND volumes.project_id = 'bfd50153a2e9476f93e33e30e922cd06' ORDER BY volumes.created_at DESC, volumes.id DESC\nLIMIT 1000) AS anon_1 LEFT OUTER JOIN consistencygroups AS consistencygroups_1 ON anon_1.volumes_consistencygroup_id = consistencygroups_1.id LEFT OUTER JOIN volume_metadata AS volume_metadata_1 ON volume_metadata_1.volume_id = anon_1.volumes_id AND volume_metadata_1.deleted = false LEFT OUTER JOIN volume_admin_metadata AS volume_admin_metadata_1 ON volume_admin_metadata_1.volume_id = anon_1.volumes_id AND volume_admin_metadata_1.deleted = false LEFT OUTER JOIN volume_attachment AS volume_attachment_1 ON volume_attachment_1.volume_id = anon_1.volumes_id AND volume_attachment_1.deleted = false LEFT OUTER JOIN volume_types AS volume_types_1 ON anon_1.volumes_volume_type_id = volume_types_1.id AND volume_types_1.deleted = false ORDER BY anon_1.volumes_created_at DESC, anon_1.volumes_id DESC"
    ],
    "db_id": "csail_stata_cinder",
    "join_keys": [],
    "gold_tables": [
      "csail_stata_cinder#sep#VOLUME_METADATA",
      "csail_stata_cinder#sep#VOLUME_TYPES",
      "csail_stata_cinder#sep#VOLUME_ADMIN_METADATA",
      "csail_stata_cinder#sep#VOLUMES",
      "csail_stata_cinder#sep#VOLUME_ATTACHMENT",
      "csail_stata_cinder#sep#CONSISTENCYGROUPS"
    ],
    "meta": {
      "features": {
        "query_table_count": 6,
        "query_column_count": 145,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 4,
        "query_window_func_count": 0,
        "query_join_count": 5
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "2ebaf9ec688e",
    "question": "Provide information (including security groups, info caches, extra data, and metadata) about the 3000 latest instances under the project bfd50153a2e9476f93e33e30e922cd06 with light in the name.",
    "sql": [
      "SELECT anon_1.instances_created_at AS anon_1_instances_created_at, anon_1.instances_updated_at AS anon_1_instances_updated_at, anon_1.instances_deleted_at AS anon_1_instances_deleted_at, anon_1.instances_deleted AS anon_1_instances_deleted, anon_1.instances_id AS anon_1_instances_id, anon_1.instances_user_id AS anon_1_instances_user_id, anon_1.instances_project_id AS anon_1_instances_project_id, anon_1.instances_image_ref AS anon_1_instances_image_ref, anon_1.instances_kernel_id AS anon_1_instances_kernel_id, anon_1.instances_ramdisk_id AS anon_1_instances_ramdisk_id, anon_1.instances_hostname AS anon_1_instances_hostname, anon_1.instances_launch_index AS anon_1_instances_launch_index, anon_1.instances_key_name AS anon_1_instances_key_name, anon_1.instances_key_data AS anon_1_instances_key_data, anon_1.instances_power_state AS anon_1_instances_power_state, anon_1.instances_vm_state AS anon_1_instances_vm_state, anon_1.instances_task_state AS anon_1_instances_task_state, anon_1.instances_memory_mb AS anon_1_instances_memory_mb, anon_1.instances_vcpus AS anon_1_instances_vcpus, anon_1.instances_root_gb AS anon_1_instances_root_gb, anon_1.instances_ephemeral_gb AS anon_1_instances_ephemeral_gb, anon_1.instances_ephemeral_key_uuid AS anon_1_instances_ephemeral_key_uuid, anon_1.instances_host AS anon_1_instances_host, anon_1.instances_node AS anon_1_instances_node, anon_1.instances_instance_type_id AS anon_1_instances_instance_type_id, anon_1.instances_user_data AS anon_1_instances_user_data, anon_1.instances_reservation_id AS anon_1_instances_reservation_id, anon_1.instances_launched_at AS anon_1_instances_launched_at, anon_1.instances_terminated_at AS anon_1_instances_terminated_at, anon_1.instances_availability_zone AS anon_1_instances_availability_zone, anon_1.instances_display_name AS anon_1_instances_display_name, anon_1.instances_display_description AS anon_1_instances_display_description, anon_1.instances_launched_on AS anon_1_instances_launched_on, anon_1.instances_locked AS anon_1_instances_locked, anon_1.instances_locked_by AS anon_1_instances_locked_by, anon_1.instances_os_type AS anon_1_instances_os_type, anon_1.instances_architecture AS anon_1_instances_architecture, anon_1.instances_vm_mode AS anon_1_instances_vm_mode, anon_1.instances_uuid AS anon_1_instances_uuid, anon_1.instances_root_device_name AS anon_1_instances_root_device_name, anon_1.instances_default_ephemeral_device AS anon_1_instances_default_ephemeral_device, anon_1.instances_default_swap_device AS anon_1_instances_default_swap_device, anon_1.instances_config_drive AS anon_1_instances_config_drive, anon_1.instances_access_ip_v4 AS anon_1_instances_access_ip_v4, anon_1.instances_access_ip_v6 AS anon_1_instances_access_ip_v6, anon_1.instances_auto_disk_config AS anon_1_instances_auto_disk_config, anon_1.instances_progress AS anon_1_instances_progress, anon_1.instances_shutdown_terminate AS anon_1_instances_shutdown_terminate, anon_1.instances_disable_terminate AS anon_1_instances_disable_terminate, anon_1.instances_cell_name AS anon_1_instances_cell_name, anon_1.instances_internal_id AS anon_1_instances_internal_id, anon_1.instances_cleaned AS anon_1_instances_cleaned, security_groups_1.created_at AS security_groups_1_created_at, security_groups_1.updated_at AS security_groups_1_updated_at, security_groups_1.deleted_at AS security_groups_1_deleted_at, security_groups_1.deleted AS security_groups_1_deleted, security_groups_1.id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, instance_extra_1.flavor AS instance_extra_1_flavor, instance_extra_1.created_at AS instance_extra_1_created_at, instance_extra_1.updated_at AS instance_extra_1_updated_at, instance_extra_1.deleted_at AS instance_extra_1_deleted_at, instance_extra_1.deleted AS instance_extra_1_deleted, instance_extra_1.id AS instance_extra_1_id, instance_extra_1.instance_uuid AS instance_extra_1_instance_uuid, instance_metadata_1.created_at AS instance_metadata_1_created_at, instance_metadata_1.updated_at AS instance_metadata_1_updated_at, instance_metadata_1.deleted_at AS instance_metadata_1_deleted_at, instance_metadata_1.deleted AS instance_metadata_1_deleted, instance_metadata_1.id AS instance_metadata_1_id, instance_metadata_1.`key` AS instance_metadata_1_key, instance_metadata_1.value AS instance_metadata_1_value, instance_metadata_1.instance_uuid AS instance_metadata_1_instance_uuid\nFROM (SELECT instances.created_at AS instances_created_at, instances.updated_at AS instances_updated_at, instances.deleted_at AS instances_deleted_at, instances.deleted AS instances_deleted, instances.id AS instances_id, instances.user_id AS instances_user_id, instances.project_id AS instances_project_id, instances.image_ref AS instances_image_ref, instances.kernel_id AS instances_kernel_id, instances.ramdisk_id AS instances_ramdisk_id, instances.hostname AS instances_hostname, instances.launch_index AS instances_launch_index, instances.key_name AS instances_key_name, instances.key_data AS instances_key_data, instances.power_state AS instances_power_state, instances.vm_state AS instances_vm_state, instances.task_state AS instances_task_state, instances.memory_mb AS instances_memory_mb, instances.vcpus AS instances_vcpus, instances.root_gb AS instances_root_gb, instances.ephemeral_gb AS instances_ephemeral_gb, instances.ephemeral_key_uuid AS instances_ephemeral_key_uuid, instances.host AS instances_host, instances.node AS instances_node, instances.instance_type_id AS instances_instance_type_id, instances.user_data AS instances_user_data, instances.reservation_id AS instances_reservation_id, instances.launched_at AS instances_launched_at, instances.terminated_at AS instances_terminated_at, instances.availability_zone AS instances_availability_zone, instances.display_name AS instances_display_name, instances.display_description AS instances_display_description, instances.launched_on AS instances_launched_on, instances.locked AS instances_locked, instances.locked_by AS instances_locked_by, instances.os_type AS instances_os_type, instances.architecture AS instances_architecture, instances.vm_mode AS instances_vm_mode, instances.uuid AS instances_uuid, instances.root_device_name AS instances_root_device_name, instances.default_ephemeral_device AS instances_default_ephemeral_device, instances.default_swap_device AS instances_default_swap_device, instances.config_drive AS instances_config_drive, instances.access_ip_v4 AS instances_access_ip_v4, instances.access_ip_v6 AS instances_access_ip_v6, instances.auto_disk_config AS instances_auto_disk_config, instances.progress AS instances_progress, instances.shutdown_terminate AS instances_shutdown_terminate, instances.disable_terminate AS instances_disable_terminate, instances.cell_name AS instances_cell_name, instances.internal_id AS instances_internal_id, instances.cleaned AS instances_cleaned\nFROM instances\nWHERE instances.deleted = 0 AND (instances.vm_state != 'soft-delete' OR instances.vm_state IS NULL) AND instances.project_id = 'bfd50153a2e9476f93e33e30e922cd06' AND (instances.display_name REGEXP 'light') ORDER BY instances.created_at DESC, instances.id DESC\nLIMIT 3000) AS anon_1 LEFT OUTER JOIN (security_group_instance_association AS security_group_instance_association_1 INNER JOIN security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = 0 AND security_groups_1.deleted = 0) ON security_group_instance_association_1.instance_uuid = anon_1.instances_uuid AND anon_1.instances_deleted = 0 LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = anon_1.instances_uuid LEFT OUTER JOIN instance_extra AS instance_extra_1 ON instance_extra_1.instance_uuid = anon_1.instances_uuid LEFT OUTER JOIN instance_metadata AS instance_metadata_1 ON instance_metadata_1.instance_uuid = anon_1.instances_uuid AND instance_metadata_1.deleted = 0 ORDER BY anon_1.instances_created_at DESC, anon_1.instances_id DESC"
    ],
    "db_id": "csail_stata_nova",
    "join_keys": [
      [
        "SECURITY_GROUP_INSTANCE_ASSOCIATION.SECURITY_GROUP_ID",
        "SECURITY_GROUPS.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_nova#sep#INSTANCE_INFO_CACHES",
      "csail_stata_nova#sep#INSTANCE_EXTRA",
      "csail_stata_nova#sep#SECURITY_GROUP_INSTANCE_ASSOCIATION",
      "csail_stata_nova#sep#INSTANCE_METADATA",
      "csail_stata_nova#sep#SECURITY_GROUPS",
      "csail_stata_nova#sep#INSTANCES"
    ],
    "meta": {
      "features": {
        "query_table_count": 6,
        "query_column_count": 158,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 4,
        "query_window_func_count": 0,
        "query_join_count": 5
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "044c43c5a1d5",
    "question": "Provide information about networks under the project 8333a6a4e59343eda8957cd61da9f0e6.",
    "sql": [
      "SELECT networks.tenant_id AS networks_tenant_id, networks.id AS networks_id, networks.name AS networks_name, networks.status AS networks_status, networks.admin_state_up AS networks_admin_state_up, networks.mtu AS networks_mtu, networks.vlan_transparent AS networks_vlan_transparent, networks.availability_zone_hints AS networks_availability_zone_hints, networks.standard_attr_id AS networks_standard_attr_id, agents_1.id AS agents_1_id, agents_1.agent_type AS agents_1_agent_type, agents_1.`binary` AS agents_1_binary, agents_1.topic AS agents_1_topic, agents_1.host AS agents_1_host, agents_1.availability_zone AS agents_1_availability_zone, agents_1.admin_state_up AS agents_1_admin_state_up, agents_1.created_at AS agents_1_created_at, agents_1.started_at AS agents_1_started_at, agents_1.heartbeat_timestamp AS agents_1_heartbeat_timestamp, agents_1.description AS agents_1_description, agents_1.configurations AS agents_1_configurations, agents_1.resource_versions AS agents_1_resource_versions, agents_1.`load` AS agents_1_load, standardattributes_1.created_at AS standardattributes_1_created_at, standardattributes_1.updated_at AS standardattributes_1_updated_at, standardattributes_1.id AS standardattributes_1_id, standardattributes_1.resource_type AS standardattributes_1_resource_type, standardattributes_1.description AS standardattributes_1_description, tags_1.standard_attr_id AS tags_1_standard_attr_id, tags_1.tag AS tags_1_tag, externalnetworks_1.network_id AS externalnetworks_1_network_id, externalnetworks_1.is_default AS externalnetworks_1_is_default, qos_network_policy_bindings_1.policy_id AS qos_network_policy_bindings_1_policy_id, qos_network_policy_bindings_1.network_id AS qos_network_policy_bindings_1_network_id, networksecuritybindings_1.network_id AS networksecuritybindings_1_network_id, networksecuritybindings_1.port_security_enabled AS networksecuritybindings_1_port_security_enabled, networkdnsdomains_1.network_id AS networkdnsdomains_1_network_id, networkdnsdomains_1.dns_domain AS networkdnsdomains_1_dns_domain FROM networks LEFT OUTER JOIN externalnetworks ON networks.id = externalnetworks.network_id LEFT OUTER JOIN (networkdhcpagentbindings AS networkdhcpagentbindings_1 INNER JOIN agents AS agents_1 ON agents_1.id = networkdhcpagentbindings_1.dhcp_agent_id) ON networks.id = networkdhcpagentbindings_1.network_id LEFT OUTER JOIN standardattributes AS standardattributes_1 ON standardattributes_1.id = networks.standard_attr_id LEFT OUTER JOIN tags AS tags_1 ON standardattributes_1.id = tags_1.standard_attr_id LEFT OUTER JOIN externalnetworks AS externalnetworks_1 ON networks.id = externalnetworks_1.network_id LEFT OUTER JOIN qos_network_policy_bindings AS qos_network_policy_bindings_1 ON networks.id = qos_network_policy_bindings_1.network_id LEFT OUTER JOIN networksecuritybindings AS networksecuritybindings_1 ON networks.id = networksecuritybindings_1.network_id LEFT OUTER JOIN networkdnsdomains AS networkdnsdomains_1 ON networks.id = networkdnsdomains_1.network_id WHERE networks.tenant_id IN ('8333a6a4e59343eda8957cd61da9f0e6') AND networks.id NOT IN (SELECT networkrbacs.object_id AS networkrbacs_object_id FROM networkrbacs WHERE networkrbacs.action = 'access_as_shared' AND (networkrbacs.target_tenant = '*' OR networkrbacs.target_tenant = '9f13bf11e06e4d81b44c8c3e62d4362b'))"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "NETWORKS.ID",
        "EXTERNALNETWORKS.NETWORK_ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "NETWORKS.STANDARD_ATTR_ID"
      ],
      [
        "TAGS.STANDARD_ATTR_ID",
        "STANDARDATTRIBUTES.ID"
      ],
      [
        "EXTERNALNETWORKS.NETWORK_ID",
        "NETWORKS.ID"
      ],
      [
        "NETWORKS.ID",
        "QOS_NETWORK_POLICY_BINDINGS.NETWORK_ID"
      ],
      [
        "NETWORKSECURITYBINDINGS.NETWORK_ID",
        "NETWORKS.ID"
      ],
      [
        "NETWORKS.ID",
        "NETWORKDNSDOMAINS.NETWORK_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#NETWORKRBACS",
      "csail_stata_neutron#sep#NETWORKDHCPAGENTBINDINGS",
      "csail_stata_neutron#sep#AGENTS",
      "csail_stata_neutron#sep#NETWORKS",
      "csail_stata_neutron#sep#EXTERNALNETWORKS",
      "csail_stata_neutron#sep#STANDARDATTRIBUTES",
      "csail_stata_neutron#sep#QOS_NETWORK_POLICY_BINDINGS",
      "csail_stata_neutron#sep#NETWORKDNSDOMAINS",
      "csail_stata_neutron#sep#TAGS",
      "csail_stata_neutron#sep#NETWORKSECURITYBINDINGS"
    ],
    "meta": {
      "features": {
        "query_table_count": 11,
        "query_column_count": 62,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 0,
        "query_window_func_count": 0,
        "query_join_count": 9
      },
      "categories": [
        "has_join",
        "has_nested_query"
      ]
    }
  },
  {
    "id": "bb64448d5127",
    "question": "Provide information about the 1000 latest volumes under the project 8083447923734c679b261219b815d3bc.",
    "sql": [
      "SELECT anon_1.volumes_created_at AS anon_1_volumes_created_at, anon_1.volumes_updated_at AS anon_1_volumes_updated_at, anon_1.volumes_deleted_at AS anon_1_volumes_deleted_at, anon_1.volumes_deleted AS anon_1_volumes_deleted, anon_1.volumes_id AS anon_1_volumes_id, anon_1.volumes__name_id AS anon_1_volumes__name_id, anon_1.volumes_ec2_id AS anon_1_volumes_ec2_id, anon_1.volumes_user_id AS anon_1_volumes_user_id, anon_1.volumes_project_id AS anon_1_volumes_project_id, anon_1.volumes_snapshot_id AS anon_1_volumes_snapshot_id, anon_1.volumes_host AS anon_1_volumes_host, anon_1.volumes_size AS anon_1_volumes_size, anon_1.volumes_availability_zone AS anon_1_volumes_availability_zone, anon_1.volumes_status AS anon_1_volumes_status, anon_1.volumes_attach_status AS anon_1_volumes_attach_status, anon_1.volumes_migration_status AS anon_1_volumes_migration_status, anon_1.volumes_scheduled_at AS anon_1_volumes_scheduled_at, anon_1.volumes_launched_at AS anon_1_volumes_launched_at, anon_1.volumes_terminated_at AS anon_1_volumes_terminated_at, anon_1.volumes_display_name AS anon_1_volumes_display_name, anon_1.volumes_display_description AS anon_1_volumes_display_description, anon_1.volumes_provider_location AS anon_1_volumes_provider_location, anon_1.volumes_provider_auth AS anon_1_volumes_provider_auth, anon_1.volumes_provider_geometry AS anon_1_volumes_provider_geometry, anon_1.volumes_provider_id AS anon_1_volumes_provider_id, anon_1.volumes_volume_type_id AS anon_1_volumes_volume_type_id, anon_1.volumes_source_volid AS anon_1_volumes_source_volid, anon_1.volumes_encryption_key_id AS anon_1_volumes_encryption_key_id, anon_1.volumes_consistencygroup_id AS anon_1_volumes_consistencygroup_id, anon_1.volumes_bootable AS anon_1_volumes_bootable, anon_1.volumes_multiattach AS anon_1_volumes_multiattach, anon_1.volumes_replication_status AS anon_1_volumes_replication_status, anon_1.volumes_replication_extended_status AS anon_1_volumes_replication_extended_status, anon_1.volumes_replication_driver_data AS anon_1_volumes_replication_driver_data, anon_1.volumes_previous_status AS anon_1_volumes_previous_status, consistencygroups_1.created_at AS consistencygroups_1_created_at, consistencygroups_1.updated_at AS consistencygroups_1_updated_at, consistencygroups_1.deleted_at AS consistencygroups_1_deleted_at, consistencygroups_1.deleted AS consistencygroups_1_deleted, consistencygroups_1.id AS consistencygroups_1_id, consistencygroups_1.user_id AS consistencygroups_1_user_id, consistencygroups_1.project_id AS consistencygroups_1_project_id, consistencygroups_1.host AS consistencygroups_1_host, consistencygroups_1.availability_zone AS consistencygroups_1_availability_zone, consistencygroups_1.name AS consistencygroups_1_name, consistencygroups_1.description AS consistencygroups_1_description, consistencygroups_1.volume_type_id AS consistencygroups_1_volume_type_id, consistencygroups_1.status AS consistencygroups_1_status, consistencygroups_1.cgsnapshot_id AS consistencygroups_1_cgsnapshot_id, consistencygroups_1.source_cgid AS consistencygroups_1_source_cgid, volume_metadata_1.created_at AS volume_metadata_1_created_at, volume_metadata_1.updated_at AS volume_metadata_1_updated_at, volume_metadata_1.deleted_at AS volume_metadata_1_deleted_at, volume_metadata_1.deleted AS volume_metadata_1_deleted, volume_metadata_1.id AS volume_metadata_1_id, volume_metadata_1.`key` AS volume_metadata_1_key, volume_metadata_1.value AS volume_metadata_1_value, volume_metadata_1.volume_id AS volume_metadata_1_volume_id, volume_attachment_1.created_at AS volume_attachment_1_created_at, volume_attachment_1.updated_at AS volume_attachment_1_updated_at, volume_attachment_1.deleted_at AS volume_attachment_1_deleted_at, volume_attachment_1.deleted AS volume_attachment_1_deleted, volume_attachment_1.id AS volume_attachment_1_id, volume_attachment_1.volume_id AS volume_attachment_1_volume_id, volume_attachment_1.instance_uuid AS volume_attachment_1_instance_uuid, volume_attachment_1.attached_host AS volume_attachment_1_attached_host, volume_attachment_1.mountpoint AS volume_attachment_1_mountpoint, volume_attachment_1.attach_time AS volume_attachment_1_attach_time, volume_attachment_1.detach_time AS volume_attachment_1_detach_time, volume_attachment_1.attach_status AS volume_attachment_1_attach_status, volume_attachment_1.attach_mode AS volume_attachment_1_attach_mode, volume_admin_metadata_1.created_at AS volume_admin_metadata_1_created_at, volume_admin_metadata_1.updated_at AS volume_admin_metadata_1_updated_at, volume_admin_metadata_1.deleted_at AS volume_admin_metadata_1_deleted_at, volume_admin_metadata_1.deleted AS volume_admin_metadata_1_deleted, volume_admin_metadata_1.id AS volume_admin_metadata_1_id, volume_admin_metadata_1.`key` AS volume_admin_metadata_1_key, volume_admin_metadata_1.value AS volume_admin_metadata_1_value, volume_admin_metadata_1.volume_id AS volume_admin_metadata_1_volume_id, volume_types_1.created_at AS volume_types_1_created_at, volume_types_1.updated_at AS volume_types_1_updated_at, volume_types_1.deleted_at AS volume_types_1_deleted_at, volume_types_1.deleted AS volume_types_1_deleted, volume_types_1.id AS volume_types_1_id, volume_types_1.name AS volume_types_1_name, volume_types_1.description AS volume_types_1_description, volume_types_1.qos_specs_id AS volume_types_1_qos_specs_id, volume_types_1.is_public AS volume_types_1_is_public FROM (SELECT volumes.created_at AS volumes_created_at, volumes.updated_at AS volumes_updated_at, volumes.deleted_at AS volumes_deleted_at, volumes.deleted AS volumes_deleted, volumes.id AS volumes_id, volumes._name_id AS volumes__name_id, volumes.ec2_id AS volumes_ec2_id, volumes.user_id AS volumes_user_id, volumes.project_id AS volumes_project_id, volumes.snapshot_id AS volumes_snapshot_id, volumes.host AS volumes_host, volumes.size AS volumes_size, volumes.availability_zone AS volumes_availability_zone, volumes.status AS volumes_status, volumes.attach_status AS volumes_attach_status, volumes.migration_status AS volumes_migration_status, volumes.scheduled_at AS volumes_scheduled_at, volumes.launched_at AS volumes_launched_at, volumes.terminated_at AS volumes_terminated_at, volumes.display_name AS volumes_display_name, volumes.display_description AS volumes_display_description, volumes.provider_location AS volumes_provider_location, volumes.provider_auth AS volumes_provider_auth, volumes.provider_geometry AS volumes_provider_geometry, volumes.provider_id AS volumes_provider_id, volumes.volume_type_id AS volumes_volume_type_id, volumes.source_volid AS volumes_source_volid, volumes.encryption_key_id AS volumes_encryption_key_id, volumes.consistencygroup_id AS volumes_consistencygroup_id, volumes.bootable AS volumes_bootable, volumes.multiattach AS volumes_multiattach, volumes.replication_status AS volumes_replication_status, volumes.replication_extended_status AS volumes_replication_extended_status, volumes.replication_driver_data AS volumes_replication_driver_data, volumes.previous_status AS volumes_previous_status FROM volumes WHERE volumes.deleted = false AND (volumes.migration_status IS NULL OR (volumes.migration_status NOT LIKE 'target:%')) AND volumes.project_id = '8083447923734c679b261219b815d3bc' ORDER BY volumes.created_at DESC, volumes.id DESC LIMIT 1000) AS anon_1 LEFT OUTER JOIN consistencygroups AS consistencygroups_1 ON anon_1.volumes_consistencygroup_id = consistencygroups_1.id LEFT OUTER JOIN volume_metadata AS volume_metadata_1 ON volume_metadata_1.volume_id = anon_1.volumes_id AND volume_metadata_1.deleted = false LEFT OUTER JOIN volume_attachment AS volume_attachment_1 ON volume_attachment_1.volume_id = anon_1.volumes_id AND volume_attachment_1.deleted = false LEFT OUTER JOIN volume_admin_metadata AS volume_admin_metadata_1 ON volume_admin_metadata_1.volume_id = anon_1.volumes_id AND volume_admin_metadata_1.deleted = false LEFT OUTER JOIN volume_types AS volume_types_1 ON anon_1.volumes_volume_type_id = volume_types_1.id AND volume_types_1.deleted = false ORDER BY anon_1.volumes_created_at DESC, anon_1.volumes_id DESC"
    ],
    "db_id": "csail_stata_cinder",
    "join_keys": [],
    "gold_tables": [
      "csail_stata_cinder#sep#VOLUME_METADATA",
      "csail_stata_cinder#sep#VOLUME_TYPES",
      "csail_stata_cinder#sep#VOLUME_ADMIN_METADATA",
      "csail_stata_cinder#sep#VOLUMES",
      "csail_stata_cinder#sep#VOLUME_ATTACHMENT",
      "csail_stata_cinder#sep#CONSISTENCYGROUPS"
    ],
    "meta": {
      "features": {
        "query_table_count": 6,
        "query_column_count": 145,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 4,
        "query_window_func_count": 0,
        "query_join_count": 5
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "97aa8428a659",
    "question": "Provide information about network that include subnet 388ee748-7b3d-4049-99b4-7e582937bbd4.",
    "sql": [
      "SELECT networks.tenant_id AS networks_tenant_id, networks.id AS networks_id, networks.name AS networks_name, networks.status AS networks_status, networks.admin_state_up AS networks_admin_state_up, networks.mtu AS networks_mtu, networks.vlan_transparent AS networks_vlan_transparent, networks.availability_zone_hints AS networks_availability_zone_hints, networks.standard_attr_id AS networks_standard_attr_id, anon_1.subnets_network_id AS anon_1_subnets_network_id, agents_1.id AS agents_1_id, agents_1.agent_type AS agents_1_agent_type, agents_1.`binary` AS agents_1_binary, agents_1.topic AS agents_1_topic, agents_1.host AS agents_1_host, agents_1.availability_zone AS agents_1_availability_zone, agents_1.admin_state_up AS agents_1_admin_state_up, agents_1.created_at AS agents_1_created_at, agents_1.started_at AS agents_1_started_at, agents_1.heartbeat_timestamp AS agents_1_heartbeat_timestamp, agents_1.description AS agents_1_description, agents_1.configurations AS agents_1_configurations, agents_1.resource_versions AS agents_1_resource_versions, agents_1.`load` AS agents_1_load, standardattributes_1.created_at AS standardattributes_1_created_at, standardattributes_1.updated_at AS standardattributes_1_updated_at, standardattributes_1.id AS standardattributes_1_id, standardattributes_1.resource_type AS standardattributes_1_resource_type, standardattributes_1.description AS standardattributes_1_description, tags_1.standard_attr_id AS tags_1_standard_attr_id, tags_1.tag AS tags_1_tag, externalnetworks_1.network_id AS externalnetworks_1_network_id, externalnetworks_1.is_default AS externalnetworks_1_is_default, qos_network_policy_bindings_1.policy_id AS qos_network_policy_bindings_1_policy_id, qos_network_policy_bindings_1.network_id AS qos_network_policy_bindings_1_network_id, networksecuritybindings_1.network_id AS networksecuritybindings_1_network_id, networksecuritybindings_1.port_security_enabled AS networksecuritybindings_1_port_security_enabled, networkdnsdomains_1.network_id AS networkdnsdomains_1_network_id, networkdnsdomains_1.dns_domain AS networkdnsdomains_1_dns_domain FROM (SELECT DISTINCT subnets.network_id AS subnets_network_id FROM subnets WHERE subnets.id IN ('388ee748-7b3d-4049-99b4-7e582937bbd4')) AS anon_1 INNER JOIN networks ON networks.id = anon_1.subnets_network_id LEFT OUTER JOIN (networkdhcpagentbindings AS networkdhcpagentbindings_1 INNER JOIN agents AS agents_1 ON agents_1.id = networkdhcpagentbindings_1.dhcp_agent_id) ON networks.id = networkdhcpagentbindings_1.network_id LEFT OUTER JOIN standardattributes AS standardattributes_1 ON standardattributes_1.id = networks.standard_attr_id LEFT OUTER JOIN tags AS tags_1 ON standardattributes_1.id = tags_1.standard_attr_id LEFT OUTER JOIN externalnetworks AS externalnetworks_1 ON networks.id = externalnetworks_1.network_id LEFT OUTER JOIN qos_network_policy_bindings AS qos_network_policy_bindings_1 ON networks.id = qos_network_policy_bindings_1.network_id LEFT OUTER JOIN networksecuritybindings AS networksecuritybindings_1 ON networks.id = networksecuritybindings_1.network_id LEFT OUTER JOIN networkdnsdomains AS networkdnsdomains_1 ON networks.id = networkdnsdomains_1.network_id ORDER BY anon_1.subnets_network_id"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "STANDARDATTRIBUTES.ID",
        "NETWORKS.STANDARD_ATTR_ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "TAGS.STANDARD_ATTR_ID"
      ],
      [
        "EXTERNALNETWORKS.NETWORK_ID",
        "NETWORKS.ID"
      ],
      [
        "NETWORKS.ID",
        "QOS_NETWORK_POLICY_BINDINGS.NETWORK_ID"
      ],
      [
        "NETWORKSECURITYBINDINGS.NETWORK_ID",
        "NETWORKS.ID"
      ],
      [
        "NETWORKDNSDOMAINS.NETWORK_ID",
        "NETWORKS.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#NETWORKDHCPAGENTBINDINGS",
      "csail_stata_neutron#sep#SUBNETS",
      "csail_stata_neutron#sep#AGENTS",
      "csail_stata_neutron#sep#NETWORKS",
      "csail_stata_neutron#sep#STANDARDATTRIBUTES",
      "csail_stata_neutron#sep#EXTERNALNETWORKS",
      "csail_stata_neutron#sep#QOS_NETWORK_POLICY_BINDINGS",
      "csail_stata_neutron#sep#NETWORKDNSDOMAINS",
      "csail_stata_neutron#sep#TAGS",
      "csail_stata_neutron#sep#NETWORKSECURITYBINDINGS"
    ],
    "meta": {
      "features": {
        "query_table_count": 10,
        "query_column_count": 60,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 9
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "075b5bcd4c35",
    "question": "Provide information about network access control for network that includes subnet 76123b94-2ae9-40c4-a4c6-03ee98d081d9.",
    "sql": [
      "SELECT networkrbacs.tenant_id AS networkrbacs_tenant_id, networkrbacs.id AS networkrbacs_id, networkrbacs.target_tenant AS networkrbacs_target_tenant, networkrbacs.action AS networkrbacs_action, networkrbacs.object_id AS networkrbacs_object_id, networks_1.id AS networks_1_id FROM (SELECT DISTINCT subnets.network_id AS subnets_network_id FROM subnets WHERE subnets.id IN ('76123b94-2ae9-40c4-a4c6-03ee98d081d9', '76123b94-2ae9-40c4-a4c6-03ee98d081d9', '76123b94-2ae9-40c4-a4c6-03ee98d081d9')) AS anon_1 INNER JOIN networks AS networks_1 ON networks_1.id = anon_1.subnets_network_id INNER JOIN networkrbacs ON networks_1.id = networkrbacs.object_id ORDER BY networks_1.id"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "NETWORKS.ID",
        "NETWORKRBACS.OBJECT_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#NETWORKS",
      "csail_stata_neutron#sep#NETWORKRBACS",
      "csail_stata_neutron#sep#SUBNETS"
    ],
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 13,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "f0d35bfd8c27",
    "question": "Provide information about subnets associated with network b3d6c27a-a9bb-4521-b5de-4d65eb7490dc.",
    "sql": [
      "SELECT subnets.tenant_id AS subnets_tenant_id, subnets.id AS subnets_id, subnets.name AS subnets_name, subnets.network_id AS subnets_network_id, subnets.subnetpool_id AS subnets_subnetpool_id, subnets.ip_version AS subnets_ip_version, subnets.cidr AS subnets_cidr, subnets.gateway_ip AS subnets_gateway_ip, subnets.enable_dhcp AS subnets_enable_dhcp, subnets.ipv6_ra_mode AS subnets_ipv6_ra_mode, subnets.ipv6_address_mode AS subnets_ipv6_address_mode, subnets.standard_attr_id AS subnets_standard_attr_id, anon_1.networks_id AS anon_1_networks_id, subnetpoolprefixes_1.cidr AS subnetpoolprefixes_1_cidr, subnetpoolprefixes_1.subnetpool_id AS subnetpoolprefixes_1_subnetpool_id, standardattributes_1.created_at AS standardattributes_1_created_at, standardattributes_1.updated_at AS standardattributes_1_updated_at, standardattributes_1.id AS standardattributes_1_id, standardattributes_1.resource_type AS standardattributes_1_resource_type, standardattributes_1.description AS standardattributes_1_description, tags_1.standard_attr_id AS tags_1_standard_attr_id, tags_1.tag AS tags_1_tag, subnetpools_1.tenant_id AS subnetpools_1_tenant_id, subnetpools_1.id AS subnetpools_1_id, subnetpools_1.name AS subnetpools_1_name, subnetpools_1.ip_version AS subnetpools_1_ip_version, subnetpools_1.default_prefixlen AS subnetpools_1_default_prefixlen, subnetpools_1.min_prefixlen AS subnetpools_1_min_prefixlen, subnetpools_1.max_prefixlen AS subnetpools_1_max_prefixlen, subnetpools_1.shared AS subnetpools_1_shared, subnetpools_1.is_default AS subnetpools_1_is_default, subnetpools_1.default_quota AS subnetpools_1_default_quota, subnetpools_1.hash AS subnetpools_1_hash, subnetpools_1.address_scope_id AS subnetpools_1_address_scope_id, subnetpools_1.standard_attr_id AS subnetpools_1_standard_attr_id, ipallocationpools_1.id AS ipallocationpools_1_id, ipallocationpools_1.subnet_id AS ipallocationpools_1_subnet_id, ipallocationpools_1.first_ip AS ipallocationpools_1_first_ip, ipallocationpools_1.last_ip AS ipallocationpools_1_last_ip, dnsnameservers_1.address AS dnsnameservers_1_address, dnsnameservers_1.subnet_id AS dnsnameservers_1_subnet_id, dnsnameservers_1.`order` AS dnsnameservers_1_order, subnetroutes_1.destination AS subnetroutes_1_destination, subnetroutes_1.nexthop AS subnetroutes_1_nexthop, subnetroutes_1.subnet_id AS subnetroutes_1_subnet_id, standardattributes_2.created_at AS standardattributes_2_created_at, standardattributes_2.updated_at AS standardattributes_2_updated_at, standardattributes_2.id AS standardattributes_2_id, standardattributes_2.resource_type AS standardattributes_2_resource_type, standardattributes_2.description AS standardattributes_2_description, tags_2.standard_attr_id AS tags_2_standard_attr_id, tags_2.tag AS tags_2_tag FROM (SELECT networks.id AS networks_id FROM networks LEFT OUTER JOIN externalnetworks ON networks.id = externalnetworks.network_id WHERE networks.id IN ('b3d6c27a-a9bb-4521-b5de-4d65eb7490dc')) AS anon_1 INNER JOIN subnets ON anon_1.networks_id = subnets.network_id LEFT OUTER JOIN subnetpools AS subnetpools_1 ON subnets.subnetpool_id = subnetpools_1.id LEFT OUTER JOIN subnetpoolprefixes AS subnetpoolprefixes_1 ON subnetpools_1.id = subnetpoolprefixes_1.subnetpool_id LEFT OUTER JOIN standardattributes AS standardattributes_1 ON standardattributes_1.id = subnetpools_1.standard_attr_id LEFT OUTER JOIN tags AS tags_1 ON standardattributes_1.id = tags_1.standard_attr_id LEFT OUTER JOIN ipallocationpools AS ipallocationpools_1 ON subnets.id = ipallocationpools_1.subnet_id LEFT OUTER JOIN dnsnameservers AS dnsnameservers_1 ON subnets.id = dnsnameservers_1.subnet_id LEFT OUTER JOIN subnetroutes AS subnetroutes_1 ON subnets.id = subnetroutes_1.subnet_id LEFT OUTER JOIN standardattributes AS standardattributes_2 ON standardattributes_2.id = subnets.standard_attr_id LEFT OUTER JOIN tags AS tags_2 ON standardattributes_2.id = tags_2.standard_attr_id ORDER BY anon_1.networks_id, dnsnameservers_1.`order`"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "EXTERNALNETWORKS.NETWORK_ID",
        "NETWORKS.ID"
      ],
      [
        "SUBNETS.SUBNETPOOL_ID",
        "SUBNETPOOLS.ID"
      ],
      [
        "SUBNETPOOLPREFIXES.SUBNETPOOL_ID",
        "SUBNETPOOLS.ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "SUBNETPOOLS.STANDARD_ATTR_ID"
      ],
      [
        "TAGS.STANDARD_ATTR_ID",
        "STANDARDATTRIBUTES.ID"
      ],
      [
        "IPALLOCATIONPOOLS.SUBNET_ID",
        "SUBNETS.ID"
      ],
      [
        "DNSNAMESERVERS.SUBNET_ID",
        "SUBNETS.ID"
      ],
      [
        "SUBNETROUTES.SUBNET_ID",
        "SUBNETS.ID"
      ],
      [
        "SUBNETS.STANDARD_ATTR_ID",
        "STANDARDATTRIBUTES.ID"
      ],
      [
        "TAGS.STANDARD_ATTR_ID",
        "STANDARDATTRIBUTES.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#IPALLOCATIONPOOLS",
      "csail_stata_neutron#sep#SUBNETPOOLS",
      "csail_stata_neutron#sep#SUBNETPOOLPREFIXES",
      "csail_stata_neutron#sep#SUBNETS",
      "csail_stata_neutron#sep#DNSNAMESERVERS",
      "csail_stata_neutron#sep#NETWORKS",
      "csail_stata_neutron#sep#STANDARDATTRIBUTES",
      "csail_stata_neutron#sep#EXTERNALNETWORKS",
      "csail_stata_neutron#sep#SUBNETROUTES",
      "csail_stata_neutron#sep#TAGS"
    ],
    "meta": {
      "features": {
        "query_table_count": 12,
        "query_column_count": 78,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 2,
        "query_window_func_count": 0,
        "query_join_count": 11
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "a4bd5e45f4af",
    "question": "Provide information about subnet access control for subnets in network b3d6c27a-a9bb-4521-b5de-4d65eb7490dc.",
    "sql": [
      "SELECT networkrbacs.tenant_id AS networkrbacs_tenant_id, networkrbacs.id AS networkrbacs_id, networkrbacs.target_tenant AS networkrbacs_target_tenant, networkrbacs.action AS networkrbacs_action, networkrbacs.object_id AS networkrbacs_object_id, subnets_1.network_id AS subnets_1_network_id FROM (SELECT networks.id AS networks_id FROM networks LEFT OUTER JOIN externalnetworks ON networks.id = externalnetworks.network_id WHERE networks.id IN ('b3d6c27a-a9bb-4521-b5de-4d65eb7490dc')) AS anon_1 INNER JOIN subnets AS subnets_1 ON anon_1.networks_id = subnets_1.network_id INNER JOIN networkrbacs ON subnets_1.network_id = networkrbacs.object_id ORDER BY subnets_1.network_id"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "NETWORKS.ID",
        "EXTERNALNETWORKS.NETWORK_ID"
      ],
      [
        "SUBNETS.NETWORK_ID",
        "NETWORKRBACS.OBJECT_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#NETWORKRBACS",
      "csail_stata_neutron#sep#EXTERNALNETWORKS",
      "csail_stata_neutron#sep#SUBNETS",
      "csail_stata_neutron#sep#NETWORKS"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 15,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "85fa3dd55fea",
    "question": "Provide information about network access control for network that includes subnet 16eaae8c-1920-4b8b-8765-f149dde8a1a6.",
    "sql": [
      "SELECT networkrbacs.tenant_id AS networkrbacs_tenant_id, networkrbacs.id AS networkrbacs_id, networkrbacs.target_tenant AS networkrbacs_target_tenant, networkrbacs.action AS networkrbacs_action, networkrbacs.object_id AS networkrbacs_object_id, networks_1.id AS networks_1_id FROM (SELECT DISTINCT subnets.network_id AS subnets_network_id FROM subnets WHERE subnets.id IN ('16eaae8c-1920-4b8b-8765-f149dde8a1a6')) AS anon_1 INNER JOIN networks AS networks_1 ON networks_1.id = anon_1.subnets_network_id INNER JOIN networkrbacs ON networks_1.id = networkrbacs.object_id ORDER BY networks_1.id"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "NETWORKS.ID",
        "NETWORKRBACS.OBJECT_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#NETWORKS",
      "csail_stata_neutron#sep#NETWORKRBACS",
      "csail_stata_neutron#sep#SUBNETS"
    ],
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 13,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "d69059581736",
    "question": "Provide information about network access control for network 0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d.",
    "sql": [
      "SELECT networkrbacs.tenant_id AS networkrbacs_tenant_id, networkrbacs.id AS networkrbacs_id, networkrbacs.target_tenant AS networkrbacs_target_tenant, networkrbacs.action AS networkrbacs_action, networkrbacs.object_id AS networkrbacs_object_id, anon_1.networks_id AS anon_1_networks_id FROM (SELECT networks.id AS networks_id FROM networks LEFT OUTER JOIN externalnetworks ON networks.id = externalnetworks.network_id WHERE networks.id IN ('0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d', '0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d', '0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d')) AS anon_1 INNER JOIN networkrbacs ON anon_1.networks_id = networkrbacs.object_id ORDER BY anon_1.networks_id"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "EXTERNALNETWORKS.NETWORK_ID",
        "NETWORKS.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#NETWORKRBACS",
      "csail_stata_neutron#sep#EXTERNALNETWORKS",
      "csail_stata_neutron#sep#NETWORKS"
    ],
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 13,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "0dcad29ea54f",
    "question": "Provide information about federated user 945fa0ad0137481cac5ef83a0b94b1b9.",
    "sql": [
      "SELECT federated_user.id AS federated_user_id, federated_user.user_id AS federated_user_user_id, federated_user.idp_id AS federated_user_idp_id, federated_user.protocol_id AS federated_user_protocol_id, federated_user.unique_id AS federated_user_unique_id, federated_user.display_name AS federated_user_display_name, anon_1.user_id AS anon_1_user_id FROM (SELECT user.id AS user_id FROM user WHERE user.id = '945fa0ad0137481cac5ef83a0b94b1b9') AS anon_1 INNER JOIN federated_user ON anon_1.user_id = federated_user.user_id ORDER BY anon_1.user_id"
    ],
    "db_id": "keystone",
    "join_keys": [],
    "gold_tables": [
      "keystone#sep#FEDERATED_USER",
      "keystone#sep#USER"
    ],
    "meta": {
      "features": {
        "query_table_count": 2,
        "query_column_count": 12,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 1
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "eaa5bfef12a3",
    "question": "Provide id information about the local user with name prime_helix.306sonic.",
    "sql": [
      "SELECT local_user.id AS local_user_id, local_user.user_id AS local_user_user_id, local_user.domain_id AS local_user_domain_id, local_user.name AS local_user_name, anon_1.user_id AS anon_1_user_id FROM (SELECT user.id AS user_id FROM user INNER JOIN local_user ON user.id = local_user.user_id WHERE local_user.name = 'prime_helix.306sonic' AND local_user.domain_id = 'default') AS anon_1 INNER JOIN local_user ON anon_1.user_id = local_user.user_id ORDER BY anon_1.user_id"
    ],
    "db_id": "keystone",
    "join_keys": [
      [
        "LOCAL_USER.USER_ID",
        "USER.ID"
      ]
    ],
    "gold_tables": [
      "keystone#sep#USER",
      "keystone#sep#LOCAL_USER"
    ],
    "meta": {
      "features": {
        "query_table_count": 3,
        "query_column_count": 13,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 2
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "ed47e00db433",
    "question": "Provide information about subnets associated with networks 0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d and c9e8f307-e1d5-4c06-b464-ef5370ca1d6d.",
    "sql": [
      "SELECT subnets.tenant_id AS subnets_tenant_id, subnets.id AS subnets_id, subnets.name AS subnets_name, subnets.network_id AS subnets_network_id, subnets.subnetpool_id AS subnets_subnetpool_id, subnets.ip_version AS subnets_ip_version, subnets.cidr AS subnets_cidr, subnets.gateway_ip AS subnets_gateway_ip, subnets.enable_dhcp AS subnets_enable_dhcp, subnets.ipv6_ra_mode AS subnets_ipv6_ra_mode, subnets.ipv6_address_mode AS subnets_ipv6_address_mode, subnets.standard_attr_id AS subnets_standard_attr_id, anon_1.networks_id AS anon_1_networks_id, subnetpoolprefixes_1.cidr AS subnetpoolprefixes_1_cidr, subnetpoolprefixes_1.subnetpool_id AS subnetpoolprefixes_1_subnetpool_id, standardattributes_1.created_at AS standardattributes_1_created_at, standardattributes_1.updated_at AS standardattributes_1_updated_at, standardattributes_1.id AS standardattributes_1_id, standardattributes_1.resource_type AS standardattributes_1_resource_type, standardattributes_1.description AS standardattributes_1_description, tags_1.standard_attr_id AS tags_1_standard_attr_id, tags_1.tag AS tags_1_tag, subnetpools_1.tenant_id AS subnetpools_1_tenant_id, subnetpools_1.id AS subnetpools_1_id, subnetpools_1.name AS subnetpools_1_name, subnetpools_1.ip_version AS subnetpools_1_ip_version, subnetpools_1.default_prefixlen AS subnetpools_1_default_prefixlen, subnetpools_1.min_prefixlen AS subnetpools_1_min_prefixlen, subnetpools_1.max_prefixlen AS subnetpools_1_max_prefixlen, subnetpools_1.shared AS subnetpools_1_shared, subnetpools_1.is_default AS subnetpools_1_is_default, subnetpools_1.default_quota AS subnetpools_1_default_quota, subnetpools_1.hash AS subnetpools_1_hash, subnetpools_1.address_scope_id AS subnetpools_1_address_scope_id, subnetpools_1.standard_attr_id AS subnetpools_1_standard_attr_id, ipallocationpools_1.id AS ipallocationpools_1_id, ipallocationpools_1.subnet_id AS ipallocationpools_1_subnet_id, ipallocationpools_1.first_ip AS ipallocationpools_1_first_ip, ipallocationpools_1.last_ip AS ipallocationpools_1_last_ip, dnsnameservers_1.address AS dnsnameservers_1_address, dnsnameservers_1.subnet_id AS dnsnameservers_1_subnet_id, dnsnameservers_1.`order` AS dnsnameservers_1_order, subnetroutes_1.destination AS subnetroutes_1_destination, subnetroutes_1.nexthop AS subnetroutes_1_nexthop, subnetroutes_1.subnet_id AS subnetroutes_1_subnet_id, standardattributes_2.created_at AS standardattributes_2_created_at, standardattributes_2.updated_at AS standardattributes_2_updated_at, standardattributes_2.id AS standardattributes_2_id, standardattributes_2.resource_type AS standardattributes_2_resource_type, standardattributes_2.description AS standardattributes_2_description, tags_2.standard_attr_id AS tags_2_standard_attr_id, tags_2.tag AS tags_2_tag FROM (SELECT networks.id AS networks_id FROM networks LEFT OUTER JOIN externalnetworks ON networks.id = externalnetworks.network_id WHERE networks.id IN ('0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d', 'c9e8f307-e1d5-4c06-b464-ef5370ca1d6d')) AS anon_1 INNER JOIN subnets ON anon_1.networks_id = subnets.network_id LEFT OUTER JOIN subnetpools AS subnetpools_1 ON subnets.subnetpool_id = subnetpools_1.id LEFT OUTER JOIN subnetpoolprefixes AS subnetpoolprefixes_1 ON subnetpools_1.id = subnetpoolprefixes_1.subnetpool_id LEFT OUTER JOIN standardattributes AS standardattributes_1 ON standardattributes_1.id = subnetpools_1.standard_attr_id LEFT OUTER JOIN tags AS tags_1 ON standardattributes_1.id = tags_1.standard_attr_id LEFT OUTER JOIN ipallocationpools AS ipallocationpools_1 ON subnets.id = ipallocationpools_1.subnet_id LEFT OUTER JOIN dnsnameservers AS dnsnameservers_1 ON subnets.id = dnsnameservers_1.subnet_id LEFT OUTER JOIN subnetroutes AS subnetroutes_1 ON subnets.id = subnetroutes_1.subnet_id LEFT OUTER JOIN standardattributes AS standardattributes_2 ON standardattributes_2.id = subnets.standard_attr_id LEFT OUTER JOIN tags AS tags_2 ON standardattributes_2.id = tags_2.standard_attr_id ORDER BY anon_1.networks_id, dnsnameservers_1.`order`"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "NETWORKS.ID",
        "EXTERNALNETWORKS.NETWORK_ID"
      ],
      [
        "SUBNETPOOLS.ID",
        "SUBNETS.SUBNETPOOL_ID"
      ],
      [
        "SUBNETPOOLS.ID",
        "SUBNETPOOLPREFIXES.SUBNETPOOL_ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "SUBNETPOOLS.STANDARD_ATTR_ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "TAGS.STANDARD_ATTR_ID"
      ],
      [
        "IPALLOCATIONPOOLS.SUBNET_ID",
        "SUBNETS.ID"
      ],
      [
        "DNSNAMESERVERS.SUBNET_ID",
        "SUBNETS.ID"
      ],
      [
        "SUBNETROUTES.SUBNET_ID",
        "SUBNETS.ID"
      ],
      [
        "SUBNETS.STANDARD_ATTR_ID",
        "STANDARDATTRIBUTES.ID"
      ],
      [
        "TAGS.STANDARD_ATTR_ID",
        "STANDARDATTRIBUTES.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#IPALLOCATIONPOOLS",
      "csail_stata_neutron#sep#SUBNETPOOLS",
      "csail_stata_neutron#sep#SUBNETPOOLPREFIXES",
      "csail_stata_neutron#sep#SUBNETS",
      "csail_stata_neutron#sep#DNSNAMESERVERS",
      "csail_stata_neutron#sep#NETWORKS",
      "csail_stata_neutron#sep#STANDARDATTRIBUTES",
      "csail_stata_neutron#sep#EXTERNALNETWORKS",
      "csail_stata_neutron#sep#SUBNETROUTES",
      "csail_stata_neutron#sep#TAGS"
    ],
    "meta": {
      "features": {
        "query_table_count": 12,
        "query_column_count": 78,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 2,
        "query_window_func_count": 0,
        "query_join_count": 11
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "466e4269f87c",
    "question": "Provide information about subnet access control for subnet 76123b94-2ae9-40c4-a4c6-03ee98d081d9.",
    "sql": [
      "SELECT networkrbacs.tenant_id AS networkrbacs_tenant_id, networkrbacs.id AS networkrbacs_id, networkrbacs.target_tenant AS networkrbacs_target_tenant, networkrbacs.action AS networkrbacs_action, networkrbacs.object_id AS networkrbacs_object_id, anon_1.subnets_network_id AS anon_1_subnets_network_id FROM (SELECT DISTINCT subnets.network_id AS subnets_network_id FROM subnets WHERE subnets.id IN ('76123b94-2ae9-40c4-a4c6-03ee98d081d9', '76123b94-2ae9-40c4-a4c6-03ee98d081d9', '76123b94-2ae9-40c4-a4c6-03ee98d081d9')) AS anon_1 INNER JOIN networkrbacs ON anon_1.subnets_network_id = networkrbacs.object_id ORDER BY anon_1.subnets_network_id"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [],
    "gold_tables": [
      "csail_stata_neutron#sep#NETWORKRBACS",
      "csail_stata_neutron#sep#SUBNETS"
    ],
    "meta": {
      "features": {
        "query_table_count": 2,
        "query_column_count": 11,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 1
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "af66d9ff5d6c",
    "question": "Provide password information about the local user with name prime_helix.306sonic.",
    "sql": [
      "SELECT password.id AS password_id, password.local_user_id AS password_local_user_id, password.password AS password_password, local_user_1.id AS local_user_1_id FROM (SELECT user.id AS user_id FROM user INNER JOIN local_user ON user.id = local_user.user_id WHERE local_user.name = 'prime_helix.306sonic' AND local_user.domain_id = 'default') AS anon_1 INNER JOIN local_user AS local_user_1 ON anon_1.user_id = local_user_1.user_id INNER JOIN password ON local_user_1.id = password.local_user_id ORDER BY local_user_1.id"
    ],
    "db_id": "keystone",
    "join_keys": [
      [
        "USER.ID",
        "LOCAL_USER.USER_ID"
      ],
      [
        "LOCAL_USER.ID",
        "PASSWORD.LOCAL_USER_ID"
      ]
    ],
    "gold_tables": [
      "keystone#sep#USER",
      "keystone#sep#PASSWORD",
      "keystone#sep#LOCAL_USER"
    ],
    "meta": {
      "features": {
        "query_table_count": 4,
        "query_column_count": 14,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 3
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "f17f0fd4238d",
    "question": "Provide information about subnets associated with network 0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d.",
    "sql": [
      "SELECT subnets.tenant_id AS subnets_tenant_id, subnets.id AS subnets_id, subnets.name AS subnets_name, subnets.network_id AS subnets_network_id, subnets.subnetpool_id AS subnets_subnetpool_id, subnets.ip_version AS subnets_ip_version, subnets.cidr AS subnets_cidr, subnets.gateway_ip AS subnets_gateway_ip, subnets.enable_dhcp AS subnets_enable_dhcp, subnets.ipv6_ra_mode AS subnets_ipv6_ra_mode, subnets.ipv6_address_mode AS subnets_ipv6_address_mode, subnets.standard_attr_id AS subnets_standard_attr_id, anon_1.networks_id AS anon_1_networks_id, subnetpoolprefixes_1.cidr AS subnetpoolprefixes_1_cidr, subnetpoolprefixes_1.subnetpool_id AS subnetpoolprefixes_1_subnetpool_id, standardattributes_1.created_at AS standardattributes_1_created_at, standardattributes_1.updated_at AS standardattributes_1_updated_at, standardattributes_1.id AS standardattributes_1_id, standardattributes_1.resource_type AS standardattributes_1_resource_type, standardattributes_1.description AS standardattributes_1_description, tags_1.standard_attr_id AS tags_1_standard_attr_id, tags_1.tag AS tags_1_tag, subnetpools_1.tenant_id AS subnetpools_1_tenant_id, subnetpools_1.id AS subnetpools_1_id, subnetpools_1.name AS subnetpools_1_name, subnetpools_1.ip_version AS subnetpools_1_ip_version, subnetpools_1.default_prefixlen AS subnetpools_1_default_prefixlen, subnetpools_1.min_prefixlen AS subnetpools_1_min_prefixlen, subnetpools_1.max_prefixlen AS subnetpools_1_max_prefixlen, subnetpools_1.shared AS subnetpools_1_shared, subnetpools_1.is_default AS subnetpools_1_is_default, subnetpools_1.default_quota AS subnetpools_1_default_quota, subnetpools_1.hash AS subnetpools_1_hash, subnetpools_1.address_scope_id AS subnetpools_1_address_scope_id, subnetpools_1.standard_attr_id AS subnetpools_1_standard_attr_id, ipallocationpools_1.id AS ipallocationpools_1_id, ipallocationpools_1.subnet_id AS ipallocationpools_1_subnet_id, ipallocationpools_1.first_ip AS ipallocationpools_1_first_ip, ipallocationpools_1.last_ip AS ipallocationpools_1_last_ip, dnsnameservers_1.address AS dnsnameservers_1_address, dnsnameservers_1.subnet_id AS dnsnameservers_1_subnet_id, dnsnameservers_1.`order` AS dnsnameservers_1_order, subnetroutes_1.destination AS subnetroutes_1_destination, subnetroutes_1.nexthop AS subnetroutes_1_nexthop, subnetroutes_1.subnet_id AS subnetroutes_1_subnet_id, standardattributes_2.created_at AS standardattributes_2_created_at, standardattributes_2.updated_at AS standardattributes_2_updated_at, standardattributes_2.id AS standardattributes_2_id, standardattributes_2.resource_type AS standardattributes_2_resource_type, standardattributes_2.description AS standardattributes_2_description, tags_2.standard_attr_id AS tags_2_standard_attr_id, tags_2.tag AS tags_2_tag FROM (SELECT networks.id AS networks_id FROM networks LEFT OUTER JOIN externalnetworks ON networks.id = externalnetworks.network_id WHERE networks.id IN ('0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d', '0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d', '0a1d0a27-cffa-4de3-92c5-9d3fd3f2e74d')) AS anon_1 INNER JOIN subnets ON anon_1.networks_id = subnets.network_id LEFT OUTER JOIN subnetpools AS subnetpools_1 ON subnets.subnetpool_id = subnetpools_1.id LEFT OUTER JOIN subnetpoolprefixes AS subnetpoolprefixes_1 ON subnetpools_1.id = subnetpoolprefixes_1.subnetpool_id LEFT OUTER JOIN standardattributes AS standardattributes_1 ON standardattributes_1.id = subnetpools_1.standard_attr_id LEFT OUTER JOIN tags AS tags_1 ON standardattributes_1.id = tags_1.standard_attr_id LEFT OUTER JOIN ipallocationpools AS ipallocationpools_1 ON subnets.id = ipallocationpools_1.subnet_id LEFT OUTER JOIN dnsnameservers AS dnsnameservers_1 ON subnets.id = dnsnameservers_1.subnet_id LEFT OUTER JOIN subnetroutes AS subnetroutes_1 ON subnets.id = subnetroutes_1.subnet_id LEFT OUTER JOIN standardattributes AS standardattributes_2 ON standardattributes_2.id = subnets.standard_attr_id LEFT OUTER JOIN tags AS tags_2 ON standardattributes_2.id = tags_2.standard_attr_id ORDER BY anon_1.networks_id, dnsnameservers_1.`order`"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "EXTERNALNETWORKS.NETWORK_ID",
        "NETWORKS.ID"
      ],
      [
        "SUBNETS.SUBNETPOOL_ID",
        "SUBNETPOOLS.ID"
      ],
      [
        "SUBNETPOOLS.ID",
        "SUBNETPOOLPREFIXES.SUBNETPOOL_ID"
      ],
      [
        "SUBNETPOOLS.STANDARD_ATTR_ID",
        "STANDARDATTRIBUTES.ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "TAGS.STANDARD_ATTR_ID"
      ],
      [
        "IPALLOCATIONPOOLS.SUBNET_ID",
        "SUBNETS.ID"
      ],
      [
        "SUBNETS.ID",
        "DNSNAMESERVERS.SUBNET_ID"
      ],
      [
        "SUBNETS.ID",
        "SUBNETROUTES.SUBNET_ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "SUBNETS.STANDARD_ATTR_ID"
      ],
      [
        "TAGS.STANDARD_ATTR_ID",
        "STANDARDATTRIBUTES.ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#IPALLOCATIONPOOLS",
      "csail_stata_neutron#sep#SUBNETPOOLS",
      "csail_stata_neutron#sep#SUBNETPOOLPREFIXES",
      "csail_stata_neutron#sep#SUBNETS",
      "csail_stata_neutron#sep#DNSNAMESERVERS",
      "csail_stata_neutron#sep#NETWORKS",
      "csail_stata_neutron#sep#STANDARDATTRIBUTES",
      "csail_stata_neutron#sep#EXTERNALNETWORKS",
      "csail_stata_neutron#sep#SUBNETROUTES",
      "csail_stata_neutron#sep#TAGS"
    ],
    "meta": {
      "features": {
        "query_table_count": 12,
        "query_column_count": 78,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 2,
        "query_window_func_count": 0,
        "query_join_count": 11
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  },
  {
    "id": "dcafa09cfd41",
    "question": "Provide information about network that include subnet 76123b94-2ae9-40c4-a4c6-03ee98d081d9.",
    "sql": [
      "SELECT networks.tenant_id AS networks_tenant_id, networks.id AS networks_id, networks.name AS networks_name, networks.status AS networks_status, networks.admin_state_up AS networks_admin_state_up, networks.mtu AS networks_mtu, networks.vlan_transparent AS networks_vlan_transparent, networks.availability_zone_hints AS networks_availability_zone_hints, networks.standard_attr_id AS networks_standard_attr_id, anon_1.subnets_network_id AS anon_1_subnets_network_id, agents_1.id AS agents_1_id, agents_1.agent_type AS agents_1_agent_type, agents_1.`binary` AS agents_1_binary, agents_1.topic AS agents_1_topic, agents_1.host AS agents_1_host, agents_1.availability_zone AS agents_1_availability_zone, agents_1.admin_state_up AS agents_1_admin_state_up, agents_1.created_at AS agents_1_created_at, agents_1.started_at AS agents_1_started_at, agents_1.heartbeat_timestamp AS agents_1_heartbeat_timestamp, agents_1.description AS agents_1_description, agents_1.configurations AS agents_1_configurations, agents_1.resource_versions AS agents_1_resource_versions, agents_1.`load` AS agents_1_load, standardattributes_1.created_at AS standardattributes_1_created_at, standardattributes_1.updated_at AS standardattributes_1_updated_at, standardattributes_1.id AS standardattributes_1_id, standardattributes_1.resource_type AS standardattributes_1_resource_type, standardattributes_1.description AS standardattributes_1_description, tags_1.standard_attr_id AS tags_1_standard_attr_id, tags_1.tag AS tags_1_tag, externalnetworks_1.network_id AS externalnetworks_1_network_id, externalnetworks_1.is_default AS externalnetworks_1_is_default, qos_network_policy_bindings_1.policy_id AS qos_network_policy_bindings_1_policy_id, qos_network_policy_bindings_1.network_id AS qos_network_policy_bindings_1_network_id, networksecuritybindings_1.network_id AS networksecuritybindings_1_network_id, networksecuritybindings_1.port_security_enabled AS networksecuritybindings_1_port_security_enabled, networkdnsdomains_1.network_id AS networkdnsdomains_1_network_id, networkdnsdomains_1.dns_domain AS networkdnsdomains_1_dns_domain FROM (SELECT DISTINCT subnets.network_id AS subnets_network_id FROM subnets WHERE subnets.id IN ('76123b94-2ae9-40c4-a4c6-03ee98d081d9', '76123b94-2ae9-40c4-a4c6-03ee98d081d9', '76123b94-2ae9-40c4-a4c6-03ee98d081d9')) AS anon_1 INNER JOIN networks ON networks.id = anon_1.subnets_network_id LEFT OUTER JOIN (networkdhcpagentbindings AS networkdhcpagentbindings_1 INNER JOIN agents AS agents_1 ON agents_1.id = networkdhcpagentbindings_1.dhcp_agent_id) ON networks.id = networkdhcpagentbindings_1.network_id LEFT OUTER JOIN standardattributes AS standardattributes_1 ON standardattributes_1.id = networks.standard_attr_id LEFT OUTER JOIN tags AS tags_1 ON standardattributes_1.id = tags_1.standard_attr_id LEFT OUTER JOIN externalnetworks AS externalnetworks_1 ON networks.id = externalnetworks_1.network_id LEFT OUTER JOIN qos_network_policy_bindings AS qos_network_policy_bindings_1 ON networks.id = qos_network_policy_bindings_1.network_id LEFT OUTER JOIN networksecuritybindings AS networksecuritybindings_1 ON networks.id = networksecuritybindings_1.network_id LEFT OUTER JOIN networkdnsdomains AS networkdnsdomains_1 ON networks.id = networkdnsdomains_1.network_id ORDER BY anon_1.subnets_network_id"
    ],
    "db_id": "csail_stata_neutron",
    "join_keys": [
      [
        "NETWORKS.STANDARD_ATTR_ID",
        "STANDARDATTRIBUTES.ID"
      ],
      [
        "STANDARDATTRIBUTES.ID",
        "TAGS.STANDARD_ATTR_ID"
      ],
      [
        "EXTERNALNETWORKS.NETWORK_ID",
        "NETWORKS.ID"
      ],
      [
        "QOS_NETWORK_POLICY_BINDINGS.NETWORK_ID",
        "NETWORKS.ID"
      ],
      [
        "NETWORKS.ID",
        "NETWORKSECURITYBINDINGS.NETWORK_ID"
      ],
      [
        "NETWORKS.ID",
        "NETWORKDNSDOMAINS.NETWORK_ID"
      ]
    ],
    "gold_tables": [
      "csail_stata_neutron#sep#NETWORKDHCPAGENTBINDINGS",
      "csail_stata_neutron#sep#SUBNETS",
      "csail_stata_neutron#sep#AGENTS",
      "csail_stata_neutron#sep#NETWORKS",
      "csail_stata_neutron#sep#STANDARDATTRIBUTES",
      "csail_stata_neutron#sep#EXTERNALNETWORKS",
      "csail_stata_neutron#sep#QOS_NETWORK_POLICY_BINDINGS",
      "csail_stata_neutron#sep#NETWORKDNSDOMAINS",
      "csail_stata_neutron#sep#TAGS",
      "csail_stata_neutron#sep#NETWORKSECURITYBINDINGS"
    ],
    "meta": {
      "features": {
        "query_table_count": 10,
        "query_column_count": 60,
        "query_nested_count": 1,
        "query_aggregate_count": 0,
        "query_sort_count": 1,
        "query_window_func_count": 0,
        "query_join_count": 9
      },
      "categories": [
        "has_join",
        "has_nested_query",
        "has_sorting"
      ]
    }
  }
]